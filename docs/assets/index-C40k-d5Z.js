(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yd(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const He={},vi=[],Ln=()=>{},Q_=()=>!1,wl=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),vd=n=>n.startsWith("onUpdate:"),ht=Object.assign,Id=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},kw=Object.prototype.hasOwnProperty,Me=(n,e)=>kw.call(n,e),me=Array.isArray,Ii=n=>Tl(n)==="[object Map]",Y_=n=>Tl(n)==="[object Set]",ve=n=>typeof n=="function",rt=n=>typeof n=="string",dr=n=>typeof n=="symbol",Ke=n=>n!==null&&typeof n=="object",X_=n=>(Ke(n)||ve(n))&&ve(n.then)&&ve(n.catch),J_=Object.prototype.toString,Tl=n=>J_.call(n),Vw=n=>Tl(n).slice(8,-1),$_=n=>Tl(n)==="[object Object]",Ad=n=>rt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Uo=yd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bl=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},Dw=/-\w/g,pn=bl(n=>n.replace(Dw,e=>e.slice(1).toUpperCase())),xw=/\B([A-Z])/g,Zr=bl(n=>n.replace(xw,"-$1").toLowerCase()),Rl=bl(n=>n.charAt(0).toUpperCase()+n.slice(1)),xu=bl(n=>n?`on${Rl(n)}`:""),Lr=(n,e)=>!Object.is(n,e),mc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Z_=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},mh=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Nw=n=>{const e=rt(n)?Number(n):NaN;return isNaN(e)?n:e};let Lp;const Sl=()=>Lp||(Lp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ed(n){if(me(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=rt(r)?Fw(r):Ed(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(rt(n)||Ke(n))return n}const Ow=/;(?![^(]*\))/g,Mw=/:([^]+)/,Lw=/\/\*[^]*?\*\//g;function Fw(n){const e={};return n.replace(Lw,"").split(Ow).forEach(t=>{if(t){const r=t.split(Mw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ht(n){let e="";if(rt(n))e=n;else if(me(n))for(let t=0;t<n.length;t++){const r=Ht(n[t]);r&&(e+=r+" ")}else if(Ke(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Uw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bw=yd(Uw);function ey(n){return!!n||n===""}const ty=n=>!!(n&&n.__v_isRef===!0),$e=n=>rt(n)?n:n==null?"":me(n)||Ke(n)&&(n.toString===J_||!ve(n.toString))?ty(n)?$e(n.value):JSON.stringify(n,ny,2):String(n),ny=(n,e)=>ty(e)?ny(n,e.value):Ii(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[Nu(r,i)+" =>"]=s,t),{})}:Y_(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Nu(t))}:dr(e)?Nu(e):Ke(e)&&!me(e)&&!$_(e)?String(e):e,Nu=(n,e="")=>{var t;return dr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class jw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=zt;try{return zt=this,e()}finally{zt=t}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Gw(){return zt}let qe;const Ou=new WeakSet;class ry{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ou.has(this)&&(Ou.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||iy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fp(this),oy(this);const e=qe,t=In;qe=this,In=!0;try{return this.fn()}finally{ay(this),qe=e,In=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bd(e);this.deps=this.depsTail=void 0,Fp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ou.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gh(this)&&this.run()}get dirty(){return gh(this)}}let sy=0,Bo,jo;function iy(n,e=!1){if(n.flags|=8,e){n.next=jo,jo=n;return}n.next=Bo,Bo=n}function wd(){sy++}function Td(){if(--sy>0)return;if(jo){let e=jo;for(jo=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Bo;){let e=Bo;for(Bo=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function oy(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ay(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),bd(r),Hw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function gh(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(cy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function cy(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===sa)||(n.globalVersion=sa,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!gh(n))))return;n.flags|=2;const e=n.dep,t=qe,r=In;qe=n,In=!0;try{oy(n);const s=n.fn(n._value);(e.version===0||Lr(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{qe=t,In=r,ay(n),n.flags&=-3}}function bd(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)bd(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Hw(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let In=!0;const ly=[];function or(){ly.push(In),In=!1}function ar(){const n=ly.pop();In=n===void 0?!0:n}function Fp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=qe;qe=void 0;try{e()}finally{qe=t}}}let sa=0;class qw{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!qe||!In||qe===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==qe)t=this.activeLink=new qw(qe,this),qe.deps?(t.prevDep=qe.depsTail,qe.depsTail.nextDep=t,qe.depsTail=t):qe.deps=qe.depsTail=t,uy(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=qe.depsTail,t.nextDep=void 0,qe.depsTail.nextDep=t,qe.depsTail=t,qe.deps===t&&(qe.deps=r)}return t}trigger(e){this.version++,sa++,this.notify(e)}notify(e){wd();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Td()}}}function uy(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)uy(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const _h=new WeakMap,Ss=Symbol(""),yh=Symbol(""),ia=Symbol("");function Vt(n,e,t){if(In&&qe){let r=_h.get(n);r||_h.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new Rd),s.map=r,s.key=t),s.track()}}function Zn(n,e,t,r,s,i){const o=_h.get(n);if(!o){sa++;return}const a=l=>{l&&l.trigger()};if(wd(),e==="clear")o.forEach(a);else{const l=me(n),u=l&&Ad(t);if(l&&t==="length"){const h=Number(r);o.forEach((f,m)=>{(m==="length"||m===ia||!dr(m)&&m>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(ia)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ss)),Ii(n)&&a(o.get(yh)));break;case"delete":l||(a(o.get(Ss)),Ii(n)&&a(o.get(yh)));break;case"set":Ii(n)&&a(o.get(Ss));break}}Td()}function ti(n){const e=Ve(n);return e===n?e:(Vt(e,"iterate",ia),fn(n)?e:e.map(Et))}function Cl(n){return Vt(n=Ve(n),"iterate",ia),n}const Kw={__proto__:null,[Symbol.iterator](){return Mu(this,Symbol.iterator,Et)},concat(...n){return ti(this).concat(...n.map(e=>me(e)?ti(e):e))},entries(){return Mu(this,"entries",n=>(n[1]=Et(n[1]),n))},every(n,e){return Yn(this,"every",n,e,void 0,arguments)},filter(n,e){return Yn(this,"filter",n,e,t=>t.map(Et),arguments)},find(n,e){return Yn(this,"find",n,e,Et,arguments)},findIndex(n,e){return Yn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Yn(this,"findLast",n,e,Et,arguments)},findLastIndex(n,e){return Yn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Yn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Lu(this,"includes",n)},indexOf(...n){return Lu(this,"indexOf",n)},join(n){return ti(this).join(n)},lastIndexOf(...n){return Lu(this,"lastIndexOf",n)},map(n,e){return Yn(this,"map",n,e,void 0,arguments)},pop(){return wo(this,"pop")},push(...n){return wo(this,"push",n)},reduce(n,...e){return Up(this,"reduce",n,e)},reduceRight(n,...e){return Up(this,"reduceRight",n,e)},shift(){return wo(this,"shift")},some(n,e){return Yn(this,"some",n,e,void 0,arguments)},splice(...n){return wo(this,"splice",n)},toReversed(){return ti(this).toReversed()},toSorted(n){return ti(this).toSorted(n)},toSpliced(...n){return ti(this).toSpliced(...n)},unshift(...n){return wo(this,"unshift",n)},values(){return Mu(this,"values",Et)}};function Mu(n,e,t){const r=Cl(n),s=r[e]();return r!==n&&!fn(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=t(i.value)),i}),s}const zw=Array.prototype;function Yn(n,e,t,r,s,i){const o=Cl(n),a=o!==n&&!fn(n),l=o[e];if(l!==zw[e]){const f=l.apply(n,i);return a?Et(f):f}let u=t;o!==n&&(a?u=function(f,m){return t.call(this,Et(f),m,n)}:t.length>2&&(u=function(f,m){return t.call(this,f,m,n)}));const h=l.call(o,u,r);return a&&s?s(h):h}function Up(n,e,t,r){const s=Cl(n);let i=t;return s!==n&&(fn(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,Et(a),l,n)}),s[e](i,...r)}function Lu(n,e,t){const r=Ve(n);Vt(r,"iterate",ia);const s=r[e](...t);return(s===-1||s===!1)&&Pd(t[0])?(t[0]=Ve(t[0]),r[e](...t)):s}function wo(n,e,t=[]){or(),wd();const r=Ve(n)[e].apply(n,t);return Td(),ar(),r}const Ww=yd("__proto__,__v_isRef,__isVue"),hy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(dr));function Qw(n){dr(n)||(n=String(n));const e=Ve(this);return Vt(e,"has",n),e.hasOwnProperty(n)}class dy{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?sT:gy:i?my:py).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=me(e);if(!s){let l;if(o&&(l=Kw[t]))return l;if(t==="hasOwnProperty")return Qw}const a=Reflect.get(e,t,Mt(e)?e:r);if((dr(t)?hy.has(t):Ww(t))||(s||Vt(e,"get",t),i))return a;if(Mt(a)){const l=o&&Ad(t)?a:a.value;return s&&Ke(l)?Ih(l):l}return Ke(a)?s?Ih(a):Pl(a):a}}class fy extends dy{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const l=Kr(i);if(!fn(r)&&!Kr(r)&&(i=Ve(i),r=Ve(r)),!me(e)&&Mt(i)&&!Mt(r))return l||(i.value=r),!0}const o=me(e)&&Ad(t)?Number(t)<e.length:Me(e,t),a=Reflect.set(e,t,r,Mt(e)?e:s);return e===Ve(s)&&(o?Lr(r,i)&&Zn(e,"set",t,r):Zn(e,"add",t,r)),a}deleteProperty(e,t){const r=Me(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&Zn(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!dr(t)||!hy.has(t))&&Vt(e,"has",t),r}ownKeys(e){return Vt(e,"iterate",me(e)?"length":Ss),Reflect.ownKeys(e)}}class Yw extends dy{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Xw=new fy,Jw=new Yw,$w=new fy(!0);const vh=n=>n,tc=n=>Reflect.getPrototypeOf(n);function Zw(n,e,t){return function(...r){const s=this.__v_raw,i=Ve(s),o=Ii(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=s[n](...r),h=t?vh:e?Lc:Et;return!e&&Vt(i,"iterate",l?yh:Ss),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function nc(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function eT(n,e){const t={get(s){const i=this.__v_raw,o=Ve(i),a=Ve(s);n||(Lr(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:l}=tc(o),u=e?vh:n?Lc:Et;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&Vt(Ve(s),"iterate",Ss),s.size},has(s){const i=this.__v_raw,o=Ve(i),a=Ve(s);return n||(Lr(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Ve(a),u=e?vh:n?Lc:Et;return!n&&Vt(l,"iterate",Ss),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return ht(t,n?{add:nc("add"),set:nc("set"),delete:nc("delete"),clear:nc("clear")}:{add(s){!e&&!fn(s)&&!Kr(s)&&(s=Ve(s));const i=Ve(this);return tc(i).has.call(i,s)||(i.add(s),Zn(i,"add",s,s)),this},set(s,i){!e&&!fn(i)&&!Kr(i)&&(i=Ve(i));const o=Ve(this),{has:a,get:l}=tc(o);let u=a.call(o,s);u||(s=Ve(s),u=a.call(o,s));const h=l.call(o,s);return o.set(s,i),u?Lr(i,h)&&Zn(o,"set",s,i):Zn(o,"add",s,i),this},delete(s){const i=Ve(this),{has:o,get:a}=tc(i);let l=o.call(i,s);l||(s=Ve(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Zn(i,"delete",s,void 0),u},clear(){const s=Ve(this),i=s.size!==0,o=s.clear();return i&&Zn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Zw(s,n,e)}),t}function Sd(n,e){const t=eT(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(Me(t,s)&&s in r?t:r,s,i)}const tT={get:Sd(!1,!1)},nT={get:Sd(!1,!0)},rT={get:Sd(!0,!1)};const py=new WeakMap,my=new WeakMap,gy=new WeakMap,sT=new WeakMap;function iT(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oT(n){return n.__v_skip||!Object.isExtensible(n)?0:iT(Vw(n))}function Pl(n){return Kr(n)?n:Cd(n,!1,Xw,tT,py)}function _y(n){return Cd(n,!1,$w,nT,my)}function Ih(n){return Cd(n,!0,Jw,rT,gy)}function Cd(n,e,t,r,s){if(!Ke(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=oT(n);if(i===0)return n;const o=s.get(n);if(o)return o;const a=new Proxy(n,i===2?r:t);return s.set(n,a),a}function Ai(n){return Kr(n)?Ai(n.__v_raw):!!(n&&n.__v_isReactive)}function Kr(n){return!!(n&&n.__v_isReadonly)}function fn(n){return!!(n&&n.__v_isShallow)}function Pd(n){return n?!!n.__v_raw:!1}function Ve(n){const e=n&&n.__v_raw;return e?Ve(e):n}function aT(n){return!Me(n,"__v_skip")&&Object.isExtensible(n)&&Z_(n,"__v_skip",!0),n}const Et=n=>Ke(n)?Pl(n):n,Lc=n=>Ke(n)?Ih(n):n;function Mt(n){return n?n.__v_isRef===!0:!1}function _e(n){return yy(n,!1)}function cT(n){return yy(n,!0)}function yy(n,e){return Mt(n)?n:new lT(n,e)}class lT{constructor(e,t){this.dep=new Rd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ve(e),this._value=t?e:Et(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||fn(e)||Kr(e);e=r?e:Ve(e),Lr(e,t)&&(this._rawValue=e,this._value=r?e:Et(e),this.dep.trigger())}}function Ae(n){return Mt(n)?n.value:n}const uT={get:(n,e,t)=>e==="__v_raw"?n:Ae(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return Mt(s)&&!Mt(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function vy(n){return Ai(n)?n:new Proxy(n,uT)}class hT{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Rd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return iy(this,!0),!0}get value(){const e=this.dep.track();return cy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function dT(n,e,t=!1){let r,s;return ve(n)?r=n:(r=n.get,s=n.set),new hT(r,s,t)}const rc={},Fc=new WeakMap;let fs;function fT(n,e=!1,t=fs){if(t){let r=Fc.get(t);r||Fc.set(t,r=[]),r.push(n)}}function pT(n,e,t=He){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=t,u=G=>s?G:fn(G)||s===!1||s===0?er(G,1):er(G);let h,f,m,g,b=!1,P=!1;if(Mt(n)?(f=()=>n.value,b=fn(n)):Ai(n)?(f=()=>u(n),b=!0):me(n)?(P=!0,b=n.some(G=>Ai(G)||fn(G)),f=()=>n.map(G=>{if(Mt(G))return G.value;if(Ai(G))return u(G);if(ve(G))return l?l(G,2):G()})):ve(n)?e?f=l?()=>l(n,2):n:f=()=>{if(m){or();try{m()}finally{ar()}}const G=fs;fs=h;try{return l?l(n,3,[g]):n(g)}finally{fs=G}}:f=Ln,e&&s){const G=f,$=s===!0?1/0:s;f=()=>er(G(),$)}const k=Gw(),U=()=>{h.stop(),k&&k.active&&Id(k.effects,h)};if(i&&e){const G=e;e=(...$)=>{G(...$),U()}}let L=P?new Array(n.length).fill(rc):rc;const F=G=>{if(!(!(h.flags&1)||!h.dirty&&!G))if(e){const $=h.run();if(s||b||(P?$.some((ne,R)=>Lr(ne,L[R])):Lr($,L))){m&&m();const ne=fs;fs=h;try{const R=[$,L===rc?void 0:P&&L[0]===rc?[]:L,g];L=$,l?l(e,3,R):e(...R)}finally{fs=ne}}}else h.run()};return a&&a(F),h=new ry(f),h.scheduler=o?()=>o(F,!1):F,g=G=>fT(G,!1,h),m=h.onStop=()=>{const G=Fc.get(h);if(G){if(l)l(G,4);else for(const $ of G)$();Fc.delete(h)}},e?r?F(!0):L=h.run():o?o(F.bind(null,!0),!0):h.run(),U.pause=h.pause.bind(h),U.resume=h.resume.bind(h),U.stop=U,U}function er(n,e=1/0,t){if(e<=0||!Ke(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Mt(n))er(n.value,e,t);else if(me(n))for(let r=0;r<n.length;r++)er(n[r],e,t);else if(Y_(n)||Ii(n))n.forEach(r=>{er(r,e,t)});else if($_(n)){for(const r in n)er(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&er(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pa(n,e,t,r){try{return r?n(...r):n()}catch(s){kl(s,e,t)}}function bn(n,e,t,r){if(ve(n)){const s=Pa(n,e,t,r);return s&&X_(s)&&s.catch(i=>{kl(i,e,t)}),s}if(me(n)){const s=[];for(let i=0;i<n.length;i++)s.push(bn(n[i],e,t,r));return s}}function kl(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||He;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](n,l,u)===!1)return}a=a.parent}if(i){or(),Pa(i,null,10,[n,l,u]),ar();return}}mT(n,t,s,r,o)}function mT(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const Gt=[];let Vn=-1;const Ei=[];let Pr=null,ui=0;const Iy=Promise.resolve();let Uc=null;function Ay(n){const e=Uc||Iy;return n?e.then(this?n.bind(this):n):e}function gT(n){let e=Vn+1,t=Gt.length;for(;e<t;){const r=e+t>>>1,s=Gt[r],i=oa(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function kd(n){if(!(n.flags&1)){const e=oa(n),t=Gt[Gt.length-1];!t||!(n.flags&2)&&e>=oa(t)?Gt.push(n):Gt.splice(gT(e),0,n),n.flags|=1,Ey()}}function Ey(){Uc||(Uc=Iy.then(Ty))}function _T(n){me(n)?Ei.push(...n):Pr&&n.id===-1?Pr.splice(ui+1,0,n):n.flags&1||(Ei.push(n),n.flags|=1),Ey()}function Bp(n,e,t=Vn+1){for(;t<Gt.length;t++){const r=Gt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Gt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function wy(n){if(Ei.length){const e=[...new Set(Ei)].sort((t,r)=>oa(t)-oa(r));if(Ei.length=0,Pr){Pr.push(...e);return}for(Pr=e,ui=0;ui<Pr.length;ui++){const t=Pr[ui];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Pr=null,ui=0}}const oa=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Ty(n){try{for(Vn=0;Vn<Gt.length;Vn++){const e=Gt[Vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Pa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Vn<Gt.length;Vn++){const e=Gt[Vn];e&&(e.flags&=-2)}Vn=-1,Gt.length=0,wy(),Uc=null,(Gt.length||Ei.length)&&Ty()}}let Tt=null,by=null;function Bc(n){const e=Tt;return Tt=n,by=n&&n.type.__scopeId||null,e}function Fn(n,e=Tt,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&Hc(-1);const i=Bc(e);let o;try{o=n(...s)}finally{Bc(i),r._d&&Hc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function en(n,e){if(Tt===null)return n;const t=Ml(Tt),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=He]=e[s];i&&(ve(i)&&(i={mounted:i,updated:i}),i.deep&&er(o),r.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function ls(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(or(),bn(l,t,8,[n.el,a,n,e]),ar())}}const yT=Symbol("_vte"),Ry=n=>n.__isTeleport,$n=Symbol("_leaveCb"),sc=Symbol("_enterCb");function Sy(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return on(()=>{n.isMounted=!0}),ca(()=>{n.isUnmounting=!0}),n}const un=[Function,Array],Cy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:un,onEnter:un,onAfterEnter:un,onEnterCancelled:un,onBeforeLeave:un,onLeave:un,onAfterLeave:un,onLeaveCancelled:un,onBeforeAppear:un,onAppear:un,onAfterAppear:un,onAppearCancelled:un},Py=n=>{const e=n.subTree;return e.component?Py(e.component):e},vT={name:"BaseTransition",props:Cy,setup(n,{slots:e}){const t=Od(),r=Sy();return()=>{const s=e.default&&Vd(e.default(),!0);if(!s||!s.length)return;const i=ky(s),o=Ve(n),{mode:a}=o;if(r.isLeaving)return Fu(i);const l=jp(i);if(!l)return Fu(i);let u=aa(l,o,r,t,f=>u=f);l.type!==Dt&&xs(l,u);let h=t.subTree&&jp(t.subTree);if(h&&h.type!==Dt&&!_s(h,l)&&Py(t).type!==Dt){let f=aa(h,o,r,t);if(xs(h,f),a==="out-in"&&l.type!==Dt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},Fu(i);a==="in-out"&&l.type!==Dt?f.delayLeave=(m,g,b)=>{const P=Vy(r,h);P[String(h.key)]=h,m[$n]=()=>{g(),m[$n]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function ky(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Dt){e=t;break}}return e}const IT=vT;function Vy(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function aa(n,e,t,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:b,onLeaveCancelled:P,onBeforeAppear:k,onAppear:U,onAfterAppear:L,onAppearCancelled:F}=e,G=String(n.key),$=Vy(t,n),ne=(y,A)=>{y&&bn(y,r,9,A)},R=(y,A)=>{const T=A[1];ne(y,A),me(y)?y.every(w=>w.length<=1)&&T():y.length<=1&&T()},v={mode:o,persisted:a,beforeEnter(y){let A=l;if(!t.isMounted)if(i)A=k||l;else return;y[$n]&&y[$n](!0);const T=$[G];T&&_s(n,T)&&T.el[$n]&&T.el[$n](),ne(A,[y])},enter(y){let A=u,T=h,w=f;if(!t.isMounted)if(i)A=U||u,T=L||h,w=F||f;else return;let I=!1;const we=y[sc]=je=>{I||(I=!0,je?ne(w,[y]):ne(T,[y]),v.delayedLeave&&v.delayedLeave(),y[sc]=void 0)};A?R(A,[y,we]):we()},leave(y,A){const T=String(n.key);if(y[sc]&&y[sc](!0),t.isUnmounting)return A();ne(m,[y]);let w=!1;const I=y[$n]=we=>{w||(w=!0,A(),we?ne(P,[y]):ne(b,[y]),y[$n]=void 0,$[T]===n&&delete $[T])};$[T]=n,g?R(g,[y,I]):I()},clone(y){const A=aa(y,e,t,r,s);return s&&s(A),A}};return v}function Fu(n){if(Vl(n))return n=zr(n),n.children=null,n}function jp(n){if(!Vl(n))return Ry(n.type)&&n.children?ky(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&ve(t.default))return t.default()}}function xs(n,e){n.shapeFlag&6&&n.component?(n.transition=e,xs(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Vd(n,e=!1,t){let r=[],s=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&s++,r=r.concat(Vd(o.children,e,a))):(e||o.type!==Dt)&&r.push(a!=null?zr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Dy(n,e){return ve(n)?ht({name:n.name},e,{setup:n}):n}function xy(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const jc=new WeakMap;function Go(n,e,t,r,s=!1){if(me(n)){n.forEach((b,P)=>Go(b,e&&(me(e)?e[P]:e),t,r,s));return}if(wi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Go(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Ml(r.component):r.el,o=s?null:i,{i:a,r:l}=n,u=e&&e.r,h=a.refs===He?a.refs={}:a.refs,f=a.setupState,m=Ve(f),g=f===He?Q_:b=>Me(m,b);if(u!=null&&u!==l){if(Gp(e),rt(u))h[u]=null,g(u)&&(f[u]=null);else if(Mt(u)){u.value=null;const b=e;b.k&&(h[b.k]=null)}}if(ve(l))Pa(l,a,12,[o,h]);else{const b=rt(l),P=Mt(l);if(b||P){const k=()=>{if(n.f){const U=b?g(l)?f[l]:h[l]:l.value;if(s)me(U)&&Id(U,i);else if(me(U))U.includes(i)||U.push(i);else if(b)h[l]=[i],g(l)&&(f[l]=h[l]);else{const L=[i];l.value=L,n.k&&(h[n.k]=L)}}else b?(h[l]=o,g(l)&&(f[l]=o)):P&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const U=()=>{k(),jc.delete(n)};U.id=-1,jc.set(n,U),Zt(U,t)}else Gp(n),k()}}}function Gp(n){const e=jc.get(n);e&&(e.flags|=8,jc.delete(n))}Sl().requestIdleCallback;Sl().cancelIdleCallback;const wi=n=>!!n.type.__asyncLoader,Vl=n=>n.type.__isKeepAlive;function AT(n,e){Ny(n,"a",e)}function ET(n,e){Ny(n,"da",e)}function Ny(n,e,t=xt){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Dl(e,r,t),t){let s=t.parent;for(;s&&s.parent;)Vl(s.parent.vnode)&&wT(r,e,t,s),s=s.parent}}function wT(n,e,t,r){const s=Dl(e,n,r,!0);xl(()=>{Id(r[e],s)},t)}function Dl(n,e,t=xt,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{or();const a=ka(t),l=bn(e,t,n,o);return a(),ar(),l});return r?s.unshift(i):s.push(i),i}}const fr=n=>(e,t=xt)=>{(!ha||n==="sp")&&Dl(n,(...r)=>e(...r),t)},TT=fr("bm"),on=fr("m"),bT=fr("bu"),Oy=fr("u"),ca=fr("bum"),xl=fr("um"),RT=fr("sp"),ST=fr("rtg"),CT=fr("rtc");function PT(n,e=xt){Dl("ec",n,e)}const kT="components";function VT(n,e){return xT(kT,n,!0,e)||n}const DT=Symbol.for("v-ndc");function xT(n,e,t=!0,r=!1){const s=Tt||xt;if(s){const i=s.type;{const a=I1(i,!1);if(a&&(a===e||a===pn(e)||a===Rl(pn(e))))return i}const o=Hp(s[n]||i[n],e)||Hp(s.appContext[n],e);return!o&&r?i:o}}function Hp(n,e){return n&&(n[e]||n[pn(e)]||n[Rl(pn(e))])}function Ho(n,e,t,r){let s;const i=t,o=me(n);if(o||rt(n)){const a=o&&Ai(n);let l=!1,u=!1;a&&(l=!fn(n),u=Kr(n),n=Cl(n)),s=new Array(n.length);for(let h=0,f=n.length;h<f;h++)s[h]=e(l?u?Lc(Et(n[h])):Et(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,i)}else if(Ke(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(n[h],h,l,i)}}else s=[];return s}function qp(n,e,t={},r,s){if(Tt.ce||Tt.parent&&wi(Tt.parent)&&Tt.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),oe(),En(Ze,null,[De("slot",t,r)],u?-2:64)}let i=n[e];i&&i._c&&(i._d=!1),oe();const o=i&&My(i(t)),a=t.key||o&&o.key,l=En(Ze,{key:(a&&!dr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function My(n){return n.some(e=>ua(e)?!(e.type===Dt||e.type===Ze&&!My(e.children)):!0)?n:null}const Ah=n=>n?nv(n)?Ml(n):Ah(n.parent):null,qo=ht(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ah(n.parent),$root:n=>Ah(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Fy(n),$forceUpdate:n=>n.f||(n.f=()=>{kd(n.update)}),$nextTick:n=>n.n||(n.n=Ay.bind(n.proxy)),$watch:n=>e1.bind(n)}),Uu=(n,e)=>n!==He&&!n.__isScriptSetup&&Me(n,e),NT={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=n;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Uu(r,e))return o[e]=1,r[e];if(s!==He&&Me(s,e))return o[e]=2,s[e];if((u=n.propsOptions[0])&&Me(u,e))return o[e]=3,i[e];if(t!==He&&Me(t,e))return o[e]=4,t[e];Eh&&(o[e]=0)}}const h=qo[e];let f,m;if(h)return e==="$attrs"&&Vt(n.attrs,"get",""),h(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==He&&Me(t,e))return o[e]=4,t[e];if(m=l.config.globalProperties,Me(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Uu(s,e)?(s[e]=t,!0):r!==He&&Me(r,e)?(r[e]=t,!0):Me(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,u;return!!(t[a]||n!==He&&a[0]!=="$"&&Me(n,a)||Uu(e,a)||(l=i[0])&&Me(l,a)||Me(r,a)||Me(qo,a)||Me(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Me(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Kp(n){return me(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Eh=!0;function OT(n){const e=Fy(n),t=n.proxy,r=n.ctx;Eh=!1,e.beforeCreate&&zp(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:b,activated:P,deactivated:k,beforeDestroy:U,beforeUnmount:L,destroyed:F,unmounted:G,render:$,renderTracked:ne,renderTriggered:R,errorCaptured:v,serverPrefetch:y,expose:A,inheritAttrs:T,components:w,directives:I,filters:we}=e;if(u&&MT(u,r,null),o)for(const ke in o){const Te=o[ke];ve(Te)&&(r[ke]=Te.bind(t))}if(s){const ke=s.call(t,t);Ke(ke)&&(n.data=Pl(ke))}if(Eh=!0,i)for(const ke in i){const Te=i[ke],vt=ve(Te)?Te.bind(t,t):ve(Te.get)?Te.get.bind(t,t):Ln,cn=!ve(Te)&&ve(Te.set)?Te.set.bind(t):Ln,Ft=wt({get:vt,set:cn});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>Ft.value,set:at=>Ft.value=at})}if(a)for(const ke in a)Ly(a[ke],r,t,ke);if(l){const ke=ve(l)?l.call(t):l;Reflect.ownKeys(ke).forEach(Te=>{gc(Te,ke[Te])})}h&&zp(h,n,"c");function Ne(ke,Te){me(Te)?Te.forEach(vt=>ke(vt.bind(t))):Te&&ke(Te.bind(t))}if(Ne(TT,f),Ne(on,m),Ne(bT,g),Ne(Oy,b),Ne(AT,P),Ne(ET,k),Ne(PT,v),Ne(CT,ne),Ne(ST,R),Ne(ca,L),Ne(xl,G),Ne(RT,y),me(A))if(A.length){const ke=n.exposed||(n.exposed={});A.forEach(Te=>{Object.defineProperty(ke,Te,{get:()=>t[Te],set:vt=>t[Te]=vt,enumerable:!0})})}else n.exposed||(n.exposed={});$&&n.render===Ln&&(n.render=$),T!=null&&(n.inheritAttrs=T),w&&(n.components=w),I&&(n.directives=I),y&&xy(n)}function MT(n,e,t=Ln){me(n)&&(n=wh(n));for(const r in n){const s=n[r];let i;Ke(s)?"default"in s?i=An(s.from||r,s.default,!0):i=An(s.from||r):i=An(s),Mt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function zp(n,e,t){bn(me(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Ly(n,e,t,r){let s=r.includes(".")?Jy(t,r):()=>t[r];if(rt(n)){const i=e[n];ve(i)&&Fr(s,i)}else if(ve(n))Fr(s,n.bind(t));else if(Ke(n))if(me(n))n.forEach(i=>Ly(i,e,t,r));else{const i=ve(n.handler)?n.handler.bind(t):e[n.handler];ve(i)&&Fr(s,i,n)}}function Fy(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!t&&!r?l=e:(l={},s.length&&s.forEach(u=>Gc(l,u,o,!0)),Gc(l,e,o)),Ke(e)&&i.set(e,l),l}function Gc(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&Gc(n,i,t,!0),s&&s.forEach(o=>Gc(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=LT[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const LT={data:Wp,props:Qp,emits:Qp,methods:xo,computed:xo,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:xo,directives:xo,watch:UT,provide:Wp,inject:FT};function Wp(n,e){return e?n?function(){return ht(ve(n)?n.call(this,this):n,ve(e)?e.call(this,this):e)}:e:n}function FT(n,e){return xo(wh(n),wh(e))}function wh(n){if(me(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Bt(n,e){return n?[...new Set([].concat(n,e))]:e}function xo(n,e){return n?ht(Object.create(null),n,e):e}function Qp(n,e){return n?me(n)&&me(e)?[...new Set([...n,...e])]:ht(Object.create(null),Kp(n),Kp(e??{})):e}function UT(n,e){if(!n)return e;if(!e)return n;const t=ht(Object.create(null),n);for(const r in e)t[r]=Bt(n[r],e[r]);return t}function Uy(){return{app:null,config:{isNativeTag:Q_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BT=0;function jT(n,e){return function(r,s=null){ve(r)||(r=ht({},r)),s!=null&&!Ke(s)&&(s=null);const i=Uy(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:BT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:E1,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&ve(h.install)?(o.add(h),h.install(u,...f)):ve(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,m){if(!l){const g=u._ceVNode||De(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(g,h,m),l=!0,u._container=h,h.__vue_app__=u,Ml(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(bn(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=Ti;Ti=u;try{return h()}finally{Ti=f}}};return u}}let Ti=null;function gc(n,e){if(xt){let t=xt.provides;const r=xt.parent&&xt.parent.provides;r===t&&(t=xt.provides=Object.create(r)),t[n]=e}}function An(n,e,t=!1){const r=Od();if(r||Ti){let s=Ti?Ti._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&ve(e)?e.call(r&&r.proxy):e}}const By={},jy=()=>Object.create(By),Gy=n=>Object.getPrototypeOf(n)===By;function GT(n,e,t,r=!1){const s={},i=jy();n.propsDefaults=Object.create(null),Hy(n,e,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=r?s:_y(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function HT(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,a=Ve(s),[l]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(Nl(n.emitsOptions,m))continue;const g=e[m];if(l)if(Me(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const b=pn(m);s[b]=Th(l,a,b,g,n,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{Hy(n,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!Me(e,f)&&((h=Zr(f))===f||!Me(e,h)))&&(l?t&&(t[f]!==void 0||t[h]!==void 0)&&(s[f]=Th(l,a,f,void 0,n,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Me(e,f))&&(delete i[f],u=!0)}u&&Zn(n.attrs,"set","")}function Hy(n,e,t,r){const[s,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Uo(l))continue;const u=e[l];let h;s&&Me(s,h=pn(l))?!i||!i.includes(h)?t[h]=u:(a||(a={}))[h]=u:Nl(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Ve(t),u=a||He;for(let h=0;h<i.length;h++){const f=i[h];t[f]=Th(s,l,f,u[f],n,!Me(u,f))}}return o}function Th(n,e,t,r,s,i){const o=n[t];if(o!=null){const a=Me(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ve(l)){const{propsDefaults:u}=s;if(t in u)r=u[t];else{const h=ka(s);r=u[t]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(t,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Zr(t))&&(r=!0))}return r}const qT=new WeakMap;function qy(n,e,t=!1){const r=t?qT:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},a=[];let l=!1;if(!ve(n)){const h=f=>{l=!0;const[m,g]=qy(f,e,!0);ht(o,m),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!i&&!l)return Ke(n)&&r.set(n,vi),vi;if(me(i))for(let h=0;h<i.length;h++){const f=pn(i[h]);Yp(f)&&(o[f]=He)}else if(i)for(const h in i){const f=pn(h);if(Yp(f)){const m=i[h],g=o[f]=me(m)||ve(m)?{type:m}:ht({},m),b=g.type;let P=!1,k=!0;if(me(b))for(let U=0;U<b.length;++U){const L=b[U],F=ve(L)&&L.name;if(F==="Boolean"){P=!0;break}else F==="String"&&(k=!1)}else P=ve(b)&&b.name==="Boolean";g[0]=P,g[1]=k,(P||Me(g,"default"))&&a.push(f)}}const u=[o,a];return Ke(n)&&r.set(n,u),u}function Yp(n){return n[0]!=="$"&&!Uo(n)}const Dd=n=>n==="_"||n==="_ctx"||n==="$stable",xd=n=>me(n)?n.map(xn):[xn(n)],KT=(n,e,t)=>{if(e._n)return e;const r=Fn((...s)=>xd(e(...s)),t);return r._c=!1,r},Ky=(n,e,t)=>{const r=n._ctx;for(const s in n){if(Dd(s))continue;const i=n[s];if(ve(i))e[s]=KT(s,i,r);else if(i!=null){const o=xd(i);e[s]=()=>o}}},zy=(n,e)=>{const t=xd(e);n.slots.default=()=>t},Wy=(n,e,t)=>{for(const r in e)(t||!Dd(r))&&(n[r]=e[r])},zT=(n,e,t)=>{const r=n.slots=jy();if(n.vnode.shapeFlag&32){const s=e._;s?(Wy(r,e,t),t&&Z_(r,"_",s,!0)):Ky(e,r)}else e&&zy(n,e)},WT=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,o=He;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:Wy(s,e,t):(i=!e.$stable,Ky(e,s)),o=e}else e&&(zy(n,e),o={default:1});if(i)for(const a in s)!Dd(a)&&o[a]==null&&delete s[a]},Zt=c1;function QT(n){return YT(n)}function YT(n,e){const t=Sl();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=Ln,insertStaticContent:b}=n,P=(E,S,V,H=null,q=null,j=null,te=void 0,X=null,W=!!S.dynamicChildren)=>{if(E===S)return;E&&!_s(E,S)&&(H=C(E),at(E,q,j,!0),E=null),S.patchFlag===-2&&(W=!1,S.dynamicChildren=null);const{type:Q,ref:de,shapeFlag:re}=S;switch(Q){case Ol:k(E,S,V,H);break;case Dt:U(E,S,V,H);break;case _c:E==null&&L(S,V,H,te);break;case Ze:w(E,S,V,H,q,j,te,X,W);break;default:re&1?$(E,S,V,H,q,j,te,X,W):re&6?I(E,S,V,H,q,j,te,X,W):(re&64||re&128)&&Q.process(E,S,V,H,q,j,te,X,W,K)}de!=null&&q?Go(de,E&&E.ref,j,S||E,!S):de==null&&E&&E.ref!=null&&Go(E.ref,null,j,E,!0)},k=(E,S,V,H)=>{if(E==null)r(S.el=a(S.children),V,H);else{const q=S.el=E.el;S.children!==E.children&&u(q,S.children)}},U=(E,S,V,H)=>{E==null?r(S.el=l(S.children||""),V,H):S.el=E.el},L=(E,S,V,H)=>{[E.el,E.anchor]=b(E.children,S,V,H,E.el,E.anchor)},F=({el:E,anchor:S},V,H)=>{let q;for(;E&&E!==S;)q=m(E),r(E,V,H),E=q;r(S,V,H)},G=({el:E,anchor:S})=>{let V;for(;E&&E!==S;)V=m(E),s(E),E=V;s(S)},$=(E,S,V,H,q,j,te,X,W)=>{S.type==="svg"?te="svg":S.type==="math"&&(te="mathml"),E==null?ne(S,V,H,q,j,te,X,W):y(E,S,q,j,te,X,W)},ne=(E,S,V,H,q,j,te,X)=>{let W,Q;const{props:de,shapeFlag:re,transition:ue,dirs:fe}=E;if(W=E.el=o(E.type,j,de&&de.is,de),re&8?h(W,E.children):re&16&&v(E.children,W,null,H,q,Bu(E,j),te,X),fe&&ls(E,null,H,"created"),R(W,E,E.scopeId,te,H),de){for(const Le in de)Le!=="value"&&!Uo(Le)&&i(W,Le,null,de[Le],j,H);"value"in de&&i(W,"value",null,de.value,j),(Q=de.onVnodeBeforeMount)&&Pn(Q,H,E)}fe&&ls(E,null,H,"beforeMount");const be=XT(q,ue);be&&ue.beforeEnter(W),r(W,S,V),((Q=de&&de.onVnodeMounted)||be||fe)&&Zt(()=>{Q&&Pn(Q,H,E),be&&ue.enter(W),fe&&ls(E,null,H,"mounted")},q)},R=(E,S,V,H,q)=>{if(V&&g(E,V),H)for(let j=0;j<H.length;j++)g(E,H[j]);if(q){let j=q.subTree;if(S===j||Zy(j.type)&&(j.ssContent===S||j.ssFallback===S)){const te=q.vnode;R(E,te,te.scopeId,te.slotScopeIds,q.parent)}}},v=(E,S,V,H,q,j,te,X,W=0)=>{for(let Q=W;Q<E.length;Q++){const de=E[Q]=X?kr(E[Q]):xn(E[Q]);P(null,de,S,V,H,q,j,te,X)}},y=(E,S,V,H,q,j,te)=>{const X=S.el=E.el;let{patchFlag:W,dynamicChildren:Q,dirs:de}=S;W|=E.patchFlag&16;const re=E.props||He,ue=S.props||He;let fe;if(V&&us(V,!1),(fe=ue.onVnodeBeforeUpdate)&&Pn(fe,V,S,E),de&&ls(S,E,V,"beforeUpdate"),V&&us(V,!0),(re.innerHTML&&ue.innerHTML==null||re.textContent&&ue.textContent==null)&&h(X,""),Q?A(E.dynamicChildren,Q,X,V,H,Bu(S,q),j):te||Te(E,S,X,null,V,H,Bu(S,q),j,!1),W>0){if(W&16)T(X,re,ue,V,q);else if(W&2&&re.class!==ue.class&&i(X,"class",null,ue.class,q),W&4&&i(X,"style",re.style,ue.style,q),W&8){const be=S.dynamicProps;for(let Le=0;Le<be.length;Le++){const Pe=be[Le],bt=re[Pe],Rt=ue[Pe];(Rt!==bt||Pe==="value")&&i(X,Pe,bt,Rt,q,V)}}W&1&&E.children!==S.children&&h(X,S.children)}else!te&&Q==null&&T(X,re,ue,V,q);((fe=ue.onVnodeUpdated)||de)&&Zt(()=>{fe&&Pn(fe,V,S,E),de&&ls(S,E,V,"updated")},H)},A=(E,S,V,H,q,j,te)=>{for(let X=0;X<S.length;X++){const W=E[X],Q=S[X],de=W.el&&(W.type===Ze||!_s(W,Q)||W.shapeFlag&198)?f(W.el):V;P(W,Q,de,null,H,q,j,te,!0)}},T=(E,S,V,H,q)=>{if(S!==V){if(S!==He)for(const j in S)!Uo(j)&&!(j in V)&&i(E,j,S[j],null,q,H);for(const j in V){if(Uo(j))continue;const te=V[j],X=S[j];te!==X&&j!=="value"&&i(E,j,X,te,q,H)}"value"in V&&i(E,"value",S.value,V.value,q)}},w=(E,S,V,H,q,j,te,X,W)=>{const Q=S.el=E?E.el:a(""),de=S.anchor=E?E.anchor:a("");let{patchFlag:re,dynamicChildren:ue,slotScopeIds:fe}=S;fe&&(X=X?X.concat(fe):fe),E==null?(r(Q,V,H),r(de,V,H),v(S.children||[],V,de,q,j,te,X,W)):re>0&&re&64&&ue&&E.dynamicChildren?(A(E.dynamicChildren,ue,V,q,j,te,X),(S.key!=null||q&&S===q.subTree)&&Qy(E,S,!0)):Te(E,S,V,de,q,j,te,X,W)},I=(E,S,V,H,q,j,te,X,W)=>{S.slotScopeIds=X,E==null?S.shapeFlag&512?q.ctx.activate(S,V,H,te,W):we(S,V,H,q,j,te,W):je(E,S,W)},we=(E,S,V,H,q,j,te)=>{const X=E.component=m1(E,H,q);if(Vl(E)&&(X.ctx.renderer=K),g1(X,!1,te),X.asyncDep){if(q&&q.registerDep(X,Ne,te),!E.el){const W=X.subTree=De(Dt);U(null,W,S,V),E.placeholder=W.el}}else Ne(X,E,S,V,q,j,te)},je=(E,S,V)=>{const H=S.component=E.component;if(o1(E,S,V))if(H.asyncDep&&!H.asyncResolved){ke(H,S,V);return}else H.next=S,H.update();else S.el=E.el,H.vnode=S},Ne=(E,S,V,H,q,j,te)=>{const X=()=>{if(E.isMounted){let{next:re,bu:ue,u:fe,parent:be,vnode:Le}=E;{const Jt=Yy(E);if(Jt){re&&(re.el=Le.el,ke(E,re,te)),Jt.asyncDep.then(()=>{E.isUnmounted||X()});return}}let Pe=re,bt;us(E,!1),re?(re.el=Le.el,ke(E,re,te)):re=Le,ue&&mc(ue),(bt=re.props&&re.props.onVnodeBeforeUpdate)&&Pn(bt,be,re,Le),us(E,!0);const Rt=Jp(E),Xt=E.subTree;E.subTree=Rt,P(Xt,Rt,f(Xt.el),C(Xt),E,q,j),re.el=Rt.el,Pe===null&&a1(E,Rt.el),fe&&Zt(fe,q),(bt=re.props&&re.props.onVnodeUpdated)&&Zt(()=>Pn(bt,be,re,Le),q)}else{let re;const{el:ue,props:fe}=S,{bm:be,m:Le,parent:Pe,root:bt,type:Rt}=E,Xt=wi(S);us(E,!1),be&&mc(be),!Xt&&(re=fe&&fe.onVnodeBeforeMount)&&Pn(re,Pe,S),us(E,!0);{bt.ce&&bt.ce._def.shadowRoot!==!1&&bt.ce._injectChildStyle(Rt);const Jt=E.subTree=Jp(E);P(null,Jt,V,H,E,q,j),S.el=Jt.el}if(Le&&Zt(Le,q),!Xt&&(re=fe&&fe.onVnodeMounted)){const Jt=S;Zt(()=>Pn(re,Pe,Jt),q)}(S.shapeFlag&256||Pe&&wi(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&E.a&&Zt(E.a,q),E.isMounted=!0,S=V=H=null}};E.scope.on();const W=E.effect=new ry(X);E.scope.off();const Q=E.update=W.run.bind(W),de=E.job=W.runIfDirty.bind(W);de.i=E,de.id=E.uid,W.scheduler=()=>kd(de),us(E,!0),Q()},ke=(E,S,V)=>{S.component=E;const H=E.vnode.props;E.vnode=S,E.next=null,HT(E,S.props,H,V),WT(E,S.children,V),or(),Bp(E),ar()},Te=(E,S,V,H,q,j,te,X,W=!1)=>{const Q=E&&E.children,de=E?E.shapeFlag:0,re=S.children,{patchFlag:ue,shapeFlag:fe}=S;if(ue>0){if(ue&128){cn(Q,re,V,H,q,j,te,X,W);return}else if(ue&256){vt(Q,re,V,H,q,j,te,X,W);return}}fe&8?(de&16&&se(Q,q,j),re!==Q&&h(V,re)):de&16?fe&16?cn(Q,re,V,H,q,j,te,X,W):se(Q,q,j,!0):(de&8&&h(V,""),fe&16&&v(re,V,H,q,j,te,X,W))},vt=(E,S,V,H,q,j,te,X,W)=>{E=E||vi,S=S||vi;const Q=E.length,de=S.length,re=Math.min(Q,de);let ue;for(ue=0;ue<re;ue++){const fe=S[ue]=W?kr(S[ue]):xn(S[ue]);P(E[ue],fe,V,null,q,j,te,X,W)}Q>de?se(E,q,j,!0,!1,re):v(S,V,H,q,j,te,X,W,re)},cn=(E,S,V,H,q,j,te,X,W)=>{let Q=0;const de=S.length;let re=E.length-1,ue=de-1;for(;Q<=re&&Q<=ue;){const fe=E[Q],be=S[Q]=W?kr(S[Q]):xn(S[Q]);if(_s(fe,be))P(fe,be,V,null,q,j,te,X,W);else break;Q++}for(;Q<=re&&Q<=ue;){const fe=E[re],be=S[ue]=W?kr(S[ue]):xn(S[ue]);if(_s(fe,be))P(fe,be,V,null,q,j,te,X,W);else break;re--,ue--}if(Q>re){if(Q<=ue){const fe=ue+1,be=fe<de?S[fe].el:H;for(;Q<=ue;)P(null,S[Q]=W?kr(S[Q]):xn(S[Q]),V,be,q,j,te,X,W),Q++}}else if(Q>ue)for(;Q<=re;)at(E[Q],q,j,!0),Q++;else{const fe=Q,be=Q,Le=new Map;for(Q=be;Q<=ue;Q++){const It=S[Q]=W?kr(S[Q]):xn(S[Q]);It.key!=null&&Le.set(It.key,Q)}let Pe,bt=0;const Rt=ue-be+1;let Xt=!1,Jt=0;const mn=new Array(Rt);for(Q=0;Q<Rt;Q++)mn[Q]=0;for(Q=fe;Q<=re;Q++){const It=E[Q];if(bt>=Rt){at(It,q,j,!0);continue}let mt;if(It.key!=null)mt=Le.get(It.key);else for(Pe=be;Pe<=ue;Pe++)if(mn[Pe-be]===0&&_s(It,S[Pe])){mt=Pe;break}mt===void 0?at(It,q,j,!0):(mn[mt-be]=Q+1,mt>=Jt?Jt=mt:Xt=!0,P(It,S[mt],V,null,q,j,te,X,W),bt++)}const Js=Xt?JT(mn):vi;for(Pe=Js.length-1,Q=Rt-1;Q>=0;Q--){const It=be+Q,mt=S[It],ao=S[It+1],ss=It+1<de?ao.el||ao.placeholder:H;mn[Q]===0?P(null,mt,V,ss,q,j,te,X,W):Xt&&(Pe<0||Q!==Js[Pe]?Ft(mt,V,ss,2):Pe--)}}},Ft=(E,S,V,H,q=null)=>{const{el:j,type:te,transition:X,children:W,shapeFlag:Q}=E;if(Q&6){Ft(E.component.subTree,S,V,H);return}if(Q&128){E.suspense.move(S,V,H);return}if(Q&64){te.move(E,S,V,K);return}if(te===Ze){r(j,S,V);for(let re=0;re<W.length;re++)Ft(W[re],S,V,H);r(E.anchor,S,V);return}if(te===_c){F(E,S,V);return}if(H!==2&&Q&1&&X)if(H===0)X.beforeEnter(j),r(j,S,V),Zt(()=>X.enter(j),q);else{const{leave:re,delayLeave:ue,afterLeave:fe}=X,be=()=>{E.ctx.isUnmounted?s(j):r(j,S,V)},Le=()=>{j._isLeaving&&j[$n](!0),re(j,()=>{be(),fe&&fe()})};ue?ue(j,be,Le):Le()}else r(j,S,V)},at=(E,S,V,H=!1,q=!1)=>{const{type:j,props:te,ref:X,children:W,dynamicChildren:Q,shapeFlag:de,patchFlag:re,dirs:ue,cacheIndex:fe}=E;if(re===-2&&(q=!1),X!=null&&(or(),Go(X,null,V,E,!0),ar()),fe!=null&&(S.renderCache[fe]=void 0),de&256){S.ctx.deactivate(E);return}const be=de&1&&ue,Le=!wi(E);let Pe;if(Le&&(Pe=te&&te.onVnodeBeforeUnmount)&&Pn(Pe,S,E),de&6)Yt(E.component,V,H);else{if(de&128){E.suspense.unmount(V,H);return}be&&ls(E,null,S,"beforeUnmount"),de&64?E.type.remove(E,S,V,K,H):Q&&!Q.hasOnce&&(j!==Ze||re>0&&re&64)?se(Q,S,V,!1,!0):(j===Ze&&re&384||!q&&de&16)&&se(W,S,V),H&&ln(E)}(Le&&(Pe=te&&te.onVnodeUnmounted)||be)&&Zt(()=>{Pe&&Pn(Pe,S,E),be&&ls(E,null,S,"unmounted")},V)},ln=E=>{const{type:S,el:V,anchor:H,transition:q}=E;if(S===Ze){Kt(V,H);return}if(S===_c){G(E);return}const j=()=>{s(V),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(E.shapeFlag&1&&q&&!q.persisted){const{leave:te,delayLeave:X}=q,W=()=>te(V,j);X?X(E.el,j,W):W()}else j()},Kt=(E,S)=>{let V;for(;E!==S;)V=m(E),s(E),E=V;s(S)},Yt=(E,S,V)=>{const{bum:H,scope:q,job:j,subTree:te,um:X,m:W,a:Q}=E;Xp(W),Xp(Q),H&&mc(H),q.stop(),j&&(j.flags|=8,at(te,E,S,V)),X&&Zt(X,S),Zt(()=>{E.isUnmounted=!0},S)},se=(E,S,V,H=!1,q=!1,j=0)=>{for(let te=j;te<E.length;te++)at(E[te],S,V,H,q)},C=E=>{if(E.shapeFlag&6)return C(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const S=m(E.anchor||E.el),V=S&&S[yT];return V?m(V):S};let O=!1;const Y=(E,S,V)=>{E==null?S._vnode&&at(S._vnode,null,null,!0):P(S._vnode||null,E,S,null,null,null,V),S._vnode=E,O||(O=!0,Bp(),wy(),O=!1)},K={p:P,um:at,m:Ft,r:ln,mt:we,mc:v,pc:Te,pbc:A,n:C,o:n};return{render:Y,hydrate:void 0,createApp:jT(Y)}}function Bu({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function us({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function XT(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Qy(n,e,t=!1){const r=n.children,s=e.children;if(me(r)&&me(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=kr(s[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Qy(o,a)),a.type===Ol&&a.patchFlag!==-1&&(a.el=o.el),a.type===Dt&&!a.el&&(a.el=o.el)}}function JT(n){const e=n.slice(),t=[0];let r,s,i,o,a;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(s=t[t.length-1],n[s]<u){e[r]=s,t.push(r);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<u?i=a+1:o=a;u<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Yy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Yy(e)}function Xp(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const $T=Symbol.for("v-scx"),ZT=()=>An($T);function Fr(n,e,t){return Xy(n,e,t)}function Xy(n,e,t=He){const{immediate:r,deep:s,flush:i,once:o}=t,a=ht({},t),l=e&&r||!e&&i!=="post";let u;if(ha){if(i==="sync"){const g=ZT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Ln,g.resume=Ln,g.pause=Ln,g}}const h=xt;a.call=(g,b,P)=>bn(g,h,b,P);let f=!1;i==="post"?a.scheduler=g=>{Zt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,b)=>{b?g():kd(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=pT(n,e,a);return ha&&(u?u.push(m):l&&m()),m}function e1(n,e,t){const r=this.proxy,s=rt(n)?n.includes(".")?Jy(r,n):()=>r[n]:n.bind(r,r);let i;ve(e)?i=e:(i=e.handler,t=e);const o=ka(this),a=Xy(s,i.bind(r),t);return o(),a}function Jy(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const t1=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${pn(e)}Modifiers`]||n[`${Zr(e)}Modifiers`];function n1(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||He;let s=t;const i=e.startsWith("update:"),o=i&&t1(r,e.slice(7));o&&(o.trim&&(s=t.map(h=>rt(h)?h.trim():h)),o.number&&(s=t.map(mh)));let a,l=r[a=xu(e)]||r[a=xu(pn(e))];!l&&i&&(l=r[a=xu(Zr(e))]),l&&bn(l,n,6,s);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,bn(u,n,6,s)}}const r1=new WeakMap;function $y(n,e,t=!1){const r=t?r1:e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},a=!1;if(!ve(n)){const l=u=>{const h=$y(u,e,!0);h&&(a=!0,ht(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(Ke(n)&&r.set(n,null),null):(me(i)?i.forEach(l=>o[l]=null):ht(o,i),Ke(n)&&r.set(n,o),o)}function Nl(n,e){return!n||!wl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(n,e[0].toLowerCase()+e.slice(1))||Me(n,Zr(e))||Me(n,e))}function Jp(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:m,setupState:g,ctx:b,inheritAttrs:P}=n,k=Bc(n);let U,L;try{if(t.shapeFlag&4){const G=s||r,$=G;U=xn(u.call($,G,h,f,g,m,b)),L=a}else{const G=e;U=xn(G.length>1?G(f,{attrs:a,slots:o,emit:l}):G(f,null)),L=e.props?a:s1(a)}}catch(G){Ko.length=0,kl(G,n,1),U=De(Dt)}let F=U;if(L&&P!==!1){const G=Object.keys(L),{shapeFlag:$}=F;G.length&&$&7&&(i&&G.some(vd)&&(L=i1(L,i)),F=zr(F,L,!1,!0))}return t.dirs&&(F=zr(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(t.dirs):t.dirs),t.transition&&xs(F,t.transition),U=F,Bc(k),U}const s1=n=>{let e;for(const t in n)(t==="class"||t==="style"||wl(t))&&((e||(e={}))[t]=n[t]);return e},i1=(n,e)=>{const t={};for(const r in n)(!vd(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function o1(n,e,t){const{props:r,children:s,component:i}=n,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?$p(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==r[m]&&!Nl(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$p(r,o,u):!0:!!o;return!1}function $p(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!Nl(t,i))return!0}return!1}function a1({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Zy=n=>n.__isSuspense;function c1(n,e){e&&e.pendingBranch?me(n)?e.effects.push(...n):e.effects.push(n):_T(n)}const Ze=Symbol.for("v-fgt"),Ol=Symbol.for("v-txt"),Dt=Symbol.for("v-cmt"),_c=Symbol.for("v-stc"),Ko=[];let nn=null;function oe(n=!1){Ko.push(nn=n?null:[])}function l1(){Ko.pop(),nn=Ko[Ko.length-1]||null}let la=1;function Hc(n,e=!1){la+=n,n<0&&nn&&e&&(nn.hasOnce=!0)}function ev(n){return n.dynamicChildren=la>0?nn||vi:null,l1(),la>0&&nn&&nn.push(n),n}function he(n,e,t,r,s,i){return ev(N(n,e,t,r,s,i,!0))}function En(n,e,t,r,s){return ev(De(n,e,t,r,s,!0))}function ua(n){return n?n.__v_isVNode===!0:!1}function _s(n,e){return n.type===e.type&&n.key===e.key}const tv=({key:n})=>n??null,yc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?rt(n)||Mt(n)||ve(n)?{i:Tt,r:n,k:e,f:!!t}:n:null);function N(n,e=null,t=null,r=0,s=null,i=n===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&tv(e),ref:e&&yc(e),scopeId:by,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Tt};return a?(Nd(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=rt(t)?8:16),la>0&&!o&&nn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&nn.push(l),l}const De=u1;function u1(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===DT)&&(n=Dt),ua(n)){const a=zr(n,e,!0);return t&&Nd(a,t),la>0&&!i&&nn&&(a.shapeFlag&6?nn[nn.indexOf(n)]=a:nn.push(a)),a.patchFlag=-2,a}if(A1(n)&&(n=n.__vccOpts),e){e=h1(e);let{class:a,style:l}=e;a&&!rt(a)&&(e.class=Ht(a)),Ke(l)&&(Pd(l)&&!me(l)&&(l=ht({},l)),e.style=Ed(l))}const o=rt(n)?1:Zy(n)?128:Ry(n)?64:Ke(n)?4:ve(n)?2:0;return N(n,e,t,r,s,o,i,!0)}function h1(n){return n?Pd(n)||Gy(n)?ht({},n):n:null}function zr(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=n,u=e?d1(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&tv(u),ref:e&&e.ref?t&&i?me(i)?i.concat(yc(e)):[i,yc(e)]:yc(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ze?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&zr(n.ssContent),ssFallback:n.ssFallback&&zr(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&xs(h,l.clone(h)),h}function bh(n=" ",e=0){return De(Ol,null,n,e)}function Un(n,e){const t=De(_c,null,n);return t.staticCount=e,t}function yt(n="",e=!1){return e?(oe(),En(Dt,null,n)):De(Dt,null,n)}function xn(n){return n==null||typeof n=="boolean"?De(Dt):me(n)?De(Ze,null,n.slice()):ua(n)?kr(n):De(Ol,null,String(n))}function kr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:zr(n)}function Nd(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(me(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Nd(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!Gy(e)?e._ctx=Tt:s===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else ve(e)?(e={default:e,_ctx:Tt},t=32):(e=String(e),r&64?(t=16,e=[bh(e)]):t=8);n.children=e,n.shapeFlag|=t}function d1(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ht([e.class,r.class]));else if(s==="style")e.style=Ed([e.style,r.style]);else if(wl(s)){const i=e[s],o=r[s];o&&i!==o&&!(me(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Pn(n,e,t,r=null){bn(n,e,7,[t,r])}const f1=Uy();let p1=0;function m1(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||f1,i={uid:p1++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qy(r,s),emitsOptions:$y(r,s),emit:null,emitted:null,propsDefaults:He,inheritAttrs:r.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=n1.bind(null,i),n.ce&&n.ce(i),i}let xt=null;const Od=()=>xt||Tt;let qc,Rh;{const n=Sl(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};qc=e("__VUE_INSTANCE_SETTERS__",t=>xt=t),Rh=e("__VUE_SSR_SETTERS__",t=>ha=t)}const ka=n=>{const e=xt;return qc(n),n.scope.on(),()=>{n.scope.off(),qc(e)}},Zp=()=>{xt&&xt.scope.off(),qc(null)};function nv(n){return n.vnode.shapeFlag&4}let ha=!1;function g1(n,e=!1,t=!1){e&&Rh(e);const{props:r,children:s}=n.vnode,i=nv(n);GT(n,r,i,e),zT(n,s,t||e);const o=i?_1(n,e):void 0;return e&&Rh(!1),o}function _1(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,NT);const{setup:r}=t;if(r){or();const s=n.setupContext=r.length>1?v1(n):null,i=ka(n),o=Pa(r,n,0,[n.props,s]),a=X_(o);if(ar(),i(),(a||n.sp)&&!wi(n)&&xy(n),a){if(o.then(Zp,Zp),e)return o.then(l=>{em(n,l)}).catch(l=>{kl(l,n,0)});n.asyncDep=o}else em(n,o)}else rv(n)}function em(n,e,t){ve(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ke(e)&&(n.setupState=vy(e)),rv(n)}function rv(n,e,t){const r=n.type;n.render||(n.render=r.render||Ln);{const s=ka(n);or();try{OT(n)}finally{ar(),s()}}}const y1={get(n,e){return Vt(n,"get",""),n[e]}};function v1(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,y1),slots:n.slots,emit:n.emit,expose:e}}function Ml(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(vy(aT(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in qo)return qo[t](n)},has(e,t){return t in e||t in qo}})):n.proxy}function I1(n,e=!0){return ve(n)?n.displayName||n.name:n.name||e&&n.__name}function A1(n){return ve(n)&&"__vccOpts"in n}const wt=(n,e)=>dT(n,e,ha);function Md(n,e,t){try{Hc(-1);const r=arguments.length;return r===2?Ke(e)&&!me(e)?ua(e)?De(n,null,[e]):De(n,e):De(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&ua(t)&&(t=[t]),De(n,e,t))}finally{Hc(1)}}const E1="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sh;const tm=typeof window<"u"&&window.trustedTypes;if(tm)try{Sh=tm.createPolicy("vue",{createHTML:n=>n})}catch{}const sv=Sh?n=>Sh.createHTML(n):n=>n,w1="http://www.w3.org/2000/svg",T1="http://www.w3.org/1998/Math/MathML",Jn=typeof document<"u"?document:null,nm=Jn&&Jn.createElement("template"),b1={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?Jn.createElementNS(w1,n):e==="mathml"?Jn.createElementNS(T1,n):t?Jn.createElement(n,{is:t}):Jn.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>Jn.createTextNode(n),createComment:n=>Jn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Jn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{nm.innerHTML=sv(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=nm.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Er="transition",To="animation",Vi=Symbol("_vtc"),iv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ov=ht({},Cy,iv),R1=n=>(n.displayName="Transition",n.props=ov,n),Di=R1((n,{slots:e})=>Md(IT,av(n),e)),hs=(n,e=[])=>{me(n)?n.forEach(t=>t(...e)):n&&n(...e)},rm=n=>n?me(n)?n.some(e=>e.length>1):n.length>1:!1;function av(n){const e={};for(const w in n)w in iv||(e[w]=n[w]);if(n.css===!1)return e;const{name:t="v",type:r,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:m=`${t}-leave-active`,leaveToClass:g=`${t}-leave-to`}=n,b=S1(s),P=b&&b[0],k=b&&b[1],{onBeforeEnter:U,onEnter:L,onEnterCancelled:F,onLeave:G,onLeaveCancelled:$,onBeforeAppear:ne=U,onAppear:R=L,onAppearCancelled:v=F}=e,y=(w,I,we,je)=>{w._enterCancelled=je,Cr(w,I?h:a),Cr(w,I?u:o),we&&we()},A=(w,I)=>{w._isLeaving=!1,Cr(w,f),Cr(w,g),Cr(w,m),I&&I()},T=w=>(I,we)=>{const je=w?R:L,Ne=()=>y(I,w,we);hs(je,[I,Ne]),sm(()=>{Cr(I,w?l:i),kn(I,w?h:a),rm(je)||im(I,r,P,Ne)})};return ht(e,{onBeforeEnter(w){hs(U,[w]),kn(w,i),kn(w,o)},onBeforeAppear(w){hs(ne,[w]),kn(w,l),kn(w,u)},onEnter:T(!1),onAppear:T(!0),onLeave(w,I){w._isLeaving=!0;const we=()=>A(w,I);kn(w,f),w._enterCancelled?(kn(w,m),Ch(w)):(Ch(w),kn(w,m)),sm(()=>{w._isLeaving&&(Cr(w,f),kn(w,g),rm(G)||im(w,r,k,we))}),hs(G,[w,we])},onEnterCancelled(w){y(w,!1,void 0,!0),hs(F,[w])},onAppearCancelled(w){y(w,!0,void 0,!0),hs(v,[w])},onLeaveCancelled(w){A(w),hs($,[w])}})}function S1(n){if(n==null)return null;if(Ke(n))return[ju(n.enter),ju(n.leave)];{const e=ju(n);return[e,e]}}function ju(n){return Nw(n)}function kn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Vi]||(n[Vi]=new Set)).add(e)}function Cr(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Vi];t&&(t.delete(e),t.size||(n[Vi]=void 0))}function sm(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let C1=0;function im(n,e,t,r){const s=n._endId=++C1,i=()=>{s===n._endId&&r()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=cv(n,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{n.removeEventListener(u,m),i()},m=g=>{g.target===n&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),n.addEventListener(u,m)}function cv(n,e){const t=window.getComputedStyle(n),r=b=>(t[b]||"").split(", "),s=r(`${Er}Delay`),i=r(`${Er}Duration`),o=om(s,i),a=r(`${To}Delay`),l=r(`${To}Duration`),u=om(a,l);let h=null,f=0,m=0;e===Er?o>0&&(h=Er,f=o,m=i.length):e===To?u>0&&(h=To,f=u,m=l.length):(f=Math.max(o,u),h=f>0?o>u?Er:To:null,m=h?h===Er?i.length:l.length:0);const g=h===Er&&/\b(?:transform|all)(?:,|$)/.test(r(`${Er}Property`).toString());return{type:h,timeout:f,propCount:m,hasTransform:g}}function om(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>am(t)+am(n[r])))}function am(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Ch(n){return(n?n.ownerDocument:document).body.offsetHeight}function P1(n,e,t){const r=n[Vi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Kc=Symbol("_vod"),lv=Symbol("_vsh"),uv={name:"show",beforeMount(n,{value:e},{transition:t}){n[Kc]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):bo(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),bo(n,!0),r.enter(n)):r.leave(n,()=>{bo(n,!1)}):bo(n,e))},beforeUnmount(n,{value:e}){bo(n,e)}};function bo(n,e){n.style.display=e?n[Kc]:"none",n[lv]=!e}const k1=Symbol(""),V1=/(?:^|;)\s*display\s*:/;function D1(n,e,t){const r=n.style,s=rt(t);let i=!1;if(t&&!s){if(e)if(rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&vc(r,a,"")}else for(const o in e)t[o]==null&&vc(r,o,"");for(const o in t)o==="display"&&(i=!0),vc(r,o,t[o])}else if(s){if(e!==t){const o=r[k1];o&&(t+=";"+o),r.cssText=t,i=V1.test(t)}}else e&&n.removeAttribute("style");Kc in n&&(n[Kc]=i?r.display:"",n[lv]&&(r.display="none"))}const cm=/\s*!important$/;function vc(n,e,t){if(me(t))t.forEach(r=>vc(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=x1(n,e);cm.test(t)?n.setProperty(Zr(r),t.replace(cm,""),"important"):n[r]=t}}const lm=["Webkit","Moz","ms"],Gu={};function x1(n,e){const t=Gu[e];if(t)return t;let r=pn(e);if(r!=="filter"&&r in n)return Gu[e]=r;r=Rl(r);for(let s=0;s<lm.length;s++){const i=lm[s]+r;if(i in n)return Gu[e]=i}return e}const um="http://www.w3.org/1999/xlink";function hm(n,e,t,r,s,i=Bw(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(um,e.slice(6,e.length)):n.setAttributeNS(um,e,t):t==null||i&&!ey(t)?n.removeAttribute(e):n.setAttribute(e,i?"":dr(t)?String(t):t)}function dm(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?sv(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=ey(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function hi(n,e,t,r){n.addEventListener(e,t,r)}function N1(n,e,t,r){n.removeEventListener(e,t,r)}const fm=Symbol("_vei");function O1(n,e,t,r,s=null){const i=n[fm]||(n[fm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=M1(e);if(r){const u=i[e]=U1(r,s);hi(n,a,u,l)}else o&&(N1(n,a,o,l),i[e]=void 0)}}const pm=/(?:Once|Passive|Capture)$/;function M1(n){let e;if(pm.test(n)){e={};let r;for(;r=n.match(pm);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Zr(n.slice(2)),e]}let Hu=0;const L1=Promise.resolve(),F1=()=>Hu||(L1.then(()=>Hu=0),Hu=Date.now());function U1(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;bn(B1(r,t.value),e,5,[r])};return t.value=n,t.attached=F1(),t}function B1(n,e){if(me(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const mm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,j1=(n,e,t,r,s,i)=>{const o=s==="svg";e==="class"?P1(n,r,o):e==="style"?D1(n,t,r):wl(e)?vd(e)||O1(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):G1(n,e,r,o))?(dm(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hm(n,e,r,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!rt(r))?dm(n,pn(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),hm(n,e,r,o))};function G1(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&mm(e)&&ve(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return mm(e)&&rt(t)?!1:e in n}const hv=new WeakMap,dv=new WeakMap,zc=Symbol("_moveCb"),gm=Symbol("_enterCb"),H1=n=>(delete n.props.mode,n),q1=H1({name:"TransitionGroup",props:ht({},ov,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Od(),r=Sy();let s,i;return Oy(()=>{if(!s.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!Y1(s[0].el,t.vnode.el,o)){s=[];return}s.forEach(z1),s.forEach(W1);const a=s.filter(Q1);Ch(t.vnode.el),a.forEach(l=>{const u=l.el,h=u.style;kn(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[zc]=m=>{m&&m.target!==u||(!m||m.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",f),u[zc]=null,Cr(u,o))};u.addEventListener("transitionend",f)}),s=[]}),()=>{const o=Ve(n),a=av(o);let l=o.tag||Ze;if(s=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(s.push(h),xs(h,aa(h,a,r,t)),hv.set(h,h.el.getBoundingClientRect()))}i=e.default?Vd(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&xs(h,aa(h,a,r,t))}return De(l,null,i)}}}),K1=q1;function z1(n){const e=n.el;e[zc]&&e[zc](),e[gm]&&e[gm]()}function W1(n){dv.set(n,n.el.getBoundingClientRect())}function Q1(n){const e=hv.get(n),t=dv.get(n),r=e.left-t.left,s=e.top-t.top;if(r||s){const i=n.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",n}}function Y1(n,e,t){const r=n.cloneNode(),s=n[Vi];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=cv(r);return i.removeChild(r),o}const _m=n=>{const e=n.props["onUpdate:modelValue"]||!1;return me(e)?t=>mc(e,t):e};function X1(n){n.target.composing=!0}function ym(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qu=Symbol("_assign"),_n={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[qu]=_m(s);const i=r||s.props&&s.props.type==="number";hi(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=mh(a)),n[qu](a)}),t&&hi(n,"change",()=>{n.value=n.value.trim()}),e||(hi(n,"compositionstart",X1),hi(n,"compositionend",ym),hi(n,"change",ym))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[qu]=_m(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?mh(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===l)||(n.value=l))}},J1=["ctrl","shift","alt","meta"],$1={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>J1.some(t=>n[`${t}Key`]&&!e.includes(t))},bi=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=$1[e[o]];if(a&&a(s,e))return}return n(s,...i)}))},Z1={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fv=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=(s=>{if(!("key"in s))return;const i=Zr(s.key);if(e.some(o=>o===i||Z1[o]===i))return n(s)}))},e0=ht({patchProp:j1},b1);let vm;function t0(){return vm||(vm=QT(e0))}const n0=((...n)=>{const e=t0().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=s0(r);if(!s)return;const i=e._component;!ve(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,r0(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function r0(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function s0(n){return rt(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const di=typeof document<"u";function pv(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function i0(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&pv(n.default)}const Oe=Object.assign;function Ku(n,e){const t={};for(const r in e){const s=e[r];t[r]=Rn(s)?s.map(n):n(s)}return t}const zo=()=>{},Rn=Array.isArray;function Im(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}const mv=/#/g,o0=/&/g,a0=/\//g,c0=/=/g,l0=/\?/g,gv=/\+/g,u0=/%5B/g,h0=/%5D/g,_v=/%5E/g,d0=/%60/g,yv=/%7B/g,f0=/%7C/g,vv=/%7D/g,p0=/%20/g;function Ld(n){return n==null?"":encodeURI(""+n).replace(f0,"|").replace(u0,"[").replace(h0,"]")}function m0(n){return Ld(n).replace(yv,"{").replace(vv,"}").replace(_v,"^")}function Ph(n){return Ld(n).replace(gv,"%2B").replace(p0,"+").replace(mv,"%23").replace(o0,"%26").replace(d0,"`").replace(yv,"{").replace(vv,"}").replace(_v,"^")}function g0(n){return Ph(n).replace(c0,"%3D")}function _0(n){return Ld(n).replace(mv,"%23").replace(l0,"%3F")}function y0(n){return _0(n).replace(a0,"%2F")}function da(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const v0=/\/$/,I0=n=>n.replace(v0,"");function zu(n,e,t="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=n(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=T0(r??e,t),{fullPath:r+i+o,path:r,query:s,hash:da(o)}}function A0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Am(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function E0(n,e,t){const r=e.matched.length-1,s=t.matched.length-1;return r>-1&&r===s&&xi(e.matched[r],t.matched[s])&&Iv(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function xi(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Iv(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!w0(n[t],e[t]))return!1;return!0}function w0(n,e){return Rn(n)?Em(n,e):Rn(e)?Em(e,n):n===e}function Em(n,e){return Rn(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function T0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const wr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let kh=(function(n){return n.pop="pop",n.push="push",n})({}),Wu=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function b0(n){if(!n)if(di){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),I0(n)}const R0=/^[^#]+#/;function S0(n,e){return n.replace(R0,"#")+e}function C0(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Ll=()=>({left:window.scrollX,top:window.scrollY});function P0(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=C0(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function wm(n,e){return(history.state?history.state.position-e:-1)+n}const Vh=new Map;function k0(n,e){Vh.set(n,e)}function V0(n){const e=Vh.get(n);return Vh.delete(n),e}function D0(n){return typeof n=="string"||n&&typeof n=="object"}function Av(n){return typeof n=="string"||typeof n=="symbol"}let Je=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const Ev=Symbol("");Je.MATCHER_NOT_FOUND+"",Je.NAVIGATION_GUARD_REDIRECT+"",Je.NAVIGATION_ABORTED+"",Je.NAVIGATION_CANCELLED+"",Je.NAVIGATION_DUPLICATED+"";function Ni(n,e){return Oe(new Error,{type:n,[Ev]:!0},e)}function Xn(n,e){return n instanceof Error&&Ev in n&&(e==null||!!(n.type&e))}const x0=["params","query","hash"];function N0(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of x0)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function O0(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<t.length;++r){const s=t[r].replace(gv," "),i=s.indexOf("="),o=da(i<0?s:s.slice(0,i)),a=i<0?null:da(s.slice(i+1));if(o in e){let l=e[o];Rn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Tm(n){let e="";for(let t in n){const r=n[t];if(t=g0(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Rn(r)?r.map(s=>s&&Ph(s)):[r&&Ph(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function M0(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Rn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const L0=Symbol(""),bm=Symbol(""),Fl=Symbol(""),Fd=Symbol(""),Dh=Symbol("");function Ro(){let n=[];function e(r){return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Vr(n,e,t,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=m=>{m===!1?l(Ni(Je.NAVIGATION_ABORTED,{from:t,to:e})):m instanceof Error?l(m):D0(m)?l(Ni(Je.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>n.call(r&&r.instances[s],e,t,u));let f=Promise.resolve(h);n.length<3&&(f=f.then(u)),f.catch(m=>l(m))})}function Qu(n,e,t,r,s=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(pv(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vr(u,t,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=i0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Vr(m,t,r,o,a,s)()}))}}return i}function F0(n,e){const t=[],r=[],s=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(u=>xi(u,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(u=>xi(u,l))||s.push(l))}return[t,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let U0=()=>location.protocol+"//"+location.host;function wv(n,e){const{pathname:t,search:r,hash:s}=e,i=n.indexOf("#");if(i>-1){let o=s.includes(n.slice(i))?n.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Am(a,"")}return Am(t,n)+r+s}function B0(n,e,t,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=wv(n,location),b=t.value,P=e.value;let k=0;if(m){if(t.value=g,e.value=m,o&&o===b){o=null;return}k=P?m.position-P.position:0}else r(g);s.forEach(U=>{U(t.value,b,{delta:k,type:kh.pop,direction:k?k>0?Wu.forward:Wu.back:Wu.unknown})})};function l(){o=t.value}function u(m){s.push(m);const g=()=>{const b=s.indexOf(m);b>-1&&s.splice(b,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Oe({},m.state,{scroll:Ll()}),"")}}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function Rm(n,e,t,r=!1,s=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:s?Ll():null}}function j0(n){const{history:e,location:t}=window,r={value:wv(n,t)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=n.indexOf("#"),m=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:U0()+n+l;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),t[h?"replace":"assign"](m)}}function o(l,u){i(l,Oe({},e.state,Rm(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const h=Oe({},s.value,e.state,{forward:l,scroll:Ll()});i(h.current,h,!0),i(l,Oe({},Rm(r.value,l,null),{position:h.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function G0(n){n=b0(n);const e=j0(n),t=B0(n,e.state,e.location,e.replace);function r(i,o=!0){o||t.pauseListeners(),history.go(i)}const s=Oe({location:"",base:n,go:r,createHref:S0.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let ws=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var lt=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(lt||{});const H0={type:ws.Static,value:""},q0=/[a-zA-Z0-9_]/;function K0(n){if(!n)return[[]];if(n==="/")return[[H0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(g){throw new Error(`ERR (${t})/"${u}": ${g}`)}let t=lt.Static,r=t;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(t===lt.Static?i.push({type:ws.Static,value:u}):t===lt.Param||t===lt.ParamRegExp||t===lt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ws.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==lt.ParamRegExp){r=t,t=lt.EscapeNext;continue}switch(t){case lt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),t=lt.Param):m();break;case lt.EscapeNext:m(),t=r;break;case lt.Param:l==="("?t=lt.ParamRegExp:q0.test(l)?m():(f(),t=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case lt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=lt.ParamRegExpEnd:h+=l;break;case lt.ParamRegExpEnd:f(),t=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}const Sm="[^/]+?",z0={sensitive:!1,strict:!1,start:!0,end:!0};var jt=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(jt||{});const W0=/[.+*?^${}()[\]/\\]/g;function Q0(n,e){const t=Oe({},z0,e),r=[];let s=t.start?"^":"";const i=[];for(const u of n){const h=u.length?[]:[jt.Root];t.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const m=u[f];let g=jt.Segment+(t.sensitive?jt.BonusCaseSensitive:0);if(m.type===ws.Static)f||(s+="/"),s+=m.value.replace(W0,"\\$&"),g+=jt.Static;else if(m.type===ws.Param){const{value:b,repeatable:P,optional:k,regexp:U}=m;i.push({name:b,repeatable:P,optional:k});const L=U||Sm;if(L!==Sm){g+=jt.BonusCustomRegExp;try{`${L}`}catch(G){throw new Error(`Invalid custom RegExp for param "${b}" (${L}): `+G.message)}}let F=P?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;f||(F=k&&u.length<2?`(?:/${F})`:"/"+F),k&&(F+="?"),s+=F,g+=jt.Dynamic,k&&(g+=jt.BonusOptional),P&&(g+=jt.BonusRepeatable),L===".*"&&(g+=jt.BonusWildcard)}h.push(g)}r.push(h)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=jt.BonusStrict}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",b=i[m-1];f[b.name]=g&&b.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const m of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of m)if(g.type===ws.Static)h+=g.value;else if(g.type===ws.Param){const{value:b,repeatable:P,optional:k}=g,U=b in u?u[b]:"";if(Rn(U)&&!P)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const L=Rn(U)?U.join("/"):U;if(!L)if(k)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);h+=L}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Y0(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===jt.Static+jt.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===jt.Static+jt.Segment?1:-1:0}function Tv(n,e){let t=0;const r=n.score,s=e.score;for(;t<r.length&&t<s.length;){const i=Y0(r[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-r.length)===1){if(Cm(r))return 1;if(Cm(s))return-1}return s.length-r.length}function Cm(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const X0={strict:!1,end:!0,sensitive:!1};function J0(n,e,t){const r=Q0(K0(n.path),t),s=Oe(r,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function $0(n,e){const t=[],r=new Map;e=Im(X0,e);function s(f){return r.get(f)}function i(f,m,g){const b=!g,P=km(f);P.aliasOf=g&&g.record;const k=Im(e,f),U=[P];if("alias"in f){const G=typeof f.alias=="string"?[f.alias]:f.alias;for(const $ of G)U.push(km(Oe({},P,{components:g?g.record.components:P.components,path:$,aliasOf:g?g.record:P})))}let L,F;for(const G of U){const{path:$}=G;if(m&&$[0]!=="/"){const ne=m.record.path,R=ne[ne.length-1]==="/"?"":"/";G.path=m.record.path+($&&R+$)}if(L=J0(G,m,k),g?g.alias.push(L):(F=F||L,F!==L&&F.alias.push(L),b&&f.name&&!Vm(L)&&o(f.name)),bv(L)&&l(L),P.children){const ne=P.children;for(let R=0;R<ne.length;R++)i(ne[R],L,g&&g.children[R])}g=g||L}return F?()=>{o(F)}:zo}function o(f){if(Av(f)){const m=r.get(f);m&&(r.delete(f),t.splice(t.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=t.indexOf(f);m>-1&&(t.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const m=tb(f,t);t.splice(m,0,f),f.record.name&&!Vm(f)&&r.set(f.record.name,f)}function u(f,m){let g,b={},P,k;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Ni(Je.MATCHER_NOT_FOUND,{location:f});k=g.record.name,b=Oe(Pm(m.params,g.keys.filter(F=>!F.optional).concat(g.parent?g.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),f.params&&Pm(f.params,g.keys.map(F=>F.name))),P=g.stringify(b)}else if(f.path!=null)P=f.path,g=t.find(F=>F.re.test(P)),g&&(b=g.parse(P),k=g.record.name);else{if(g=m.name?r.get(m.name):t.find(F=>F.re.test(m.path)),!g)throw Ni(Je.MATCHER_NOT_FOUND,{location:f,currentLocation:m});k=g.record.name,b=Oe({},m.params,f.params),P=g.stringify(b)}const U=[];let L=g;for(;L;)U.unshift(L.record),L=L.parent;return{name:k,path:P,params:b,matched:U,meta:eb(U)}}n.forEach(f=>i(f));function h(){t.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Pm(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function km(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Z0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Z0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function Vm(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function eb(n){return n.reduce((e,t)=>Oe(e,t.meta),{})}function tb(n,e){let t=0,r=e.length;for(;t!==r;){const i=t+r>>1;Tv(n,e[i])<0?r=i:t=i+1}const s=nb(n);return s&&(r=e.lastIndexOf(s,r-1)),r}function nb(n){let e=n;for(;e=e.parent;)if(bv(e)&&Tv(n,e)===0)return e}function bv({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Dm(n){const e=An(Fl),t=An(Fd),r=wt(()=>{const l=Ae(n.to);return e.resolve(l)}),s=wt(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],f=t.matched;if(!h||!f.length)return-1;const m=f.findIndex(xi.bind(null,h));if(m>-1)return m;const g=xm(l[u-2]);return u>1&&xm(h)===g&&f[f.length-1].path!==g?f.findIndex(xi.bind(null,l[u-2])):m}),i=wt(()=>s.value>-1&&ab(t.params,r.value.params)),o=wt(()=>s.value>-1&&s.value===t.matched.length-1&&Iv(t.params,r.value.params));function a(l={}){if(ob(l)){const u=e[Ae(n.replace)?"replace":"push"](Ae(n.to)).catch(zo);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:wt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function rb(n){return n.length===1?n[0]:n}const sb=Dy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Dm,setup(n,{slots:e}){const t=Pl(Dm(n)),{options:r}=An(Fl),s=wt(()=>({[Nm(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Nm(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&rb(e.default(t));return n.custom?i:Md("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),ib=sb;function ob(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function ab(n,e){for(const t in e){const r=e[t],s=n[t];if(typeof r=="string"){if(r!==s)return!1}else if(!Rn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function xm(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Nm=(n,e,t)=>n??e??t,cb=Dy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=An(Dh),s=wt(()=>n.route||r.value),i=An(bm,0),o=wt(()=>{let u=Ae(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=wt(()=>s.value.matched[o.value]);gc(bm,wt(()=>o.value+1)),gc(L0,a),gc(Dh,s);const l=_e();return Fr(()=>[l.value,a.value,n.name],([u,h,f],[m,g,b])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!xi(h,g)||!m)&&(h.enterCallbacks[f]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,h=n.name,f=a.value,m=f&&f.components[h];if(!m)return Om(t.default,{Component:m,route:u});const g=f.props[h],b=g?g===!0?u.params:typeof g=="function"?g(u):g:null,k=Md(m,Oe({},b,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Om(t.default,{Component:k,route:u})||k}}});function Om(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const lb=cb;function ub(n){const e=$0(n.routes,n),t=n.parseQuery||O0,r=n.stringifyQuery||Tm,s=n.history,i=Ro(),o=Ro(),a=Ro(),l=cT(wr);let u=wr;di&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ku.bind(null,C=>""+C),f=Ku.bind(null,y0),m=Ku.bind(null,da);function g(C,O){let Y,K;return Av(C)?(Y=e.getRecordMatcher(C),K=O):K=C,e.addRoute(K,Y)}function b(C){const O=e.getRecordMatcher(C);O&&e.removeRoute(O)}function P(){return e.getRoutes().map(C=>C.record)}function k(C){return!!e.getRecordMatcher(C)}function U(C,O){if(O=Oe({},O||l.value),typeof C=="string"){const V=zu(t,C,O.path),H=e.resolve({path:V.path},O),q=s.createHref(V.fullPath);return Oe(V,H,{params:m(H.params),hash:da(V.hash),redirectedFrom:void 0,href:q})}let Y;if(C.path!=null)Y=Oe({},C,{path:zu(t,C.path,O.path).path});else{const V=Oe({},C.params);for(const H in V)V[H]==null&&delete V[H];Y=Oe({},C,{params:f(V)}),O.params=f(O.params)}const K=e.resolve(Y,O),pe=C.hash||"";K.params=h(m(K.params));const E=A0(r,Oe({},C,{hash:m0(pe),path:K.path})),S=s.createHref(E);return Oe({fullPath:E,hash:pe,query:r===Tm?M0(C.query):C.query||{}},K,{redirectedFrom:void 0,href:S})}function L(C){return typeof C=="string"?zu(t,C,l.value.path):Oe({},C)}function F(C,O){if(u!==C)return Ni(Je.NAVIGATION_CANCELLED,{from:O,to:C})}function G(C){return R(C)}function $(C){return G(Oe(L(C),{replace:!0}))}function ne(C,O){const Y=C.matched[C.matched.length-1];if(Y&&Y.redirect){const{redirect:K}=Y;let pe=typeof K=="function"?K(C,O):K;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=L(pe):{path:pe},pe.params={}),Oe({query:C.query,hash:C.hash,params:pe.path!=null?{}:C.params},pe)}}function R(C,O){const Y=u=U(C),K=l.value,pe=C.state,E=C.force,S=C.replace===!0,V=ne(Y,K);if(V)return R(Oe(L(V),{state:typeof V=="object"?Oe({},pe,V.state):pe,force:E,replace:S}),O||Y);const H=Y;H.redirectedFrom=O;let q;return!E&&E0(r,K,Y)&&(q=Ni(Je.NAVIGATION_DUPLICATED,{to:H,from:K}),Ft(K,K,!0,!1)),(q?Promise.resolve(q):A(H,K)).catch(j=>Xn(j)?Xn(j,Je.NAVIGATION_GUARD_REDIRECT)?j:cn(j):Te(j,H,K)).then(j=>{if(j){if(Xn(j,Je.NAVIGATION_GUARD_REDIRECT))return R(Oe({replace:S},L(j.to),{state:typeof j.to=="object"?Oe({},pe,j.to.state):pe,force:E}),O||H)}else j=w(H,K,!0,S,pe);return T(H,K,j),j})}function v(C,O){const Y=F(C,O);return Y?Promise.reject(Y):Promise.resolve()}function y(C){const O=Kt.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(C):C()}function A(C,O){let Y;const[K,pe,E]=F0(C,O);Y=Qu(K.reverse(),"beforeRouteLeave",C,O);for(const V of K)V.leaveGuards.forEach(H=>{Y.push(Vr(H,C,O))});const S=v.bind(null,C,O);return Y.push(S),se(Y).then(()=>{Y=[];for(const V of i.list())Y.push(Vr(V,C,O));return Y.push(S),se(Y)}).then(()=>{Y=Qu(pe,"beforeRouteUpdate",C,O);for(const V of pe)V.updateGuards.forEach(H=>{Y.push(Vr(H,C,O))});return Y.push(S),se(Y)}).then(()=>{Y=[];for(const V of E)if(V.beforeEnter)if(Rn(V.beforeEnter))for(const H of V.beforeEnter)Y.push(Vr(H,C,O));else Y.push(Vr(V.beforeEnter,C,O));return Y.push(S),se(Y)}).then(()=>(C.matched.forEach(V=>V.enterCallbacks={}),Y=Qu(E,"beforeRouteEnter",C,O,y),Y.push(S),se(Y))).then(()=>{Y=[];for(const V of o.list())Y.push(Vr(V,C,O));return Y.push(S),se(Y)}).catch(V=>Xn(V,Je.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function T(C,O,Y){a.list().forEach(K=>y(()=>K(C,O,Y)))}function w(C,O,Y,K,pe){const E=F(C,O);if(E)return E;const S=O===wr,V=di?history.state:{};Y&&(K||S?s.replace(C.fullPath,Oe({scroll:S&&V&&V.scroll},pe)):s.push(C.fullPath,pe)),l.value=C,Ft(C,O,Y,S),cn()}let I;function we(){I||(I=s.listen((C,O,Y)=>{if(!Yt.listening)return;const K=U(C),pe=ne(K,Yt.currentRoute.value);if(pe){R(Oe(pe,{replace:!0,force:!0}),K).catch(zo);return}u=K;const E=l.value;di&&k0(wm(E.fullPath,Y.delta),Ll()),A(K,E).catch(S=>Xn(S,Je.NAVIGATION_ABORTED|Je.NAVIGATION_CANCELLED)?S:Xn(S,Je.NAVIGATION_GUARD_REDIRECT)?(R(Oe(L(S.to),{force:!0}),K).then(V=>{Xn(V,Je.NAVIGATION_ABORTED|Je.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===kh.pop&&s.go(-1,!1)}).catch(zo),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),Te(S,K,E))).then(S=>{S=S||w(K,E,!1),S&&(Y.delta&&!Xn(S,Je.NAVIGATION_CANCELLED)?s.go(-Y.delta,!1):Y.type===kh.pop&&Xn(S,Je.NAVIGATION_ABORTED|Je.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),T(K,E,S)}).catch(zo)}))}let je=Ro(),Ne=Ro(),ke;function Te(C,O,Y){cn(C);const K=Ne.list();return K.length?K.forEach(pe=>pe(C,O,Y)):console.error(C),Promise.reject(C)}function vt(){return ke&&l.value!==wr?Promise.resolve():new Promise((C,O)=>{je.add([C,O])})}function cn(C){return ke||(ke=!C,we(),je.list().forEach(([O,Y])=>C?Y(C):O()),je.reset()),C}function Ft(C,O,Y,K){const{scrollBehavior:pe}=n;if(!di||!pe)return Promise.resolve();const E=!Y&&V0(wm(C.fullPath,0))||(K||!Y)&&history.state&&history.state.scroll||null;return Ay().then(()=>pe(C,O,E)).then(S=>S&&P0(S)).catch(S=>Te(S,C,O))}const at=C=>s.go(C);let ln;const Kt=new Set,Yt={currentRoute:l,listening:!0,addRoute:g,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:P,resolve:U,options:n,push:G,replace:$,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ne.add,isReady:vt,install(C){C.component("RouterLink",ib),C.component("RouterView",lb),C.config.globalProperties.$router=Yt,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>Ae(l)}),di&&!ln&&l.value===wr&&(ln=!0,G(s.location).catch(K=>{}));const O={};for(const K in wr)Object.defineProperty(O,K,{get:()=>l.value[K],enumerable:!0});C.provide(Fl,Yt),C.provide(Fd,_y(O)),C.provide(Dh,l);const Y=C.unmount;Kt.add(C),C.unmount=function(){Kt.delete(C),Kt.size<1&&(u=wr,I&&I(),I=null,l.value=wr,ln=!1,ke=!1),Y()}}};function se(C){return C.reduce((O,Y)=>O.then(()=>y(Y)),Promise.resolve())}return Yt}function qs(){return An(Fl)}function hb(n){return An(Fd)}const ic=_e([]);let db=0;function Ul(){return{toasts:ic,showToast:(e,t=2e3)=>{const r=++db;ic.value.push({id:r,message:e}),setTimeout(()=>{ic.value=ic.value.filter(s=>s.id!==r)},t)}}}const Ks=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},fb={class:"toast_container"},pb={__name:"Toast",setup(n){const{toasts:e}=Ul();return(t,r)=>(oe(),he("div",fb,[De(K1,{name:"toast",tag:"div"},{default:Fn(()=>[(oe(!0),he(Ze,null,Ho(Ae(e),s=>(oe(),he("div",{key:s.id,class:"toast_item"},$e(s.message),1))),128))]),_:1})]))}},mb=Ks(pb,[["__scopeId","data-v-85e050dc"]]),gb={class:"app_root"},_b={__name:"App",setup(n){const e=hb(),t=_e("slide-left");return Fr(()=>e.path,(r,s)=>{const i=["/splash","/signup"];if(i.includes(r)||i.includes(s)){t.value="fade";return}s==="/mypage"&&r==="/report"?t.value="slide-right":t.value="slide-left"},{immediate:!0}),(r,s)=>{const i=VT("router-view");return oe(),he("div",gb,[De(Di,{name:t.value,mode:"out-in"},{default:Fn(()=>[De(i)]),_:1},8,["name"]),De(mb)])}}},yb=Ks(_b,[["__scopeId","data-v-5219c484"]]),vb={class:"logo_wrapper"},Ib={__name:"index",setup(n){const e=qs();return on(()=>{setTimeout(()=>{e.replace("/signup")},2e3)}),(t,r)=>(oe(),he("div",vb,[...r[0]||(r[0]=[Un('<div class="logo" data-v-a7296ccd><svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a7296ccd><g clip-path="url(#clip0_17_220)" data-v-a7296ccd><path d="M24 27H48" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-a7296ccd></path><path d="M24 39H34.5" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-a7296ccd></path><path d="M31.5 58.5L27 54H18C15.6131 54 13.3239 53.0518 11.636 51.364C9.94821 49.6761 9 47.3869 9 45V21C9 18.6131 9.94821 16.3239 11.636 14.636C13.3239 12.9482 15.6131 12 18 12H54C56.3869 12 58.6761 12.9482 60.364 14.636C62.0518 16.3239 63 18.6131 63 21V33" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-a7296ccd></path><path d="M54 66L64.05 56.148C64.6663 55.5499 65.1565 54.8345 65.4918 54.0438C65.827 53.2532 66.0004 52.4034 66.0018 51.5446C66.0032 50.6859 65.8326 49.8355 65.4999 49.0438C65.1672 48.2521 64.6793 47.535 64.065 46.935C62.8114 45.709 61.1286 45.021 59.3751 45.0177C57.6217 45.0143 55.9363 45.6958 54.678 46.917L54.006 47.577L53.337 46.917C52.0835 45.6919 50.4014 45.0045 48.6486 45.0011C46.8959 44.9977 45.2111 45.6787 43.953 46.899C43.3365 47.4968 42.846 48.2121 42.5105 49.0026C42.175 49.7932 42.0013 50.6429 41.9996 51.5017C41.998 52.3604 42.1684 53.2108 42.5008 54.0027C42.8332 54.7945 43.3208 55.5117 43.935 56.112L54 66Z" stroke="#7B509F" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-a7296ccd></path></g><defs data-v-a7296ccd><clipPath id="clip0_17_220" data-v-a7296ccd><rect width="72" height="72" fill="white" data-v-a7296ccd></rect></clipPath></defs></svg><p data-v-a7296ccd>BUG REPORT</p></div>',1)])]))}},Ab=Ks(Ib,[["__scopeId","data-v-a7296ccd"]]),Eb=()=>{};var Mm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},wb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(t[h],t[f],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new Tb;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Tb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bb=function(n){const e=Rv(n);return Sv.encodeByteArray(e,!0)},Wc=function(n){return bb(n).replace(/\./g,"")},Cv=function(n){try{return Sv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=()=>Pv().__FIREBASE_DEFAULTS__,Sb=()=>{if(typeof process>"u"||typeof Mm>"u")return;const n=Mm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Cb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cv(n[1]);return e&&JSON.parse(e)},Bl=()=>{try{return Eb()||Rb()||Sb()||Cb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kv=n=>Bl()?.emulatorHosts?.[n],Pb=n=>{const e=kv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vv=()=>Bl()?.config,Dv=n=>Bl()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ud(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Wc(JSON.stringify(t)),Wc(JSON.stringify(o)),""].join(".")}const Wo={};function Db(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wo))Wo[e]?n.emulator.push(e):n.prod.push(e);return n}function xb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Lm=!1;function xv(n,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||Wo[n]===e||Wo[n]||Lm)return;Wo[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=Db().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Lm=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=xb(r),g=t("text"),b=document.getElementById(g)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),U=t("preprendIcon"),L=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const F=m.element;a(F),h(k,P);const G=u();l(L,U),F.append(L,b,k,G),document.body.appendChild(F)}i?(b.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function Nv(){const n=Bl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ob(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Lb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fb(){const n=dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ov(){return!Nv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mv(){return!Nv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Lv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ub(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="FirebaseError";class Wn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Bb,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jb(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Wn(s,a,r)}}function jb(n,e){return n.replace(Gb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Gb=/\{\$([^}]+)}/g;function Hb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ns(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(Fm(i)&&Fm(o)){if(!Ns(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Fm(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qb(n,e){const t=new Kb(n,e);return t.subscribe.bind(t)}class Kb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zb(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Yu),s.error===void 0&&(s.error=Yu),s.complete===void 0&&(s.complete=Yu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(n){return n&&n._delegate?n._delegate:n}class Wr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new kb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yb(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qb(n){return n===ps?void 0:n}function Yb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Re||(Re={}));const Jb={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},$b=Re.INFO,Zb={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},eR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Zb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bd{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=eR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const tR=(n,e)=>e.some(t=>n instanceof t);let Um,Bm;function nR(){return Um||(Um=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rR(){return Bm||(Bm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,xh=new WeakMap,Uv=new WeakMap,Xu=new WeakMap,jd=new WeakMap;function sR(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Ur(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Fv.set(t,n)}).catch(()=>{}),jd.set(e,n),e}function iR(n){if(xh.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});xh.set(n,e)}let Nh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Uv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oR(n){Nh=n(Nh)}function aR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ju(this),e,...t);return Uv.set(r,e.sort?e.sort():[e]),Ur(r)}:rR().includes(n)?function(...e){return n.apply(Ju(this),e),Ur(Fv.get(this))}:function(...e){return Ur(n.apply(Ju(this),e))}}function cR(n){return typeof n=="function"?aR(n):(n instanceof IDBTransaction&&iR(n),tR(n,nR())?new Proxy(n,Nh):n)}function Ur(n){if(n instanceof IDBRequest)return sR(n);if(Xu.has(n))return Xu.get(n);const e=cR(n);return e!==n&&(Xu.set(n,e),jd.set(e,n)),e}const Ju=n=>jd.get(n);function lR(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Ur(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ur(o.result),l.oldVersion,l.newVersion,Ur(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const uR=["get","getKey","getAll","getAllKeys","count"],hR=["put","add","delete","clear"],$u=new Map;function jm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=hR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uR.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&l.done]))[0]};return $u.set(e,i),i}oR(n=>({...n,get:(e,t,r)=>jm(e,t)||n.get(e,t,r),has:(e,t)=>!!jm(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function fR(n){return n.getComponent()?.type==="VERSION"}const Oh="@firebase/app",Gm="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Bd("@firebase/app"),pR="@firebase/app-compat",mR="@firebase/analytics-compat",gR="@firebase/analytics",_R="@firebase/app-check-compat",yR="@firebase/app-check",vR="@firebase/auth",IR="@firebase/auth-compat",AR="@firebase/database",ER="@firebase/data-connect",wR="@firebase/database-compat",TR="@firebase/functions",bR="@firebase/functions-compat",RR="@firebase/installations",SR="@firebase/installations-compat",CR="@firebase/messaging",PR="@firebase/messaging-compat",kR="@firebase/performance",VR="@firebase/performance-compat",DR="@firebase/remote-config",xR="@firebase/remote-config-compat",NR="@firebase/storage",OR="@firebase/storage-compat",MR="@firebase/firestore",LR="@firebase/ai",FR="@firebase/firestore-compat",UR="firebase",BR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="[DEFAULT]",jR={[Oh]:"fire-core",[pR]:"fire-core-compat",[gR]:"fire-analytics",[mR]:"fire-analytics-compat",[yR]:"fire-app-check",[_R]:"fire-app-check-compat",[vR]:"fire-auth",[IR]:"fire-auth-compat",[AR]:"fire-rtdb",[ER]:"fire-data-connect",[wR]:"fire-rtdb-compat",[TR]:"fire-fn",[bR]:"fire-fn-compat",[RR]:"fire-iid",[SR]:"fire-iid-compat",[CR]:"fire-fcm",[PR]:"fire-fcm-compat",[kR]:"fire-perf",[VR]:"fire-perf-compat",[DR]:"fire-rc",[xR]:"fire-rc-compat",[NR]:"fire-gcs",[OR]:"fire-gcs-compat",[MR]:"fire-fst",[FR]:"fire-fst-compat",[LR]:"fire-vertex","fire-js":"fire-js",[UR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,GR=new Map,Lh=new Map;function Hm(n,e){try{n.container.addComponent(e)}catch(t){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Os(n){const e=n.name;if(Lh.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,n);for(const t of Qc.values())Hm(t,n);for(const t of GR.values())Hm(t,n);return!0}function jl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Va("app","Firebase",HR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=BR;function Bv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Mh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(t||(t=Vv()),!t)throw Br.create("no-options");const i=Qc.get(s);if(i){if(Ns(t,i.options)&&Ns(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new Xb(s);for(const l of Lh.values())o.addComponent(l);const a=new qR(t,r,o);return Qc.set(s,a),a}function jv(n=Mh){const e=Qc.get(n);if(!e&&n===Mh&&Vv())return Bv();if(!e)throw Br.create("no-app",{appName:n});return e}function Bn(n,e,t){let r=jR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(o.join(" "));return}Os(new Wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebase-heartbeat-database",zR=1,fa="firebase-heartbeat-store";let Zu=null;function Gv(){return Zu||(Zu=lR(KR,zR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fa)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),Zu}async function WR(n){try{const t=(await Gv()).transaction(fa),r=await t.objectStore(fa).get(Hv(n));return await t.done,r}catch(e){if(e instanceof Wn)cr.warn(e.message);else{const t=Br.create("idb-get",{originalErrorMessage:e?.message});cr.warn(t.message)}}}async function qm(n,e){try{const r=(await Gv()).transaction(fa,"readwrite");await r.objectStore(fa).put(e,Hv(n)),await r.done}catch(t){if(t instanceof Wn)cr.warn(t.message);else{const r=Br.create("idb-set",{originalErrorMessage:t?.message});cr.warn(r.message)}}}function Hv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,YR=30;class XR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $R(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Km();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>YR){const s=ZR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Km(),{heartbeatsToSend:t,unsentEntries:r}=JR(this._heartbeatsCache.heartbeats),s=Wc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return cr.warn(e),""}}}function Km(){return new Date().toISOString().substring(0,10)}function JR(n,e=QR){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zm(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),zm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class $R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lv()?Ub().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zm(n){return Wc(JSON.stringify({version:2,heartbeats:n})).length}function ZR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n){Os(new Wr("platform-logger",e=>new dR(e),"PRIVATE")),Os(new Wr("heartbeat",e=>new XR(e),"PRIVATE")),Bn(Oh,Gm,n),Bn(Oh,Gm,"esm2020"),Bn("fire-js","")}eS("");var tS="firebase",nS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(tS,nS,"app");var Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,qv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,v){function y(){}y.prototype=v.prototype,R.F=v.prototype,R.prototype=new y,R.prototype.constructor=R,R.D=function(A,T,w){for(var I=Array(arguments.length-2),we=2;we<arguments.length;we++)I[we-2]=arguments[we];return v.prototype[T].apply(A,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,v,y){y||(y=0);const A=Array(16);if(typeof v=="string")for(var T=0;T<16;++T)A[T]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(T=0;T<16;++T)A[T]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=R.g[0],y=R.g[1],T=R.g[2];let w=R.g[3],I;I=v+(w^y&(T^w))+A[0]+3614090360&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+A[1]+3905402710&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+A[2]+606105819&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+A[3]+3250441966&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+A[4]+4118548399&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+A[5]+1200080426&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+A[6]+2821735955&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+A[7]+4249261313&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+A[8]+1770035416&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+A[9]+2336552879&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+A[10]+4294925233&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+A[11]+2304563134&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+A[12]+1804603682&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+A[13]+4254626195&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+A[14]+2792965006&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+A[15]+1236535329&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(T^w&(y^T))+A[1]+4129170786&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+A[6]+3225465664&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+A[11]+643717713&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+A[0]+3921069994&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+A[5]+3593408605&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+A[10]+38016083&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+A[15]+3634488961&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+A[4]+3889429448&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+A[9]+568446438&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+A[14]+3275163606&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+A[3]+4107603335&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+A[8]+1163531501&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+A[13]+2850285829&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+A[2]+4243563512&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+A[7]+1735328473&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+A[12]+2368359562&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(y^T^w)+A[5]+4294588738&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+A[8]+2272392833&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+A[11]+1839030562&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+A[14]+4259657740&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+A[1]+2763975236&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+A[4]+1272893353&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+A[7]+4139469664&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+A[10]+3200236656&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+A[13]+681279174&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+A[0]+3936430074&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+A[3]+3572445317&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+A[6]+76029189&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+A[9]+3654602809&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+A[12]+3873151461&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+A[15]+530742520&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+A[2]+3299628645&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(T^(y|~w))+A[0]+4096336452&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+A[7]+1126891415&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+A[14]+2878612391&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+A[5]+4237533241&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+A[12]+1700485571&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+A[3]+2399980690&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+A[10]+4293915773&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+A[1]+2240044497&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+A[8]+1873313359&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+A[15]+4264355552&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+A[6]+2734768916&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+A[13]+1309151649&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+A[4]+4149444226&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+A[11]+3174756917&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+A[2]+718787259&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+v&4294967295,R.g[1]=R.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+T&4294967295,R.g[3]=R.g[3]+w&4294967295}r.prototype.v=function(R,v){v===void 0&&(v=R.length);const y=v-this.blockSize,A=this.C;let T=this.h,w=0;for(;w<v;){if(T==0)for(;w<=y;)s(this,R,w),w+=this.blockSize;if(typeof R=="string"){for(;w<v;)if(A[T++]=R.charCodeAt(w++),T==this.blockSize){s(this,A),T=0;break}}else for(;w<v;)if(A[T++]=R[w++],T==this.blockSize){s(this,A),T=0;break}}this.h=T,this.o+=v},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var v=1;v<R.length-8;++v)R[v]=0;v=this.o*8;for(var y=R.length-8;y<R.length;++y)R[y]=v&255,v/=256;for(this.v(R),R=Array(16),v=0,y=0;y<4;++y)for(let A=0;A<32;A+=8)R[v++]=this.g[y]>>>A&255;return R};function i(R,v){var y=a;return Object.prototype.hasOwnProperty.call(y,R)?y[R]:y[R]=v(R)}function o(R,v){this.h=v;const y=[];let A=!0;for(let T=R.length-1;T>=0;T--){const w=R[T]|0;A&&w==v||(y[T]=w,A=!1)}this.g=y}var a={};function l(R){return-128<=R&&R<128?i(R,function(v){return new o([v|0],v<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(R<0)return k(u(-R));const v=[];let y=1;for(let A=0;R>=y;A++)v[A]=R/y|0,y*=4294967296;return new o(v,0)}function h(R,v){if(R.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(R.charAt(0)=="-")return k(h(R.substring(1),v));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(v,8));let A=f;for(let w=0;w<R.length;w+=8){var T=Math.min(8,R.length-w);const I=parseInt(R.substring(w,w+T),v);T<8?(T=u(Math.pow(v,T)),A=A.j(T).add(u(I))):(A=A.j(y),A=A.add(u(I)))}return A}var f=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-k(this).m();let R=0,v=1;for(let y=0;y<this.g.length;y++){const A=this.i(y);R+=(A>=0?A:4294967296+A)*v,v*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(P(this))return"-"+k(this).toString(R);const v=u(Math.pow(R,6));var y=this;let A="";for(;;){const T=G(y,v).g;y=U(y,T.j(v));let w=((y.g.length>0?y.g[0]:y.h)>>>0).toString(R);if(y=T,b(y))return w+A;for(;w.length<6;)w="0"+w;A=w+A}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let v=0;v<R.g.length;v++)if(R.g[v]!=0)return!1;return!0}function P(R){return R.h==-1}n.l=function(R){return R=U(this,R),P(R)?-1:b(R)?0:1};function k(R){const v=R.g.length,y=[];for(let A=0;A<v;A++)y[A]=~R.g[A];return new o(y,~R.h).add(m)}n.abs=function(){return P(this)?k(this):this},n.add=function(R){const v=Math.max(this.g.length,R.g.length),y=[];let A=0;for(let T=0;T<=v;T++){let w=A+(this.i(T)&65535)+(R.i(T)&65535),I=(w>>>16)+(this.i(T)>>>16)+(R.i(T)>>>16);A=I>>>16,w&=65535,I&=65535,y[T]=I<<16|w}return new o(y,y[y.length-1]&-2147483648?-1:0)};function U(R,v){return R.add(k(v))}n.j=function(R){if(b(this)||b(R))return f;if(P(this))return P(R)?k(this).j(k(R)):k(k(this).j(R));if(P(R))return k(this.j(k(R)));if(this.l(g)<0&&R.l(g)<0)return u(this.m()*R.m());const v=this.g.length+R.g.length,y=[];for(var A=0;A<2*v;A++)y[A]=0;for(A=0;A<this.g.length;A++)for(let T=0;T<R.g.length;T++){const w=this.i(A)>>>16,I=this.i(A)&65535,we=R.i(T)>>>16,je=R.i(T)&65535;y[2*A+2*T]+=I*je,L(y,2*A+2*T),y[2*A+2*T+1]+=w*je,L(y,2*A+2*T+1),y[2*A+2*T+1]+=I*we,L(y,2*A+2*T+1),y[2*A+2*T+2]+=w*we,L(y,2*A+2*T+2)}for(R=0;R<v;R++)y[R]=y[2*R+1]<<16|y[2*R];for(R=v;R<2*v;R++)y[R]=0;return new o(y,0)};function L(R,v){for(;(R[v]&65535)!=R[v];)R[v+1]+=R[v]>>>16,R[v]&=65535,v++}function F(R,v){this.g=R,this.h=v}function G(R,v){if(b(v))throw Error("division by zero");if(b(R))return new F(f,f);if(P(R))return v=G(k(R),v),new F(k(v.g),k(v.h));if(P(v))return v=G(R,k(v)),new F(k(v.g),v.h);if(R.g.length>30){if(P(R)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var y=m,A=v;A.l(R)<=0;)y=$(y),A=$(A);var T=ne(y,1),w=ne(A,1);for(A=ne(A,2),y=ne(y,2);!b(A);){var I=w.add(A);I.l(R)<=0&&(T=T.add(y),w=I),A=ne(A,1),y=ne(y,1)}return v=U(R,T.j(v)),new F(T,v)}for(T=f;R.l(v)>=0;){for(y=Math.max(1,Math.floor(R.m()/v.m())),A=Math.ceil(Math.log(y)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),w=u(y),I=w.j(v);P(I)||I.l(R)>0;)y-=A,w=u(y),I=w.j(v);b(w)&&(w=m),T=T.add(w),R=U(R,I)}return new F(T,R)}n.B=function(R){return G(this,R).h},n.and=function(R){const v=Math.max(this.g.length,R.g.length),y=[];for(let A=0;A<v;A++)y[A]=this.i(A)&R.i(A);return new o(y,this.h&R.h)},n.or=function(R){const v=Math.max(this.g.length,R.g.length),y=[];for(let A=0;A<v;A++)y[A]=this.i(A)|R.i(A);return new o(y,this.h|R.h)},n.xor=function(R){const v=Math.max(this.g.length,R.g.length),y=[];for(let A=0;A<v;A++)y[A]=this.i(A)^R.i(A);return new o(y,this.h^R.h)};function $(R){const v=R.g.length+1,y=[];for(let A=0;A<v;A++)y[A]=R.i(A)<<1|R.i(A-1)>>>31;return new o(y,R.h)}function ne(R,v){const y=v>>5;v%=32;const A=R.g.length-y,T=[];for(let w=0;w<A;w++)T[w]=v>0?R.i(w+y)>>>v|R.i(w+y+1)<<32-v:R.i(w+y);return new o(T,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,jr=o}).apply(typeof Wm<"u"?Wm:typeof self<"u"?self:typeof window<"u"?window:{});var oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kv,No,zv,Ic,Fh,Wv,Qv,Yv;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oc=="object"&&oc];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function s(c,d){if(d)e:{var p=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var x=c[_];if(!(x in p))break e;p=p[x]}c=c[c.length-1],_=p[c],d=d(_),d!=_&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(d){var p=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&p.push([_,d[_]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,p){return c.call.apply(c.bind,arguments)}function u(c,d,p){return u=l,u.apply(null,arguments)}function h(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function f(c,d){function p(){}p.prototype=d.prototype,c.Z=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Ob=function(_,x,M){for(var Z=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Z[Ie-2]=arguments[Ie];return d.prototype[x].apply(_,Z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const p=Array(d);for(let _=0;_<d;_++)p[_]=c[_];return p}return[]}function b(c,d){for(let _=1;_<arguments.length;_++){const x=arguments[_];var p=typeof x;if(p=p!="object"?p:x?Array.isArray(x)?"array":p:"null",p=="array"||p=="object"&&typeof x.length=="number"){p=c.length||0;const M=x.length||0;c.length=p+M;for(let Z=0;Z<M;Z++)c[p+Z]=x[Z]}else c.push(x)}}class P{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(c){o.setTimeout(()=>{throw c},0)}function U(){var c=R;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class L{constructor(){this.h=this.g=null}add(d,p){const _=F.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var F=new P(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let $,ne=!1,R=new L,v=()=>{const c=Promise.resolve(void 0);$=()=>{c.then(y)}};function y(){for(var c;c=U();){try{c.h.call(c.g)}catch(p){k(p)}var d=F;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}ne=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};o.addEventListener("test",p,d),o.removeEventListener("test",p,d)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function we(c,d){T.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(we,T),we.prototype.init=function(c,d){const p=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function ke(c,d,p,_,x){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=x,this.key=++Ne,this.da=this.fa=!1}function Te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vt(c,d,p){for(const _ in c)d.call(p,c[_],_,c)}function cn(c,d){for(const p in c)d.call(void 0,c[p],p,c)}function Ft(c){const d={};for(const p in c)d[p]=c[p];return d}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ln(c,d){let p,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(p in _)c[p]=_[p];for(let M=0;M<at.length;M++)p=at[M],Object.prototype.hasOwnProperty.call(_,p)&&(c[p]=_[p])}}function Kt(c){this.src=c,this.g={},this.h=0}Kt.prototype.add=function(c,d,p,_,x){const M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);const Z=se(c,d,_,x);return Z>-1?(d=c[Z],p||(d.fa=!1)):(d=new ke(d,this.src,M,!!_,x),d.fa=p,c.push(d)),d};function Yt(c,d){const p=d.type;if(p in c.g){var _=c.g[p],x=Array.prototype.indexOf.call(_,d,void 0),M;(M=x>=0)&&Array.prototype.splice.call(_,x,1),M&&(Te(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function se(c,d,p,_){for(let x=0;x<c.length;++x){const M=c[x];if(!M.da&&M.listener==d&&M.capture==!!p&&M.ha==_)return x}return-1}var C="closure_lm_"+(Math.random()*1e6|0),O={};function Y(c,d,p,_,x){if(Array.isArray(d)){for(let M=0;M<d.length;M++)Y(c,d[M],p,_,x);return null}return p=te(p),c&&c[je]?c.J(d,p,a(_)?!!_.capture:!1,x):K(c,d,p,!1,_,x)}function K(c,d,p,_,x,M){if(!d)throw Error("Invalid event type");const Z=a(x)?!!x.capture:!!x;let Ie=q(c);if(Ie||(c[C]=Ie=new Kt(c)),p=Ie.add(d,p,_,Z,M),p.proxy)return p;if(_=pe(),p.proxy=_,_.src=c,_.listener=p,c.addEventListener)w||(x=Z),x===void 0&&(x=!1),c.addEventListener(d.toString(),_,x);else if(c.attachEvent)c.attachEvent(V(d.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function pe(){function c(p){return d.call(c.src,c.listener,p)}const d=H;return c}function E(c,d,p,_,x){if(Array.isArray(d))for(var M=0;M<d.length;M++)E(c,d[M],p,_,x);else _=a(_)?!!_.capture:!!_,p=te(p),c&&c[je]?(c=c.i,M=String(d).toString(),M in c.g&&(d=c.g[M],p=se(d,p,_,x),p>-1&&(Te(d[p]),Array.prototype.splice.call(d,p,1),d.length==0&&(delete c.g[M],c.h--)))):c&&(c=q(c))&&(d=c.g[d.toString()],c=-1,d&&(c=se(d,p,_,x)),(p=c>-1?d[c]:null)&&S(p))}function S(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[je])Yt(d.i,c);else{var p=c.type,_=c.proxy;d.removeEventListener?d.removeEventListener(p,_,c.capture):d.detachEvent?d.detachEvent(V(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=q(d))?(Yt(p,c),p.h==0&&(p.src=null,d[C]=null)):Te(c)}}}function V(c){return c in O?O[c]:O[c]="on"+c}function H(c,d){if(c.da)c=!0;else{d=new we(d,this);const p=c.listener,_=c.ha||c.src;c.fa&&S(c),c=p.call(_,d)}return c}function q(c){return c=c[C],c instanceof Kt?c:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(c){return typeof c=="function"?c:(c[j]||(c[j]=function(d){return c.handleEvent(d)}),c[j])}function X(){A.call(this),this.i=new Kt(this),this.M=this,this.G=null}f(X,A),X.prototype[je]=!0,X.prototype.removeEventListener=function(c,d,p,_){E(this,c,d,p,_)};function W(c,d){var p,_=c.G;if(_)for(p=[];_;_=_.G)p.push(_);if(c=c.M,_=d.type||d,typeof d=="string")d=new T(d,c);else if(d instanceof T)d.target=d.target||c;else{var x=d;d=new T(_,c),ln(d,x)}x=!0;let M,Z;if(p)for(Z=p.length-1;Z>=0;Z--)M=d.g=p[Z],x=Q(M,_,!0,d)&&x;if(M=d.g=c,x=Q(M,_,!0,d)&&x,x=Q(M,_,!1,d)&&x,p)for(Z=0;Z<p.length;Z++)M=d.g=p[Z],x=Q(M,_,!1,d)&&x}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const p=c.g[d];for(let _=0;_<p.length;_++)Te(p[_]);delete c.g[d],c.h--}}this.G=null},X.prototype.J=function(c,d,p,_){return this.i.add(String(c),d,!1,p,_)},X.prototype.K=function(c,d,p,_){return this.i.add(String(c),d,!0,p,_)};function Q(c,d,p,_){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let x=!0;for(let M=0;M<d.length;++M){const Z=d[M];if(Z&&!Z.da&&Z.capture==p){const Ie=Z.listener,ct=Z.ha||Z.src;Z.fa&&Yt(c.i,Z),x=Ie.call(ct,_)!==!1&&x}}return x&&!_.defaultPrevented}function de(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function re(c){c.g=de(()=>{c.g=null,c.i&&(c.i=!1,re(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class ue extends A{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(c){A.call(this),this.h=c,this.g={}}f(fe,A);var be=[];function Le(c){vt(c.g,function(d,p){this.g.hasOwnProperty(p)&&S(d)},c),c.g={}}fe.prototype.N=function(){fe.Z.N.call(this),Le(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=o.JSON.stringify,bt=o.JSON.parse,Rt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Xt(){}function Jt(){}var mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Js(){T.call(this,"d")}f(Js,T);function It(){T.call(this,"c")}f(It,T);var mt={},ao=null;function ss(){return ao=ao||new X}mt.Ia="serverreachability";function Yf(c){T.call(this,mt.Ia,c)}f(Yf,T);function co(c){const d=ss();W(d,new Yf(d))}mt.STAT_EVENT="statevent";function Xf(c,d){T.call(this,mt.STAT_EVENT,c),this.stat=d}f(Xf,T);function Ut(c){const d=ss();W(d,new Xf(d,c))}mt.Ja="timingevent";function Jf(c,d){T.call(this,mt.Ja,c),this.size=d}f(Jf,T);function lo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function uo(){this.g=!0}uo.prototype.ua=function(){this.g=!1};function cw(c,d,p,_,x,M){c.info(function(){if(c.g)if(M){var Z="",Ie=M.split("&");for(let Ge=0;Ge<Ie.length;Ge++){var ct=Ie[Ge].split("=");if(ct.length>1){const gt=ct[0];ct=ct[1];const Cn=gt.split("_");Z=Cn.length>=2&&Cn[1]=="type"?Z+(gt+"="+ct+"&"):Z+(gt+"=redacted&")}}}else Z=null;else Z=M;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+d+`
`+p+`
`+Z})}function lw(c,d,p,_,x,M,Z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+d+`
`+p+`
`+M+" "+Z})}function $s(c,d,p,_){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hw(c,p)+(_?" "+_:"")})}function uw(c,d){c.info(function(){return"TIMEOUT: "+d})}uo.prototype.info=function(){};function hw(c,d){if(!c.g)return d;if(!d)return null;try{const M=JSON.parse(d);if(M){for(c=0;c<M.length;c++)if(Array.isArray(M[c])){var p=M[c];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var x=_[0];if(x!="noop"&&x!="stop"&&x!="close")for(let Z=1;Z<_.length;Z++)_[Z]=""}}}}return Pe(M)}catch{return d}}var Ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$f={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zf;function vu(){}f(vu,Xt),vu.prototype.g=function(){return new XMLHttpRequest},Zf=new vu;function ho(c){return encodeURIComponent(String(c))}function dw(c){var d=1;c=c.split(":");const p=[];for(;d>0&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function gr(c,d,p,_){this.j=c,this.i=d,this.l=p,this.S=_||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ep}function ep(){this.i=null,this.g="",this.h=!1}var tp={},Iu={};function Au(c,d,p){c.M=1,c.A=Wa(Sn(d)),c.u=p,c.R=!0,np(c,null)}function np(c,d){c.F=Date.now(),za(c),c.B=Sn(c.A);var p=c.B,_=c.S;Array.isArray(_)||(_=[String(_)]),mp(p.i,"t",_),c.C=0,p=c.j.L,c.h=new ep,c.g=xp(c.j,p?d:null,!c.u),c.P>0&&(c.O=new ue(u(c.Y,c,c.g),c.P)),d=c.V,p=c.g,_=c.ba;var x="readystatechange";Array.isArray(x)||(x&&(be[0]=x.toString()),x=be);for(let M=0;M<x.length;M++){const Z=Y(p,x[M],_||d.handleEvent,!1,d.h||d);if(!Z)break;d.g[Z.key]=Z}d=c.J?Ft(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),co(),cw(c.i,c.v,c.B,c.l,c.S,c.u)}gr.prototype.ba=function(c){c=c.target;const d=this.O;d&&vr(c)==3?d.j():this.Y(c)},gr.prototype.Y=function(c){try{if(c==this.g)e:{const Ie=vr(this.g),ct=this.g.ya(),Ge=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ep(this.g)))){this.K||Ie!=4||ct==7||(ct==8||Ge<=0?co(3):co(2)),Eu(this);var d=this.g.ca();this.X=d;var p=fw(this);if(this.o=d==200,lw(this.i,this.v,this.B,this.l,this.S,Ie,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,x=this.g;if((_=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_)){var M=_;break t}}M=null}if(c=M)$s(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wu(this,c);else{this.o=!1,this.m=3,Ut(12),is(this),fo(this);break e}}if(this.R){c=!0;let gt;for(;!this.K&&this.C<p.length;)if(gt=pw(this,p),gt==Iu){Ie==4&&(this.m=4,Ut(14),c=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==tp){this.m=4,Ut(15),$s(this.i,this.l,p,"[Invalid Chunk]"),c=!1;break}else $s(this.i,this.l,gt,null),wu(this,gt);if(rp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||p.length!=0||this.h.h||(this.m=1,Ut(16),c=!1),this.o=this.o&&c,!c)$s(this.i,this.l,p,"[Invalid Chunked Response]"),is(this),fo(this);else if(p.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Vu(Z),Z.P=!0,Ut(11))}}else $s(this.i,this.l,p,null),wu(this,p);Ie==4&&is(this),this.o&&!this.K&&(Ie==4?Pp(this.j,this):(this.o=!1,za(this)))}else Cw(this.g),d==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),is(this),fo(this)}}}catch{}finally{}};function fw(c){if(!rp(c))return c.g.la();const d=Ep(c.g);if(d==="")return"";let p="";const _=d.length,x=vr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return is(c),fo(c),"";c.h.i=new o.TextDecoder}for(let M=0;M<_;M++)c.h.h=!0,p+=c.h.i.decode(d[M],{stream:!(x&&M==_-1)});return d.length=0,c.h.g+=p,c.C=0,c.h.g}function rp(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function pw(c,d){var p=c.C,_=d.indexOf(`
`,p);return _==-1?Iu:(p=Number(d.substring(p,_)),isNaN(p)?tp:(_+=1,_+p>d.length?Iu:(d=d.slice(_,_+p),c.C=_+p,d)))}gr.prototype.cancel=function(){this.K=!0,is(this)};function za(c){c.T=Date.now()+c.H,sp(c,c.H)}function sp(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=lo(u(c.aa,c),d)}function Eu(c){c.D&&(o.clearTimeout(c.D),c.D=null)}gr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(uw(this.i,this.B),this.M!=2&&(co(),Ut(17)),is(this),this.m=2,fo(this)):sp(this,this.T-c)};function fo(c){c.j.I==0||c.K||Pp(c.j,c)}function is(c){Eu(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Le(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function wu(c,d){try{var p=c.j;if(p.I!=0&&(p.g==c||Tu(p.h,c))){if(!c.L&&Tu(p.h,c)&&p.I==3){try{var _=p.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<c.F)$a(p),Xa(p);else break e;ku(p),Ut(18)}}else p.xa=x[1],0<p.xa-p.K&&x[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=lo(u(p.Va,p),6e3));ap(p.h)<=1&&p.ta&&(p.ta=void 0)}else as(p,11)}else if((c.L||p.g==c)&&$a(p),!I(d))for(x=p.Ba.g.parse(d),d=0;d<x.length;d++){let Ge=x[d];const gt=Ge[0];if(!(gt<=p.K))if(p.K=gt,Ge=Ge[1],p.I==2)if(Ge[0]=="c"){p.M=Ge[1],p.ba=Ge[2];const Cn=Ge[3];Cn!=null&&(p.ka=Cn,p.j.info("VER="+p.ka));const cs=Ge[4];cs!=null&&(p.za=cs,p.j.info("SVER="+p.za));const Ir=Ge[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(_=1.5*Ir,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Ar=c.g;if(Ar){const ec=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var M=_.h;M.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(bu(M,M.h),M.h=null))}if(_.G){const Du=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Du&&(_.wa=Du,We(_.J,_.G,Du))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-c.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var Z=c;if(_.na=Dp(_,_.L?_.ba:null,_.W),Z.L){cp(_.h,Z);var Ie=Z,ct=_.O;ct&&(Ie.H=ct),Ie.D&&(Eu(Ie),za(Ie)),_.g=Z}else Sp(_);p.i.length>0&&Ja(p)}else Ge[0]!="stop"&&Ge[0]!="close"||as(p,7);else p.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?as(p,7):Pu(p):Ge[0]!="noop"&&p.l&&p.l.qa(Ge),p.A=0)}}co(4)}catch{}}var mw=class{constructor(c,d){this.g=c,this.map=d}};function ip(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function op(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ap(c){return c.h?1:c.g?c.g.size:0}function Tu(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function bu(c,d){c.g?c.g.add(d):c.h=d}function cp(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ip.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function lp(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const p of c.g.values())d=d.concat(p.G);return d}return g(c.i)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gw(c,d){if(c){c=c.split("&");for(let p=0;p<c.length;p++){const _=c[p].indexOf("=");let x,M=null;_>=0?(x=c[p].substring(0,_),M=c[p].substring(_+1)):x=c[p],d(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function _r(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof _r?(this.l=c.l,po(this,c.j),this.o=c.o,this.g=c.g,mo(this,c.u),this.h=c.h,Ru(this,gp(c.i)),this.m=c.m):c&&(d=String(c).match(up))?(this.l=!1,po(this,d[1]||"",!0),this.o=go(d[2]||""),this.g=go(d[3]||"",!0),mo(this,d[4]),this.h=go(d[5]||"",!0),Ru(this,d[6]||"",!0),this.m=go(d[7]||"")):(this.l=!1,this.i=new yo(null,this.l))}_r.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(_o(d,hp,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(_o(d,hp,!0),"@"),c.push(ho(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&c.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(_o(p,p.charAt(0)=="/"?vw:yw,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",_o(p,Aw)),c.join("")},_r.prototype.resolve=function(c){const d=Sn(this);let p=!!c.j;p?po(d,c.j):p=!!c.o,p?d.o=c.o:p=!!c.g,p?d.g=c.g:p=c.u!=null;var _=c.h;if(p)mo(d,c.u);else if(p=!!c.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var x=d.h.lastIndexOf("/");x!=-1&&(_=d.h.slice(0,x+1)+_)}if(x=_,x==".."||x==".")_="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){_=x.lastIndexOf("/",0)==0,x=x.split("/");const M=[];for(let Z=0;Z<x.length;){const Ie=x[Z++];Ie=="."?_&&Z==x.length&&M.push(""):Ie==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),_&&Z==x.length&&M.push("")):(M.push(Ie),_=!0)}_=M.join("/")}else _=x}return p?d.h=_:p=c.i.toString()!=="",p?Ru(d,gp(c.i)):p=!!c.m,p&&(d.m=c.m),d};function Sn(c){return new _r(c)}function po(c,d,p){c.j=p?go(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function mo(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Ru(c,d,p){d instanceof yo?(c.i=d,Ew(c.i,c.l)):(p||(d=_o(d,Iw)),c.i=new yo(d,c.l))}function We(c,d,p){c.i.set(d,p)}function Wa(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function go(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _o(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,_w),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _w(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var hp=/[#\/\?@]/g,yw=/[#\?:]/g,vw=/[#\?]/g,Iw=/[#\?@]/g,Aw=/#/g;function yo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function os(c){c.g||(c.g=new Map,c.h=0,c.i&&gw(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=yo.prototype,n.add=function(c,d){os(this),this.i=null,c=Zs(this,c);let p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function dp(c,d){os(c),d=Zs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function fp(c,d){return os(c),d=Zs(c,d),c.g.has(d)}n.forEach=function(c,d){os(this),this.g.forEach(function(p,_){p.forEach(function(x){c.call(d,x,_,this)},this)},this)};function pp(c,d){os(c);let p=[];if(typeof d=="string")fp(c,d)&&(p=p.concat(c.g.get(Zs(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)p=p.concat(c[d]);return p}n.set=function(c,d){return os(this),this.i=null,c=Zs(this,c),fp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=pp(this,c),c.length>0?String(c[0]):d):d};function mp(c,d,p){dp(c,d),p.length>0&&(c.i=null,c.g.set(Zs(c,d),g(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var p=d[_];const x=ho(p);p=pp(this,p);for(let M=0;M<p.length;M++){let Z=x;p[M]!==""&&(Z+="="+ho(p[M])),c.push(Z)}}return this.i=c.join("&")};function gp(c){const d=new yo;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Zs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Ew(c,d){d&&!c.j&&(os(c),c.i=null,c.g.forEach(function(p,_){const x=_.toLowerCase();_!=x&&(dp(this,_),mp(this,x,p))},c)),c.j=d}function ww(c,d){const p=new uo;if(o.Image){const _=new Image;_.onload=h(yr,p,"TestLoadImage: loaded",!0,d,_),_.onerror=h(yr,p,"TestLoadImage: error",!1,d,_),_.onabort=h(yr,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(yr,p,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else d(!1)}function Tw(c,d){const p=new uo,_=new AbortController,x=setTimeout(()=>{_.abort(),yr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:_.signal}).then(M=>{clearTimeout(x),M.ok?yr(p,"TestPingServer: ok",!0,d):yr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(x),yr(p,"TestPingServer: error",!1,d)})}function yr(c,d,p,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(p)}catch{}}function bw(){this.g=new Rt}function Su(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Su,Xt),Su.prototype.g=function(){return new Qa(this.i,this.h)};function Qa(c,d){X.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Qa,X),n=Qa.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Io(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_p(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function _p(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?vo(this):Io(this),this.readyState==3&&_p(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,vo(this))},n.Na=function(c){this.g&&(this.response=c,vo(this))},n.ga=function(){this.g&&vo(this)};function vo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Io(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function Io(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function yp(c){let d="";return vt(c,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function Cu(c,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=yp(p),typeof c=="string"?p!=null&&ho(p):We(c,d,p))}function Xe(c){X.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Xe,X);var Rw=/^https?$/i,Sw=["POST","PUT"];n=Xe.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zf.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){vp(this,M);return}if(c=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)p.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())p.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),x=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Sw,d,void 0)>=0)||_||x||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,Z]of p)this.g.setRequestHeader(M,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(M){vp(this,M)}};function vp(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Ip(c),Ya(c)}function Ip(c){c.A||(c.A=!0,W(c,"complete"),W(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,W(this,"complete"),W(this,"abort"),Ya(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ap(this):this.Xa())},n.Xa=function(){Ap(this)};function Ap(c){if(c.h&&typeof i<"u"){if(c.v&&vr(c)==4)setTimeout(c.Ca.bind(c),0);else if(W(c,"readystatechange"),vr(c)==4){c.h=!1;try{const M=c.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=M===0){let Z=String(c.D).match(up)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),_=!Rw.test(Z?Z.toLowerCase():"")}p=_}if(p)W(c,"complete"),W(c,"success");else{c.o=6;try{var x=vr(c)>2?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.ca()+"]",Ip(c)}}finally{Ya(c)}}}}function Ya(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const p=c.g;c.g=null,d||W(c,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),bt(d)}};function Ep(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cw(c){const d={};c=(c.g&&vr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(I(c[_]))continue;var p=dw(c[_]);const x=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=d[x]||[];d[x]=M,M.push(p)}cn(d,function(_){return _.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function wp(c){this.za=0,this.i=[],this.j=new uo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ao("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ao("baseRetryDelayMs",5e3,c),this.Za=Ao("retryDelaySeedMs",1e4,c),this.Ta=Ao("forwardChannelMaxRetries",2,c),this.va=Ao("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ip(c&&c.concurrentRequestLimit),this.Ba=new bw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=wp.prototype,n.ka=8,n.I=1,n.connect=function(c,d,p,_){Ut(0),this.W=c,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=Dp(this,null,this.W),Ja(this)};function Pu(c){if(Tp(c),c.I==3){var d=c.V++,p=Sn(c.J);if(We(p,"SID",c.M),We(p,"RID",d),We(p,"TYPE","terminate"),Eo(c,p),d=new gr(c,c.j,d),d.M=2,d.A=Wa(Sn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=d.A,p=!0),p||(d.g=xp(d.j,null),d.g.ea(d.A)),d.F=Date.now(),za(d)}Vp(c)}function Xa(c){c.g&&(Vu(c),c.g.cancel(),c.g=null)}function Tp(c){Xa(c),c.v&&(o.clearTimeout(c.v),c.v=null),$a(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ja(c){if(!op(c.h)&&!c.m){c.m=!0;var d=c.Ea;$||v(),ne||($(),ne=!0),R.add(d,c),c.D=0}}function Pw(c,d){return ap(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=lo(u(c.Ea,c,d),kp(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const x=new gr(this,this.j,c);let M=this.o;if(this.U&&(M?(M=Ft(M),ln(M,this.U)):M=this.U),this.u!==null||this.R||(x.J=M,M=null),this.S)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Rp(this,x,d),p=Sn(this.J),We(p,"RID",c),We(p,"CVER",22),this.G&&We(p,"X-HTTP-Session-Id",this.G),Eo(this,p),M&&(this.R?d="headers="+ho(yp(M))+"&"+d:this.u&&Cu(p,this.u,M)),bu(this.h,x),this.Ra&&We(p,"TYPE","init"),this.S?(We(p,"$req",d),We(p,"SID","null"),x.U=!0,Au(x,p,null)):Au(x,p,d),this.I=2}}else this.I==3&&(c?bp(this,c):this.i.length==0||op(this.h)||bp(this))};function bp(c,d){var p;d?p=d.l:p=c.V++;const _=Sn(c.J);We(_,"SID",c.M),We(_,"RID",p),We(_,"AID",c.K),Eo(c,_),c.u&&c.o&&Cu(_,c.u,c.o),p=new gr(c,c.j,p,c.D+1),c.u===null&&(p.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Rp(c,p,1e3),p.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),bu(c.h,p),Au(p,_,d)}function Eo(c,d){c.H&&vt(c.H,function(p,_){We(d,_,p)}),c.l&&vt({},function(p,_){We(d,_,p)})}function Rp(c,d,p){p=Math.min(c.i.length,p);const _=c.l?u(c.l.Ka,c.l,c):null;e:{var x=c.i;let Ie=-1;for(;;){const ct=["count="+p];Ie==-1?p>0?(Ie=x[0].g,ct.push("ofs="+Ie)):Ie=0:ct.push("ofs="+Ie);let Ge=!0;for(let gt=0;gt<p;gt++){var M=x[gt].g;const Cn=x[gt].map;if(M-=Ie,M<0)Ie=Math.max(0,x[gt].g-100),Ge=!1;else try{M="req"+M+"_"||"";try{var Z=Cn instanceof Map?Cn:Object.entries(Cn);for(const[cs,Ir]of Z){let Ar=Ir;a(Ir)&&(Ar=Pe(Ir)),ct.push(M+cs+"="+encodeURIComponent(Ar))}}catch(cs){throw ct.push(M+"type="+encodeURIComponent("_badmap")),cs}}catch{_&&_(Cn)}}if(Ge){Z=ct.join("&");break e}}Z=void 0}return c=c.i.splice(0,p),d.G=c,Z}function Sp(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;$||v(),ne||($(),ne=!0),R.add(d,c),c.A=0}}function ku(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=lo(u(c.Da,c),kp(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Cp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=lo(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Xa(this),Cp(this))};function Vu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Cp(c){c.g=new gr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Sn(c.na);We(d,"RID","rpc"),We(d,"SID",c.M),We(d,"AID",c.K),We(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(d,"TO",c.ia),We(d,"TYPE","xmlhttp"),Eo(c,d),c.u&&c.o&&Cu(d,c.u,c.o),c.O&&(c.g.H=c.O);var p=c.g;c=c.ba,p.M=1,p.A=Wa(Sn(d)),p.u=null,p.R=!0,np(p,c)}n.Va=function(){this.C!=null&&(this.C=null,Xa(this),ku(this),Ut(19))};function $a(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Pp(c,d){var p=null;if(c.g==d){$a(c),Vu(c),c.g=null;var _=2}else if(Tu(c.h,d))p=d.G,cp(c.h,d),_=1;else return;if(c.I!=0){if(d.o)if(_==1){p=d.u?d.u.length:0,d=Date.now()-d.F;var x=c.D;_=ss(),W(_,new Jf(_,p)),Ja(c)}else Sp(c);else if(x=d.m,x==3||x==0&&d.X>0||!(_==1&&Pw(c,d)||_==2&&ku(c)))switch(p&&p.length>0&&(d=c.h,d.i=d.i.concat(p)),x){case 1:as(c,5);break;case 4:as(c,10);break;case 3:as(c,6);break;default:as(c,2)}}}function kp(c,d){let p=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(p*=2),p*d}function as(c,d){if(c.j.info("Error code "+d),d==2){var p=u(c.bb,c),_=c.Ua;const x=!_;_=new _r(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||po(_,"https"),Wa(_),x?ww(_.toString(),p):Tw(_.toString(),p)}else Ut(2);c.I=0,c.l&&c.l.pa(d),Vp(c),Tp(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Vp(c){if(c.I=0,c.ja=[],c.l){const d=lp(c.h);(d.length!=0||c.i.length!=0)&&(b(c.ja,d),b(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Dp(c,d,p){var _=p instanceof _r?Sn(p):new _r(p);if(_.g!="")d&&(_.g=d+"."+_.g),mo(_,_.u);else{var x=o.location;_=x.protocol,d=d?d+"."+x.hostname:x.hostname,x=+x.port;const M=new _r(null);_&&po(M,_),d&&(M.g=d),x&&mo(M,x),p&&(M.h=p),_=M}return p=c.G,d=c.wa,p&&d&&We(_,p,d),We(_,"VER",c.ka),Eo(c,_),_}function xp(c,d,p){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Xe(new Su({ab:p})):new Xe(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Np(){}n=Np.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Za(){}Za.prototype.g=function(c,d){return new $t(c,d)};function $t(c,d){X.call(this),this.g=new wp(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!I(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ei(this)}f($t,X),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Pu(this.g)},$t.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.v&&(p={},p.__data__=Pe(c),c=p);d.i.push(new mw(d.Ya++,c)),d.I==3&&Ja(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Pu(this.g),delete this.g,$t.Z.N.call(this)};function Op(c){Js.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(Op,Js);function Mp(){It.call(this),this.status=1}f(Mp,It);function ei(c){this.g=c}f(ei,Np),ei.prototype.ra=function(){W(this.g,"a")},ei.prototype.qa=function(c){W(this.g,new Op(c))},ei.prototype.pa=function(c){W(this.g,new Mp)},ei.prototype.oa=function(){W(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Yv=function(){return new Za},Qv=function(){return ss()},Wv=mt,Fh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,Ic=Ka,$f.COMPLETE="complete",zv=$f,Jt.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",X.prototype.listen=X.prototype.J,No=Jt,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Kv=Xe}).apply(typeof oc<"u"?oc:typeof self<"u"?self:typeof window<"u"?window:{});const Qm="@firebase/firestore",Ym="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Bd("@firebase/firestore");function fi(){return Ms.logLevel}function z(n,...e){if(Ms.logLevel<=Re.DEBUG){const t=e.map(Gd);Ms.debug(`Firestore (${eo}): ${n}`,...t)}}function nt(n,...e){if(Ms.logLevel<=Re.ERROR){const t=e.map(Gd);Ms.error(`Firestore (${eo}): ${n}`,...t)}}function pa(n,...e){if(Ms.logLevel<=Re.WARN){const t=e.map(Gd);Ms.warn(`Firestore (${eo}): ${n}`,...t)}}function Gd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Xv(n,r,t)}function Xv(n,e,t){let r=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw nt(r),new Error(r)}function ce(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Xv(e,s,r)}function ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Wn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ct.UNAUTHENTICATED)))}shutdown(){}}class iS{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ce(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new rS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class oS{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aS{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new oS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Xm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xm(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=lS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ye(n,e){return n<e?-1:n>e?1:0}function Uh(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return eh(s)===eh(i)?ye(s,i):eh(s)?1:-1}return ye(n.length,e.length)}const uS=55296,hS=57343;function eh(n){const e=n.charCodeAt(0);return e>=uS&&e<=hS}function Oi(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function Jv(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="__name__";class Dn{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Dn.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ye(e.length,t.length)}static compareSegments(e,t){const r=Dn.isNumericId(e),s=Dn.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Dn.extractNumericId(e).compare(Dn.extractNumericId(t)):Uh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class xe extends Dn{construct(e,t,r){return new xe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new xe(t)}static emptyPath(){return new xe([])}}const dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Dn{construct(e,t,r){return new Ye(e,t,r)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jm}static keyField(){return new Ye([Jm])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(t)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(xe.fromString(e))}static fromName(e){return new ee(xe.fromString(e).popFirst(5))}static empty(){return new ee(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n,e,t){if(!t)throw new J(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fS(n,e,t,r){if(e===!0&&r===!0)throw new J(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $m(n){if(!ee.isDocumentKey(n))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Zm(n){if(ee.isDocumentKey(n))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gl(n);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n,e){const t={typeString:n};return e&&(t.value=e),t}function xa(n,e){if(!Zv(n))throw new J(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new J(B.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-62135596800,tg=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tg);return new Fe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eg)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tg}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xa(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:ot("string",Fe._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Fe(0,0))}static max(){return new le(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=-1;class Yc{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Bh(n){return n.fields.find((e=>e.kind===2))}function ms(n){return n.fields.filter((e=>e.kind!==2))}Yc.UNKNOWN_ID=-1;class Ac{constructor(e,t){this.fieldPath=e,this.kind=t}}class ma{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ma(0,an.min())}}function eI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Fe(t+1,0):new Fe(t,r));return new an(s,ee.empty(),e)}function tI(n){return new an(n.readTime,n.key,Mi)}class an{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new an(le.min(),ee.empty(),Mi)}static max(){return new an(le.max(),ee.empty(),Mi)}}function qd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==nI)throw n;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):D.reject(t)}static resolve(e){return new D(((t,r)=>{t(e)}))}static reject(e){return new D(((t,r)=>{r(e)}))}static waitFor(e){return new D(((t,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&t()}),(l=>r(l)))})),o=!0,i===s&&t()}))}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next((s=>s?D.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new D(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;t(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,t){return new D(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="SimpleDb";class Hl{static open(e,t,r,s){try{return new Hl(t,e.transaction(s,r))}catch(i){throw new Qo(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ir,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Qo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Kd(r.target.error);this.S.reject(new Qo(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(z(tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mS(t)}}class Gr{static delete(e){return z(tn,"Removing database:",e),ys(Pv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Lv())return!1;if(Gr.F())return!0;const e=dt(),t=Gr.M(e),r=0<t&&t<10,s=sI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Gr.M(dt())===12.2&&nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(z(tn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Qo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Qo(e,o))},s.onupgradeneeded=i=>{z(tn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{z(tn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Hl.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next((u=>(a.C(),u))).catch((u=>(a.abort(u),D.reject(u)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z(tn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pS{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ys(this.U.delete())}}class Qo extends J{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ts(n){return n.name==="IndexedDbTransactionError"}class mS{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z(tn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(z(tn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ys(r)}add(e){return z(tn,"ADD",this.store.name,e,e),ys(this.store.add(e))}get(e){return ys(this.store.get(e)).next((t=>(t===void 0&&(t=null),z(tn,"GET",this.store.name,e,t),t)))}delete(e){return z(tn,"DELETE",this.store.name,e),ys(this.store.delete(e))}count(){return z(tn,"COUNT",this.store.name),ys(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new D(((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new D(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,t){z(tn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,a)=>a.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new D(((r,s)=>{t.onerror=i=>{const o=Kd(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,t){const r=[];return new D(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new pS(a),u=t(a.primaryKey,a.value,l);if(u instanceof D){const h=u.catch((f=>(l.done(),D.reject(f))));r.push(h)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}})).next((()=>D.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ys(n){return new D(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Kd(r.target.error);t(s)}}))}let ng=!1;function Kd(n){const e=Gr.M(dt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ng||(ng=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Yo="IndexBackfiller";class gS{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){z(Yo,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();z(Yo,`Documents written: ${t}`)}catch(t){ts(t)?z(Yo,"Ignoring IndexedDB error during index backfill: ",t):await es(t)}await this.re(6e4)}))}}class _S{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,i=!0;return D.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return z(Yo,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(z(Yo,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a)))).next((()=>o.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,i)=>{const o=tI(i);qd(o,r)>0&&(r=o)})),new an(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=-1;function ql(n){return n==null}function ga(n){return n===0&&1/n==-1/0}function iI(n){return typeof n=="number"&&Number.isInteger(n)&&!ga(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="";function Lt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rg(e)),e=yS(n.get(t),e);return rg(e)}function yS(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Xc:t+="";break;default:t+=i}}return t}function rg(n){return n+Xc+""}function On(n){const e=n.length;if(ce(e>=2,64408,{path:n}),e===2)return ce(n.charAt(0)===Xc&&n.charAt(1)==="",56145,{path:n}),xe.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(Xc,i);switch((o<0||o>t)&&ie(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:ie(61167,{path:n})}i=o+2}return new xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="remoteDocuments",Na="owner",ni="owner",_a="mutationQueues",vS="userId",gn="mutations",sg="batchId",Ts="userMutationsIndex",ig=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n,e){return[n,Lt(e)]}function oI(n,e,t){return[n,Lt(e),t]}const IS={},Li="documentMutations",Jc="remoteDocumentsV14",AS=["prefixPath","collectionGroup","readTime","documentId"],wc="documentKeyIndex",ES=["prefixPath","collectionGroup","documentId"],aI="collectionGroupIndex",wS=["collectionGroup","readTime","prefixPath","documentId"],ya="remoteDocumentGlobal",jh="remoteDocumentGlobalKey",Fi="targets",cI="queryTargetsIndex",TS=["canonicalId","targetId"],Ui="targetDocuments",bS=["targetId","path"],zd="documentTargetsIndex",RS=["path","targetId"],$c="targetGlobalKey",Ps="targetGlobal",va="collectionParents",SS=["collectionId","parent"],Bi="clientMetadata",CS="clientId",Kl="bundles",PS="bundleId",zl="namedQueries",kS="name",Wd="indexConfiguration",VS="indexId",Gh="collectionGroupIndex",DS="collectionGroup",Xo="indexState",xS=["indexId","uid"],lI="sequenceNumberIndex",NS=["uid","sequenceNumber"],Jo="indexEntries",OS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uI="documentKeyIndex",MS=["indexId","uid","orderedDocumentKey"],Wl="documentOverlays",LS=["userId","collectionPath","documentId"],Hh="collectionPathOverlayIndex",FS=["userId","collectionPath","largestBatchId"],hI="collectionGroupOverlayIndex",US=["userId","collectionGroup","largestBatchId"],Qd="globals",BS="name",dI=[_a,gn,Li,gs,Fi,Na,Ps,Ui,Bi,ya,va,Kl,zl],jS=[...dI,Wl],fI=[_a,gn,Li,Jc,Fi,Na,Ps,Ui,Bi,ya,va,Kl,zl,Wl],pI=fI,Yd=[...pI,Wd,Xo,Jo],GS=Yd,mI=[...Yd,Qd],HS=mI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends rI{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pt(n,e){const t=ae(n);return Gr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||At.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ac(this.root,e,this.comparator,!0)}}class ac{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new At(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new At(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(e){return new ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Be(this.comparator);return t.data=e,t}}class ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ri(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Qt([])}unionWith(e){let t=new Be(Ye.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _I("Invalid base64 string: "+i):i}})(e);return new st(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new st(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const qS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(n){if(ce(!!n,39018),typeof n=="string"){let e=0;const t=qS.exec(n);if(ce(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(n.seconds),nanos:Qe(n.nanos)}}function Qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ur(n){return typeof n=="string"?st.fromBase64String(n):st.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="server_timestamp",vI="__type__",II="__previous_value__",AI="__local_write_time__";function Xd(n){return(n?.mapValue?.fields||{})[vI]?.stringValue===yI}function Ql(n){const e=n.mapValue.fields[II];return Xd(e)?Ql(e):e}function Ia(n){const e=lr(n.mapValue.fields[AI].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Zc="(default)";class Ls{constructor(e,t){this.projectId=e,this.database=t||Zc}static empty(){return new Ls("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof Ls&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="__type__",EI="__max__",Mr={mapValue:{fields:{__type__:{stringValue:EI}}}},$d="__vector__",ji="value",Tc={nullValue:"NULL_VALUE"};function Qr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xd(n)?4:wI(n)?9007199254740991:Yl(n)?10:11:ie(28295,{value:n})}function qn(n,e){if(n===e)return!0;const t=Qr(n);if(t!==Qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ia(n).isEqual(Ia(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=lr(s.timestampValue),a=lr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return ur(s.bytesValue).isEqual(ur(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Qe(s.doubleValue),a=Qe(i.doubleValue);return o===a?ga(o)===ga(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Oi(n.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(og(o)!==og(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qn(o[l],a[l])))return!1;return!0})(n,e);default:return ie(52216,{left:n})}}function Aa(n,e){return(n.values||[]).find((t=>qn(t,e)))!==void 0}function Yr(n,e){if(n===e)return 0;const t=Qr(n),r=Qr(e);if(t!==r)return ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Qe(i.integerValue||i.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return cg(n.timestampValue,e.timestampValue);case 4:return cg(Ia(n),Ia(e));case 5:return Uh(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=ur(i),l=ur(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ye(a[u],l[u]);if(h!==0)return h}return ye(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ye(Qe(i.latitude),Qe(o.latitude));return a!==0?a:ye(Qe(i.longitude),Qe(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lg(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[ji]?.arrayValue,h=l[ji]?.arrayValue,f=ye(u?.values?.length||0,h?.values?.length||0);return f!==0?f:lg(u,h)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Mr.mapValue&&o===Mr.mapValue)return 0;if(i===Mr.mapValue)return 1;if(o===Mr.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Uh(l[f],h[f]);if(m!==0)return m;const g=Yr(a[l[f]],u[h[f]]);if(g!==0)return g}return ye(l.length,h.length)})(n.mapValue,e.mapValue);default:throw ie(23264,{he:t})}}function cg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);const t=lr(n),r=lr(e),s=ye(t.seconds,r.seconds);return s!==0?s:ye(t.nanos,r.nanos)}function lg(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Yr(t[s],r[s]);if(i)return i}return ye(t.length,r.length)}function Gi(n){return Kh(n)}function Kh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=lr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ur(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Kh(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Kh(t.fields[o])}`;return s+"}"})(n.mapValue):ie(61005,{value:n})}function bc(n){switch(Qr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ql(n);return e?16+bc(e):16;case 5:return 2*n.stringValue.length;case 6:return ur(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+bc(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return ns(r.fields,((i,o)=>{s+=i.length+bc(o)})),s})(n.mapValue);default:throw ie(13486,{value:n})}}function Ea(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zh(n){return!!n&&"integerValue"in n}function wa(n){return!!n&&"arrayValue"in n}function ug(n){return!!n&&"nullValue"in n}function hg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rc(n){return!!n&&"mapValue"in n}function Yl(n){return(n?.mapValue?.fields||{})[Jd]?.stringValue===$d}function $o(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ns(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=$o(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$o(n.arrayValue.values[t]);return e}return{...n}}function wI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===EI}const TI={mapValue:{fields:{[Jd]:{stringValue:$d},[ji]:{arrayValue:{}}}}};function zS(n){return"nullValue"in n?Tc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ea(Ls.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yl(n)?TI:{mapValue:{}}:ie(35942,{value:n})}function WS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ea(Ls.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?TI:"mapValue"in n?Yl(n)?{mapValue:{}}:Mr:ie(61959,{value:n})}function dg(n,e){const t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fg(n,e){const t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(t)}setAll(e){let t=Ye.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=$o(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ns(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Nt($o(this.value))}}function bI(n){const e=[];return ns(n.fields,((t,r)=>{const s=new Ye([t]);if(Rc(r)){const i=bI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new et(e,0,le.min(),le.min(),le.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,s){return new et(e,1,t,le.min(),r,s,0)}static newNoDocument(e,t){return new et(e,2,t,le.min(),le.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new et(e,3,t,le.min(),le.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.position=e,this.inclusive=t}}function pg(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=Yr(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t="asc"){this.field=e,this.dir=t}}function QS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class Se extends RI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YS(e,t,r):t==="array-contains"?new $S(e,r):t==="in"?new DI(e,r):t==="not-in"?new ZS(e,r):t==="array-contains-any"?new eC(e,r):new Se(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XS(e,r):new JS(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yr(t,this.value)):t!==null&&Qr(this.value)===Qr(t)&&this.matchesComparison(Yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends RI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ue(e,t)}matches(e){return qi(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qi(n){return n.op==="and"}function Wh(n){return n.op==="or"}function Zd(n){return SI(n)&&qi(n)}function SI(n){for(const e of n.filters)if(e instanceof Ue)return!1;return!0}function Qh(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+Gi(n.value);if(Zd(n))return n.filters.map((e=>Qh(e))).join(",");{const e=n.filters.map((t=>Qh(t))).join(",");return`${n.op}(${e})`}}function CI(n,e){return n instanceof Se?(function(r,s){return s instanceof Se&&r.op===s.op&&r.field.isEqual(s.field)&&qn(r.value,s.value)})(n,e):n instanceof Ue?(function(r,s){return s instanceof Ue&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&CI(o,s.filters[a])),!0):!1})(n,e):void ie(19439)}function PI(n,e){const t=n.filters.concat(e);return Ue.create(t,n.op)}function kI(n){return n instanceof Se?(function(t){return`${t.field.canonicalString()} ${t.op} ${Gi(t.value)}`})(n):n instanceof Ue?(function(t){return t.op.toString()+" {"+t.getFilters().map(kI).join(" ,")+"}"})(n):"Filter"}class YS extends Se{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class XS extends Se{constructor(e,t){super(e,"in",t),this.keys=VI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JS extends Se{constructor(e,t){super(e,"not-in",t),this.keys=VI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VI(n,e){return(e.arrayValue?.values||[]).map((t=>ee.fromName(t.referenceValue)))}class $S extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wa(t)&&Aa(t.arrayValue,this.value)}}class DI extends Se{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}}class ZS extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Aa(this.value.arrayValue,t)}}class eC extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Aa(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Yh(n,e=null,t=[],r=[],s=null,i=null,o=null){return new tC(n,e,t,r,s,i,o)}function Fs(n){const e=ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Qh(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ql(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Gi(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Gi(r))).join(",")),e.Te=t}return e.Te}function Oa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mg(n.startAt,e.startAt)&&mg(n.endAt,e.endAt)}function el(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tl(n,e){return n.filters.filter((t=>t instanceof Se&&t.field.isEqual(e)))}function gg(n,e,t){let r=Tc,s=!0;for(const i of tl(n,e)){let o=Tc,a=!0;switch(i.op){case"<":case"<=":o=zS(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Tc}dg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];dg({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function _g(n,e,t){let r=Mr,s=!0;for(const i of tl(n,e)){let o=Mr,a=!0;switch(i.op){case">=":case">":o=WS(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Mr}fg({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];fg({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xI(n,e,t,r,s,i,o,a){return new to(n,e,t,r,s,i,o,a)}function Ma(n){return new to(n)}function yg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NI(n){return n.collectionGroup!==null}function Zo(n){const e=ae(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Be(Ye.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ta(i,r))})),t.has(Ye.keyField().canonicalString())||e.Ie.push(new Ta(Ye.keyField(),r))}return e.Ie}function sn(n){const e=ae(n);return e.Ee||(e.Ee=nC(e,Zo(n))),e.Ee}function nC(n,e){if(n.limitType==="F")return Yh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ta(s.field,i)}));const t=n.endAt?new Hi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hi(n.startAt.position,n.startAt.inclusive):null;return Yh(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xh(n,e){const t=n.filters.concat([e]);return new to(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jh(n,e,t){return new to(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xl(n,e){return Oa(sn(n),sn(e))&&n.limitType===e.limitType}function OI(n){return`${Fs(sn(n))}|lt:${n.limitType}`}function pi(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>kI(s))).join(", ")}]`),ql(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Gi(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Gi(s))).join(",")),`Target(${r})`})(sn(n))}; limitType=${n.limitType})`}function La(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,Zo(r),s)||r.endAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,Zo(r),s))})(n,e)}function MI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LI(n){return(e,t)=>{let r=!1;for(const s of Zo(n)){const i=rC(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function rC(n,e,t){const r=n.field.isKeyField()?ee.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Yr(l,u):ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ns(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return gI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new ze(ee.comparator);function rn(){return sC}const FI=new ze(ee.comparator);function Oo(...n){let e=FI;for(const t of n)e=e.insert(t.key,t);return e}function UI(n){let e=FI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Mn(){return ea()}function BI(){return ea()}function ea(){return new pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const iC=new ze(ee.comparator),oC=new Be(ee.comparator);function Ee(...n){let e=oC;for(const t of n)e=e.add(t);return e}const aC=new Be(ye);function ef(){return aC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ga(e)?"-0":e}}function jI(n){return{integerValue:""+n}}function cC(n,e){return iI(e)?jI(e):tf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this._=void 0}}function lC(n,e,t){return n instanceof Ki?(function(s,i){const o={fields:{[vI]:{stringValue:yI},[AI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xd(i)&&(i=Ql(i)),i&&(o.fields[II]=i),{mapValue:o}})(t,e):n instanceof zi?HI(n,e):n instanceof Wi?qI(n,e):(function(s,i){const o=GI(s,i),a=vg(o)+vg(s.Ae);return zh(o)&&zh(s.Ae)?jI(a):tf(s.serializer,a)})(n,e)}function uC(n,e,t){return n instanceof zi?HI(n,e):n instanceof Wi?qI(n,e):t}function GI(n,e){return n instanceof ba?(function(r){return zh(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Ki extends Jl{}class zi extends Jl{constructor(e){super(),this.elements=e}}function HI(n,e){const t=KI(e);for(const r of n.elements)t.some((s=>qn(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Wi extends Jl{constructor(e){super(),this.elements=e}}function qI(n,e){let t=KI(e);for(const r of n.elements)t=t.filter((s=>!qn(s,r)));return{arrayValue:{values:t}}}class ba extends Jl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vg(n){return Qe(n.integerValue||n.doubleValue)}function KI(n){return wa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.field=e,this.transform=t}}function hC(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof zi&&s instanceof zi||r instanceof Wi&&s instanceof Wi?Oi(r.elements,s.elements,qn):r instanceof ba&&s instanceof ba?qn(r.Ae,s.Ae):r instanceof Ki&&s instanceof Ki})(n.transform,e.transform)}class dC{constructor(e,t){this.version=e,this.transformResults=t}}class Ot{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $l{}function WI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zl(n.key,Ot.none()):new no(n.key,n.data,Ot.none());{const t=n.data,r=Nt.empty();let s=new Be(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new mr(n.key,r,new Qt(s.toArray()),Ot.none())}}function fC(n,e,t){n instanceof no?(function(s,i,o){const a=s.value.clone(),l=Ag(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof mr?(function(s,i,o){if(!Sc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ag(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(QI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function ta(n,e,t,r){return n instanceof no?(function(i,o,a,l){if(!Sc(i.precondition,o))return a;const u=i.value.clone(),h=Eg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof mr?(function(i,o,a,l){if(!Sc(i.precondition,o))return a;const u=Eg(i.fieldTransforms,l,o),h=o.data;return h.setAll(QI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(i,o,a){return Sc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function pC(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=GI(r.transform,s||null);i!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,i))}return t||null}function Ig(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oi(r,s,((i,o)=>hC(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class no extends $l{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mr extends $l{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Ag(n,e,t){const r=new Map;ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,uC(o,a,t[s]))}return r}function Eg(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,lC(i,o,e))}return r}class Zl extends $l{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YI extends $l{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fC(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BI();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=WI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ee())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,((t,r)=>Ig(t,r)))&&Oi(this.baseMutations,e.baseMutations,((t,r)=>Ig(t,r)))}}class rf{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return iC})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rf(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,Ce;function gC(n){switch(n){case B.OK:return ie(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ie(15467,{code:n})}}function XI(n){if(n===void 0)return nt("GRPC error has no .code"),B.UNKNOWN;switch(n){case it.OK:return B.OK;case it.CANCELLED:return B.CANCELLED;case it.UNKNOWN:return B.UNKNOWN;case it.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case it.INTERNAL:return B.INTERNAL;case it.UNAVAILABLE:return B.UNAVAILABLE;case it.UNAUTHENTICATED:return B.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case it.NOT_FOUND:return B.NOT_FOUND;case it.ALREADY_EXISTS:return B.ALREADY_EXISTS;case it.PERMISSION_DENIED:return B.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case it.ABORTED:return B.ABORTED;case it.OUT_OF_RANGE:return B.OUT_OF_RANGE;case it.UNIMPLEMENTED:return B.UNIMPLEMENTED;case it.DATA_LOSS:return B.DATA_LOSS;default:return ie(39323,{code:n})}}(Ce=it||(it={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new jr([4294967295,4294967295],0);function wg(n){const e=_C().encode(n),t=new qv;return t.update(e),new Uint8Array(t.digest())}function Tg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jr([t,r],0),new jr([s,i],0)]}class of{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mo(`Invalid padding: ${t}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=jr.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(jr.fromNumber(r)));return s.compare(yC)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=wg(e),[r,s]=Tg(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new of(i,s,t);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=wg(e),[r,s]=Tg(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ua.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fa(le.min(),s,new ze(ye),rn(),Ee())}}class Ua{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ua(r,t,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class JI{constructor(e,t){this.targetId=e,this.Ce=t}}class $I{constructor(e,t,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class bg{constructor(){this.ve=0,this.Fe=Rg(),this.Me=st.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),t=Ee(),r=Ee();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}})),new Ua(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Rg()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vC{constructor(e){this.Ge=e,this.ze=new Map,this.je=rn(),this.Je=cc(),this.He=cc(),this.Ye=new ze(ye)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(el(i))if(r===0){const o=new ee(i.path);this.et(t,o,et.newNoDocument(o,le.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=ur(r).toUint8Array()}catch(l){if(l instanceof _I)return pa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new of(o,s,i)}catch(l){return pa(l instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&el(a.target)){const l=new ee(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,et.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let r=Ee();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Fa(e,t,this.Ye,this.je,r);return this.je=rn(),this.Je=cc(),this.He=cc(),this.Ye=new ze(ye),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Be(ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Be(ye),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cc(){return new ze(ee.comparator)}function Rg(){return new ze(ee.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EC={and:"AND",or:"OR"};class wC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $h(n,e){return n.useProto3Json||ql(e)?e:{value:e}}function Qi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TC(n,e){return Qi(n,e.toTimestamp())}function qt(n){return ce(!!n,49232),le.fromTimestamp((function(t){const r=lr(t);return new Fe(r.seconds,r.nanos)})(n))}function af(n,e){return Zh(n,e).canonicalString()}function Zh(n,e){const t=(function(s){return new xe(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function eA(n){const e=xe.fromString(n);return ce(lA(e),10190,{key:e.toString()}),e}function nl(n,e){return af(n.databaseId,e.path)}function ks(n,e){const t=eA(e);if(t.get(1)!==n.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(rA(t))}function tA(n,e){return af(n.databaseId,e)}function nA(n){const e=eA(n);return e.length===4?xe.emptyPath():rA(e)}function ed(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rA(n){return ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Sg(n,e,t){return{name:nl(n,e),fields:t.value.mapValue.fields}}function bC(n,e,t){const r=ks(n,e.name),s=qt(e.updateTime),i=e.createTime?qt(e.createTime):le.min(),o=new Nt({mapValue:{fields:e.fields}}),a=et.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function RC(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ce(h===void 0||typeof h=="string",58123),st.fromBase64String(h||"")):(ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),st.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?B.UNKNOWN:XI(u.code);return new J(h,u.message||"")})(o);t=new $I(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ks(n,r.document.name),i=qt(r.document.updateTime),o=r.document.createTime?qt(r.document.createTime):le.min(),a=new Nt({mapValue:{fields:r.document.fields}}),l=et.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Cc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ks(n,r.document),i=r.readTime?qt(r.readTime):le.min(),o=et.newNoDocument(s,i),a=r.removedTargetIds||[];t=new Cc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ks(n,r.document),i=r.removedTargetIds||[];t=new Cc([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mC(s,i),a=r.targetId;t=new JI(a,o)}}return t}function rl(n,e){let t;if(e instanceof no)t={update:Sg(n,e.key,e.value)};else if(e instanceof Zl)t={delete:nl(n,e.key)};else if(e instanceof mr)t={update:Sg(n,e.key,e.data),updateMask:DC(e.fieldMask)};else{if(!(e instanceof YI))return ie(16599,{Vt:e.type});t={verify:nl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ba)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ie(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:TC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)})(n,e.precondition)),t}function td(n,e){const t=e.currentDocument?(function(i){return i.updateTime!==void 0?Ot.updateTime(qt(i.updateTime)):i.exists!==void 0?Ot.exists(i.exists):Ot.none()})(e.currentDocument):Ot.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let l=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Ki;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new zi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Wi(h)}else"increment"in a?l=new ba(o,a.increment):ie(16584,{proto:a});const u=Ye.fromServerFormat(a.fieldPath);return new zI(u,l)})(n,s))):[];if(e.update){e.update.name;const s=ks(n,e.update.name),i=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const u=l.fieldPaths||[];return new Qt(u.map((h=>Ye.fromServerFormat(h))))})(e.updateMask);return new mr(s,i,o,t,r)}return new no(s,i,t,r)}if(e.delete){const s=ks(n,e.delete);return new Zl(s,t)}if(e.verify){const s=ks(n,e.verify);return new YI(s,t)}return ie(1463,{proto:e})}function SC(n,e){return n&&n.length>0?(ce(e!==void 0,14353),n.map((t=>(function(s,i){let o=s.updateTime?qt(s.updateTime):qt(i);return o.isEqual(le.min())&&(o=qt(i)),new dC(o,s.transformResults||[])})(t,e)))):[]}function sA(n,e){return{documents:[tA(n,e.path)]}}function iA(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tA(n,s);const i=(function(u){if(u.length!==0)return cA(Ue.create(u,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:mi(m.field),direction:PC(m.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=$h(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:s}}function oA(n){let e=nA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ce(r===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=(function(f){const m=aA(f);return m instanceof Ue&&Zd(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((m=>(function(b){return new Ta(gi(b.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let m;return m=typeof f=="object"?f.value:f,ql(m)?null:m})(t.limit));let l=null;t.startAt&&(l=(function(f){const m=!!f.before,g=f.values||[];return new Hi(g,m)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const m=!f.before,g=f.values||[];return new Hi(g,m)})(t.endAt)),xI(e,s,o,i,a,"F",l,u)}function CC(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=gi(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gi(t.unaryFilter.field);return Se.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gi(t.unaryFilter.field);return Se.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gi(t.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Se.create(gi(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ue.create(t.compositeFilter.filters.map((r=>aA(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(t.compositeFilter.op))})(n):ie(30097,{filter:n})}function PC(n){return IC[n]}function kC(n){return AC[n]}function VC(n){return EC[n]}function mi(n){return{fieldPath:n.canonicalString()}}function gi(n){return Ye.fromServerFormat(n.fieldPath)}function cA(n){return n instanceof Se?(function(t){if(t.op==="=="){if(hg(t.value))return{unaryFilter:{field:mi(t.field),op:"IS_NAN"}};if(ug(t.value))return{unaryFilter:{field:mi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hg(t.value))return{unaryFilter:{field:mi(t.field),op:"IS_NOT_NAN"}};if(ug(t.value))return{unaryFilter:{field:mi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(t.field),op:kC(t.op),value:t.value}}})(n):n instanceof Ue?(function(t){const r=t.getFilters().map((s=>cA(s)));return r.length===1?r[0]:{compositeFilter:{op:VC(t.op),filters:r}}})(n):ie(54877,{filter:n})}function DC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,r,s,i=le.min(),o=le.min(),a=st.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.yt=e}}function xC(n,e){let t;if(e.document)t=bC(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=Bs(e.noDocument.readTime);t=et.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie(56709);{const r=ee.fromSegments(e.unknownDocument.path),s=Bs(e.unknownDocument.version);t=et.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const i=new Fe(s[0],s[1]);return le.fromTimestamp(i)})(e.readTime)),t}function Cg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:nl(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Qi(i,o.version.toTimestamp()),createTime:Qi(i,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Us(e.version)};else{if(!e.isUnknownDocument())return ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Us(e.version)}}return r}function sl(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Us(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bs(n){const e=new Fe(n.seconds,n.nanoseconds);return le.fromTimestamp(e)}function vs(n,e){const t=(e.baseMutations||[]).map((i=>td(n.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>td(n.yt,i))),s=Fe.fromMillis(e.localWriteTimeMs);return new nf(e.batchId,s,t,r)}function Lo(n){const e=Bs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bs(n.lastLimboFreeSnapshotVersion):le.min();let r;return r=(function(i){return i.documents!==void 0})(n.query)?(function(i){const o=i.documents.length;return ce(o===1,1966,{count:o}),sn(Ma(nA(i.documents[0])))})(n.query):(function(i){return sn(oA(i))})(n.query),new nr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,st.fromBase64String(n.resumeToken))}function hA(n,e){const t=Us(e.snapshotVersion),r=Us(e.lastLimboFreeSnapshotVersion);let s;s=el(e.target)?sA(n.yt,e.target):iA(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function dA(n){const e=oA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jh(e,e.limit,"L"):e}function th(n,e){return new sf(e.largestBatchId,td(n.yt,e.overlayMutation))}function Pg(n,e){const t=e.path.lastSegment();return[n,Lt(e.path.popLast()),t]}function kg(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Us(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{getBundleMetadata(e,t){return Vg(e).get(t).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Bs(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,t){return Vg(e).put((function(s){return{bundleId:s.id,createTime:Us(qt(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return Dg(e).get(t).next((r=>{if(r)return(function(i){return{name:i.name,query:dA(i.bundledQuery),readTime:Bs(i.readTime)}})(r)}))}saveNamedQuery(e,t){return Dg(e).put((function(s){return{name:s.name,readTime:Us(qt(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function Vg(n){return pt(n,Kl)}function Dg(n){return pt(n,zl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new eu(e,r)}getOverlay(e,t){return So(e).get(Pg(this.userId,t)).next((r=>r?th(this.serializer,r):null))}getOverlays(e,t){const r=Mn();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((i,o)=>{const a=new sf(t,o);s.push(this.St(e,a))})),D.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((o=>s.add(Lt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(So(e).Z(Hh,a))})),D.waitFor(i)}getOverlaysForCollection(e,t,r){const s=Mn(),i=Lt(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return So(e).J(Hh,o).next((a=>{for(const l of a){const u=th(this.serializer,l);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const i=Mn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return So(e).ee({index:hI,range:a},((l,u,h)=>{const f=th(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}St(e,t){return So(e).put((function(s,i,o){const[a,l,u]=Pg(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rl(s.yt,o.mutation)}})(this.serializer,this.userId,t))}}function So(n){return pt(n,Wl)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{bt(e){return pt(e,Qd)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?st.fromUint8Array(r):st.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ga(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=lr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ur(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?wI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=ji,i=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Qe(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ee.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Is.Kt=new Is;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=255;function MC(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function xg(n){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=MC(255&r[i]);if(s+=o,o!==8)break}return s})(n);return Math.ceil(e/8)}class LC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=xg(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=xg(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(si),this.sn(255)}_n(){this.an(si),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===si?(this.sn(si),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===si?(this.an(si),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class FC{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class UC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Co{constructor(){this.cn=new LC,this.ln=new FC(this.cn),this.hn=new UC(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new As(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Pc(this.En),directionalValue:Pc(this.dn),orderedDocumentKey:Pc(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Tr(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Ng(n.En,e.En),t!==0?t:(t=Ng(n.dn,e.dn),t!==0?t:ee.comparator(n.In,e.In)))}function Ng(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Pc(n){return Mv()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function Og(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class Mg{constructor(e){this.mn=new Be(((t,r)=>Ye.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Bh(e);if(t!==void 0&&!this.wn(t))return!1;const r=ms(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Be(Ye.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ac(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ac(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ac(r.field,r.dir==="asc"?0:1)));return new Yc(Yc.UNKNOWN_ID,this.collectionId,t,ma.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){if(ce(n instanceof Se||n instanceof Ue,20012),n instanceof Se){if(n instanceof DI){const t=n.value.arrayValue?.values?.map((r=>Se.create(n.field,"==",r)))||[];return Ue.create(t,"or")}return n}const e=n.filters.map((t=>fA(t)));return Ue.create(e,n.op)}function BC(n){if(n.getFilters().length===0)return[];const e=sd(fA(n));return ce(pA(e),7391),nd(e)||rd(e)?[e]:e.getFilters()}function nd(n){return n instanceof Se}function rd(n){return n instanceof Ue&&Zd(n)}function pA(n){return nd(n)||rd(n)||(function(t){if(t instanceof Ue&&Wh(t)){for(const r of t.getFilters())if(!nd(r)&&!rd(r))return!1;return!0}return!1})(n)}function sd(n){if(ce(n instanceof Se||n instanceof Ue,34018),n instanceof Se)return n;if(n.filters.length===1)return sd(n.filters[0]);const e=n.filters.map((r=>sd(r)));let t=Ue.create(e,n.op);return t=il(t),pA(t)?t:(ce(t instanceof Ue,64498),ce(qi(t),40251),ce(t.filters.length>1,57927),t.filters.reduce(((r,s)=>cf(r,s))))}function cf(n,e){let t;return ce(n instanceof Se||n instanceof Ue,38388),ce(e instanceof Se||e instanceof Ue,25473),t=n instanceof Se?e instanceof Se?(function(s,i){return Ue.create([s,i],"and")})(n,e):Lg(n,e):e instanceof Se?Lg(e,n):(function(s,i){if(ce(s.filters.length>0&&i.filters.length>0,48005),qi(s)&&qi(i))return PI(s,i.getFilters());const o=Wh(s)?s:i,a=Wh(s)?i:s,l=o.filters.map((u=>cf(u,a)));return Ue.create(l,"or")})(n,e),il(t)}function Lg(n,e){if(qi(e))return PI(e,n.getFilters());{const t=e.filters.map((r=>cf(n,r)));return Ue.create(t,"or")}}function il(n){if(ce(n instanceof Se||n instanceof Ue,11850),n instanceof Se)return n;const e=n.getFilters();if(e.length===1)return il(e[0]);if(SI(n))return n;const t=e.map((s=>il(s))),r=[];return t.forEach((s=>{s instanceof Se?r.push(s):s instanceof Ue&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ue.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.Cn=new lf}addToCollectionParentIndex(e,t){return this.Cn.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(an.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class lf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Be(xe.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="IndexedDbIndexManager",lc=new Uint8Array(0);class GC{constructor(e,t){this.databaseId=t,this.vn=new lf,this.Fn=new pr((r=>Fs(r)),((r,s)=>Oa(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const i={collectionId:r,parent:Lt(s)};return Ug(e).put(i)}return D.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Jv(t),""],!1,!0);return Ug(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==t)break;r.push(On(o.parent))}return r}))}addFieldIndex(e,t){const r=Po(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=oi(e);return i.next((a=>{o.put(kg(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const r=Po(e),s=oi(e),i=ii(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Po(e),r=ii(e),s=oi(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return D.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new Mg(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,t){const r=ii(e);let s=!0;const i=new Map;return D.forEach(this.Mn(t),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=Ee();const a=[];return D.forEach(i,((l,u)=>{z(Fg,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((G=>`${G.fieldPath}:${G.kind}`)).join(",")}`})(l)} to execute ${Fs(t)}`);const h=(function(F,G){const $=Bh(G);if($===void 0)return null;for(const ne of tl(F,$.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null})(u,l),f=(function(F,G){const $=new Map;for(const ne of ms(G))for(const R of tl(F,ne.fieldPath))switch(R.op){case"==":case"in":$.set(ne.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return $.set(ne.fieldPath.canonicalString(),R.value),Array.from($.values())}return null})(u,l),m=(function(F,G){const $=[];let ne=!0;for(const R of ms(G)){const v=R.kind===0?gg(F,R.fieldPath,F.startAt):_g(F,R.fieldPath,F.startAt);$.push(v.value),ne&&(ne=v.inclusive)}return new Hi($,ne)})(u,l),g=(function(F,G){const $=[];let ne=!0;for(const R of ms(G)){const v=R.kind===0?_g(F,R.fieldPath,F.endAt):gg(F,R.fieldPath,F.endAt);$.push(v.value),ne&&(ne=v.inclusive)}return new Hi($,ne)})(u,l),b=this.On(l,u,m),P=this.On(l,u,g),k=this.Nn(l,u,f),U=this.Bn(l.indexId,h,b,m.inclusive,P,g.inclusive,k);return D.forEach(U,(L=>r.Y(L,t.limit).next((F=>{F.forEach((G=>{const $=ee.fromSegments(G.documentKey);o.has($)||(o=o.add($),a.push($))}))}))))})).next((()=>a))}return D.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=BC(Ue.create(e.filters,"and")).map((r=>Yh(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,i.length),u=l/(t!=null?t.length:1),h=[];for(let f=0;f<l;++f){const m=t?this.Ln(t[f/u]):lc,g=this.kn(e,m,r[f%u],s),b=this.qn(e,m,i[f%u],o),P=a.map((k=>this.kn(e,m,k,!0)));h.push(...this.createRange(g,b,P))}return h}kn(e,t,r,s){const i=new As(e,ee.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new As(e,ee.empty(),t,r);return s?i.An():i}xn(e,t){const r=new Mg(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return D.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(l){let u=new Be(Ye.comparator),h=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new Co;for(const s of ms(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Is.Kt.Dt(i,o)}return r.un()}Ln(e){const t=new Co;return Is.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Co;return Is.Kt.Dt(Ea(this.databaseId,t),r.Pn((function(i){const o=ms(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new Co);let i=0;for(const o of ms(e)){const a=r[i++];for(const l of s)if(this.Un(t,o.fieldPath)&&wa(a))s=this.Kn(s,o,a);else{const u=l.Pn(o.kind);Is.Kt.Dt(a,u)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Co;l.seed(a.un()),Is.Kt.Dt(o,l.Pn(t.kind)),i.push(l)}return i}Un(e,t){return!!e.filters.find((r=>r instanceof Se&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Po(e),s=oi(e);return(t?r.J(Gh,IDBKeyRange.bound(t,t)):r.J()).next((i=>{const o=[];return D.forEach(i,(a=>s.get([a.indexId,this.uid]).next((l=>{o.push((function(h,f){const m=f?new ma(f.sequenceNumber,new an(Bs(f.readTime),new ee(On(f.documentKey)),f.largestBatchId)):ma.empty(),g=h.fields.map((([b,P])=>new Ac(Ye.fromServerFormat(b),P)));return new Yc(h.indexId,h.collectionGroup,g,m)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ye(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Po(e),i=oi(e);return this.Gn(e).next((o=>s.J(Gh,IDBKeyRange.bound(t,t)).next((a=>D.forEach(a,(l=>i.put(kg(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,t){const r=new Map;return D.forEach(t,((s,i)=>{const o=r.get(s.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),D.forEach(a,(l=>this.zn(e,s,l).next((u=>{const h=this.jn(i,l);return u.isEqual(h)?D.resolve():this.Jn(e,i,l,u,h)})))))))}))}Hn(e,t,r,s){return ii(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return ii(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=ii(e);let i=new Be(Tr);return s.ee({index:uI,range:IDBKeyRange.only([r.indexId,this.uid,Pc(this.$n(r,t))])},((o,a)=>{i=i.add(new As(r.indexId,t,Og(a.arrayValue),Og(a.directionalValue)))})).next((()=>i))}jn(e,t){let r=new Be(Tr);const s=this.Qn(t,e);if(s==null)return r;const i=Bh(t);if(i!=null){const o=e.data.field(i.fieldPath);if(wa(o))for(const a of o.arrayValue.values||[])r=r.add(new As(t.indexId,e.key,this.Ln(a),s))}else r=r.add(new As(t.indexId,e.key,lc,s));return r}Jn(e,t,r,s,i){z(Fg,"Updating index entries for document '%s'",t.key);const o=[];return(function(l,u,h,f,m){const g=l.getIterator(),b=u.getIterator();let P=ri(g),k=ri(b);for(;P||k;){let U=!1,L=!1;if(P&&k){const F=h(P,k);F<0?L=!0:F>0&&(U=!0)}else P!=null?L=!0:U=!0;U?(f(k),k=ri(b)):L?(m(P),P=ri(g)):(P=ri(g),k=ri(b))}})(s,i,Tr,(a=>{o.push(this.Hn(e,t,r,a))}),(a=>{o.push(this.Yn(e,t,r,a))})),D.waitFor(o)}Gn(e){let t=1;return oi(e).ee({index:lI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((o,a)=>Tr(o,a))).filter(((o,a,l)=>!a||Tr(o,l[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=Tr(o,e),l=Tr(o,t);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,lc,ee.empty()),l=s[o+1].Vn(this.uid,lc,ee.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,t){return Tr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bg)}getMinOffset(e,t){return D.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||ie(44426))))).next(Bg)}}function Ug(n){return pt(n,va)}function ii(n){return pt(n,Jo)}function Po(n){return pt(n,Wd)}function oi(n){return pt(n,Xo)}function Bg(n){ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;qd(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new an(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mA=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e,t){const r=n.store(gn),s=n.store(Li),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.ee({range:o},((h,f,m)=>(a++,m.delete())));i.push(l.next((()=>{ce(a===1,47070,{batchId:t.batchId})})));const u=[];for(const h of t.mutations){const f=oI(e,h.key.path,t.batchId);i.push(s.delete(f)),u.push(h.key)}return D.waitFor(i).next((()=>u))}function ol(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(mA,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);class tu{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){ce(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new tu(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return br(e).ee({index:Ts,range:r},((s,i,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const i=_i(e),o=br(e);return o.add({}).next((a=>{ce(typeof a=="number",49019);const l=new nf(a,t,r,s),u=(function(g,b,P){const k=P.baseMutations.map((L=>rl(g.yt,L))),U=P.mutations.map((L=>rl(g.yt,L)));return{userId:b,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:k,mutations:U}})(this.serializer,this.userId,l),h=[];let f=new Be(((m,g)=>ye(m.canonicalString(),g.canonicalString())));for(const m of s){const g=oI(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,IS))}return f.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),D.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,t){return br(e).get(t).next((r=>r?(ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),vs(this.serializer,r)):null))}er(e,t){return this.Xn[t]?D.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return br(e).ee({index:Ts,range:s},((o,a,l)=>{a.userId===this.userId&&(ce(a.batchId>=r,47524,{tr:r}),i=vs(this.serializer,a)),l.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Cs;return br(e).ee({index:Ts,range:t,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Cs],[this.userId,Number.POSITIVE_INFINITY]);return br(e).J(Ts,t).next((r=>r.map((s=>vs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ec(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return _i(e).ee({range:s},((o,a,l)=>{const[u,h,f]=o,m=On(h);if(u===this.userId&&t.path.isEqual(m))return br(e).get(f).next((g=>{if(!g)throw ie(61480,{nr:o,batchId:f});ce(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:f}),i.push(vs(this.serializer,g))}));l.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(ye);const s=[];return t.forEach((i=>{const o=Ec(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=_i(e).ee({range:a},((u,h,f)=>{const[m,g,b]=u,P=On(g);m===this.userId&&i.path.isEqual(P)?r=r.add(b):f.done()}));s.push(l)})),D.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Ec(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Be(ye);return _i(e).ee({range:o},((l,u,h)=>{const[f,m,g]=l,b=On(m);f===this.userId&&r.isPrefixOf(b)?b.length===s&&(a=a.add(g)):h.done()})).next((()=>this.rr(e,a)))}rr(e,t){const r=[],s=[];return t.forEach((i=>{s.push(br(e).get(i).next((o=>{if(o===null)throw ie(35274,{batchId:i});ce(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(vs(this.serializer,o))})))})),D.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return gA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),D.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return D.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return _i(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const l=On(i[1]);s.push(l)}else a.done()})).next((()=>{ce(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,t){return _A(e,this.userId,t)}_r(e){return yA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Cs,lastStreamToken:""}))}}function _A(n,e,t){const r=Ec(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return _i(n).ee({range:i,X:!0},((a,l,u)=>{const[h,f,m]=a;h===e&&f===s&&(o=!0),u.done()})).next((()=>o))}function br(n){return pt(n,gn)}function _i(n){return pt(n,Li)}function yA(n){return pt(n,_a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new js(0)}static cr(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new js(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>le.fromTimestamp(new Fe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ai(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ce(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const i=[];return ai(e).ee(((o,a)=>{const l=Lo(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))})).next((()=>D.waitFor(i))).next((()=>s))}forEachTarget(e,t){return ai(e).ee(((r,s)=>{const i=Lo(s);t(i)}))}lr(e){return Gg(e).get($c).next((t=>(ce(t!==null,2888),t)))}hr(e,t){return Gg(e).put($c,t)}Pr(e,t){return ai(e).put(hA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Fs(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ai(e).ee({range:s,index:cI},((o,a,l)=>{const u=Lo(a);Oa(t,u.target)&&(i=u,l.done())})).next((()=>i))}addMatchingKeys(e,t,r){const s=[],i=Dr(e);return t.forEach((o=>{const a=Lt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),D.waitFor(s)}removeMatchingKeys(e,t,r){const s=Dr(e);return D.forEach(t,(i=>{const o=Lt(i.path);return D.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,t){const r=Dr(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Dr(e);let i=Ee();return s.ee({range:r,X:!0},((o,a,l)=>{const u=On(o[1]),h=new ee(u);i=i.add(h)})).next((()=>i))}containsKey(e,t){const r=Lt(t.path),s=IDBKeyRange.bound([r],[Jv(r)],!1,!0);let i=0;return Dr(e).ee({index:zd,X:!0,range:s},(([o,a],l,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}At(e,t){return ai(e).get(t).next((r=>r?Lo(r):null))}}function ai(n){return pt(n,Fi)}function Gg(n){return pt(n,Ps)}function Dr(n){return pt(n,Ui)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="LruGarbageCollector",vA=1048576;function qg([n,e],[t,r]){const s=ye(n,t);return s===0?ye(e,r):s}class qC{constructor(e){this.Ir=e,this.buffer=new Be(qg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(Hg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ts(t)?z(Hg,"Ignoring IndexedDB error during garbage collection: ",t):await es(t)}await this.Vr(3e5)}))}}class KC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return D.resolve(Wt.ce);const r=new qC(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(jg)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),fi()<=Re.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function AA(n,e){return new KC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.db=e,this.garbageCollector=AA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return uc(e,r)}removeReference(e,t,r){return uc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uc(e,t)}br(e,t){return(function(s,i){let o=!1;return yA(s).te((a=>_A(s,a,i).next((l=>(l&&(o=!0),D.resolve(!l)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,a)=>{if(a<=t){const l=this.br(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,le.min()),Dr(e).delete((function(f){return[0,Lt(f.path)]})(o)))))}));s.push(l)}})).next((()=>D.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uc(e,t)}Sr(e,t){const r=Dr(e);let s,i=Wt.ce;return r.ee({index:zd},(([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Wt.ce&&t(new ee(On(s)),i),i=u,s=l):i=Wt.ce})).next((()=>{i!==Wt.ce&&t(new ee(On(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(n,e){return Dr(n).put((function(r,s){return{targetId:0,path:Lt(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.changes=new pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ds(e).put(r)}removeEntry(e,t,r){return ds(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sl(o),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=et.newInvalidDocument(t);return ds(e).ee({index:wc,range:IDBKeyRange.only(ko(t))},((s,i)=>{r=this.Cr(t,i)})).next((()=>r))}vr(e,t){let r={size:0,document:et.newInvalidDocument(t)};return ds(e).ee({index:wc,range:IDBKeyRange.only(ko(t))},((s,i)=>{r={document:this.Cr(t,i),size:ol(i)}})).next((()=>r))}getEntries(e,t){let r=rn();return this.Fr(e,t,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,t){let r=rn(),s=new ze(ee.comparator);return this.Fr(e,t,((i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,ol(o))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return D.resolve();let s=new Be(Wg);t.forEach((l=>s=s.add(l)));const i=IDBKeyRange.bound(ko(s.first()),ko(s.last())),o=s.getIterator();let a=o.getNext();return ds(e).ee({index:wc,range:i},((l,u,h)=>{const f=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Wg(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(ko(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),sl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ds(e).J(IDBKeyRange.bound(a,l,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=rn();for(const f of u){const m=this.Cr(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(La(t,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,t,r,s){let i=rn();const o=zg(t,r),a=zg(t,an.max());return ds(e).ee({index:aI,range:IDBKeyRange.bound(o,a,!0)},((l,u,h)=>{const f=this.Cr(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new QC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Kg(e).get(jh).next((t=>(ce(!!t,20021),t)))}Dr(e,t){return Kg(e).put(jh,t)}Cr(e,t){if(t){const r=xC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return et.newInvalidDocument(e)}}function wA(n){return new WC(n)}class QC extends EA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new pr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Be(((i,o)=>ye(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Cg(this.Nr.serializer,o);s=s.add(i.path.popLast());const u=ol(l);r+=u-a.size,t.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Cg(this.Nr.serializer,o.convertToNoDocument(le.min()));t.push(this.Nr.addEntry(e,i,l))}})),s.forEach((i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),t.push(this.Nr.updateMetadata(e,r)),D.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function Kg(n){return pt(n,ya)}function ds(n){return pt(n,Jc)}function ko(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zg(n,e){const t=e.documentKey.path.toArray();return[n,sl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Wg(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=ye(t[i],r[i]),s)return s;return s=ye(t.length,r.length),s||(s=ye(t[t.length-2],r[r.length-2]),s||ye(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ta(r.mutation,s,Qt.empty(),Fe.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ee()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ee()){const s=Mn();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let o=Oo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Mn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ee())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,r,s){let i=rn();const o=ea(),a=(function(){return ea()})();return t.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof mr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ta(h.mutation,u,h.mutation.getFieldMask(),Fe.now())):o.set(u.key,Qt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),t.forEach(((u,h)=>a.set(u,new YC(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,t){const r=ea();let s=new ze(((o,a)=>o-a)),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Qt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=BI();h.forEach((m=>{if(!i.has(m)){const g=WI(t.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return D.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):D.resolve(Mn());let a=Mi,l=i;return o.next((u=>D.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?D.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{l=l.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ee()))).next((h=>({batchId:a,changes:UI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next((r=>{let s=Oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,i).next((a=>D.forEach(a,(l=>{const u=(function(f,m){return new to(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((f,m)=>{o=o.insert(f,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,et.newInvalidDocument(h)))}));let a=Oo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&ta(h.mutation,u,Qt.empty(),Fe.now()),La(t,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return D.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:qt(s.createTime)}})(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:dA(s.bundledQuery),readTime:qt(s.readTime)}})(t)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.overlays=new ze(ee.comparator),this.qr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mn();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),D.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const s=Mn(),i=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new ze(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Mn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Mn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return D.resolve(a)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sf(t,r));let i=this.qr.get(t);i===void 0&&(i=Ee(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this.Qr=new Be(_t.$r),this.Ur=new Be(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new _t(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new _t(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ee(new xe([])),r=new _t(t,e),s=new _t(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ee(new xe([])),r=new _t(t,e),s=new _t(t,e+1);let i=Ee();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new _t(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ee.comparator(e.key,t.key)||ye(e.Yr,t.Yr)}static Kr(e,t){return ye(e.Yr,t.Yr)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Be(_t.$r)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nf(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,t){return D.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Cs:this.tr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _t(t,0),s=new _t(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(ye);return t.forEach((s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),D.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new _t(new ee(i),0);let a=new Be(ye);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),D.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return D.forEach(t.mutations,(s=>{const i=new _t(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new _t(t,0),s=this.Zr.firstAfterOrEqual(r);return D.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.ri=e,this.docs=(function(){return new ze(ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():et.newInvalidDocument(t))}getEntries(e,t){let r=rn();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=rn();const o=t.path,a=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||qd(tI(h),r)<=0||(s.has(h.key)||La(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ie(9500)}ii(e,t){return D.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new tP(this)}getSize(e){return D.resolve(this.size)}}class tP extends EA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),D.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.persistence=e,this.si=new pr((t=>Fs(t)),Oa),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new uf,this.targetCount=0,this.ai=js.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),D.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new js(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.Pr(t),D.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),D.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wt(0),this.li=!1,this.li=!0,this.hi=new $C,this.referenceDelegate=e(this),this.Pi=new nP(this),this.indexManager=new jC,this.remoteDocumentCache=(function(s){return new eP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new uA(t),this.Ii=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ZC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const s=new rP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return D.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class rP extends rI{constructor(e){super(),this.currentSequenceNumber=e}}class nu{constructor(e){this.persistence=e,this.Ri=new uf,this.Vi=null}static mi(e){return new nu(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),D.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.fi,(r=>{const s=ee.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return D.or([()=>D.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class al{constructor(e,t){this.persistence=e,this.pi=new pr((r=>Lt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=AA(this,t)}static mi(e,t){return new al(e,t)}Ei(){}di(e){return D.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return D.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?D.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((a=>{a||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bc(e.data.value)),t}br(e,t,r){return D.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.serializer=e}k(e,t,r,s){const i=new Hl("createOrUpgrade",t);r<1&&s>=1&&((function(l){l.createObjectStore(Na)})(e),(function(l){l.createObjectStore(_a,{keyPath:vS}),l.createObjectStore(gn,{keyPath:sg,autoIncrement:!0}).createIndex(Ts,ig,{unique:!0}),l.createObjectStore(Li)})(e),Qg(e),(function(l){l.createObjectStore(gs)})(e));let o=D.resolve();return r<3&&s>=3&&(r!==0&&((function(l){l.deleteObjectStore(Ui),l.deleteObjectStore(Fi),l.deleteObjectStore(Ps)})(e),Qg(e)),o=o.next((()=>(function(l){const u=l.store(Ps),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put($c,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(l,u){return u.store(gn).J().next((f=>{l.deleteObjectStore(gn),l.createObjectStore(gn,{keyPath:sg,autoIncrement:!0}).createIndex(Ts,ig,{unique:!0});const m=u.store(gn),g=f.map((b=>m.put(b)));return D.waitFor(g)}))})(e,i)))),o=o.next((()=>{(function(l){l.createObjectStore(Bi,{keyPath:CS})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(l){l.createObjectStore(ya)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(Kl,{keyPath:PS})})(e),(function(l){l.createObjectStore(zl,{keyPath:kS})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(l){const u=l.createObjectStore(Wl,{keyPath:LS});u.createIndex(Hh,FS,{unique:!1}),u.createIndex(hI,US,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(l){const u=l.createObjectStore(Jc,{keyPath:AS});u.createIndex(wc,ES),u.createIndex(aI,wS)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(gs)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(l){l.createObjectStore(Wd,{keyPath:VS,autoIncrement:!0}).createIndex(Gh,DS,{unique:!1}),l.createObjectStore(Xo,{keyPath:xS}).createIndex(lI,NS,{unique:!1}),l.createObjectStore(Jo,{keyPath:OS}).createIndex(uI,MS,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{t.objectStore(Xo).clear()})).next((()=>{t.objectStore(Jo).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(Qd,{keyPath:BS})})(e)}))),r<18&&s>=18&&Mv()&&(o=o.next((()=>{t.objectStore(Xo).clear()})).next((()=>{t.objectStore(Jo).clear()}))),o}wi(e){let t=0;return e.store(gs).ee(((r,s)=>{t+=ol(s)})).next((()=>{const r={byteSize:t};return e.store(ya).put(jh,r)}))}yi(e){const t=e.store(_a),r=e.store(gn);return t.J().next((s=>D.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Cs],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ts,o).next((a=>D.forEach(a,(l=>{ce(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=vs(this.serializer,l);return gA(e,i.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ui),r=e.store(gs);return e.store(Ps).get($c).next((s=>{const i=[];return r.ee(((o,a)=>{const l=new xe(o),u=(function(f){return[0,Lt(f)]})(l);i.push(t.get(u).next((h=>h?D.resolve():(f=>t.put({targetId:0,path:Lt(f),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>D.waitFor(i)))}))}bi(e,t){e.createObjectStore(va,{keyPath:SS});const r=t.store(va),s=new lf,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Lt(l)})}};return t.store(gs).ee({X:!0},((o,a)=>{const l=new xe(o);return i(l.popLast())})).next((()=>t.store(Li).ee({X:!0},(([o,a,l],u)=>{const h=On(a);return i(h.popLast())}))))}Di(e){const t=e.store(Fi);return t.ee(((r,s)=>{const i=Lo(s),o=hA(this.serializer,i);return t.put(o)}))}Ci(e,t){const r=t.store(gs),s=[];return r.ee(((i,o)=>{const a=t.store(Jc),l=(function(f){return f.document?new ee(xe.fromString(f.document.name).popFirst(5)):f.noDocument?ee.fromSegments(f.noDocument.path):f.unknownDocument?ee.fromSegments(f.unknownDocument.path):ie(36783)})(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>D.waitFor(s)))}Fi(e,t){const r=t.store(gn),s=wA(this.serializer),i=new hf(nu.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let u=a.get(l.userId)??Ee();vs(this.serializer,l).keys().forEach((h=>u=u.add(h))),a.set(l.userId,u)})),D.forEach(a,((l,u)=>{const h=new Ct(u),f=eu.wt(this.serializer,h),m=i.getIndexManager(h),g=tu.wt(h,this.serializer,m,i.referenceDelegate);return new TA(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new qh(t,Wt.ce),l).next()}))}))}}function Qg(n){n.createObjectStore(Ui,{keyPath:bS}).createIndex(zd,RS,{unique:!0}),n.createObjectStore(Fi,{keyPath:"targetId"}).createIndex(cI,TS,{unique:!0}),n.createObjectStore(Ps)}const Rr="IndexedDbPersistence",nh=18e5,rh=5e3,sh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iP="main";class df{constructor(e,t,r,s,i,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!df.v())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zC(this,s),this.$i=t+iP,this.serializer=new uA(l),this.Ui=new Gr(this.$i,this.Ni,new sP(this.serializer)),this.hi=new OC,this.Pi=new HC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wA(this.serializer),this.Ii=new NC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&nt(Rr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,sh);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Wt(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ts(e))return z(Rr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(Rr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Vo(e).get(ni).next((t=>D.resolve(this.es(t))))}ts(e){return hc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,nh)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=pt(t,Bi);return r.J().next((s=>{const i=this.ss(s,nh),o=s.filter((a=>i.indexOf(a)===-1));return D.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?D.resolve(!0):Vo(e).get(ni).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,rh)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,sh);return!1}}return!(!this.networkEnabled||!this.inForeground)||hc(e).J().next((r=>this.ss(r,rh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&z(Rr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Na,Bi],(e=>{const t=new qh(e,Wt.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>hc(e).J().next((t=>this.ss(t,nh).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return tu.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return eu.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){z(Rr,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=(function(l){return l===18?HS:l===17?mI:l===16?GS:l===15?Yd:l===14?pI:l===13?fI:l===12?jS:l===11?dI:void ie(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(a=>(o=new qh(a,this.ci?this.ci.next():Wt.ce),t==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new J(B.FAILED_PRECONDITION,nI);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return Vo(e).get(ni).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,rh)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,sh)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vo(e).put(ni,t)}static v(){return Gr.v()}Zi(e){const t=Vo(e);return t.get(ni).next((r=>this.es(r)?(z(Rr,"Releasing primary lease."),t.delete(ni)):D.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Ov()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return z(Rr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return nt(Rr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){nt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vo(n){return pt(n,Na)}function hc(n){return pt(n,Bi)}function bA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ee(),s=Ee();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ff(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ov()?8:sI(dt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new oP;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(fi()<=Re.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",pi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),D.resolve()):(fi()<=Re.DEBUG&&z("QueryEngine","Query:",pi(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(fi()<=Re.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",pi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(t))):D.resolve())}ys(e,t){if(yg(t))return D.resolve(null);let r=sn(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Jh(t,null,"F"),r=sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ee(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,a);return this.Cs(t,u,o,l.readTime)?this.ys(e,Jh(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,s){return yg(t)||s.isEqual(le.min())?D.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,r,s)?D.resolve(null):(fi()<=Re.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pi(t)),this.vs(e,o,t,eI(s,Mi)).next((a=>a)))}))}Ds(e,t){let r=new Be(LI(e));return t.forEach(((s,i)=>{La(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return fi()<=Re.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",pi(t)),this.ps.getDocumentsMatchingQuery(e,t,an.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="LocalStore",aP=3e8;class cP{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new ze(ye),this.xs=new pr((i=>Fs(i)),Oa),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function SA(n,e,t,r){return new cP(n,e,t,r)}async function CA(n,e){const t=ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let l=Ee();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function lP(n,e){const t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,m=f.keys();let g=D.resolve();return m.forEach((b=>{g=g.next((()=>h.getEntry(l,b))).next((P=>{const k=u.docVersions.get(b);ce(k!==null,48541),P.version.compareTo(k)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Ee();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function PA(n){const e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uP(n,e){const t=ae(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const m=s.get(f);if(!m)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(st.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),(function(P,k,U){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=aP?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(m,g,h)&&a.push(t.Pi.updateTargetData(i,g))}));let l=rn(),u=Ee();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(hP(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(le.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return D.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(t.Ms=s,i)))}function hP(n,e,t){let r=Ee(),s=Ee();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let o=rn();return t.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z(pf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function dP(n,e){const t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function cl(n,e){const t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,D.resolve(s)):t.Pi.allocateTargetId(r).next((o=>(s=new nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Yi(n,e,t){const r=ae(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ts(o))throw o;z(pf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function id(n,e,t){const r=ae(n);let s=le.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=ae(l),m=f.xs.get(h);return m!==void 0?D.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)})(r,o,sn(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?s:le.min(),t?i:Ee()))).next((a=>(DA(r,MI(e),a),{documents:a,Qs:i})))))}function kA(n,e){const t=ae(n),r=ae(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function VA(n,e){const t=ae(n),r=t.Os.get(e)||le.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,eI(r,Mi),Number.MAX_SAFE_INTEGER))).then((s=>(DA(t,e,s),s)))}function DA(n,e,t){let r=n.Os.get(e)||le.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firestore_clients";function Yg(n,e){return`${xA}_${n}_${e}`}const NA="firestore_mutations";function Xg(n,e,t){let r=`${NA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const OA="firestore_targets";function ih(n,e){return`${OA}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SharedClientState";class ll{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ws(e,t,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new J(s.error.code,s.error.message))),o?new ll(e,t,s.state,i):(nt(Nn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class na{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new J(r.error.code,r.error.message))),i?new na(e,r.state,s):(nt(Nn,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ul{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=ef();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=iI(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ul(e,i):(nt(Nn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class mf{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new mf(t.clientId,t.onlineState):(nt(Nn,`Failed to parse online state: ${e}`),null)}}class od{constructor(){this.activeTargetIds=ef()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oh{constructor(e,t,r,s,i){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ze(ye),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Yg(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new od),this.ro=new RegExp(`^${xA}_${o}_([^_]*)$`),this.io=new RegExp(`^${NA}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${OA}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Yg(this.persistenceKey,r));if(s){const i=ul.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ih(this.persistenceKey,e));if(s){const i=na.Ws(e,s);i&&(r=i.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ih(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return z(Nn,"READ",e,t),t}setItem(e,t){z(Nn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){z(Nn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(z(Nn,"EVENT",t.key,t.newValue),t.key===this.eo)return void nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(i){let o=Wt.ce;if(i!=null)try{const a=JSON.parse(i);ce(typeof a=="number",30636,{So:i}),o=a}catch(a){nt(Nn,"Failed to read sequence number from WebStorage",a)}return o})(t.newValue);r!==Wt.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const s=new ll(this.currentUser,e,t,r),i=Xg(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const t=Xg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const s=ih(this.persistenceKey,e),i=new na(e,t,r);this.setItem(s,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return ul.Ws(r,t)}fo(e,t){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return ll.Ws(new Ct(i),s,t)}yo(e,t){const r=this.so.exec(e),s=Number(r[1]);return na.Ws(s,t)}uo(e){return mf.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);z(Nn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach((l=>{s.has(l)||o.push(l)})),s.forEach((l=>{i.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=ef();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class MA{constructor(){this.Mo=new od,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new od,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="ConnectivityMonitor";class $g{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(Jg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(Jg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function ad(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="RestConnection",pP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const o=ad(),a=this.zo(e,t.toUriEncodedString());z(ah,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=zs(u);return this.Jo(e,a,l,r,h).then((f=>(z(ah,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw pa(ah,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}Ho(e,t,r,s,i,o){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+eo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=pP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class _P extends mP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=ad();return new Promise(((a,l)=>{const u=new Kv;u.setWithCredentials(!0),u.listenOnce(zv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ic.NO_ERROR:const f=u.getResponseJson();z(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Ic.TIMEOUT:z(St,`RPC '${e}' ${o} timed out`),l(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const m=u.getStatus();if(z(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g?.error;if(b&&b.status&&b.message){const P=(function(U){const L=U.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(L)>=0?L:B.UNKNOWN})(b.status);l(new J(P,b.message))}else l(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(B.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{z(St,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);z(St,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",h,r,15)}))}T_(e,t,r){const s=ad(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yv(),a=Qv(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=i.join("");z(St,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,g=!1;const b=new gP({Yo:k=>{g?z(St,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(z(St,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),z(St,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Zo:()=>f.close()}),P=(k,U,L)=>{k.listen(U,(F=>{try{L(F)}catch(G){setTimeout((()=>{throw G}),0)}}))};return P(f,No.EventType.OPEN,(()=>{g||(z(St,`RPC '${e}' stream ${s} transport opened.`),b.o_())})),P(f,No.EventType.CLOSE,(()=>{g||(g=!0,z(St,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))})),P(f,No.EventType.ERROR,(k=>{g||(g=!0,pa(St,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),b.a_(new J(B.UNAVAILABLE,"The operation could not be completed")))})),P(f,No.EventType.MESSAGE,(k=>{if(!g){const U=k.data[0];ce(!!U,16349);const L=U,F=L?.error||L[0]?.error;if(F){z(St,`RPC '${e}' stream ${s} received error:`,F);const G=F.status;let $=(function(v){const y=it[v];if(y!==void 0)return XI(y)})(G),ne=F.message;$===void 0&&($=B.INTERNAL,ne="Unknown error status: "+G+" with message "+F.message),g=!0,b.a_(new J($,ne)),f.close()}else z(St,`RPC '${e}' stream ${s} received:`,U),b.u_(U)}})),P(a,Wv.STAT_EVENT,(k=>{k.stat===Fh.PROXY?z(St,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Fh.NOPROXY&&z(St,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof window<"u"?window:null}function kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){return new wC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="PersistentStream";class UA{constructor(e,t,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(nt(t.toString()),nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return z(Zg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(z(Zg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yP extends UA{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RC(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?qt(o.readTime):le.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ed(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=el(l)?{documents:sA(i,l)}:{query:iA(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZI(i,o.resumeToken);const u=$h(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Qi(i,o.snapshotVersion.toTimestamp());const u=$h(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=CC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ed(this.serializer),t.removeTarget=e,this.q_(t)}}class vP extends UA{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SC(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ed(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>rl(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{}class AP extends IP{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Zh(t,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Zh(t,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(B.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nt(t),this.aa=!1):z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class wP{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Qs(this)&&(z(Gs,"Restarting streams for network reachability change."),await(async function(l){const u=ae(l);u.Ea.add(4),await Ba(u),u.Ra.set("Unknown"),u.Ea.delete(4),await su(u)})(this))}))})),this.Ra=new EP(r,s)}}async function su(n){if(Qs(n))for(const e of n.da)await e(!0)}async function Ba(n){for(const e of n.da)await e(!1)}function iu(n,e){const t=ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yf(t)?_f(t):so(t).O_()&&gf(t,e))}function Xi(n,e){const t=ae(n),r=so(t);t.Ia.delete(e),r.O_()&&BA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qs(t)&&t.Ra.set("Unknown"))}function gf(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}so(n).Y_(e)}function BA(n,e){n.Va.Ue(e),so(n).Z_(e)}function _f(n){n.Va=new vC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),so(n).start(),n.Ra.ua()}function yf(n){return Qs(n)&&!so(n).x_()&&n.Ia.size>0}function Qs(n){return ae(n).Ea.size===0}function jA(n){n.Va=void 0}async function TP(n){n.Ra.set("Online")}async function bP(n){n.Ia.forEach(((e,t)=>{gf(n,e)}))}async function RP(n,e){jA(n),yf(n)?(n.Ra.ha(e),_f(n)):n.Ra.set("Unknown")}async function SP(n,e,t){if(n.Ra.set("Online"),e instanceof $I&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(n,e)}catch(r){z(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hl(n,r)}else if(e instanceof Cc?n.Va.Ze(e):e instanceof JI?n.Va.st(e):n.Va.tt(e),!t.isEqual(le.min()))try{const r=await PA(n.localStore);t.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),BA(i,l);const f=new nr(h.target,l,u,h.sequenceNumber);gf(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){z(Gs,"Failed to raise snapshot:",r),await hl(n,r)}}async function hl(n,e,t){if(!ts(e))throw e;n.Ea.add(1),await Ba(n),n.Ra.set("Offline"),t||(t=()=>PA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{z(Gs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await su(n)}))}function GA(n,e){return e().catch((t=>hl(n,t,e)))}async function ro(n){const e=ae(n),t=Xr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cs;for(;CP(e);)try{const s=await dP(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,PP(e,s)}catch(s){await hl(e,s)}HA(e)&&qA(e)}function CP(n){return Qs(n)&&n.Ta.length<10}function PP(n,e){n.Ta.push(e);const t=Xr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function HA(n){return Qs(n)&&!Xr(n).x_()&&n.Ta.length>0}function qA(n){Xr(n).start()}async function kP(n){Xr(n).ra()}async function VP(n){const e=Xr(n);for(const t of n.Ta)e.ea(t.mutations)}async function DP(n,e,t){const r=n.Ta.shift(),s=rf.from(r,e,t);await GA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await ro(n)}async function xP(n,e){e&&Xr(n).X_&&await(async function(r,s){if((function(o){return gC(o)&&o!==B.ABORTED})(s.code)){const i=r.Ta.shift();Xr(r).B_(),await GA(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await ro(r)}})(n,e),HA(n)&&qA(n)}async function e_(n,e){const t=ae(n);t.asyncQueue.verifyOperationInProgress(),z(Gs,"RemoteStore received new credentials");const r=Qs(t);t.Ea.add(3),await Ba(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await su(t)}async function cd(n,e){const t=ae(n);e?(t.Ea.delete(2),await su(t)):e||(t.Ea.add(2),await Ba(t),t.Ra.set("Unknown"))}function so(n){return n.ma||(n.ma=(function(t,r,s){const i=ae(t);return i.sa(),new yP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:TP.bind(null,n),t_:bP.bind(null,n),r_:RP.bind(null,n),H_:SP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yf(n)?_f(n):n.Ra.set("Unknown")):(await n.ma.stop(),jA(n))}))),n.ma}function Xr(n){return n.fa||(n.fa=(function(t,r,s){const i=ae(t);return i.sa(),new vP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:kP.bind(null,n),r_:xP.bind(null,n),ta:VP.bind(null,n),na:DP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ro(n)):(await n.fa.stop(),n.Ta.length>0&&(z(Gs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new vf(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(n,e){if(nt("AsyncQueue",`${e}: ${n}`),ts(n))return new J(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{static emptySet(e){return new Ri(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Oo(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ri)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.ga=new ze(ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ji{constructor(e,t,r,s,i,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new Ji(e,t,Ri.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OP{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ae(t),i=s.queries;s.queries=n_(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new J(B.ABORTED,"Firestore shutting down"))}}function n_(){return new pr((n=>OI(n)),Xl)}async function KA(n,e){const t=ae(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new NP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=If(o,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Af(t)}async function zA(n,e){const t=ae(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function MP(n,e){const t=ae(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Af(t)}function LP(n,e,t){const r=ae(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function Af(n){n.Ca.forEach((e=>{e.next()}))}var ld,r_;(r_=ld||(ld={})).Ma="default",r_.Cache="cache";class WA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class YA{constructor(e){this.key=e}}class FP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ee(),this.mutatedKeys=Ee(),this.eu=LI(e),this.tu=new Ri(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new t_,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const m=s.get(h),g=La(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;m&&g?m.data.isEqual(g.data)?b!==P&&(r.track({type:3,doc:g}),k=!0):this.su(m,g)||(r.track({type:2,doc:g}),k=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),k=!0):m&&!g&&(r.track({type:1,doc:m}),k=!0,(l||u)&&(a=!0)),k&&(g?(o=o.add(g),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,b){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:k})}};return P(g)-P(b)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ji(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ee(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new YA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new QA(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ee();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ji.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const io="SyncEngine";class UP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BP{constructor(e){this.key=e,this.hu=!1}}class jP{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pr((a=>OI(a)),Xl),this.Iu=new Map,this.Eu=new Set,this.du=new ze(ee.comparator),this.Au=new Map,this.Ru=new uf,this.Vu={},this.mu=new Map,this.fu=js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GP(n,e,t=!0){const r=ou(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await XA(r,e,t,!0),s}async function HP(n,e){const t=ou(n);await XA(t,e,!0,!1)}async function XA(n,e,t,r){const s=await cl(n.localStore,sn(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await Ef(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&iu(n.remoteStore,s),a}async function Ef(n,e,t,r,s){n.pu=(f,m,g)=>(async function(P,k,U,L){let F=k.view.ru(U);F.Cs&&(F=await id(P.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,F))));const G=L&&L.targetChanges.get(k.targetId),$=L&&L.targetMismatches.get(k.targetId)!=null,ne=k.view.applyChanges(F,P.isPrimaryClient,G,$);return ud(P,k.targetId,ne.au),ne.snapshot})(n,f,m,g);const i=await id(n.localStore,e,!0),o=new FP(e,i.Qs),a=o.ru(i.documents),l=Ua.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,l);ud(n,t,u.au);const h=new UP(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function qP(n,e,t){const r=ae(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Xl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yi(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Xi(r.remoteStore,s.targetId),$i(r,s.targetId)})).catch(es)):($i(r,s.targetId),await Yi(r.localStore,s.targetId,!0))}async function KP(n,e){const t=ae(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xi(t.remoteStore,r.targetId))}async function zP(n,e,t){const r=Rf(n);try{const s=await(function(o,a){const l=ae(o),u=Fe.now(),h=a.reduce(((g,b)=>g.add(b.key)),Ee());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let b=rn(),P=Ee();return l.Ns.getEntries(g,h).next((k=>{b=k,b.forEach(((U,L)=>{L.isValidDocument()||(P=P.add(U))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,b))).next((k=>{f=k;const U=[];for(const L of a){const F=pC(L,f.get(L.key).overlayedDocument);F!=null&&U.push(new mr(L.key,F,bI(F.value.mapValue),Ot.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,U,a)})).next((k=>{m=k;const U=k.applyToLocalDocumentSet(f,P);return l.documentOverlayCache.saveOverlays(g,k.batchId,U)}))})).then((()=>({batchId:m.batchId,changes:UI(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new ze(ye)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,t),await rs(r,s.changes),await ro(r.remoteStore)}catch(s){const i=If(s,"Failed to persist write");t.reject(i)}}async function JA(n,e){const t=ae(n);try{const r=await uP(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=t.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))})),await rs(t,r,e)}catch(r){await es(r)}}function s_(n,e,t){const r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=ae(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const m of f.Sa)m.va(a)&&(u=!0)})),u&&Af(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WP(n,e,t){const r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ze(ee.comparator);o=o.insert(i,et.newNoDocument(i,le.min()));const a=Ee().add(i),l=new Fa(le.min(),new Map,new ze(ye),o,a);await JA(r,l),r.du=r.du.remove(i),r.Au.delete(e),bf(r)}else await Yi(r.localStore,e,!1).then((()=>$i(r,e,t))).catch(es)}async function QP(n,e){const t=ae(n),r=e.batch.batchId;try{const s=await lP(t.localStore,e);Tf(t,r,null),wf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await rs(t,s)}catch(s){await es(s)}}async function YP(n,e,t){const r=ae(n);try{const s=await(function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(ce(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Tf(r,e,t),wf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await rs(r,s)}catch(s){await es(s)}}function wf(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Tf(n,e,t){const r=ae(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function $i(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||$A(n,r)}))}function $A(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xi(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),bf(n))}function ud(n,e,t){for(const r of t)r instanceof QA?(n.Ru.addReference(r.key,e),XP(n,r)):r instanceof YA?(z(io,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||$A(n,r.key)):ie(19791,{wu:r})}function XP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(z(io,"New document in limbo: "+t),n.Eu.add(r),bf(n))}function bf(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ee(xe.fromString(e)),r=n.fu.next();n.Au.set(r,new BP(t)),n.du=n.du.insert(t,r),iu(n.remoteStore,new nr(sn(Ma(t.path)),r,"TargetPurposeLimboResolution",Wt.ce))}}async function rs(n,e,t){const r=ae(n),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=ff.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>D.forEach(u,(m=>D.forEach(m.Es,(g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g))).next((()=>D.forEach(m.ds,(g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))))))}catch(f){if(!ts(f))throw f;z(pf,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ms.get(m),b=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,P)}}})(r.localStore,i))}async function JP(n,e){const t=ae(n);if(!t.currentUser.isEqual(e)){z(io,"User change. New user:",e.toKey());const r=await CA(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new J(B.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rs(t,r.Ls)}}function $P(n,e){const t=ae(n),r=t.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let s=Ee();const i=t.Iu.get(e);if(!i)return s;for(const o of i){const a=t.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function ZP(n,e){const t=ae(n),r=await id(t.localStore,e.query,!0),s=e.view.cu(r);return t.isPrimaryClient&&ud(t,e.targetId,s.au),s}async function e2(n,e){const t=ae(n);return VA(t.localStore,e).then((r=>rs(t,r)))}async function t2(n,e,t,r){const s=ae(n),i=await(function(a,l){const u=ae(a),h=ae(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.er(f,l).next((m=>m?u.localDocuments.getDocuments(f,m):D.resolve(null)))))})(s.localStore,e);i!==null?(t==="pending"?await ro(s.remoteStore):t==="acknowledged"||t==="rejected"?(Tf(s,e,r||null),wf(s,e),(function(a,l){ae(ae(a).mutationQueue).ir(l)})(s.localStore,e)):ie(6720,"Unknown batchState",{Su:t}),await rs(s,i)):z(io,"Cannot apply mutation batch with id: "+e)}async function n2(n,e){const t=ae(n);if(ou(t),Rf(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await i_(t,r.toArray());t.gu=!0,await cd(t.remoteStore,!0);for(const i of s)iu(t.remoteStore,i)}else if(e===!1&&t.gu!==!1){const r=[];let s=Promise.resolve();t.Iu.forEach(((i,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>($i(t,o),Yi(t.localStore,o,!0)))),Xi(t.remoteStore,o)})),await s,await i_(t,r),(function(o){const a=ae(o);a.Au.forEach(((l,u)=>{Xi(a.remoteStore,u)})),a.Ru.Jr(),a.Au=new Map,a.du=new ze(ee.comparator)})(t),t.gu=!1,await cd(t.remoteStore,!1)}}async function i_(n,e,t){const r=ae(n),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await cl(r.localStore,sn(l[0]));for(const u of l){const h=r.Tu.get(u),f=await ZP(r,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await kA(r.localStore,o);a=await cl(r.localStore,u),await Ef(r,ZA(u),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function ZA(n){return xI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function r2(n){return(function(t){return ae(ae(t).persistence).Ts()})(ae(n).localStore)}async function s2(n,e,t,r){const s=ae(n);if(s.gu)return void z(io,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const o=await VA(s.localStore,MI(i[0])),a=Fa.createSynthesizedRemoteEventForCurrentChange(e,t==="current",st.EMPTY_BYTE_STRING);await rs(s,o,a);break}case"rejected":await Yi(s.localStore,e,!0),$i(s,e,r);break;default:ie(64155,t)}}async function i2(n,e,t){const r=ou(n);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){z(io,"Adding an already active target "+s);continue}const i=await kA(r.localStore,s),o=await cl(r.localStore,i);await Ef(r,ZA(i),o.targetId,!1,o.resumeToken),iu(r.remoteStore,o)}for(const s of t)r.Iu.has(s)&&await Yi(r.localStore,s,!1).then((()=>{Xi(r.remoteStore,s),$i(r,s)})).catch(es)}}function ou(n){const e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.Pu.H_=MP.bind(null,e.eventManager),e.Pu.yu=LP.bind(null,e.eventManager),e}function Rf(n){const e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YP.bind(null,e),e}class Ra{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return SA(this.persistence,new RA,e.initialUser,this.serializer)}Cu(e){return new hf(nu.mi,this.serializer)}Du(e){return new MA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ra.provider={build:()=>new Ra};class o2 extends Ra{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ce(this.persistence.referenceDelegate instanceof al,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new hf((r=>al.mi(r,t)),this.serializer)}}class eE extends Ra{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Rf(this.xu.syncEngine),await ro(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return SA(this.persistence,new RA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new IA(r,e.asyncQueue,t)}Mu(e,t){const r=new _S(t,this.persistence);return new gS(e.asyncQueue,r)}Cu(e){const t=bA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new df(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LA(),kc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new MA}}class a2 extends eE{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof oh&&(this.sharedClientState.syncEngine={Co:t2.bind(null,t),vo:s2.bind(null,t),Fo:i2.bind(null,t),Ts:r2.bind(null,t),Do:e2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await n2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=LA();if(!oh.v(t))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oh(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Sa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JP.bind(null,this.syncEngine),await cd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OP})()}createDatastore(e){const t=ru(e.databaseInfo.databaseId),r=(function(i){return new _P(i)})(e.databaseInfo);return(function(i,o,a,l){return new AP(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,o,a){return new wP(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>s_(this.syncEngine,t,0)),(function(){return $g.v()?new $g:new fP})())}createSyncEngine(e,t){return(function(s,i,o,a,l,u,h){const f=new jP(s,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ae(t);z(Gs,"RemoteStore shutting down."),r.Ea.add(5),await Ba(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sa.provider={build:()=>new Sa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class c2{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{z(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(z(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=If(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ch(n,e){n.asyncQueue.verifyOperationInProgress(),z(Jr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await CA(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function o_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await l2(n);z(Jr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>e_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>e_(e.remoteStore,s))),n._onlineComponents=e}async function l2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(Jr,"Using user provided OfflineComponentProvider");try{await ch(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;pa("Error using user provided cache. Falling back to memory cache: "+t),await ch(n,new Ra)}}else z(Jr,"Using default OfflineComponentProvider"),await ch(n,new o2(void 0));return n._offlineComponents}async function nE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(Jr,"Using user provided OnlineComponentProvider"),await o_(n,n._uninitializedComponentsProvider._online)):(z(Jr,"Using default OnlineComponentProvider"),await o_(n,new Sa))),n._onlineComponents}function u2(n){return nE(n).then((e=>e.syncEngine))}async function hd(n){const e=await nE(n),t=e.eventManager;return t.onListen=GP.bind(null,e.syncEngine),t.onUnlisten=qP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KP.bind(null,e.syncEngine),t}function h2(n,e,t={}){const r=new ir;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new tE({next:m=>{h.Nu(),o.enqueueAndForget((()=>zA(i,f)));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new WA(Ma(a.path),h,{includeMetadataChanges:!0,qa:!0});return KA(i,f)})(await hd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="firestore.googleapis.com",c_=!0;class l_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d2,this.ssl=c_}else this.host=e.host,this.ssl=e.ssl??c_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vA)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sS;switch(r.type){case"firstParty":return new aS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=a_.get(t);r&&(z("ComponentProvider","Removing Datastore"),a_.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class tt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xa(t,tt._jsonSchema))return new tt(e,r||null,new ee(xe.fromString(t.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:ot("string",tt._jsonSchemaVersion),referencePath:ot("string")};class Hr extends Ys{constructor(e,t,r){super(e,t,Ma(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new ee(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function dl(n,e,...t){if(n=ft(n),$v("collection","path",e),n instanceof Sf){const r=xe.fromString(e,...t);return Zm(r),new Hr(n,null,r)}{if(!(n instanceof tt||n instanceof Hr))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return Zm(r),new Hr(n.firestore,null,r)}}function kt(n,e,...t){if(n=ft(n),arguments.length===1&&(e=Hd.newId()),$v("doc","path",e),n instanceof Sf){const r=xe.fromString(e,...t);return $m(r),new tt(n,null,new ee(r))}{if(!(n instanceof tt||n instanceof Hr))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return $m(r),new tt(n.firestore,n instanceof Hr?n.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="AsyncQueue";class h_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FA(this,"async_queue_retry"),this._c=()=>{const r=kc();r&&z(u_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=kc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;z(u_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,nt("INTERNAL UNHANDLED ERROR: ",d_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=vf.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:d_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function d_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(n,["next","error","complete"])}class $r extends Sf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new h_,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,await e}}}function f2(n,e,t){t||(t=Zc);const r=jl(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),i=r.getOptions(t);if(Ns(i,e))return s;throw new J(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new J(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vA)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&zs(e.host)&&Ud(e.host),r.initialize({options:e,instanceIdentifier:t})}function Cf(n){if(n._terminated)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||p2(n),n._firestoreClient}function p2(n){const e=n._freezeSettings(),t=(function(s,i,o,a){return new KS(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,rE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new c2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(st.fromBase64String(e))}catch(t){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dn(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xa(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:ot("string",dn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jn._jsonSchemaVersion}}static fromJSON(e){if(xa(e,jn._jsonSchema))return new jn(e.latitude,e.longitude)}}jn._jsonSchemaVersion="firestore/geoPoint/1.0",jn._jsonSchema={type:ot("string",jn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xa(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gn(e.vectorValues);throw new J(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:ot("string",Gn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=/^__.*__$/;class g2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new no(e,this.data,t,this.fieldTransforms)}}class sE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:n})}}class Pf{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iE(this.Ac)&&m2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ru(e)}Cc(e,t,r,s=!1){return new Pf({Ac:e,methodName:t,Dc:r,path:Ye.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lu(n){const e=n._freezeSettings(),t=ru(n._databaseId);return new _2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oE(n,e,t,r,s,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);Vf("Data must be an object, but it was:",o,r);const a=aE(r,o);let l,u;if(i.merge)l=new Qt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=dd(e,f,t);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lE(h,m)||h.push(m)}l=new Qt(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new g2(new Nt(a),l,u)}class uu extends cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uu}}class kf extends cu{_toFieldTransform(e){return new zI(e.path,new Ki)}isEqual(e){return e instanceof kf}}function y2(n,e,t,r){const s=n.Cc(1,e,t);Vf("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();ns(r,((l,u)=>{const h=Df(e,l,t);u=ft(u);const f=s.yc(h);if(u instanceof uu)i.push(h);else{const m=ja(u,f);m!=null&&(i.push(h),o.set(h,m))}}));const a=new Qt(i);return new sE(o,a,s.fieldTransforms)}function v2(n,e,t,r,s,i){const o=n.Cc(1,e,t),a=[dd(e,r,t)],l=[s];if(i.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(dd(e,i[m])),l.push(i[m+1]);const u=[],h=Nt.empty();for(let m=a.length-1;m>=0;--m)if(!lE(u,a[m])){const g=a[m];let b=l[m];b=ft(b);const P=o.yc(g);if(b instanceof uu)u.push(g);else{const k=ja(b,P);k!=null&&(u.push(g),h.set(g,k))}}const f=new Qt(u);return new sE(h,f,o.fieldTransforms)}function I2(n,e,t,r=!1){return ja(t,n.Cc(r?4:3,e))}function ja(n,e){if(cE(n=ft(n)))return Vf("Unsupported field value:",e,n),aE(n,e);if(n instanceof cu)return(function(r,s){if(!iE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let l=ja(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:Qi(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(s.serializer,i)}}if(r instanceof jn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:ZI(s.serializer,r._byteString)};if(r instanceof tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:af(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gn)return(function(o,a){return{mapValue:{fields:{[Jd]:{stringValue:$d},[ji]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return tf(a.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Gl(r)}`)})(n,e)}function aE(n,e){const t={};return gI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ns(n,((r,s)=>{const i=ja(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function cE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fe||n instanceof jn||n instanceof dn||n instanceof tt||n instanceof cu||n instanceof Gn)}function Vf(n,e,t){if(!cE(t)||!Zv(t)){const r=Gl(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function dd(n,e,t){if((e=ft(e))instanceof au)return e._internalPath;if(typeof e=="string")return Df(n,e);throw fl("Field path arguments must be of type string or ",n,!1,void 0,t)}const A2=new RegExp("[~\\*/\\[\\]]");function Df(n,e,t){if(e.search(A2)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fl(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(B.INVALID_ARGUMENT,a+n+l)}function lE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class E2 extends uE{data(){return super.data()}}function hu(n,e){return typeof e=="string"?Df(n,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xf{}class hE extends xf{}function dE(n,e,...t){let r=[];e instanceof xf&&r.push(e),r=r.concat(t),(function(i){const o=i.filter((l=>l instanceof Nf)).length,a=i.filter((l=>l instanceof du)).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class du extends hE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new du(e,t,r)}_apply(e){const t=this._parse(e);return pE(e._query,t),new Ys(e.firestore,e.converter,Xh(e._query,t))}_parse(e){const t=lu(e.firestore);return(function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){m_(f,h);const b=[];for(const P of f)b.push(p_(l,i,P));m={arrayValue:{values:b}}}else m=p_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||m_(f,h),m=I2(a,o,f,h==="in"||h==="not-in");return Se.create(u,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T2(n,e,t){const r=e,s=hu("where",n);return du._create(s,r,t)}class Nf extends xf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nf(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ue.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)pE(o,l),o=Xh(o,l)})(e._query,t),new Ys(e.firestore,e.converter,Xh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Of extends hE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Of(e,t)}_apply(e){const t=(function(s,i,o){if(s.startAt!==null)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ta(i,o)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new to(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function fE(n,e="asc"){const t=e,r=hu("orderBy",n);return Of._create(r,t)}function p_(n,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NI(e)&&t.indexOf("/")!==-1)throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xe.fromString(t));if(!ee.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ea(n,new ee(r))}if(t instanceof tt)return Ea(n,t._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gl(t)}.`)}function m_(n,e){if(!Array.isArray(n)||n.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pE(n,e){const t=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class b2{convertValue(e,t="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ns(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[ji].arrayValue?.values?.map((r=>Qe(r.doubleValue)));return new Gn(t)}convertGeoPoint(e){return new jn(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ql(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const t=lr(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xe.fromString(e);ce(lA(r),9688,{name:e});const s=new Ls(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(t)||nt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vs extends uE{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:ot("string",Vs._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class Vc extends Vs{data(e={}){return super.data(e)}}class Si{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vc(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new Vc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Vc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:R2(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Si._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n){n=wn(n,tt);const e=wn(n.firestore,$r);return h2(Cf(e),n._key).then((t=>IE(e,n,t)))}Si._jsonSchemaVersion="firestore/querySnapshot/1.0",Si._jsonSchema={type:ot("string",Si._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class gE extends b2{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,t)}}function Es(n,e,t){n=wn(n,tt);const r=wn(n.firestore,$r),s=mE(n.converter,e,t);return fu(r,[oE(lu(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ot.none())])}function fd(n,e,t,...r){n=wn(n,tt);const s=wn(n.firestore,$r),i=lu(s);let o;return o=typeof(e=ft(e))=="string"||e instanceof au?v2(i,"updateDoc",n._key,e,t,r):y2(i,"updateDoc",n._key,e),fu(s,[o.toMutation(n._key,Ot.exists(!0))])}function _E(n){return fu(wn(n.firestore,$r),[new Zl(n._key,Ot.none())])}function yE(n,e){const t=wn(n.firestore,$r),r=kt(n),s=mE(n.converter,e);return fu(t,[oE(lu(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Ot.exists(!1))]).then((()=>r))}function vE(n,...e){n=ft(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||f_(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(f_(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,a;if(n instanceof tt)o=wn(n.firestore,$r),a=Ma(n._key.path),i={next:l=>{e[r]&&e[r](IE(o,n,l))},error:e[r+1],complete:e[r+2]};else{const l=wn(n,Ys);o=wn(l.firestore,$r),a=l._query;const u=new gE(o);i={next:h=>{e[r]&&e[r](new Si(o,u,l,h))},error:e[r+1],complete:e[r+2]},w2(n._query)}return(function(u,h,f,m){const g=new tE(m),b=new WA(h,g,f);return u.asyncQueue.enqueueAndForget((async()=>KA(await hd(u),b))),()=>{g.Nu(),u.asyncQueue.enqueueAndForget((async()=>zA(await hd(u),b)))}})(Cf(o),a,s,i)}function fu(n,e){return(function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget((async()=>zP(await u2(r),s,i))),i.promise})(Cf(n),e)}function IE(n,e,t){const r=t.docs.get(e._key),s=new gE(n);return new Vs(n,s,e._key,r,new Fo(t.hasPendingWrites,t.fromCache),e.converter)}class S2{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=V2(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function C2(n){return new S2(n)}class P2{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sa.provider,this._offlineComponentProvider={build:t=>new eE(t,e?.cacheSizeBytes,this.forceOwnership)}}}class k2{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sa.provider,this._offlineComponentProvider={build:t=>new a2(t,e?.cacheSizeBytes)}}}function V2(n){return new P2(n?.forceOwnership)}function D2(){return new k2}function qr(){return new kf("serverTimestamp")}(function(e,t=!0){(function(s){eo=s})(Ws),Os(new Wr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new $r(new iS(r.getProvider("auth-internal")),new cS(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Bn(Qm,Ym,e),Bn(Qm,Ym,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="firebasestorage.googleapis.com",x2="storageBucket",N2=120*1e3,O2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Wn{constructor(e,t,r=0){super(lh(e),`Firebase Storage: ${t} (${lh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function lh(n){return"storage/"+n}function M2(){const n="An unknown error occurred, please check the error payload for server response.";return new Qn(Kn.UNKNOWN,n)}function L2(){return new Qn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function F2(){return new Qn(Kn.CANCELED,"User canceled the upload/download.")}function U2(n){return new Qn(Kn.INVALID_URL,"Invalid URL '"+n+"'.")}function B2(n){return new Qn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function g_(n){return new Qn(Kn.INVALID_ARGUMENT,n)}function EE(){return new Qn(Kn.APP_DELETED,"The Firebase app was deleted.")}function j2(n){return new Qn(Kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yn.makeFromUrl(e,t)}catch{return new yn(e,"")}if(r.path==="")return r;throw B2(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(G){G.path_=decodeURIComponent(G.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},P=t===AE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",U=new RegExp(`^https?://${P}/${s}/${k}`,"i"),F=[{regex:a,indices:l,postModify:i},{regex:g,indices:b,postModify:u},{regex:U,indices:{bucket:1,path:2},postModify:u}];for(let G=0;G<F.length;G++){const $=F[G],ne=$.regex.exec(e);if(ne){const R=ne[$.indices.bucket];let v=ne[$.indices.path];v||(v=""),r=new yn(R,v),$.postModify(r);break}}if(r==null)throw U2(e);return r}}class G2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...k){u||(u=!0,e.apply(null,k))}function f(k){s=setTimeout(()=>{s=null,n(g,l())},k)}function m(){i&&clearTimeout(i)}function g(k,...U){if(u){m();return}if(k){m(),h.call(null,k,...U);return}if(l()||o){m(),h.call(null,k,...U);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,f(F)}let b=!1;function P(k){b||(b=!0,m(),!u&&(s!==null?(k||(a=2),clearTimeout(s),f(0)):k||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,P(!0)},t),P}function q2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n){return n!==void 0}function __(n,e,t,r){if(r<e)throw g_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw g_(`Invalid value for '${n}'. Expected ${t} or less.`)}function z2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var pl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(pl||(pl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,r,s,i,o,a,l,u,h,f,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,P)=>{this.resolve_=b,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===pl.NO_ERROR,l=i.getStatus();if(!a||W2(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===pl.ABORT;r(!1,new fc(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new fc(u,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());K2(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=M2();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?EE():F2();o(l)}else{const l=L2();o(l)}};this.canceled_?t(!1,new fc(!1,null,!0)):this.backoffId_=H2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Y2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function X2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Z2(n,e,t,r,s,i,o=!0,a=!1){const l=z2(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return J2(h,e),Y2(h,t),X2(h,i),$2(h,r),new Q2(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function tk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t){this._service=e,t instanceof yn?this._location=t:this._location=yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ml(e,t)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tk(this._location.path)}get storage(){return this._service}get parent(){const e=ek(this._location.path);if(e===null)return null;const t=new yn(this._location.bucket,e);return new ml(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw j2(e)}}function y_(n,e){const t=e?.[x2];return t==null?null:yn.makeFromBucketSpec(t,n)}function nk(n,e,t,r={}){n.host=`${e}:${t}`;const s=zs(e);s&&(Ud(`https://${n.host}/b`),xv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Vb(i,n.app.options.projectId))}class rk{constructor(e,t,r,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=AE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N2,this._maxUploadRetryTime=O2,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=y_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=y_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){__("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){__("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ml(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new G2(EE());{const o=Z2(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const v_="@firebase/storage",I_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="storage";function sk(n=jv(),e){n=ft(n);const r=jl(n,wE).getImmediate({identifier:e}),s=Pb("storage");return s&&ik(r,...s),r}function ik(n,e,t,r={}){nk(n,e,t,r)}function ok(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new rk(t,r,s,e,Ws)}function ak(){Os(new Wr(wE,ok,"PUBLIC").setMultipleInstances(!0)),Bn(v_,I_,""),Bn(v_,I_,"esm2020")}ak();function TE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ck=TE,bE=new Va("auth","Firebase",TE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Bd("@firebase/auth");function lk(n,...e){gl.logLevel<=Re.WARN&&gl.warn(`Auth (${Ws}): ${n}`,...e)}function Dc(n,...e){gl.logLevel<=Re.ERROR&&gl.error(`Auth (${Ws}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(n,...e){throw Lf(n,...e)}function Tn(n,...e){return Lf(n,...e)}function Mf(n,e,t){const r={...ck(),[e]:t};return new Va("auth","Firebase",r).create(e,{appName:n.name})}function Ds(n){return Mf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(n,"argument-error"),Mf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lf(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bE.create(n,...e)}function ge(n,e,...t){if(!n)throw Lf(e,...t)}function rr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Dc(e),new Error(e)}function hr(n,e){n||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return typeof self<"u"&&self.location?.href||""}function hk(){return A_()==="http:"||A_()==="https:"}function A_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hk()||Mb()||"connection"in navigator)?navigator.onLine:!0}function fk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this.shortDelay=e,this.longDelay=t,hr(t>e,"Short delay should be less than long delay!"),this.isMobile=Nb()||Lb()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n,e){hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gk=new Ga(3e4,6e4);function Uf(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function oo(n,e,t,r,s={}){return SE(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Da({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...i};return Ob()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&zs(n.emulatorConfig.host)&&(u.credentials="include"),RE.fetch()(await CE(n,n.config.apiHost,t,a),u)})}async function SE(n,e,t){n._canInitEmulator=!1;const r={...pk,...e};try{const s=new yk(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pc(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw pc(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mf(n,h,u);zn(n,h)}}catch(s){if(s instanceof Wn)throw s;zn(n,"network-request-failed",{message:String(s)})}}async function _k(n,e,t,r,s={}){const i=await oo(n,e,t,r,s);return"mfaPendingCredential"in i&&zn(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function CE(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?Ff(n.config,s):`${n.config.apiScheme}://${s}`;return mk.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class yk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),gk.get())})}}function pc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Tn(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n,e){return oo(n,"POST","/v1/accounts:delete",e)}async function _l(n,e){return oo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ik(n,e=!1){const t=ft(n),r=await t.getIdToken(e),s=Bf(r);ge(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:ra(uh(s.auth_time)),issuedAtTime:ra(uh(s.iat)),expirationTime:ra(uh(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function uh(n){return Number(n)*1e3}function Bf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Cv(t);return s?JSON.parse(s):(Dc("Failed to decode base64 JWT payload"),null)}catch(s){return Dc("Caught error parsing JWT payload as JSON",s?.toString()),null}}function E_(n){const e=Bf(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wn&&Ak(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Ak({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n){const e=n.auth,t=await n.getIdToken(),r=await Ca(n,_l(e,{idToken:t}));ge(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?PE(s.providerUserInfo):[],o=Tk(n.providerData,i),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!o?.length,u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new md(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function wk(n){const e=ft(n);await yl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tk(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(n,e){const t=await SE(n,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await CE(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&zs(n.emulatorConfig.host)&&(l.credentials="include"),RE.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rk(n,e){return oo(n,"POST","/v2/accounts:revokeToken",Uf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=E_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await bk(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new Ci;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vn{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ik(this,e)}reload(){return wk(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await Ca(this,vk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:P}=t;ge(f&&P,e,"internal-error");const k=Ci.fromJSON(this.name,P);ge(typeof f=="string",e,"internal-error"),Sr(r,e.name),Sr(s,e.name),ge(typeof m=="boolean",e,"internal-error"),ge(typeof g=="boolean",e,"internal-error"),Sr(i,e.name),Sr(o,e.name),Sr(a,e.name),Sr(l,e.name),Sr(u,e.name),Sr(h,e.name);const U=new vn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(U.providerData=b.map(L=>({...L}))),l&&(U._redirectEventId=l),U}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ci;s.updateFromServerResponse(t);const i=new vn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await yl(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new Ci;a.updateFromIdToken(r);const l=new vn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new md(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;function sr(n){hr(n instanceof Function,"Expected a class definition");let e=w_.get(n);return e?(hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,w_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kE.type="NONE";const T_=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e,t){return`firebase:${n}:${e}:${t}`}class Pi{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xc(this.userKey,s.apiKey,i),this.fullPersistenceKey=xc("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _l(this.auth,{idToken:e}).catch(()=>{});return t?vn._fromGetAccountInfoResponse(this.auth,t,e):null}return vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Pi(sr(T_),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||sr(T_);const o=xc(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await _l(e,{idToken:h}).catch(()=>{});if(!m)break;f=await vn._fromGetAccountInfoResponse(e,m,h)}else f=vn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Pi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Pi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ME(e))return"Blackberry";if(LE(e))return"Webos";if(DE(e))return"Safari";if((e.includes("chrome/")||xE(e))&&!e.includes("edge/"))return"Chrome";if(OE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function VE(n=dt()){return/firefox\//i.test(n)}function DE(n=dt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xE(n=dt()){return/crios\//i.test(n)}function NE(n=dt()){return/iemobile/i.test(n)}function OE(n=dt()){return/android/i.test(n)}function ME(n=dt()){return/blackberry/i.test(n)}function LE(n=dt()){return/webos/i.test(n)}function jf(n=dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Sk(n=dt()){return jf(n)&&!!window.navigator?.standalone}function Ck(){return Fb()&&document.documentMode===10}function FE(n=dt()){return jf(n)||OE(n)||LE(n)||ME(n)||/windows phone/i.test(n)||NE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n,e=[]){let t;switch(n){case"Browser":t=b_(dt());break;case"Worker":t=`${b_(dt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(n,e={}){return oo(n,"GET","/v2/passwordPolicy",Uf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=6;class Dk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Vk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new Pk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _l(this,{idToken:e}),r=await vn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(Ds(this));const t=e?ft(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kk(this),t=new Dk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sr(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pu(n){return ft(n)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=qb(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nk(n){Gf=n}function Ok(n){return Gf.loadJS(n)}function Mk(){return Gf.gapiScript}function Lk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n,e){const t=jl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Ns(i,e??{}))return s;zn(s,"already-initialized")}return t.initialize({options:e})}function Uk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Bk(n,e,t){const r=pu(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=BE(e),{host:o,port:a}=jk(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Ns(u,r.config.emulator)&&Ns(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zs(o)?(Ud(`${i}//${o}${l}`),xv("Auth",!0)):Gk()}function BE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jk(n){const e=BE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:S_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:S_(o)}}}function S_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Gk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(n,e){return _k(n,"POST","/v1/accounts:signInWithIdp",Uf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="http://localhost";class Hs extends jE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const o=new Hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ki(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ki(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ki(e,t)}buildRequest(){const e={requestUri:Hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Da(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ha{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hs._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return tr.credential(t,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ha{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ha{constructor(){super("twitter.com")}static credential(e,t){return Hs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Or.credential(t,r)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await vn._fromIdTokenResponse(e,r,s),o=C_(r);return new Zi({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=C_(r);return new Zi({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function C_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Wn{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new vl(e,t,r,s)}}function GE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vl._fromErrorAndOperation(n,i,e,r):i})}async function qk(n,e,t=!1){const r=await Ca(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(n,e,t=!1){const{auth:r}=n;if(hn(r.app))return Promise.reject(Ds(r));const s="reauthenticate";try{const i=await Ca(n,GE(r,s,e,n),t);ge(i.idToken,r,"internal-error");const o=Bf(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(n.uid===a,r,"user-mismatch"),Zi._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(n,e,t=!1){if(hn(n.app))return Promise.reject(Ds(n));const r="signIn",s=await GE(n,r,e),i=await Zi._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function Wk(n,e,t,r){return ft(n).onIdTokenChanged(e,t,r)}function Qk(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function Yk(n,e,t,r){return ft(n).onAuthStateChanged(e,t,r)}function HE(n){return ft(n).signOut()}const Il="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Il,"1"),this.storage.removeItem(Il),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=1e3,Jk=10;class KE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Ck()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Jk):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KE.type="LOCAL";const $k=KE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zE.type="SESSION";const WE=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new mu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,i)),l=await Zk(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=qf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function tV(n){Hn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function nV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rV(){return navigator?.serviceWorker?.controller||null}function sV(){return QE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebaseLocalStorageDb",iV=1,Al="firebaseLocalStorage",XE="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gu(n,e){return n.transaction([Al],e?"readwrite":"readonly").objectStore(Al)}function oV(){const n=indexedDB.deleteDatabase(YE);return new qa(n).toPromise()}function gd(){const n=indexedDB.open(YE,iV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Al,{keyPath:XE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Al)?e(r):(r.close(),await oV(),e(await gd()))})})}async function P_(n,e,t){const r=gu(n,!0).put({[XE]:e,value:t});return new qa(r).toPromise()}async function aV(n,e){const t=gu(n,!1).get(e),r=await new qa(t).toPromise();return r===void 0?null:r.value}function k_(n,e){const t=gu(n,!0).delete(e);return new qa(t).toPromise()}const cV=800,lV=3;class JE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>lV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mu._getInstance(sV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await nV(),!this.activeServiceWorker)return;this.sender=new eV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gd();return await P_(e,Il,"1"),await k_(e,Il),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>P_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>aV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>k_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=gu(s,!1).getAll();return new qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JE.type="LOCAL";const uV=JE;new Ga(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n,e){return e?sr(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends jE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ki(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ki(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hV(n){return zk(n.auth,new Kf(n),n.bypassAuthState)}function dV(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),Kk(t,new Kf(n),n.bypassAuthState)}async function fV(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),qk(t,new Kf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hV;case"linkViaPopup":case"linkViaRedirect":return fV;case"reauthViaPopup":case"reauthViaRedirect":return dV;default:zn(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new Ga(2e3,1e4);async function mV(n,e,t){if(hn(n.app))return Promise.reject(Tn(n,"operation-not-supported-in-this-environment"));const r=pu(n);uk(n,e,Hf);const s=$E(r,t);return new bs(r,"signInViaPopup",e,s).executeNotNull()}class bs extends ZE{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pV.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="pendingRedirect",Nc=new Map;class _V extends ZE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const r=await yV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yV(n,e){const t=AV(e),r=IV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function vV(n,e){Nc.set(n._key(),e)}function IV(n){return sr(n._redirectPersistence)}function AV(n){return xc(gV,n.config.apiKey,n.name)}async function EV(n,e,t=!1){if(hn(n.app))return Promise.reject(Ds(n));const r=pu(n),s=$E(r,e),o=await new _V(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=600*1e3;class TV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ew(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Tn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wV&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ew({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function bV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ew(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(n,e={}){return oo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CV=/^https?/;async function PV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RV(n);for(const t of e)try{if(kV(t))return}catch{}zn(n,"unauthorized-domain")}function kV(n){const e=pd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!CV.test(t))return!1;if(SV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new Ga(3e4,6e4);function D_(){const n=Hn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DV(n){return new Promise((e,t)=>{function r(){D_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D_(),t(Tn(n,"network-request-failed"))},timeout:VV.get()})}if(Hn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hn().gapi?.load)r();else{const s=Lk("iframefcb");return Hn()[s]=()=>{gapi.load?r():t(Tn(n,"network-request-failed"))},Ok(`${Mk()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function xV(n){return Oc=Oc||DV(n),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new Ga(5e3,15e3),OV="__/auth/iframe",MV="emulator/auth/iframe",LV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UV(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ff(e,MV):`https://${n.config.authDomain}/${OV}`,r={apiKey:e.apiKey,appName:n.name,v:Ws},s=FV.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Da(r).slice(1)}`}async function BV(n){const e=await xV(n),t=Hn().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:UV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LV,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(n,"network-request-failed"),a=Hn().setTimeout(()=>{i(o)},NV.get());function l(){Hn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GV=500,HV=600,qV="_blank",KV="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zV(n,e,t,r=GV,s=HV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...jV,width:r.toString(),height:s.toString(),top:i,left:o},u=dt().toLowerCase();t&&(a=xE(u)?qV:t),VE(u)&&(e=e||KV,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(Sk(u)&&a!=="_self")return WV(e||"",a),new x_(null);const f=window.open(e||"",a,h);ge(f,n,"popup-blocked");try{f.focus()}catch{}return new x_(f)}function WV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="__/auth/handler",YV="emulator/auth/handler",XV=encodeURIComponent("fac");async function N_(n,e,t,r,s,i){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ws,eventId:s};if(e instanceof Hf){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Hb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ha){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${XV}=${encodeURIComponent(l)}`:"";return`${JV(n)}?${Da(a).slice(1)}${u}`}function JV({config:n}){return n.emulator?Ff(n,YV):`https://${n.authDomain}/${QV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class $V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WE,this._completeRedirectFn=EV,this._overrideRedirectResult=vV}async _openPopup(e,t,r,s){hr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await N_(e,t,r,pd(),s);return zV(e,i,qf())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await N_(e,t,r,pd(),s);return tV(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(hr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await BV(e),r=new TV(e);return t.register("authEvent",s=>(ge(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hh,{type:hh},s=>{const i=s?.[0]?.[hh];i!==void 0&&t(!!i),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FE()||DE()||jf()}}const ZV=$V;var O_="@firebase/auth",M_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nD(n){Os(new Wr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UE(n)},u=new xk(r,s,i,l);return Uk(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Os(new Wr("auth-internal",e=>{const t=pu(e.getProvider("auth").getImmediate());return(r=>new eD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(O_,M_,tD(n)),Bn(O_,M_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=300,sD=Dv("authIdTokenMaxAge")||rD;let L_=null;const iD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>sD)return;const s=t?.token;L_!==s&&(L_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oD(n=jv()){const e=jl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Fk(n,{popupRedirectResolver:ZV,persistence:[uV,$k,WE]}),r=Dv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=iD(i.toString());Qk(t,o,()=>o(t.currentUser)),Wk(t,a=>o(a))}}const s=kv("auth");return s&&Bk(t,`http://${s}`),t}function aD(){return document.getElementsByTagName("head")?.[0]??document}Nk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",aD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nD("Browser");const cD={apiKey:"AIzaSyAo-asycc7bdBDPMoOJ7EDP9hbVDeg9Hrs",authDomain:"bug-report-ce99b.firebaseapp.com",projectId:"bug-report-ce99b",storageBucket:"bug-report-ce99b.firebasestorage.app",messagingSenderId:"1090635700217",appId:"1:1090635700217:web:ed04a55b86508d25014f28",measurementId:"G-MPXMZXYFHE"},zf=Bv(cD),ut=f2(zf,{localCache:C2({tabManager:D2()})});sk(zf);const El=oD(zf),tw=new tr;tw.setCustomParameters({prompt:"select_account"});const Rs=_e(null),Mc=_e(!0),nw=_e(!1);let F_=!1;const rw=async n=>{if(!n)return;const e=kt(ut,"users",n.uid);(await yi(e)).exists()?await Es(e,{lastLoginAt:qr()},{merge:!0}):await Es(e,{displayName:n.displayName??"",email:n.email??"",photoURL:n.photoURL??"",groupId:null,createdAt:qr(),lastLoginAt:qr()})},U_=()=>{F_||(F_=!0,Yk(El,async n=>{if(Rs.value=n,n)try{await rw(n)}catch(e){console.error("ensureUserDoc error in onAuthStateChanged:",e)}Mc.value=!1,nw.value=!0}))};function _u(){U_();const n=wt(()=>!!Rs.value),e=async()=>{try{Mc.value=!0;const r=await mV(El,tw);return Rs.value=r.user,await rw(r.user),r.user}catch(r){throw console.error("Google login error:",r),r}finally{Mc.value=!1}},t=async()=>{try{await HE(El),Rs.value=null}catch(r){throw console.error("Logout error:",r),r}};return on(()=>{U_()}),{currentUser:Rs,isLoggedIn:n,loading:Mc,isAuthReady:nw,loginWithGoogle:e,logout:t}}const lD={class:"signup_wrapper"},uD=["disabled"],hD={class:"gsi-material-button-content-wrapper"},dD={class:"gsi-material-button-icon"},fD={version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{display:"block"}},pD={__name:"index",setup(n){const e=qs(),{loading:t}=_u(),r=()=>{e.push("/signup/terms")};return(s,i)=>(oe(),he("div",lD,[i[4]||(i[4]=N("div",{class:"title_wrapper"},[N("p",{class:"title"},"BUG REPORT"),N("p",{class:"subtitle"},"     .")],-1)),N("button",{class:"gsi-material-button",onClick:r,disabled:Ae(t)},[i[3]||(i[3]=N("div",{class:"gsi-material-button-state"},null,-1)),N("div",hD,[N("div",dD,[(oe(),he("svg",fD,[...i[0]||(i[0]=[Un('<path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z" data-v-601297cd></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z" data-v-601297cd></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z" data-v-601297cd></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z" data-v-601297cd></path><path fill="none" d="M0 0h48v48H0z" data-v-601297cd></path>',5)])]))]),i[1]||(i[1]=N("span",{class:"gsi-material-button-contents"},"Sign in with Google",-1)),i[2]||(i[2]=N("span",{style:{display:"none"}},"Sign in with Google",-1))])],8,uD)]))}},mD=Ks(pD,[["__scopeId","data-v-601297cd"]]),gD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",_D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",yD={class:"header"},vD={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ID={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},AD={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Wf={__name:"Header",props:{title:{type:String,required:!0},leftIcon:{type:String,default:null},rightIcon:{type:String,default:null}},setup(n){return(e,t)=>(oe(),he("header",yD,[n.leftIcon?(oe(),he("button",{key:0,class:"icon_btn left",onClick:t[0]||(t[0]=r=>e.$emit("left-action")),"aria-label":"left button"},[n.leftIcon==="close-menu"?(oe(),he("svg",vD,[...t[2]||(t[2]=[Un('<g clip-path="url(#clip0_22_490)"><path d="M3.93555 6H19.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.93555 12H16.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.93555 18H13.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_22_490"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2)])])):n.leftIcon==="close"?(oe(),he("svg",ID,[...t[3]||(t[3]=[N("g",{"clip-path":"url(#clip0_22_459)"},[N("path",{d:"M15 6L9 12L15 18",stroke:"#535765","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),N("defs",null,[N("clipPath",{id:"clip0_22_459"},[N("rect",{width:"24",height:"24",fill:"white"})])],-1)])])):yt("",!0)])):yt("",!0),N("h1",null,$e(n.title),1),n.rightIcon?(oe(),he("button",{key:1,class:"icon_btn right",onClick:t[1]||(t[1]=r=>e.$emit("right-action")),"aria-label":"right button"},[n.rightIcon==="menu"?(oe(),he("svg",AD,[...t[4]||(t[4]=[Un('<g clip-path="url(#clip0_8_377)"><path d="M4 6H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 12H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 18H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_8_377"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2)])])):yt("",!0)])):yt("",!0)]))}},dh=_e(!1),B_=_e("alert"),j_=_e(""),G_=_e(""),H_=_e(""),q_=_e(""),K_=_e(""),fh=_e(null),ph=_e(null);function yu(){const n=(s,i,o="",a={})=>{B_.value=s,j_.value=i,G_.value=o,H_.value=a.okLabel||"",q_.value=a.cancelLabel||"",K_.value=a.confirmLabel||"",fh.value=a.onConfirm||null,ph.value=a.onCancel||null,dh.value=!0},e=()=>{dh.value=!1};return{isOpen:dh,modalType:B_,modalTitle:j_,modalMessage:G_,okLabel:H_,cancelLabel:q_,confirmLabel:K_,openModal:n,closeModal:e,confirm:()=>{fh.value&&fh.value(),e()},cancel:()=>{ph.value&&ph.value(),e()}}}function ED(){const n=[" .    .","   .",".    .","     .",",   .","       ."," ,   .","     .","  ,   .","      .",". .","    .  ."," . .","      .","   .","    ."," .     .","    .","   ."," .   ."];return{getRandomMessage:()=>{const t=Math.floor(Math.random()*n.length);return n[t]}}}const ci=_e(null),Do=_e(null);function Xs(){const{currentUser:n}=_u(),e=async()=>{if(!n.value){ci.value=null,Do.value=null;return}const s=kt(ut,"users",n.value.uid),i=await yi(s);if(!i.exists()){ci.value=null,Do.value=null;return}const o=i.data();if(ci.value=o.groupId??null,o.groupId){const a=kt(ut,"groups",o.groupId),l=await yi(a);Do.value=l.exists()?{id:l.id,...l.data()}:null}else Do.value=null};return{currentGroupId:ci,currentGroup:Do,loadUserGroup:e,createGroup:async s=>{if(!n.value)throw new Error(" .");const i=s.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(i))throw new Error(" ID     .");const o=kt(ut,"groups",i);if((await yi(o)).exists())throw new Error("   ID.");await Es(o,{createdByUid:n.value.uid,createdAt:qr()});const l=kt(ut,"groups",i,"members",n.value.uid);await Es(l,{role:"owner",joinedAt:qr()});const u=kt(ut,"users",n.value.uid);await Es(u,{groupId:i},{merge:!0}),ci.value=i,await e()},joinGroup:async s=>{if(!n.value)throw new Error(" .");const i=s.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(i))throw new Error(" ID     .");const o=kt(ut,"groups",i);if(!(await yi(o)).exists())throw new Error("  ID  .");const l=kt(ut,"groups",i,"members",n.value.uid);await Es(l,{role:"member",joinedAt:qr()});const u=kt(ut,"users",n.value.uid);await Es(u,{groupId:i},{merge:!0}),ci.value=i,await e()}}}function sw(){const n=_e([]),e=_e(!1),{currentGroupId:t}=Xs();let r=null;const s=l=>{if(!l)return;r&&(r(),r=null);const u=dl(ut,"reports"),h=dE(u,T2("groupId","==",l),fE("createdAt","desc"));r=vE(h,{includeMetadataChanges:!0},f=>{const m=f.docs.map(g=>{const b=g.data();let P=b.createdAt;if(P&&P.seconds){const k=new Date(P.seconds*1e3),U=k.getFullYear(),L=String(k.getMonth()+1).padStart(2,"0"),F=String(k.getDate()).padStart(2,"0"),G=String(k.getHours()).padStart(2,"0"),$=String(k.getMinutes()).padStart(2,"0");P=`${U}-${L}-${F} ${G}:${$}`}return{id:g.id,...b,images:b.images||[],createdAt:P}});n.value=m,!e.value&&m.length>0&&(e.value=!0),console.log("   Firestore :",l,n.value)},f=>{console.error("Firestore  :",f)})};Fr(t,l=>{n.value=[],e.value=!1,r&&(r(),r=null),l&&s(l)},{immediate:!0});const i=async l=>{try{const u=dl(ut,"reports"),h=await yE(u,{...l,createdAt:qr(),reactions:{"":0,"":0,"":0,"":0,"":0}});return console.log("  :",h.id),h.id}catch(u){throw console.error("  :",u),u}},o=async(l,u)=>{try{const h=kt(ut,"reports",l);await fd(h,u),console.log("  :",l)}catch(h){console.error("  :",h)}},a=async l=>{try{const u=kt(ut,"reports",l);await _E(u),console.log("  :",l)}catch(u){console.error("  :",u)}};return xl(()=>{r&&(r(),r=null)}),{reports:n,isFetched:e,addReport:i,updateReport:o,removeReport:a}}const wD={key:0,class:"select_list"},TD=["onClick"],_d={__name:"CustomSelect",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=[" "," "," "," "],r=e,s=_e(!1),i=()=>{s.value=!s.value},o=a=>{r("update:modelValue",a),s.value=!1};return(a,l)=>(oe(),he("div",{class:"custom_select",onClick:i},[N("span",{class:Ht({placeholder:!n.modelValue})},$e(n.modelValue||""),3),s.value?(oe(),he("ul",wD,[(oe(),he(Ze,null,Ho(t,(u,h)=>N("li",{key:h,onClick:bi(f=>o(u),["stop"])},$e(u),9,TD)),64))])):yt("",!0)]))}},bD={class:"report_form"},RD={class:"form_row"},SD={class:"form_field"},CD={class:"form_field"},PD=["placeholder"],kD={class:"form_field"},VD=["disabled"],z_={__name:"ReportForm",setup(n){const{openModal:e}=yu(),{getRandomMessage:t}=ED(),{addReport:r}=sw(),{currentGroupId:s}=Xs(),i=_e(""),o=_e(""),a=_e(""),l=_e(null),u=()=>{const b=l.value;if(!b)return;b.style.height="auto";const P=Math.min(b.scrollHeight,130);b.style.height=`${P}px`,b.style.overflowY=b.scrollHeight>130?"auto":"hidden",b.value.trim()?b.style.padding="10px 16px":b.style.padding="10px 16px 0"},h=wt(()=>{const b=new Date,P=b.getFullYear(),k=String(b.getMonth()+1).padStart(2,"0"),U=String(b.getDate()).padStart(2,"0"),L=String(b.getHours()).padStart(2,"0"),F=String(b.getMinutes()).padStart(2,"0");return`${P}-${k}-${U} ${L}:${F}`}),f=wt(()=>i.value&&a.value),m=()=>{let b=o.value.replace(/\D/g,"");b.length>=5&&(b=b.replace(/(\d{4})(\d)/,"$1-$2")),b.length>=8&&(b=b.replace(/(\d{4}-\d{2})(\d)/,"$1-$2")),b.length>=11&&(b=b.replace(/(\d{4}-\d{2}-\d{2})(\d)/,"$1 $2")),b.length>=14&&(b=b.replace(/(\d{4}-\d{2}-\d{2} \d{2})(\d)/,"$1:$2")),o.value=b},g=async()=>{if(!s.value){e("alert","  ."," ID      .");return}const b=new Date,P=b.toISOString().slice(0,16).replace("T"," "),k=o.value||b.toISOString().slice(0,16).replace("T"," "),U={groupId:s.value,category:i.value,occurredAt:k,content:a.value,createdAt:P,isOpen:!1,isEditing:!1,iconSrc:"/src/assets/images/open_icon.png"};try{await r(U);const L=t();e("alert"," .",L),i.value="",o.value="",a.value=""}catch(L){console.error("  :",L),e("alert"," ","   .")}};return(b,P)=>(oe(),he("section",bD,[P[6]||(P[6]=N("h2",null," ",-1)),N("form",{class:"form_wrapper",onSubmit:bi(g,["prevent"])},[N("div",RD,[N("div",SD,[P[3]||(P[3]=N("label",null,"",-1)),De(_d,{modelValue:i.value,"onUpdate:modelValue":P[0]||(P[0]=k=>i.value=k)},null,8,["modelValue"])]),N("div",CD,[P[4]||(P[4]=N("label",{for:"time"},"",-1)),en(N("input",{id:"time",type:"text","onUpdate:modelValue":P[1]||(P[1]=k=>o.value=k),placeholder:h.value,onInput:m,maxlength:"16"},null,40,PD),[[_n,o.value]])])]),N("div",kD,[P[5]||(P[5]=N("label",{for:"content"},"",-1)),en(N("textarea",{id:"content","onUpdate:modelValue":P[2]||(P[2]=k=>a.value=k),placeholder:"  ",ref_key:"textareaRef",ref:l,onInput:u},null,544),[[_n,a.value]])]),N("button",{class:"submit_btn",disabled:!f.value},"",8,VD)],32)]))}},DD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPOSURBVHgB7VhdUtRAEO6e3S2p0irjCYgnkBuIJ2ABxX0jKFg+wgmAE8CjPyjhbUGReALwBK43CCdwLcsSasm0Pdn872R3E7I+UHxVWztJJjNfema6v26AW9xwIJRAs7luNBp/TInSJEEGUu0+ERkDHYU8R4ldFNi9urjXcZzdLhTE2ASftlZnpRRziF6TXzOhBIigA4gdgXTwub13Ns47IwkqYkS4z8ObUCEI0EXCreOjdwfD+uEIclv81Zua4dVS8Q87PFGXTRNcZ0dHE/nDCMDgiWZ0cyDCNltzC4oSHCRHXbakzT/n5NP7b1AC88/WHgshLW7OJrfJMJJaggutNQuJ9hPkbO/S23Acu/Am16HVsswe1Xe42UyQfKLbl3XdAJi2nHN8+GEFKkS7bbv8N7/YemkD4bK6J/19Dg+zfUX2hjoU4YEgINdDbwMmBG/KW4dg76q92p97BEEKvijAmdP/2onAse0uHyA7vJYS5rJ9BgkCRaeNpLBhwhAIX6MLpGb2eeqQNC3LqP2t/wyvjw/3SkWaolh8vqrm9CORd3n1IHkYUxasX9Rj6wF7/f8Gir1Do2Emn6ROMUmOp9g3Guocb0G0Wq/ZnVz57ootM5/rpgg5BILpzytoGhLGSVlQBf6ozaEIrk3OOwXfKcNs7U5jObczYrykGdGRPiRSTEdtIheuTS6O3xLEWV5/Si4xiiEEC0BFm8WlV8vjkOOlsU4O3/6AfIYRQRpqwQLk/FCI0lYxexS5UYplGOpQCh6E36YEBZPkgep21eQASlrwS/sjqxrYingwST6t36smN0AQE6cJAseZS/JobztJMtW/InKQJUjo/YouEI1RL2tIliLHhjGjNqS9R9qCMrYg6pKgIST9yFPacgl3lF7F9CERJFzJYtB/BWkGxoQiyX/bUBJBShAyTBFMWbB3t+eGbU5oxrJgFUjmK9TrpfxliqDSZxDuAQRDJyCrRnIOtU2y8VqjB9EJ2zoBWTXSApkGFNQAwaSAZNNbzaY1saVWkQf6YsKHTiAPEOxnVvEy1+7UdmBCYOe+k8x/dOmsPqtDXGHXcRpcsShYNTxR33Dab1yoAKq2U5v6vcus4rQz60/D+3mDLCytbrJ2jV4K9OFZkbpKFnF9x0/eY+3J5AJXNT5BHckkVCGIn3V94lrtyLoOVeVLqXTlU323ZWjGySU3kqBPsvWCpRVulq1o5UHtOT4U1qgyythZW1hXYYvN5BWCxqDlqtpOkfpOyQKmZWCj8Yhjo6FyCCZtDgyMLONZKavYShLPoddzq6rt3OJG4R9UyOMP7scZawAAAABJRU5ErkJggg==",xD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALxSURBVHgB7ZhBbxJBFMffm0XaI9+g26PxUv0E208goY3iSaqYmHho+wmAk1d7M2kReqNVET8B9OZJvRiPrt8ATUxs2Z3nG2CXlQ6wLMuaGP4JMPNmZue3b97OzgNgpf9cCP9A2exBRqz/zIIUGwjCdoW4aDVe2rq+iQPuPigekIQSFzNBOyJU3jROyuP9DUhQu/limQiec3Fd02zdvHXnx9cvHz8EjYl5cAhXCpg6XO8wQZYhtvoWgq575Wy2WvWu1ykFCeg6HNXfnlX3hpXKzv1im38ths0YaeMul0+9ngKWLI3nwMUblWC970mvDGgG25YKqIPrT0puO5t/avoGXuZRkexg36kxmOeLXEm5DyAtRMoQYVcIeK972kLAdUAt41DsKVuisW1ArwyEDz27ixyDjbrt38ykCXL5J4UeOZ8Q5QFvARzEaKpfNWku92wD5oJTMXeyTYhe3ClPmQZfPwjHY8pBuEE/jZTnGO6bro14CZpn1U2YC85/IPo3jkS1a9dluOb5SWXcrvVgj9xSEEhKtKi3ZqqPvHRvQ0Q4pWbjuA4weiimwSlptxmG2vJcS1IU3r0+voAZCgOntJN/XOcJrDBwSloPcnz4ryF00zbECvd3zE2Dmwg4j5YJtzDgsuEWAkwCLjKg2iqSgIsMCJL8jZqWCBcdMChCe9wUF5xS7IeFOOGUFj4P8vvZyt0rDstoMlFscEpxHFgtBTkokm+MA04p2hIL+X1ac1xwSpE82Gy8qufyj0CljeNt6sDZPK+e6sapdBPWf2cmpZixAXqQMKeMtV98/iOTY/aQPfwizJil5ySeBkd8MvsVpP2w4xIDjCotIOcLfl4q0pebEINS4Jij2uj6s8fp1YFhMi0Ja3ww2HMgZcMCcJxw1UbbEH0OP1ajNDpHPUoVuJhRyQ1vG20DHIgqCnwrSXQXO800OLPiDOwQYhd1gURhPHObphl5cYGzO6PEMbkVTAPmxlIxx/8eSOEczQO30korhdAfqQG2SzafVEcAAAAASUVORK5CYII=",ND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAP9SURBVHgB7VhdbtNAEJ7ZJAIJJMwJMCegNwBOUNNCCU8YCIjH9ARJT9A+IijCfSuFgjkB5QblBuYEBCEEKPUOs/7ddbZxfnmo+klVbe9m9tvZ+V2Ac5xxIMwAz+s6rdYvV6J0SZCD1LhCRM7IRCG/ocQBChyc/Ll8HIY7A5gSExO82+7cklKsIsYe/8yFGUAEx4B4LJD23u/vHk3ym1qCihgRvmHxLiwQBBghYf/w4OXeuHlYQ67Pu+5ZxKuj4j885oUGrJrsvSodXeSNEYDDC63Y1kCELdZmH6YlOEqOBqzJgP/Cj+9efYEZcOfe05tCSJ8fb+lmMo6kleBa+6mPRG80ckH8N94Mw2BqI7eh3fbdITW3+dHTSN622WXTJgBNzYWHb18/ggVifz+I+N+d9faTAAgfqm8ysXO4Xp0rqh+UU+QOQUBRjPEmLAnxxbgLme0qW03XriFI2Y4yHIXpbpeCMAgG7EBB/i4lrFbnjBIEKryNpAhgyRAIn4oXJK86bjiJ5/tO43fze/5++HZ3pkwzLdbvd9SaSSaK/55c1Z3R0GDzT7PUHnDU/2+gMjq0Wq4+YngxSc6nmCoNbYG3gvWNZx6B7AkBn6px7O6DTlfG8JCNf+vw4HU4VhAhp0Bwk3UFXQNNOYYGVeIvnjkVQQ0IZY/3s6ICugrsBTkV5CVsJ2OIvTo5rJTySCtFhxkHpbhWWCVRBDUQBHuEaQrLSEL+XO4Cwjo57JiDwthRGAQFzIH3B7s7TKZfLMTEdHJq7MPB7latICrNqVq2zUVQQRHQSU5NrgZzE0yEiNGcbvs2k2yYE6eVZFXHmRUGQdS8CbLAOQ05daxVm1zb6HRhDphxEOMfSCJnW0tQEqyiRi63OSalwmk/lQMqt++Mk8OKcZPUkEw3o4epQVlqEG1NUFUw0VaacbCrO0TuOGpMzYFalO2ENE/R1KAgEUlMd0JIKzVSIcsQ1jiXEZ7Ii7OWIGdoEDQ0OLw0jPJnbmhqNbgo6P0KDYdf9TGDoKrPILcBBMdWQC4a+hrKJKpthaUexOLIbAXkomEWyDRSQY0Q1AtIVr3vef7Sjrrdfu5C0uGlsBXIIwTTzqo85saFxjYsCUM62db7H1s7a+/qEB9xmPicvfnrGx0nFs3NcP9FBAuAuttpXPy5w6zKttOSz5PvpwnhYNsrgi0U9eHRNPcqVZT3O0nzXtaeYwqLsQm9SlKHugjisUFC3Fo7cl2H6uZLVekqpiZhy7HIGVv11FYca+3HfMugqmJ0YYFQNsdO4dddo0xcEuX3KqyxldMugiagFam7nWnud2a8wPQdbLVucG50VA/BpN0RwcidGlfKKreSxG8wHEaLuts5x5nCPxmq5MYgrihXAAAAAElFTkSuQmCC",OD={class:"modal_box"},MD={key:0,class:"modal_title"},Qf={__name:"Modal",props:{type:{type:String,default:"alert"},title:String,message:String,okLabel:{type:String,default:""},cancelLabel:{type:String,default:""},confirmLabel:{type:String,default:""}},emits:["confirm","cancel","close"],setup(n,{emit:e}){const t=e;let r="";const s=i=>{i.key==="Escape"&&t("close")};return on(()=>{r=document.body.style.overflow,document.body.style.overflow="hidden",window.addEventListener("keydown",s)}),xl(()=>{document.body.style.overflow=r,window.removeEventListener("keydown",s)}),(i,o)=>(oe(),he("div",{class:"modal_overlay",onClick:o[3]||(o[3]=bi(a=>t("close"),["self"]))},[N("div",OD,[n.title?(oe(),he("h3",MD,$e(n.title),1)):yt("",!0),n.message?(oe(),he("p",{key:1,class:Ht(["modal_message",{notice_message:n.title===""}])},$e(n.message),3)):yt("",!0),n.type==="help"?qp(i.$slots,"help",{key:2}):qp(i.$slots,"default",{key:3}),N("div",{class:Ht(["modal_buttons",`type_${n.type}`])},[n.type==="confirm"?(oe(),he(Ze,{key:0},[N("button",{class:"btn_cancel",onClick:o[0]||(o[0]=a=>t("cancel"))},$e(n.cancelLabel),1),N("button",{class:"btn_confirm",onClick:o[1]||(o[1]=a=>t("confirm"))},$e(n.confirmLabel),1)],64)):(oe(),he("button",{key:1,class:"btn_ok",onClick:o[2]||(o[2]=a=>t("confirm"))},$e(n.okLabel),1))],2)])]))}},LD={class:"report_list"},FD={class:"filter_wrapper"},UD={class:"filter_row"},BD={class:"form_field category_box"},jD={class:"form_field"},GD={class:"filter_row"},HD={class:"form_field"},qD=["disabled"],KD={key:0,class:"empty_text"},zD={key:1,class:"empty_text"},WD={key:2,class:"report_items"},QD={class:"item_inner"},YD={class:"item_left"},XD=["onClick"],JD=["src"],$D={class:"item_right"},ZD={class:"item_info"},ex={class:"item_row"},tx={class:"item_field"},nx={key:0,class:"item_category"},rx={class:"item_field"},sx={key:0,class:"item_date"},ix=["onUpdate:modelValue"],ox={class:"item_registered web"},ax={key:0,class:"item_detail"},cx={class:"item_field"},lx={class:"item_contents"},ux={key:0,class:"item_content"},hx=["onUpdate:modelValue"],dx={class:"item_buttons"},fx=["onClick"],px=["onClick"],mx={class:"item_registered mob"},gx={class:"reaction_wrapper"},_x=["onClick"],yx={class:"count"},vx={class:"comment_section"},Ix=["onClick"],Ax=["src"],Ex={class:"comment_inner"},wx={key:0,class:"comment_area"},Tx={class:"comment_list"},bx={key:0,class:"comment_item_edit"},Rx=["onUpdate:modelValue"],Sx={class:"comment_icons"},Cx=["onClick"],Px={class:"comment_content"},kx={key:0,class:"comment_icons"},Vx=["onClick"],Dx=["onClick"],xx={class:"comment_date item_registered"},Nx={class:"comment_input_row"},Ox=["onUpdate:modelValue","onKeyup"],Mx=["onClick"],W_={__name:"ReportList",setup(n){const e=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",import.meta.url).href,t=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",import.meta.url).href,r=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAnoSURBVHgB7Vl9cFTVFf+9t/lqgsmGaiCAZhMhDQQ1MIKUD5NVysC0kkBFRQubdEBF7BBq0ZlOWxLrjHX8A9PBgbZIkuKIloEkLVSgzAQ7EPmDSgLmQ8DJIl8RgWxCSGF337s99973Nrtsstm3MFP/8Oy82Y/7dc69v3Pu75wFvpP/ryi4g1Jir7P7E/zlmqoUMgUOXWUOTdXBVNWjK1qzrqr1Xl1rOOJe6sYdkjtiACnuYDZ9g64qJZqiQ1dBSjNo9JAR9Flhuqor/Hf+XQNqoKLySMftG6LiNqXEvrMUCjum00dSHYxvCT268c4fpvAXRBv1Y7SqS1e1Yw/nv1+O2xQbbkMWp+6sgKpuIGWTmNh1OSOpa+w8jIeJR2yXCkXnBqlizPzMMYuUi111BxGjxAyhxal15bSjG3QDJiY8Hph1D2YsyMTM+WMxalyy6Hu6zYNTX3TjvY2f4/zFPtlfGAmCFs2isrXNny1/BzFITAY8Q5j36spnhOt0U/FkezyWvjoRJSvHRxz74bYv8JdNJ9DTdxO6jUOKMd3GPLZ4bWrzkTI3LEpMPuDTlfW0g3aBb/6i9zfr5gyrPJdnlv0Am7Y+jhFpCXIs10BBuk9TqxGDWDaA7z4pXGo6Kldg5RsPImeyPeo5cvPS8fyLDxhOzrhP8HkKHUXV0U9iiGUDfLpazKMNpCNiVFYyip8ffudvlWefy8PUaRlyE4xIleRV18CiWIeQwkqYQnFdLoql6yYiVnEW3SvmkKepMLpDimBRLBugQXcgKK5nG9A5VHsWq0fuQ85rtag93BE27lANtacb7U2y/TEyAMY83ATamCxYlBhOgCiCIi4jITn5aeK9oeIU+rv96PymF2u3/ztsWEMltXv8cPP2D2T7mMwRJnwMZ2bZsCiWDeDwEY4HGctN6ff4SAFF+KU9OTFsXH+PLxC004LahQObfhBDTLQ8hBjNGXG7Got+fa5f/L50Qz7uzvqeUH598SNh42R7slC+okS2d5y8alINcz4PLEocrIqqumnvs4QXkCFNe89j0YoJmF06Tjxvwym6cZ/YvrYNH6/oEga5XHmY7Rpo59J+6urA7nMjgGZYFOsQAg6aC3IYNe2/MGg/4RMc81d6UT6IT3B5d2tL8O5zUNbDolg2IM6PKu4DHO980eYjl7Bz68mwfsInyFrGBveJ2o/acK6rL6C89CdfAyxKVBDiiYoep5eTMi6vTXNIWkwchjeSKbVVrXhoRgbGTxq4SDnmG14/JZSvKJ4eMh+HDt99QehoHwQc+ZxqfOfYuVsIRqxWi/PXd+1d5R5Ot2HJnEhWFNbIsyvuvJpBjTUzaeEQIFLGyZxrTT6ecuVGnG/bh23YSMr3XPeGsFiajzHBUuklKLnuRqLu7KqPbIQynPL0JpQX1Ndm8BZaQGZeCi06kGnxp7phPibkDU5pOJWet3iXQaUHlA/5HJifIGVjbu+1hCmeg2VDRqdhfEAn2sAc0tGkm5nOK8OfrhhwCjhjX693yNmuXfMaeEdI7GfB2dtAiGaUemapqd6I/GgYA1SXXEThtySRtgnY2VGMbZ8uwLynHBh9b4pc3Fg0c1wKpkzPGHI2fvOOuCs+QB+40akpCSh3TcGJ+p+hddcyrFg0WW6ISHQoe1NZaSQNI6aUeclPbzZJGz/i32+fjZTUeMHlZ80bK57x+Xac7OgWSv2qchqyclLFWM593nrsCH5x5TDSk5Pw0H13IzHRhmxHGlraL+Ou1ASULclH1W+LUDhtHBITbOKZmpeBP+5sESchHFxl6Tc79lQOpWPEKES0wUMwsQdu3bPXifsM4Hs07fj8cdmYvzg7bKzgPt0a3Jd7sYbugeWz8sTvc+fcJ56hhGdqkJcanawAbjciSEQIEcKbzaPmPStWNGHfjjOIRvg9oAivAZ1A4rD9e6/fxEcHTmLxr3fLiobKDN9CS6RxESGUm/wk5z2lPCrw6MCd8NC/zmPfrjNISYsXcOJQGEzSRifhq5ZetE3qwR+enIUCgtBQim/823GseqsR9Ye+RPd/bwrlDQjRaagV3vbdQxox7D2wIGNHDcVll1msMkMevw9GkRMXzLgHP395MjLHpsCK9BJUtuxqxZb6VnhI6ZAQqoqd50lTVe+uF9dGmmdYA7jMG71jvR7HKmSs1uXuBMXwKY9k4N2ax2FFnn7ln2g6cTFknkA1T4Rq5Z3e+sjKc4mKC+3vWlLp92vZ1LuGbO5moRQYR49+HTbGzMCyX63FX5vCM7RPj3fBqGowOZfCqYmHPlQASenRKM8lajp9sEvUMcuK8rY76IYpokWrWdCFdKuIKNTjxxmKQuWUgS2fmRfSHtgAEWnos84qtf6Eqki37m0ZEDBEFmRrZuZ+UD1wEiysn2CjhthTksLaTQbK0ztuwuU9L1QiBompsDWDTkE4NdiQJ2BmYPYUytAWTg9rDzkB+m6PoSbEJSonxi3KKzprpGjhCHbA/zQ/Z2meMQu2SAfmDmsTtJrunASnp94ahCydAMe/TUcjVMXBAgSO4YmFObAqP3wwU9y4IuZD5AQFunKj0V6ywdJJWDLA52d1/J8XswzCl87NG4lX1j0c0o/T5mUv78WEOTUYX1iDZ8s/prgfylK3/u5HmHT/9wMwksagwBefUAcLEvX/A3MmbC+l6tkLArPGTZk7cST+9N5c3MUZpiH8tl75ywM41v6NZKm0wtlL1/DJ0XN4wpkjCBuXJHovefR+HDh2Fpd6+o06K4ejkmXL/7Hb37qnJRq9oj4BihYuTm9Np+UF2s2DKO9avQ/tp4PKJSLOA593XsWSdXuIOgycRBpR6b+/8RPkZ48UmkgORCNtkSl0TAbQ/VsYiBz0/e2qR8OUL31pH9pOXzWTFrN+aqZCaCUjfvrarUYkYvfrCwdqpDzXJihFq1f0PqCa9VAJnxG3KF/20n60f9ktqbCZwfHIAsFomUzgGZ3EFSwixtkTZITnujeQ4Ii6K/SoHdnCCcBt0Fuh5J83n8CFC31S+VX7ZZFKlBtF5ZrDhpRXnAqzOen3FkkbpCHHOy+j+Df/wFfkGz3ERt/ccTSowCWsiLrAFfU9QPF/vW7TK0KT8dDKBKX3orpAbS3kjE63QQscJdV2701/o8ZDpTGWmdUIMdZguYpkopRIlPveX10VjV5Rn0BS0o0qJk5BYaYfiB2HTHZ0Y/fp5xDlubjpckpIjHOKU5HZFpN/ycqxci6FyeIWc/v6vLXR6hW1AQebyzw+zesEL+4al5jxt6n53y+HwCf+OIQoH2yENz7eSUY2Gwl7SGnd8JlOn+Z3on5t1LexZSpRUMA5S5xLs+kugs0UXlEmGDTrNqXm5GFXVDtnL9lUSuNoDhTqko12agpqk294qzwWlP9Ovg3yP4qdPbrF5RiqAAAAAElFTkSuQmCC",import.meta.url).href,s=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAibSURBVHgB7Vm9b1xVFj/3vhlnsl5W42yTpckk2iLSFutdUUQ0GXc0gBFQ0DB2gRAVzl+AXUGXpIEyHgnhAkU2ooDOpkBKBeMuDcpQ4SoM4ms88949nI9777sDyH5vbAkKrjN5M+/zfPzOOb9zHsBf649dBs5xddu77VYr3wBjbjrjOkUGHWcQIDMjB25QNGAvn+JHD4avDOGc1rkosHp5t5M7d9sZWC2MA7QAzmLc0n6krUH+zvsMbNNlWw8enl0RC2dcz7bvrxW5+5LEXiUrAxqDSGbRDylBGzD0K+yjf7TtFVnx5VP/eX8DzrgyOMN67tL9TYIHW76FlgS3LCiZm7dkGvYAKWG81ZH2sReM/hm6Bp7515MvmG+Odg9gzjW3Aqvt+xsk1NtiVQssPAPSYMb2VmX8MVBlSBH2iBFI8W+5jr53L19+4bujo90HMMeaKwZW27sdEu6LwrqlFOciZMQ+YMECB8GT/fTb0DEk88mWjo3sQvP/gwf1Y2K+GLDwFgnRButx7vEtMOEt4xwi7jFsRUn2knhFgBSuXcrzyT2YY9X2gFg/g0cFOGS4OBOzjFjbW5n2aTYqWOjM6X4+l2LFWToqHuNz5bso+ONicWl4sD6qI888Hnies40EpH8wihmwn//w41Jhi6sEkH7wChgfC2i2L/40WZrmx9dI9b7aX6qEmJGVb43tm1Bz1VaArL4qqRBK+LAAU1dsHYzWRwdcpLC1gWXAIudRgPHWwXB9NHi4PsQs35B7WFFQzxMdsQs1V20FHLqOWl9zPD+eIQDjcen61ritMWFQMhNtxmNIodGWGKBDLvWUhStQczWg7rJED8RaRkVn49LD7ROLt7vtnS3SZOSmsKnWdR5maJqLC7dvLO9sjek4mOYmKY6Sn0hJihYJefr/KtRctRVwYPyDY+bRTGJxjbTrOXtR9oHAgs/FcF6vcMWasQ0IaRUspyjUVCIKQ+1VPwaM+1rTp8QBocCgpweahYwIZTyF0GAH8BApYwbFGOjTqeQszlq1MtBcCpDVBiqw0AXNMRl6KHlY6V37rfHxpePi+CoJ3td6YDTleuVKziSxwnsHUHPV94C1B0rKQuaQwiVw8VhWyNgy6xTZ9Fa4RlXGUPQ4CQD6VEv79qDmqq3AhQvQlwpA+A3ChFSo37USt2ayTqtdptQy6wSFIRa58UdQc1UKG6q+7Xwh3yiMoSDFjlZYlBTI8AmV1wkjdVqdM9i2TStZx0DzDu17teRFvlpbJ6mWq3Go1KToADPs20a+N/z0jeGZFeBmZercPt28o9DwAojFvFWzVLBALRhuzhQpyfPXOxv2KSvlawurhU0CWg0ydLZYOTpFCXuq8FO3T187PnAhZhylEAg2aVZiYJZELR4vUyoGeiHQCzASc4b9EthUMLP9dvdee24FiolbNVK4fK72AoXA0ypL5wGWwkNMlcZ5yhG84/Eu+/0nyUS/+dBxc2Xh7/mbcytAXVbP+SCTbC0PlWZF4SDVNFBmAzOtZKgBnk7rHbyCoWgFDgTqyaC8iwYiWohu7SQZT67EFpdTN8dW0T88MFKS3RQpHGL/i1qwjMIneCx40gWPppZXkpf2Ep0TRTxRAeBxCPhGHcstpE17iWFnSurgPeApgkaFNjRq3dBeJrERjYQQix3/fTu3AjQiGYAN7jQi4kywQtJp2VAPvOWJ/4PLlyZFfo1+9TEK76EGJnRqkRMp/QjKxzpxOLcCdKMtETJtHZMHh4yjhBliRVWMT7cGg/XRw8H6sLnoNrxlIR216L0i9jHUiQA1ZMUMGWJeBT49evmAhOljQhFAiJd3u03gFQNTPUMrVmLqBdoirCd2Mc16gV1IvRD4lE+3CHdGe6/3T5Lx1LHKV99/uHftHy+xgF0tRJAEnghuood8YRLaYO3lJ688d9j69yo0cniHhF9G3werZb1BMpgZv8SUC3D38cev3zpNvkpUgle3s0OFxbzFcxymEy5UVRmLyPdkdKhCFFYD2Y9O4oBLKjfotjzG3Zn7ju5zJ/9h4e6oYnNfWYGoyPWdzqRwXbLivXQG6mdAnmJ4ihAph8yC1LKZgtDp8IuUVB5EU47Nybi64HMrENaN6x/wWEWKjgiYch2OTYqd7xeLW8RK20TsNumcXlAmYl8nc8CeOPrktblkmeuiG+QFAswjVNYpmBcyFogYW3bqrnIG4vM7xGeyAh47HWZhhBl7wyt8/HNzqa71edXuB1h4EnkffOBJ0ZkhaPoZJ1moRVOIMCsNXVzgRmG80lycnkrcfm/V8gDj/xhgHzmIAX/1DiB4I/7epl9b4xaMMod3uKnHQLUj/U6ndBzQMEC7sDLaq+6JWh6YONxF7gsg0AqIPa78BvRNiSjSI4UeZTk85u8zPXBacRMCqNxrvFtHpsoKPH19Z42E/K8UIiiJHfjmfpbL+zlPgAykBS9AyWjFBYjFzw/Dbj7x4ru9qnJVVoCe1PO0IZlCl+xTiZp4BWOzEjAeKUcQVHmOVmHU+1hT0mpr1qrKVVmBAuBmyn/KCUSAjdrcydmoeR7QeyoOt0JHljDZwK38tEIJareqXNVjIJnng2eWEKwLELFcQokLlMyQBumELiWCkWpbfxf2kWeh564APX44CwlQHpQo5L2CMmkwZkAWX6GD9HGH5bWBhcZ7zHZyeqzygKu6AvxqNDQcVtGMM028Kb0AeEjFaoVfVvDHumxFhAr532Iy3XZJDIFOMkBew56vApOFyV0ZdYCfplkfkDDTzLNMh3lDhQ/X8vfG37IVumYQGhcXvOHpc/IadnjxeNKvKldlBbg5KaY5WRK/hhTD1r8TUyh8Nm3OCh+VoOJ04UJjBaVYoUn74yQzET2ZUCG7VbmQ1eZCy8v32s42KKU6LlT/k0oMeEDvi7cfft6rZLl/PvveGtFnugfc9DSc3rlhfyGf3K0j/F/rz7B+AQqbt3gTEA/uAAAAAElFTkSuQmCC",import.meta.url).href,i=yu(),{reports:o,isFetched:a,removeReport:l,updateReport:u}=sw(),h=["","","","",""],f=_e({}),m=async(se,C)=>{const O=o.value.find(S=>S.id===se);if(!O)return;O.reactions||(O.reactions={},h.forEach(S=>O.reactions[S]=0));const Y=f.value[se]||[],K=Y.includes(C),pe=K?Math.max(0,(O.reactions[C]||0)-1):(O.reactions[C]||0)+1,E=kt(ut,"reports",se);await fd(E,{[`reactions.${C}`]:pe}),O.reactions[C]=pe,K?(f.value[se]=Y.filter(S=>S!==C),localStorage.removeItem(`${se}_${C}`)):(f.value[se]=[...Y,C],localStorage.setItem(`${se}_${C}`,"true"))};on(()=>{o.value.forEach(se=>{f.value[se.id]=h.filter(C=>localStorage.getItem(`${se.id}_${C}`)==="true")})});const g=_e(!1),b=_e(".");let P=null,k=null;Fr(a,se=>{se?(clearTimeout(k),g.value=!1,clearInterval(P)):k=setTimeout(()=>{g.value=!0,P=setInterval(()=>{b.value=b.value.length<3?b.value+".":"."},500)},600)}),ca(()=>{clearTimeout(k),clearInterval(P)});const U=_e(""),L=_e(""),F=_e(""),G=wt(()=>U.value||L.value.trim()||F.value.trim()),$=()=>{L.value=L.value.replace(/[^\d]/g,"").substring(0,8)},ne=wt(()=>o.value.filter(C=>{const O=!U.value||C.category===U.value,Y=!L.value||C.occurredAt&&C.occurredAt.replace(/[-:\s]/g,"").includes(L.value),K=!F.value||C.content&&C.content.toLowerCase().includes(F.value.toLowerCase());return O&&Y&&K}).sort((C,O)=>{const Y=K=>{if(!K)return 0;if(typeof K.toDate=="function")return K.toDate().getTime();const pe=new Date(K).getTime();return Number.isNaN(pe)?0:pe};return Y(O.createdAt)-Y(C.createdAt)})),R=()=>{console.log(" :",{category:U.value,date:L.value,keyword:F.value})},v=se=>{const C=o.value.find(O=>O.id===se);C&&(C.isRotating=!0,setTimeout(()=>C.isOpen=!C.isOpen,300),setTimeout(()=>C.isRotating=!1,600))},y=se=>o.value[se].isEditing=!0,A=async se=>{const C=o.value[se];C.isEditing=!1;try{await u(C.id,{category:C.category,occurredAt:C.occurredAt,content:C.content}),i.openModal("alert"," "," .")}catch(O){console.error(" :",O),i.openModal("alert"," ","   .")}},T=se=>{const C=o.value[se];i.openModal("confirm"," ","?",{onConfirm:async()=>{try{await l(C.id),await new Promise(O=>setTimeout(O,300)),i.openModal("alert"," "," .")}catch(O){console.error("  :",O),i.openModal("alert"," ","   .")}}})},w=se=>{if(!se)return"-";try{if(typeof se.toDate=="function"){const O=se.toDate(),Y=O.getFullYear(),K=String(O.getMonth()+1).padStart(2,"0"),pe=String(O.getDate()).padStart(2,"0"),E=String(O.getHours()).padStart(2,"0"),S=String(O.getMinutes()).padStart(2,"0");return`${Y}-${K}-${pe} ${E}:${S}`}if(typeof se=="string")return se.slice(0,16);const C=new Date(se);if(!Number.isNaN(C.getTime())){const O=C.getFullYear(),Y=String(C.getMonth()+1).padStart(2,"0"),K=String(C.getDate()).padStart(2,"0"),pe=String(C.getHours()).padStart(2,"0"),E=String(C.getMinutes()).padStart(2,"0");return`${O}-${Y}-${K} ${pe}:${E}`}return"-"}catch(C){return console.error("  :",C),"-"}},I=_e({}),we=_e({}),je=_e({}),Ne=_e({}),ke=se=>{Ne.value[se]=!Ne.value[se],Ne.value[se]&&!I.value[se]&&Te(se)},Te=se=>{const C=dl(ut,"reports",se,"comments"),O=dE(C,fE("createdAt","asc"));vE(O,Y=>{I.value[se]=Y.docs.map(K=>({id:K.id,...K.data()}))})},vt=async se=>{const C=we.value[se];if(!C?.trim())return;const O=dl(ut,"reports",se,"comments");await yE(O,{content:C.trim(),authorId:Rs.value?.uid,createdAt:qr()}),we.value[se]=""},cn=se=>{je.value[se.id]=se.content},Ft=async(se,C)=>{const O=je.value[C];if(!O?.trim())return;const Y=kt(ut,"reports",se,"comments",C);await fd(Y,{content:O.trim()}),delete je.value[C]},at=async(se,C)=>{i.openModal("confirm"," "," ?",{onConfirm:async()=>{try{const O=kt(ut,"reports",se,"comments",C);await _E(O),i.openModal("alert"," "," .")}catch(O){console.error("  :",O),i.openModal("alert"," ","    .")}}})},ln=_e(!1),Kt=()=>ln.value=window.scrollY>300;on(()=>window.addEventListener("scroll",Kt)),ca(()=>window.removeEventListener("scroll",Kt));const Yt=()=>window.scrollTo({top:0,behavior:"smooth"});return(se,C)=>(oe(),he("section",LD,[C[11]||(C[11]=N("h2",null," ",-1)),N("div",FD,[N("div",UD,[N("div",BD,[C[3]||(C[3]=N("label",{class:"label_text"},"",-1)),De(_d,{modelValue:U.value,"onUpdate:modelValue":C[0]||(C[0]=O=>U.value=O),showAll:!0},null,8,["modelValue"])]),N("div",jD,[C[4]||(C[4]=N("label",{class:"label_text",for:"searchDate"},"",-1)),en(N("input",{id:"searchDate",type:"text","onUpdate:modelValue":C[1]||(C[1]=O=>L.value=O),placeholder:"YYYYMMDD",maxlength:"8",onInput:$},null,544),[[_n,L.value]])])]),N("div",GD,[N("div",HD,[C[5]||(C[5]=N("label",{class:"label_text",for:"searchKeyword"},"",-1)),en(N("input",{id:"searchKeyword",type:"text","onUpdate:modelValue":C[2]||(C[2]=O=>F.value=O),placeholder:" "},null,512),[[_n,F.value]])]),N("button",{class:"search_btn",disabled:!G.value,onClick:R},"  ",8,qD)])]),C[12]||(C[12]=N("div",{class:"line"},null,-1)),g.value?(oe(),he("p",KD,"    "+$e(b.value),1)):ne.value.length?(oe(),he("div",WD,[(oe(!0),he(Ze,null,Ho(ne.value,(O,Y)=>(oe(),he("div",{key:O.id,class:"report_item"},[N("div",QD,[N("div",YD,[N("div",{class:Ht(["item_icon",{rotating:O.isRotating}]),onClick:K=>v(O.id)},[De(Di,{name:"fade",mode:"out-in"},{default:Fn(()=>[(oe(),he("img",{key:O.isOpen,src:O.isOpen?Ae(t):Ae(e),alt:"toggle icon",class:"icon_img"},null,8,JD))]),_:2},1024)],10,XD)]),N("div",$D,[N("div",ZD,[N("div",ex,[N("div",tx,[C[6]||(C[6]=N("label",null,"",-1)),O.isEditing?(oe(),En(_d,{key:1,modelValue:O.category,"onUpdate:modelValue":K=>O.category=K,class:"edit_select"},null,8,["modelValue","onUpdate:modelValue"])):(oe(),he("p",nx,$e(O.category),1))]),N("div",rx,[C[7]||(C[7]=N("label",null,"",-1)),O.isEditing?en((oe(),he("input",{key:1,type:"text","onUpdate:modelValue":K=>O.occurredAt=K,placeholder:"YYYY-MM-DD HH:MM",maxlength:"16"},null,8,ix)),[[_n,O.occurredAt]]):(oe(),he("p",sx,$e(O.occurredAt),1))])]),N("p",ox,"  "+$e(w(O.createdAt)),1)]),O.isOpen?(oe(),he("div",ax,[N("div",cx,[C[8]||(C[8]=N("label",null,"",-1)),N("div",lx,[O.isEditing?en((oe(),he("textarea",{key:1,"onUpdate:modelValue":K=>O.content=K,class:"edit_textarea",rows:"3"},null,8,hx)),[[_n,O.content]]):(oe(),he("p",ux,$e(O.content),1))])]),N("div",dx,[N("button",{class:"btn_edit",onClick:K=>O.isEditing?A(Y):y(Y)},$e(O.isEditing?"":""),9,fx),N("button",{class:"btn_delete",onClick:K=>T(Y)},"  ",8,px)])])):yt("",!0),N("p",mx," "+$e(O.createdAt),1),N("div",gx,[(oe(),he(Ze,null,Ho(h,(K,pe)=>N("button",{key:pe,class:Ht(["reaction_btn",{active:f.value[O.id]?.includes(K)}]),onClick:E=>m(O.id,K)},[N("p",null,$e(K),1),N("p",yx,$e(O.reactions?.[K]||0),1)],10,_x)),64))])])]),N("div",vx,[N("div",{class:"comment_header",onClick:K=>ke(O.id)},[N("img",{src:Ne.value[O.id]?Ae(s):Ae(r),alt:" ",class:Ht(["comment_toggle_icon",{rotating:Ne.value[O.id]}])},null,10,Ax)],8,Ix),N("div",Ex,[De(Di,{name:"fade"},{default:Fn(()=>[Ne.value[O.id]?(oe(),he("div",wx,[N("div",Tx,[(oe(!0),he(Ze,null,Ho(I.value[O.id],(K,pe)=>(oe(),he("div",{key:K.id,class:"comment_item"},[je.value[K.id]!==void 0?(oe(),he("div",bx,[en(N("input",{"onUpdate:modelValue":E=>je.value[K.id]=E,class:"comment_edit_input"},null,8,Rx),[[_n,je.value[K.id]]]),N("div",Sx,[N("img",{src:DD,alt:"",class:"comment_icon_btn",onClick:E=>Ft(O.id,K.id)},null,8,Cx)])])):(oe(),he(Ze,{key:1},[N("div",{class:Ht(["comment_box",`comment_box--type-${pe%3+1}`])},[N("p",Px,$e(K.content),1),K.authorId===Ae(Rs)?.uid?(oe(),he("div",kx,[N("img",{src:xD,alt:"",class:"comment_icon_btn",onClick:E=>cn(K)},null,8,Vx),N("img",{src:ND,alt:"",class:"comment_icon_btn",onClick:E=>at(O.id,K.id)},null,8,Dx)])):yt("",!0)],2),N("p",xx,$e(w(K.createdAt)),1)],64))]))),128))])])):yt("",!0)]),_:2},1024),N("div",Nx,[C[9]||(C[9]=N("p",{class:"comment_title"},"",-1)),en(N("input",{"onUpdate:modelValue":K=>we.value[O.id]=K,placeholder:" ",class:"comment_input",onKeyup:fv(K=>vt(O.id),["enter"])},null,40,Ox),[[_n,we.value[O.id]]]),N("button",{class:"submit_btn",onClick:K=>vt(O.id)},"  ",8,Mx)])])])]))),128))])):(oe(),he("p",zD,"   . ")),en(N("button",{class:"btn_top",onClick:Yt},[...C[10]||(C[10]=[Un('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1904_442)"><path d="M20 5C32 5 35 8 35 20C35 32 32 35 20 35C8 35 5 32 5 20C5 8 8 5 20 5Z" fill="#6000B4" fill-opacity="0.1" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 21.6666L20 16.6666L25 21.6666" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_1904_442"><rect width="40" height="40" fill="white"></rect></clipPath></defs></svg>',1)])],512),[[uv,ln.value]]),Ae(i)&&Ae(i).isOpen.value?(oe(),En(Qf,{key:3,type:Ae(i).modalType.value,title:Ae(i).modalTitle.value,message:Ae(i).modalMessage.value,onConfirm:Ae(i).confirm,onCancel:Ae(i).cancel,onClose:Ae(i).closeModal},null,8,["type","title","message","onConfirm","onCancel","onClose"])):yt("",!0)]))}},li=_e("light");function Lx(){const n=()=>{li.value=li.value==="light"?"dark":"light",document.documentElement.setAttribute("data-theme",li.value)},e=t=>{li.value=t,document.documentElement.setAttribute("data-theme",li.value)};return on(()=>{const t=localStorage.getItem("theme");e(t||"light")}),{theme:li,toggleTheme:n}}const Fx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjfSURBVHgB7VlRaxzXFT73zqxWlhx75PbBhFKPQkpNaOuNacGBplpBaQ0tVIodx66pvfvS0rRE2j9Qrf5AJL3UL6VamVLFMUGyk4dCHjRuoA2kxGso1MXUGj0UCoFojOzVamfm3n73zsxKlXa1O5L6FB1xPYPnzt3vnHvOd849Q3Qoh/LFFkYHJD/+8u08ccqHjJ2RnHKCkyWYwCApDbkiSQw77hWXDlhM2oeMWAs2QBcEk2Mh0XGAZBKA1b/4I9yT5OqObMnYFF4ZpQOWPSkA4BYXNBUyWQA40lbmMWBGWonomiih51it1nqt/71CkGVTG1nhbWTDsuO+MUcphFNKuXhsYZwL9hguch3wlM0BUls+VgAqaehQAoPUc5KuH8piq/VEhk34pjju94Q2xjSllFQKXDi6MC2IvQ1rDyiwxFlidYAWHtDOEmOuIL0jTFue2CoXcvjjFv4/cnLB9k15yu8RDEoQ7q1cbtZKg6krBZTLvH508T7AvaW9O7Z0PFwhqbBef/pCaIqbggubDKijFcTeSDnZKnjVmoEflgOADzIAn5HSx7XRw6bsc7M2dSldsdCl/jv34e9n4DYaNEAyMpgHlil/8NnFmWTe979yewnP80LFg5pLcvHe8uX/CdyfGgsF0WO8vZENBurZkOpZgO4VtKHvQ1zVvZAbveHKRo8se4u/2DUmOu7A68ptGJ1p+jdXXk3LjWDj5a3gz9tgJIDXwJlyHeX+4eT29aTJJxpmaDVMZXFJkfWhhCn0Duid6AkZ7hETQceY2JWFLvcvFELiY7C0AiVJAwura3Jt2PGK3ta5jdDPE2sykSKnB457tbp9zSAjLYBmcB0NVt8DeORKSqlQXbVSviE86iBtd+AyOB4BOBGxCiUuscKlMbodvBLG6SdbmIjBNJVW69bNsORnyPXVDpghawB0shu+Vkaq3VA748mMUaYO0nYHpM8mwCanRGxVWPcJcA0veqNuy/kSyYojiVHMSlJUW81737tQwaWSPz1vA3AZ7HPNj91Iu5QhKkz2ltbnix2tr6TlDlzuVdanQuLPmg4lK7cDrxXgKtsSi96RzAg2HtAu4jy84vqGPx6zkKZR5UqhISe9xe7At1UgNOA6XIOKsioS0V1vdGa3hUCYFmnwQivhuJ1BVKtFz++RXhwLKg+43uIvXUoh7WIgr5NRxPMMGpSpg6j5inmaia1LgeuUGplwBVfP56JMKWXHT108upBH2C5Jg5FiH1Do6t3V1050WujVF975HFXngEpgyBeSs57Bv/zjwgrtUQrG3cK6KafWjgXe02NB+c//al0jtdgBPhQVXyJhlDvUheCdFcX8Mq6NhKwN0j4k5Gyi3hda6/2B/bS/0TYf7FAAVsxFlEm6UBOMOdSFoPap6vqHRRVcwPkQ7UEKdLdwnX2wWsuGdq0vpNqRgNahyPM/+N3ycxd+e506KiClretH9YQhHhm51IVA0aq2vnoPimDkaU9iTKCUsNb7AqorBTCeHQllrS84hfvpzgpoOlSuoA4mgq0FTx5087PZI+tzkfXjEhuns9w3ZvOUUlAQavA1gH52JJCwPnYgYGrgmddRAaFOVjyqOTUdet1xsgNKxHxHbMkdlDEnKKWsHQ1KcBtXAYbFMbQLoUoVq3hcpk4KRIVYRKFpT8whU8WbbBZzqjL91tmb42nWQLKsfPjvS4MA72FIFQO13nBZVt46QbNjcx0VUCUDJcGIkbe6P2D87e8/c/CO08zgmlLZb176zmyOUsrac36p3u+v1PrEqjDZZLt5O2z8oy+9t4wDia1qes1CQePlDz+7WqUuJXcah5Fe8z7etzQdq3VIeoGUw48+KXa9TreyYwe4was6CCmu/7OZVHRYfVh0sYOT0XFSH+5VPFgsw5a+9srcGB2wtIoBRza7DCobU+rtr356bRq5oByTQeJOx6Uppge/9/v7dr57drJGbti7Pd/hQudP3s7jx5aQAKSIjo9PBK8NdlOcbZeXzs1NYI1y3HZhoaJmI1FIPEB8LJIp7gUUuP/5U1TEKcCo8e0A4Yd5Q8JAXYZcFBo0XH9nZ6HXkmd++Pztz0Ou6xrVVYMabNxxL83QHuTrr8yOq0CGIQbi/pBec1MppE5Uvap+EnElm8RfXBGTnsNoZv3Wm6Xt67esRvHSTHyIQYXPVMskFRVulX/+tThtZORZGKGiQKszdVK1aiWYLsA17UbluI4bmSgrIvBtpaUCDdOc2TxGClVd2t998VbqpJTIQ6foPv6oWMSaw4C7KONzQ3Ta01mfmG7FRJZvNsaaR1TVONto6QFtdct/9dYUGldjqoUSb6nnkxz+5NHVfVPhyTyoNoMmgMGHsD4awVIdR62YclelQQP6njdbk5X6H39VpFQK2AuWZI1lxMLxZpctKuyGP3548F1mJSqA8TtLQuWhJAbQOMOxHwFcclu907Yr4bijHmOiRHE/KFpQ2GCRpXO5eZv+T+B1MUnRH3ZDBiTL7cDvqoAS5/GVCmNsZtMXNUPYvhBLuQNUQnO9om5GdtRXjeJP/bY//+u53d7t2Jn76NEbJeQER++E7p6o3UD/kwXLubNzZdqnnBi5UQbQT+GedsRMMsngS+vzO2lzu3RVb+bRMa41srNwn5E4oKVq4IakA80lwyg/6/XvuE53yc4ambUywr+OdcYxbBHTZqjc1NDZ28nWG6PeYqnjeqkK5m9/8w9T6NuMJwEWKUPJKQwsRQ7j0vFNUoegaqKQff6G7YeGJUwaCvH5CaQwgjWs+OwghV5LRMmNkLDe7Wz5PSmgJJe7iU9KNKFiARkWltuSPTk1M2h0Tf5PgYznseidZP5mAwEVK2Pj9XffnEuDJ/UXmmr1WqUhw2HERYVieo2zZ8Qd8XE0zrTN7wjNGGKxpXWmj58Tnzb9vsG04In2+ZXytPoQwXUDOA/XiM8QcUMsqneomZDiXdn8xiA9fBiZ5tQ7k6aVeKAKbJUXX705FLBGDgrhGwHcC8kIQWnpqpbLJ8pFQi5UqV4Vkle9939+jw7lUA5l3/JfAaR8wqX42CkAAAAASUVORK5CYII=",Ux="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAaESURBVHgB7Vm/axxHFH4zu74sLuI1aQwhaGVSqEjgCCncBJROnePKJATuRCDGjXWkSxNJ/0Cs/QvujhBUGcmdixgpkICagEoXSbyCQJQiaA2JOJ9mZ/K9md2TrJNPJ92oip4kTrq93Xnve+9974eILuVS/t8i6IJk7u1HzUKYh0aYPRPo5afZ3S5dgFyIAXM31hIji41C6kQLQ0ZSbsT+9GY2n5NnkXQBomW/qaVJDOCxP5JiklcX6ALEuwcYfR0UG0B+yqIfGMGvMCgPip53L3j3gA5VU5OZMhLRj6cbfFsvkLjWDyPvXvDqgbkE6B8A/cAkhdA2fLSAAYG2xuCdvNZ/6dULXj2gFdDnxAXerDwJkxmpX1hDyOXCfuTXC94MYPQRNA2XuIZNgAGig79XtAsjG0ok9UK93o7Jk3gzQCkwD1FilRcc8pSR1t1QRamjUZfM+P16qGrevODFgLlkNRFCNAa0KfhLdDazT7PN7A6Up9QmtHQ5AUZq+fKCFwOUksw8zPvGhYt43gf61fUo6qUIqD0XVpadUBf8eGFiAxh9KN5wCJuSbai7BfSrz2xuz+dAPa08RDapCy9emMiA2WQtPtBBi6RIKsWg4o46gn4lKuynOC23IQQn4bPxQRgsztxqJzSBnKsOzMbtuHb1astI+aCQ5jqQJxs6tuqKpZ9+vbt80n31+veLJPRSwYwkTZkTegf3dXuaOtnWfEZnlDMZMBuvxVGkWiYQC2CUuGwRyoJlEPtm50DTx0fD51UD2rGWwXMt6ZpjJWuIMIEtchleu0rCkM3xDRnLgE+geL8GxQUUlyZm5NAqG813M+o27jXCw7R+/u2zkW3z+x+0mxTIxUKS7VQHRvAzpP07Q350ZaQ62ZP72Wm6idMUV6Fu4VMLhVXcQHFc4IOs++2Bezg8lXo/HbdFmKm3ExmFDS0KVG7UDvdcY4kAftGOEDKA1NVSdXZHGCJepziF1NKGHiipQXlGlHF76HYMKoh7JOb4ig8ZggRWoQSD6SaeO1U+twQHQRVYkDL8dGVNd3bXhw0Rw8o/apKQ3zLiWpRNGMe4BIlLGy65NnpFh+dX/Lgks8xEugE2wxSnkyMFjxxohr2e6UAs/b1+rzvSgNvx2u9ghelXEtQ+SEDxYkXtQ/Hc/2TFcgOG1ELdUNI0DQ9EVZg6PWCQfrG3fv/60XuG6wCqpKumxprn4tJeyXEN7B15a8SOS4QzoKQQAcVctbleWAOggrbBRUPAhcffQNh8JSQtwoWJa4NL661r5Td4qzF7c7WLC7bXIQ+CEIoxCLUKUYCeAaCxDGcYMDCfEcx0mCWA7tLxe09M4rl4NaFaDclVNMH51WBO7tUyDxuVcQFi3t56dj5DWHGSTM9yweXcq0QxWAgQWnJZS/P14dAdSaOzN1aTUIYNE+omkEiYGbQU7uHWEPaOyNDjd6kmO1vb4xnCikvSLYTGA26vS/431fxcJjEUNyvqHyi++fqcG6uQsSEUyQYc2nQF6PCwCi24Gyxhln7Z/nxkIbv5UbuJqHioOdcqEAZFDC1SIPIDsJzaH634mQwYGILOc8DbYInSABdWrvgANTW9vX3ywTNgmb42G1DYbSz43gp1YRu9lV4vHEvxSkI6g5RJu3xrpt0lGTXwO0ILGwghXJ9P3OeH3Oef2MwpzZ8XU1xP7LYiIFYecwKl+y/PpnglE20l6jPtJLzyBvojxLNF0XoC+59iyAsD9AMqNxaCmSb9V8nl8yheyUTzwPaz+UwFL5c1T1u20Age3LH/kUPTVp9ABJw/dkXE75idQvXTSZRnmXgis0gHInXFzpYbtB+mZSmyFEYfljVM5SXBhprO7ubp3eZp4mcroTFtCfOiGtx55q31Dr1g0S8Lo23YDKY2pbxsq71t5t778LtF5MJSORvzvJAfXKFpXIoRXRtQOynKngbHLv/xwxfL5EG87YVCpVKonmvbw9id6LVQ04K06INy+SQ3uWXYIXlBnyUgT7K7+7j31jt3IkAyyx7gPga1oo4udsb2N4PeRqZ/Pv3yMXkSr7vRKNLIBctIZZthO9spRl7YYQXVWvpDn8WrAdugRMR+6tjGMg2VrOQqNomR4+F5xPv/B1RITKm5bRCqNgORgzbQO/os3g3ASoS3EyuDLfVgW+0ffZYL+R8ZHmu3cIfLXr2Dvt87+izeWOio5Nnj3pvv3v4LFbeOxg09j/x698m9H+lSLuVSvMt/LqYh337ZdD0AAAAASUVORK5CYII=",Bx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgmSURBVHgB7VlLjxvFFj6nuv3IoJt4GVbT3Ksrru7i4rC4PCSIR2IRHhIJEgIJiZlBPMQGJr/A4Q/AICGxAGEiIQURUEawgAWKDausyMAqK2J2sMJCPMZuVxXn1KurPZ64A14gMWWVuu1+1HfO+c5Xp8oAh+2w/b0bVrmpk/Vavx5pbOd1+fSkLr/45RZ9ZjjYHM29t9Vr1VdWtrQQJxXqjkLQWuivFcD2l8Mnzh80xkbz0+w3zHt5bdoZ1/S7v8ifzg5G88eIm1h0A4MfNxp9lap1mWqk3hEKXp5376njl7LmkX9c1YhdTeCpA4FH6m2d6N59/37/+t3/uZDNe3YPpusyUR2ZAqia3hBHV/o89iJ8Cw2Ypkf6MoE7ZKKBBgA+kjHzb0bZV0JnZIAmzxN46myEPUeFKqOvc4EpYd895Z6a8/a4Xu8vwndDA+7/1/vbBLpNHenF2rw8wd09NdlHhVPHP9ggymTKAOYPaDJTM3jzG38EckRWf27W90VwUlevE+ghj2OclVKvQfvO9nuvwR8xoJN98DJ58SXzIttRCdglQGvfD14clu5tXWrR713DdwOYj0wdf26Pik45EphgZ3a8ndGZkTiKJ2SqvnbOoq5gkqqt2+/pbR2EE+eDv5ApIa5Swh4jz0DeUDipyeFYwdrwyuYwvvfU8YvEdewRdVaV5Tt4rys2QLAByhrjDRLGGdfp/LHd3ad2y2NfauX1PRpbZTQ+RUZTlyO5Mj4x/KzsuIMjILBLtDnmeI9S6NE88A/e+tEWgb9M8FYdbQJ4w39jTAHeJjVlAkcC1W0kCVf/d2fvXPzOwfDMSIq9NRp7NBUh71pjnbwzF+rsDw9kF1n6NkxCOfrQ961Z8A8dv3iO4LxWgPWAIyPMuUloSx/+nfNCFEctku5//1824sq1TcqF/BVSo4CB8Ky1Hnmzs9CAKcouc4+4iCYCQg+uXVkvJe3D5HkC0A1c97wHR504F5hWdiSOhTk6aUU2gmhHRBbd2+8q8/ybrza380QPGEPOic1GNFV3oQEkmZ3gfaIPDbUZX2etl1q/SopiuA2GGua+wH8L0FAGlZ8LXKS8cRwZZ5yJkE6wm93dy0rObE5fsRQiFUxZAeHk4gikamDBU0f97rUZ6qCWfQcMS3x3nncAtf/uAdoeG6ON8Wa+YDNQt9Ia9OKxhp8/N8hTikIKVloTOL/QgN+a4zMS1CaFdmtvRZ8te5+1HlYtYA/Wctz9xh/neRJ+1rgELGDU/lpssDcI3cTXyTpvdeIxf/j0+TWVTJ+ZUl5Ofp2cncVbqRYKBtz6YT+qb1AnPllZMu1EJVljhI+MBenuB7of40goc52fdXTi7yxEg2fWqmKqbABzn9L6WyODaJIPTR7wd6MqpDIJ4D7gic0Df87GShcx5fLHGl8kPU0d2fXLz35XBdfCWihYmsKjxmtEGaaFT95QJmBR9yhA63GhUGMhsS4X/HfzpFEhilycH3kCp6viqmzAVE9P22SzoJRLTogAOVl1wOmEax9HMX4GrFa5ozcCDaV8ftjIqU5VXGnVG2mAFg8SZlSGELzqAQEWk5fLDQhzBaqSlFqpBed1JwgmqjQvtKvCqmwAcfwOp/Msk7baRHRyWHjagUQvpRY4hOc8eC+fBf28IpljVhVXZQOcTHqqFIMZLztJjMoIO/PaJNdR5MhYdFEpjItl1T+/dAPQTf3u3A3EOeC8GvQ+GAIu6b3W2xoo0IhzIZQg4Xlh37F8A1xp4Au34GVTywAG+sRqZCgS6GMnOgMQy88KHSJsizysLO+VVciCQ132suewB+DlM6pGg+FWpaSLjHbGFbWRq2ZNkacrh6CyAUXR5uoXnxNGcSLV4d9mEtMZo62URhVryCv3GxTGVG3VVahIUm1K4khxjBvQ50axPuAcKRY6vj4yntdh3rAetwZ6YwUsl0Id2gopALtkDp6D4P3A40CzIItgZvD9CoZRcefWC1aSm4+9vVoFWyUDcq1PB0qAK4VLILWTSYiM8JWqo0aYqSFeoelCei0aXnDyeV3kG1WwLQwVe3+ioM+TC4OzhZgt4OLCzBV5RSGX+IihpZJdyBvDbCTsDoUsrtkZXYRIj6a5OLG3s38hXzkCDD7XyAuYjF8qQYdEDvWNcCKKpRq/SOJQ4NnFjQWvXM2jA+85D0B4yWW1wxY21OXmk29mf8iAe/95YWMq4SoNlXlagChUx+i7Uw/paWGWmWCvxwa4NbDdkfC0sfngF/fgSnFVKBe9DzKVqMu1p95Yv2kDqHzuSgHHwh5PSFSufVSYVSEUZOAqVZeOYma+cEbZd9lVHHjDYLYk9/WU+dxG64jtg3AeKKMEreWlz1aeCG4F5b0fl9VRjeQiA6VFPPocgWKBr2NZLiY+s1ACo3XFu0Y3HQHabOX153BWGu22CDCL40UIlvaHEEo5EJcYxQRm3GLASzODx3tJKpTiSusfFYhzcNj+ou0mqo4btyebH/fzVJ2c1hRQx5w3ouicjpq/815Tztdo739C/8DQpu3Zg/7luZlWvZi7QXv8lksb44bsTBoSx7SbzZ12l/XY7C5L5B1uug4Te03TX1UbKpHrsIRWfU18g5Y3xLE8ycnj5GXaUy2OymxRchTymrTbg/Yai8Sf9j63pUQAjqrzRIld63H2vNKT4HEZvG+uUZSISrvff/bCeVhCW4oBO7Snn9fSNfpLaHvcUA6sBnNuOtGIj02TC9t5rb4GS2pLS2Lf2u1elteTLtGkTRRqM31oa/w7Ou7kQu+MPnn+Czhsh+2wLa39Dg6V7kYHEKisAAAAAElFTkSuQmCC",jx={class:"terms_modal"},Gx={key:0,class:"termagree_wrapper"},Hx={__name:"TermsModal",props:{showAgree:{type:Boolean,default:!0},useRouterClose:{type:Boolean,default:!1}},emits:["close-terms"],setup(n,{emit:e}){const t=n,r=e,s=qs(),{isLoggedIn:i,loginWithGoogle:o}=_u(),{currentGroupId:a,loadUserGroup:l}=Xs(),u=()=>{t.useRouterClose?s.push("/signup"):r("close-terms")},h=()=>{u()},f=async()=>{await l(),a.value?s.push("/report"):s.push("/signup/groupjoin")},m=async()=>{try{i.value||await o(),await f()}catch(g){console.error("login error in TermsModal:",g),window.alert(" .     .")}};return on(async()=>{t.useRouterClose&&i.value&&await f()}),(g,b)=>(oe(),he("div",jx,[De(Wf,{title:"  ",leftIcon:n.showAgree?"":"close",onLeftAction:u},null,8,["leftIcon"]),N("div",{class:Ht(["terms_wrapper",{nofooter:!n.showAgree}])},[b[1]||(b[1]=Un('<div class="terms_inner" data-v-a25fac8f><p class="termtitle" data-v-a25fac8f>1 ()</p><p class="termscript" data-v-a25fac8f>     (Bug Report)   ,  ( &quot;&quot;)   ,      .<br data-v-a25fac8f>         ,           . </p><p class="termtitle" data-v-a25fac8f>2 ()</p><p class="termscript" data-v-a25fac8f>         , ,        .<br data-v-a25fac8f>        .<br data-v-a25fac8f>  ID             . </p><p class="termtitle" data-v-a25fac8f>3 ( )</p><p class="termscript" data-v-a25fac8f>       ,      .<br data-v-a25fac8f>          ,     .<br data-v-a25fac8f>           . </p><p class="termtitle" data-v-a25fac8f>4 ( )</p><p class="termscript" data-v-a25fac8f>      ,        .<br data-v-a25fac8f>        ,       .<br data-v-a25fac8f>             . </p><p class="termtitle" data-v-a25fac8f>5 (   )</p><p class="termscript" data-v-a25fac8f>       , ,  ,   (Firebase, Google )      .<br data-v-a25fac8f>     , ,        ,<br data-v-a25fac8f>         , , ,      .<br data-v-a25fac8f>    , ,    .<br data-v-a25fac8f>     ,       . </p><p class="termtitle" data-v-a25fac8f>6 ( )</p><p class="termscript" data-v-a25fac8f>       Google  .<br data-v-a25fac8f>  Google   Firebase Authentication  Firestore   ,<br data-v-a25fac8f>     3  . </p><p class="termtitle" data-v-a25fac8f>7 (  )</p><p class="termscript" data-v-a25fac8f>              .<br data-v-a25fac8f>       <br data-v-a25fac8f>  , ,      <br data-v-a25fac8f>      , ,  <br data-v-a25fac8f>       </p><p class="termtitle" data-v-a25fac8f>8 ( )</p><p class="termscript" data-v-a25fac8f>        ,        .<br data-v-a25fac8f>           . </p><p class="termtitle" data-v-a25fac8f>9 (  )</p><p class="termscript" data-v-a25fac8f>     ,          . </p></div>',1)),n.showAgree?(oe(),he("div",Gx,[b[0]||(b[0]=N("p",{class:"terminfo"},"      .",-1)),N("div",{class:"modal_buttons type_confirm"},[N("button",{class:"btn_cancel",onClick:h},""),N("button",{class:"btn_confirm",onClick:m},"")])])):yt("",!0)],2)]))}},iw=Ks(Hx,[["__scopeId","data-v-a25fac8f"]]),qx={class:"mypage_wrapper"},Kx={class:"menu_wrapper"},zx={class:"right"},Wx={class:"submenu_wrapper"},Qx={class:"change_group_body"},Yx={class:"change_group_hint"},Xx={__name:"index",emits:["close-menu"],setup(n,{emit:e}){const t=e,r=()=>t("close-menu"),s=qs(),{openModal:i}=yu(),{showToast:o}=Ul(),a=_e(null),l=y=>{a.value=a.value===y?null:y},u=_e(!1),h=()=>u.value=!0,{currentGroupId:f,loadUserGroup:m,joinGroup:g}=Xs();on(async()=>{await m()});const b=wt(()=>f.value||""),P=async y=>{if(!y)return!1;try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(y),!0;{const A=document.createElement("textarea");A.value=y,A.style.position="fixed",A.style.opacity="0",document.body.appendChild(A),A.focus(),A.select();const T=document.execCommand("copy");return document.body.removeChild(A),T}}catch(A){return console.error("copyToClipboard error:",A),!1}},k=async()=>{try{await HE(El)}catch(y){console.error("logout error:",y)}s.replace("/signup")},U=()=>{i("alert","  ID",b.value,{okLabel:"",async onConfirm(){const y=await P(b.value);o(y?" ~":" .   .")}})},L=()=>{const y="/bug-report/",A=new URL(y,window.location.origin);if(!b.value)return A.toString();const T=btoa(b.value);return A.searchParams.set("g",T),A.toString()},F=async()=>{const y=L(),A={title:"   ",text:"          .",url:y};try{if(navigator.share&&(!navigator.canShare||navigator.canShare(A))){await navigator.share(A);return}}catch(w){console.error("navigator.share error",w)}await P(y)?i("alert"," ",`   .
    .`):i("alert"," ",`  .
     .`)},G=_e(!1),$=_e(""),ne=()=>{$.value="",G.value=!0},R=()=>{G.value=!1},v=async()=>{const y=$.value;if(!y){i("alert"," ID ","  ID  .");return}const A=y.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(A)){i("alert"," ID "," ID     .");return}if(A===b.value){i("alert"," ID ","    ID .");return}try{await g(A),o(" ID ."),G.value=!1,r()}catch(T){console.error("change group error:",T),i("alert"," ID ",T.message||"    .")}};return(y,A)=>(oe(),he(Ze,null,[N("div",qx,[u.value?yt("",!0):(oe(),En(Wf,{key:0,title:"BUG REPORT",leftIcon:"close-menu",onLeftAction:r})),N("div",Kx,[N("div",{class:Ht(["menu_inner",{open:a.value==="info"}]),onClick:A[0]||(A[0]=T=>l("info"))},[A[4]||(A[4]=Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_667)" data-v-bc2f7308><path d="M12.007 1L12.245 1.005C13.4393 1.05368 14.5918 1.45796 15.5548 2.166C16.5178 2.87404 17.2474 3.85357 17.65 4.979L17.728 5.212C18.1463 6.55144 18.0819 7.99512 17.546 9.292L17.453 9.502L17.503 9.5C18.0387 9.48757 18.5675 9.62176 19.0325 9.88806C19.4974 10.1544 19.8807 10.5427 20.141 11.011L20.222 11.169C20.5351 11.8354 20.5817 12.5963 20.3523 13.296C20.123 13.9957 19.6349 14.5813 18.988 14.933L18.798 15.029L17 15.85V16.813L18.166 17.979L18.306 18.133C18.7843 18.7 19.0322 19.426 19.0008 20.1671C18.9693 20.9083 18.6607 21.6106 18.136 22.135C17.049 23.223 15.309 23.296 14.106 22.279L13.946 22.133L12 20.185L10.054 22.132C9.5387 22.6495 8.8503 22.9582 8.12115 22.9988C7.392 23.0394 6.67357 22.8091 6.104 22.352L5.954 22.224C4.784 21.151 4.67 19.345 5.72 18.104L5.866 17.946L7 16.812V15.85L5.166 15.01L4.985 14.917C4.34545 14.5619 3.865 13.9767 3.6412 13.2802C3.41741 12.5837 3.46703 11.8282 3.78 11.167C4.01943 10.6687 4.39494 10.2483 4.86315 9.95442C5.33137 9.6605 5.87318 9.50504 6.426 9.506L6.556 9.509L6.526 9.445C6.24952 8.82172 6.0795 8.1565 6.023 7.477L6.006 7.217V7C6.00594 5.44762 6.60757 3.95564 7.68446 2.83753C8.76136 1.71942 10.2297 1.06221 11.781 1.004L12.005 1H12.007ZM12.01 16H12C11.7348 16 11.4804 16.1054 11.2929 16.2929C11.1054 16.4804 11 16.7348 11 17C11 17.2652 11.1054 17.5196 11.2929 17.7071C11.4804 17.8946 11.7348 18 12 18H12.01C12.2752 18 12.5296 17.8946 12.7171 17.7071C12.9046 17.5196 13.01 17.2652 13.01 17C13.01 16.7348 12.9046 16.4804 12.7171 16.2929C12.5296 16.1054 12.2752 16 12.01 16ZM12.01 13H12C11.7348 13 11.4804 13.1054 11.2929 13.2929C11.1054 13.4804 11 13.7348 11 14C11 14.2652 11.1054 14.5196 11.2929 14.7071C11.4804 14.8946 11.7348 15 12 15H12.01C12.2752 15 12.5296 14.8946 12.7171 14.7071C12.9046 14.5196 13.01 14.2652 13.01 14C13.01 13.7348 12.9046 13.4804 12.7171 13.2929C12.5296 13.1054 12.2752 13 12.01 13ZM12.01 8H12C11.7348 8 11.4804 8.10536 11.2929 8.29289C11.1054 8.48043 11 8.73478 11 9C11 9.26522 11.1054 9.51957 11.2929 9.70711C11.4804 9.89464 11.7348 10 12 10H12.01C12.2752 10 12.5296 9.89464 12.7171 9.70711C12.9046 9.51957 13.01 9.26522 13.01 9C13.01 8.73478 12.9046 8.48043 12.7171 8.29289C12.5296 8.10536 12.2752 8 12.01 8ZM10.01 5H10C9.73478 5 9.48043 5.10536 9.29289 5.29289C9.10536 5.48043 9 5.73478 9 6C9 6.26522 9.10536 6.51957 9.29289 6.70711C9.48043 6.89464 9.73478 7 10 7H10.01C10.2752 7 10.5296 6.89464 10.7171 6.70711C10.9046 6.51957 11.01 6.26522 11.01 6C11.01 5.73478 10.9046 5.48043 10.7171 5.29289C10.5296 5.10536 10.2752 5 10.01 5ZM14.01 5H14C13.7348 5 13.4804 5.10536 13.2929 5.29289C13.1054 5.48043 13 5.73478 13 6C13 6.26522 13.1054 6.51957 13.2929 6.70711C13.4804 6.89464 13.7348 7 14 7H14.01C14.2752 7 14.5296 6.89464 14.7171 6.70711C14.9046 6.51957 15.01 6.26522 15.01 6C15.01 5.73478 14.9046 5.48043 14.7171 5.29289C14.5296 5.10536 14.2752 5 14.01 5Z" fill="url(#paint0_linear_16_667)" data-v-bc2f7308></path></g><defs data-v-bc2f7308><linearGradient id="paint0_linear_16_667" x1="3.50312" y1="1" x2="25.8872" y2="12.6032" gradientUnits="userSpaceOnUse" data-v-bc2f7308><stop stop-color="#6000B4" data-v-bc2f7308></stop><stop offset="1" stop-color="#006192" data-v-bc2f7308></stop></linearGradient><clipPath id="clip0_16_667" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308> </p></div>',1)),N("div",zx,[(oe(),he("svg",{class:Ht(["arrow_icon",{rotated:a.value==="info"}]),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...A[3]||(A[3]=[N("path",{d:"M6 4L10 8L6 12",stroke:"#848A9C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))])],2),De(Di,{name:"submenu"},{default:Fn(()=>[en(N("div",Wx,[N("div",{class:"submenu_inner",onClick:bi(U,["stop"])},[...A[5]||(A[5]=[N("p",{class:"submenutitle"}," ID ",-1)])]),N("div",{class:"submenu_inner",onClick:bi(F,["stop"])},[...A[6]||(A[6]=[N("p",{class:"submenutitle"}," ",-1)])]),N("div",{class:"submenu_inner",onClick:bi(ne,["stop"])},[...A[7]||(A[7]=[N("p",{class:"submenutitle"}," ID ",-1)])])],512),[[uv,a.value==="info"]])]),_:1}),N("div",{class:"menu_inner",onClick:h},[...A[8]||(A[8]=[Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_745)" data-v-bc2f7308><path d="M9 5H7C6.46957 5 5.96086 5.21071 5.58579 5.58579C5.21071 5.96086 5 6.46957 5 7V19C5 19.5304 5.21071 20.0391 5.58579 20.4142C5.96086 20.7893 6.46957 21 7 21H17C17.5304 21 18.0391 20.7893 18.4142 20.4142C18.7893 20.0391 19 19.5304 19 19V7C19 6.46957 18.7893 5.96086 18.4142 5.58579C18.0391 5.21071 17.5304 5 17 5H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5C15 5.53043 14.7893 6.03914 14.4142 6.41421C14.0391 6.78929 13.5304 7 13 7H11C10.4696 7 9.96086 6.78929 9.58579 6.41421C9.21071 6.03914 9 5.53043 9 5Z" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 12H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 16H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></g><defs data-v-bc2f7308><clipPath id="clip0_16_745" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308></p></div><div class="right" data-v-bc2f7308><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><path d="M6 4L10 8L6 12" stroke="#848A9C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></svg></div>',2)])]),N("div",{class:"menu_inner",onClick:k},[...A[9]||(A[9]=[Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_727)" data-v-bc2f7308><path d="M14 8V6C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4H5C4.46957 4 3.96086 4.21071 3.58579 4.58579C3.21071 4.96086 3 5.46957 3 6V18C3 18.5304 3.21071 19.0391 3.58579 19.4142C3.96086 19.7893 4.46957 20 5 20H12C12.5304 20 13.0391 19.7893 13.4142 19.4142C13.7893 19.0391 14 18.5304 14 18V16" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 12H21L18 9" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M18 15L21 12" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></g><defs data-v-bc2f7308><clipPath id="clip0_16_727" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308></p></div><div class="right" data-v-bc2f7308><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><path d="M6 4L10 8L6 12" stroke="#848A9C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></svg></div>',2)])])])]),De(Di,{name:"fade"},{default:Fn(()=>[u.value?(oe(),En(iw,{key:0,showAgree:!1,onCloseTerms:A[1]||(A[1]=T=>u.value=!1)})):yt("",!0)]),_:1}),G.value?(oe(),En(Qf,{key:0,type:"confirm",title:" ID ",message:`  ID  .
(+ )`,"cancel-label":"","confirm-label":"",onCancel:R,onClose:R,onConfirm:v},{default:Fn(()=>[N("div",Qx,[en(N("input",{"onUpdate:modelValue":A[2]||(A[2]=T=>$.value=T),type:"text",placeholder:": team2025",class:"change_group_input"},null,512),[[_n,$.value]]),N("p",Yx,"   ID: "+$e(b.value||"-"),1)])]),_:1})):yt("",!0)],64))}},ow=Ks(Xx,[["__scopeId","data-v-bc2f7308"]]),Jx={id:"app",class:"app_wrap"},$x={class:"btns_wrapper"},Zx=["src"],eN={class:"btns_inner"},tN=["src","alt"],nN={class:"main_content"},rN={key:0,class:"tab_wrapper"},sN={key:1,class:"desktop_layout"},iN={key:2,class:"mobile_layout"},oN={key:0,class:"mypage_overlay"},aN={__name:"index",setup(n){const e=qs(),t=_e(!1),r=()=>{t.value=!0},s=()=>{t.value=!1},{isOpen:i,modalType:o,modalTitle:a,modalMessage:l,okLabel:u,cancelLabel:h,confirmLabel:f,openModal:m,closeModal:g,confirm:b,cancel:P}=yu(),k=_e("form"),U=_e(!1),{theme:L,toggleTheme:F}=Lx(),{currentGroupId:G,loadUserGroup:$}=Xs(),{currentUser:ne,isAuthReady:R}=_u(),v=["1.   ","2.  ID  ","3.   ","4.  ","5.  ","6.   "],y=()=>{const T=v.join(`
`);m("alert","",T)},A=()=>{U.value=window.innerWidth<1024};return on(()=>{A(),window.addEventListener("resize",A);const T=Fr(()=>R.value,async w=>{if(w){if(T(),!ne.value){e.replace("/signup");return}await $(),G.value||e.replace("/signup")}},{immediate:!0})}),ca(()=>{window.removeEventListener("resize",A)}),(T,w)=>(oe(),he("div",Jx,[De(Wf,{title:"BUG REPORT",rightIcon:"menu",onRightAction:r}),N("div",$x,[N("button",{class:"noti_btn",onClick:y},[N("img",{src:Ae(Bx),alt:" "},null,8,Zx)]),N("div",eN,[N("button",{class:"theme_toggle_btn",onClick:w[0]||(w[0]=(...I)=>Ae(F)&&Ae(F)(...I))},[N("img",{src:Ae(L)==="light"?Ae(Fx):Ae(Ux),alt:Ae(L)==="light"?" ":" "},null,8,tN)]),N("button",{class:"help_btn",onClick:w[1]||(w[1]=I=>Ae(m)("help",""))},[...w[4]||(w[4]=[Un('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-77f692ff><g clip-path="url(#clip0_1904_299)" data-v-77f692ff><path d="M12 2L12.642 2.005L13.258 2.022L13.557 2.035L14.136 2.069L14.689 2.115C19.376 2.57 21.339 4.448 21.855 9.021L21.885 9.311L21.931 9.864L21.972 10.591L21.978 10.741L21.995 11.358L22 12L21.995 12.642L21.978 13.258L21.965 13.557L21.931 14.136L21.885 14.689C21.43 19.376 19.552 21.339 14.979 21.855L14.689 21.885L14.136 21.931L13.409 21.972L13.259 21.978L12.642 21.995L12 22L11.358 21.995L10.742 21.978L10.443 21.965L9.86398 21.931L9.31098 21.885C4.62398 21.43 2.66098 19.552 2.14498 14.979L2.11498 14.689L2.06898 14.136L2.02798 13.409L2.02198 13.259L2.00498 12.642L2.00098 12.324V11.676L2.00498 11.358L2.02198 10.742L2.03498 10.443L2.06898 9.864L2.11498 9.311C2.56998 4.624 4.44798 2.661 9.02098 2.145L9.31098 2.115L9.86398 2.069L10.591 2.028L10.741 2.022L11.358 2.005C11.568 2.002 11.782 2 12 2ZM12 11H11L10.883 11.007C10.6399 11.0359 10.4159 11.153 10.2534 11.336C10.0909 11.519 10.0011 11.7552 10.0011 12C10.0011 12.2448 10.0909 12.481 10.2534 12.664C10.4159 12.847 10.6399 12.9641 10.883 12.993L11 13V16L11.007 16.117C11.0333 16.3402 11.1341 16.5481 11.293 16.707C11.4519 16.8659 11.6598 16.9667 11.883 16.993L12 17H13L13.117 16.993C13.3402 16.9667 13.548 16.8659 13.707 16.707C13.8659 16.5481 13.9667 16.3402 13.993 16.117L14 16L13.993 15.883C13.9691 15.679 13.8829 15.4873 13.7462 15.3339C13.6095 15.1806 13.4289 15.0731 13.229 15.026L13.117 15.006L13 15V12L12.993 11.883C12.9667 11.6598 12.8659 11.4519 12.707 11.293C12.548 11.1341 12.3402 11.0333 12.117 11.007L12 11ZM12.01 8L11.883 8.007C11.6399 8.03591 11.4159 8.15296 11.2534 8.33597C11.0909 8.51897 11.0011 8.75524 11.0011 9C11.0011 9.24476 11.0909 9.48103 11.2534 9.66403C11.4159 9.84704 11.6399 9.96409 11.883 9.993L12 10L12.127 9.993C12.37 9.96409 12.594 9.84704 12.7566 9.66403C12.9191 9.48103 13.0089 9.24476 13.0089 9C13.0089 8.75524 12.9191 8.51897 12.7566 8.33597C12.594 8.15296 12.37 8.03591 12.127 8.007L12.01 8Z" fill="url(#paint0_linear_1904_299)" data-v-77f692ff></path></g><defs data-v-77f692ff><linearGradient id="paint0_linear_1904_299" x1="2.00098" y1="2" x2="25.0434" y2="17.4656" gradientUnits="userSpaceOnUse" data-v-77f692ff><stop stop-color="#6000B4" data-v-77f692ff></stop><stop offset="1" stop-color="#006192" data-v-77f692ff></stop></linearGradient><clipPath id="clip0_1904_299" data-v-77f692ff><rect width="24" height="24" fill="white" data-v-77f692ff></rect></clipPath></defs></svg>',1)])])])]),N("main",nN,[U.value?(oe(),he("div",rN,[N("button",{class:Ht({active:k.value==="form"}),onClick:w[2]||(w[2]=I=>k.value="form")},"   ",2),N("button",{class:Ht({active:k.value==="list"}),onClick:w[3]||(w[3]=I=>k.value="list")},"   ",2)])):yt("",!0),U.value?(oe(),he("div",iN,[k.value==="form"?(oe(),En(z_,{key:0})):(oe(),En(W_,{key:1}))])):(oe(),he("div",sN,[De(z_),De(W_)]))]),De(Di,{name:"mypage-slide",appear:!1},{default:Fn(()=>[t.value?(oe(),he("div",oN,[De(ow,{onCloseMenu:s})])):yt("",!0)]),_:1}),Ae(i)?(oe(),En(Qf,{key:0,type:Ae(o),title:Ae(a),message:Ae(l),"ok-label":Ae(u),"cancel-label":Ae(h),"confirm-label":Ae(f),onConfirm:Ae(b),onCancel:Ae(P),onClose:Ae(g)},{help:Fn(()=>[...w[5]||(w[5]=[N("div",{class:"help_list"},[N("p",{class:"help_text"},"1.  // ."),N("p",{class:"help_text"},"2.    ."),N("p",{class:"help_text"},"3.     .")],-1),N("div",{class:"line"},null,-1),N("div",{class:"help_actions"},[N("div",{class:"help_action"},[N("img",{src:gD,alt:""}),N("p",null,"")]),N("div",{class:"help_action"},[N("img",{src:_D,alt:""}),N("p",null,"")])],-1)])]),_:1},8,["type","title","message","ok-label","cancel-label","confirm-label","onConfirm","onCancel","onClose"])):yt("",!0)]))}},cN=Ks(aN,[["__scopeId","data-v-77f692ff"]]),lN={class:"groupjoin_wrapper"},uN={class:"groupid_wrapper"},hN={class:"form_field"},dN={__name:"GroupJoin",setup(n){const e=qs(),{currentGroupId:t,loadUserGroup:r,joinGroup:s}=Xs(),{showToast:i}=Ul(),o=_e("");on(async()=>{await r(),t.value&&e.push("/report")});const a=async()=>{const u=o.value.trim();if(!u){i(" ID  .");return}try{await s(u),i(" ."),e.push("/report")}catch(h){console.error("joinGroup error:",h),i(h.message||"  .   .")}},l=()=>{e.push("/signup/groupcreate")};return(u,h)=>(oe(),he("div",lN,[h[2]||(h[2]=N("p",{class:"title"},"BUG REPORT",-1)),N("div",uN,[N("div",hN,[en(N("input",{type:"text",placeholder:" ID  .","onUpdate:modelValue":h[0]||(h[0]=f=>o.value=f),onKeyup:fv(a,["enter"])},null,544),[[_n,o.value]])]),N("button",{class:"submit_btn",onClick:a},"   ")]),N("div",{class:"groupidcreate_wrapper"},[h[1]||(h[1]=N("p",null,"   ID  .",-1)),N("button",{class:"btn_secondary",onClick:l},"  ID  ")])]))}},fN={class:"groupcreate_wrapper"},pN={class:"groupid_wrapper"},mN={class:"filter_row"},gN={class:"form_field"},_N={__name:"GroupCreate",setup(n){const e=qs(),{currentGroupId:t,loadUserGroup:r,createGroup:s}=Xs(),{showToast:i}=Ul(),o=_e(""),a=_e(!1);on(async()=>{await r(),t.value&&e.push("/report")});const l=async()=>{const f=o.value.trim().toLowerCase();if(!f){i(" ID  .");return}if(!/^[a-z0-9]+$/.test(f)){i("    .");return}try{const m=kt(ut,"groups",f);(await yi(m)).exists()?(i("   ID."),a.value=!1):(i("   ID."),a.value=!0)}catch(m){console.error("duplicate check error:",m),i("    .")}},u=async()=>{const f=o.value.trim().toLowerCase();if(!f){i(" ID  .");return}if(!a.value){i("    .");return}try{await s(f),i(" ."),e.push("/report")}catch(m){console.error("createGroup error:",m),i(m.message||"  .")}},h=()=>{e.push("/signup/groupjoin")};return(f,m)=>(oe(),he("div",fN,[m[2]||(m[2]=N("p",{class:"title"},"BUG REPORT",-1)),N("div",pN,[m[1]||(m[1]=N("p",null,[bh("  ID ."),N("br"),bh("    ID. ")],-1)),N("div",mN,[N("div",gN,[en(N("input",{type:"text",placeholder:"+ ","onUpdate:modelValue":m[0]||(m[0]=g=>o.value=g)},null,512),[[_n,o.value]])]),N("button",{class:"confirm_btn",onClick:l},"   ")]),N("button",{class:"submit_btn",onClick:u},"  ID  ")]),N("p",{class:"back",onClick:h},"")]))}},yN=ub({history:G0("/bug-report/"),routes:[{path:"/",redirect:"/splash"},{path:"/splash",component:Ab},{path:"/signup",component:mD},{path:"/report",component:cN},{path:"/mypage",component:ow},{path:"/signup/terms",component:iw,props:{showAgree:!0,useRouterClose:!0}},{path:"/signup/groupjoin",component:dN},{path:"/signup/groupcreate",component:_N}]});console.log("main.js ");const aw=n0(yb);console.log("app ");aw.use(yN);aw.mount("#app");console.log("mount ");
