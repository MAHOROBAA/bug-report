(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yd(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ge={},yi=[],Ln=()=>{},X_=()=>!1,Tl=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),vd=n=>n.startsWith("onUpdate:"),ut=Object.assign,Id=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Vw=Object.prototype.hasOwnProperty,Oe=(n,e)=>Vw.call(n,e),pe=Array.isArray,vi=n=>bl(n)==="[object Map]",J_=n=>bl(n)==="[object Set]",ye=n=>typeof n=="function",nt=n=>typeof n=="string",dr=n=>typeof n=="symbol",qe=n=>n!==null&&typeof n=="object",$_=n=>(qe(n)||ye(n))&&ye(n.then)&&ye(n.catch),Z_=Object.prototype.toString,bl=n=>Z_.call(n),Dw=n=>bl(n).slice(8,-1),ey=n=>bl(n)==="[object Object]",Ad=n=>nt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Uo=yd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rl=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},xw=/-\w/g,fn=Rl(n=>n.replace(xw,e=>e.slice(1).toUpperCase())),Nw=/\B([A-Z])/g,Zr=Rl(n=>n.replace(Nw,"-$1").toLowerCase()),Sl=Rl(n=>n.charAt(0).toUpperCase()+n.slice(1)),Nu=Rl(n=>n?`on${Sl(n)}`:""),Lr=(n,e)=>!Object.is(n,e),mc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},ty=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},gh=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Ow=n=>{const e=nt(n)?Number(n):NaN;return isNaN(e)?n:e};let Up;const Cl=()=>Up||(Up=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ed(n){if(pe(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=nt(r)?Uw(r):Ed(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(nt(n)||qe(n))return n}const Mw=/;(?![^(]*\))/g,Lw=/:([^]+)/,Fw=/\/\*[^]*?\*\//g;function Uw(n){const e={};return n.replace(Fw,"").split(Mw).forEach(t=>{if(t){const r=t.split(Lw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ht(n){let e="";if(nt(n))e=n;else if(pe(n))for(let t=0;t<n.length;t++){const r=Ht(n[t]);r&&(e+=r+" ")}else if(qe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Bw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jw=yd(Bw);function ny(n){return!!n||n===""}const ry=n=>!!(n&&n.__v_isRef===!0),Je=n=>nt(n)?n:n==null?"":pe(n)||qe(n)&&(n.toString===Z_||!ye(n.toString))?ry(n)?Je(n.value):JSON.stringify(n,sy,2):String(n),sy=(n,e)=>ry(e)?sy(n,e.value):vi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[Ou(r,i)+" =>"]=s,t),{})}:J_(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ou(t))}:dr(e)?Ou(e):qe(e)&&!pe(e)&&!ey(e)?String(e):e,Ou=(n,e="")=>{var t;return dr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wt;class Gw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Wt,!e&&Wt&&(this.index=(Wt.scopes||(Wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Wt;try{return Wt=this,e()}finally{Wt=t}}}on(){++this._on===1&&(this.prevScope=Wt,Wt=this)}off(){this._on>0&&--this._on===0&&(Wt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Hw(){return Wt}let He;const Mu=new WeakSet;class iy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Wt&&Wt.active&&Wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mu.has(this)&&(Mu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ay(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bp(this),cy(this);const e=He,t=In;He=this,In=!0;try{return this.fn()}finally{ly(this),He=e,In=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bd(e);this.deps=this.depsTail=void 0,Bp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_h(this)&&this.run()}get dirty(){return _h(this)}}let oy=0,Bo,jo;function ay(n,e=!1){if(n.flags|=8,e){n.next=jo,jo=n;return}n.next=Bo,Bo=n}function wd(){oy++}function Td(){if(--oy>0)return;if(jo){let e=jo;for(jo=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Bo;){let e=Bo;for(Bo=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function cy(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ly(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),bd(r),qw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function _h(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(uy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function uy(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===sa)||(n.globalVersion=sa,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!_h(n))))return;n.flags|=2;const e=n.dep,t=He,r=In;He=n,In=!0;try{cy(n);const s=n.fn(n._value);(e.version===0||Lr(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{He=t,In=r,ly(n),n.flags&=-3}}function bd(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)bd(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function qw(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let In=!0;const hy=[];function or(){hy.push(In),In=!1}function ar(){const n=hy.pop();In=n===void 0?!0:n}function Bp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=He;He=void 0;try{e()}finally{He=t}}}let sa=0;class Kw{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!In||He===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==He)t=this.activeLink=new Kw(He,this),He.deps?(t.prevDep=He.depsTail,He.depsTail.nextDep=t,He.depsTail=t):He.deps=He.depsTail=t,dy(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=He.depsTail,t.nextDep=void 0,He.depsTail.nextDep=t,He.depsTail=t,He.deps===t&&(He.deps=r)}return t}trigger(e){this.version++,sa++,this.notify(e)}notify(e){wd();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Td()}}}function dy(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)dy(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const yh=new WeakMap,Ss=Symbol(""),vh=Symbol(""),ia=Symbol("");function Vt(n,e,t){if(In&&He){let r=yh.get(n);r||yh.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new Rd),s.map=r,s.key=t),s.track()}}function Zn(n,e,t,r,s,i){const o=yh.get(n);if(!o){sa++;return}const a=l=>{l&&l.trigger()};if(wd(),e==="clear")o.forEach(a);else{const l=pe(n),u=l&&Ad(t);if(l&&t==="length"){const h=Number(r);o.forEach((f,m)=>{(m==="length"||m===ia||!dr(m)&&m>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(ia)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ss)),vi(n)&&a(o.get(vh)));break;case"delete":l||(a(o.get(Ss)),vi(n)&&a(o.get(vh)));break;case"set":vi(n)&&a(o.get(Ss));break}}Td()}function ei(n){const e=ke(n);return e===n?e:(Vt(e,"iterate",ia),dn(n)?e:e.map(At))}function Pl(n){return Vt(n=ke(n),"iterate",ia),n}const zw={__proto__:null,[Symbol.iterator](){return Lu(this,Symbol.iterator,At)},concat(...n){return ei(this).concat(...n.map(e=>pe(e)?ei(e):e))},entries(){return Lu(this,"entries",n=>(n[1]=At(n[1]),n))},every(n,e){return Yn(this,"every",n,e,void 0,arguments)},filter(n,e){return Yn(this,"filter",n,e,t=>t.map(At),arguments)},find(n,e){return Yn(this,"find",n,e,At,arguments)},findIndex(n,e){return Yn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Yn(this,"findLast",n,e,At,arguments)},findLastIndex(n,e){return Yn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Yn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Fu(this,"includes",n)},indexOf(...n){return Fu(this,"indexOf",n)},join(n){return ei(this).join(n)},lastIndexOf(...n){return Fu(this,"lastIndexOf",n)},map(n,e){return Yn(this,"map",n,e,void 0,arguments)},pop(){return Eo(this,"pop")},push(...n){return Eo(this,"push",n)},reduce(n,...e){return jp(this,"reduce",n,e)},reduceRight(n,...e){return jp(this,"reduceRight",n,e)},shift(){return Eo(this,"shift")},some(n,e){return Yn(this,"some",n,e,void 0,arguments)},splice(...n){return Eo(this,"splice",n)},toReversed(){return ei(this).toReversed()},toSorted(n){return ei(this).toSorted(n)},toSpliced(...n){return ei(this).toSpliced(...n)},unshift(...n){return Eo(this,"unshift",n)},values(){return Lu(this,"values",At)}};function Lu(n,e,t){const r=Pl(n),s=r[e]();return r!==n&&!dn(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=t(i.value)),i}),s}const Ww=Array.prototype;function Yn(n,e,t,r,s,i){const o=Pl(n),a=o!==n&&!dn(n),l=o[e];if(l!==Ww[e]){const f=l.apply(n,i);return a?At(f):f}let u=t;o!==n&&(a?u=function(f,m){return t.call(this,At(f),m,n)}:t.length>2&&(u=function(f,m){return t.call(this,f,m,n)}));const h=l.call(o,u,r);return a&&s?s(h):h}function jp(n,e,t,r){const s=Pl(n);let i=t;return s!==n&&(dn(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,At(a),l,n)}),s[e](i,...r)}function Fu(n,e,t){const r=ke(n);Vt(r,"iterate",ia);const s=r[e](...t);return(s===-1||s===!1)&&Pd(t[0])?(t[0]=ke(t[0]),r[e](...t)):s}function Eo(n,e,t=[]){or(),wd();const r=ke(n)[e].apply(n,t);return Td(),ar(),r}const Qw=yd("__proto__,__v_isRef,__isVue"),fy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(dr));function Yw(n){dr(n)||(n=String(n));const e=ke(this);return Vt(e,"has",n),e.hasOwnProperty(n)}class py{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?iT:yy:i?_y:gy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=pe(e);if(!s){let l;if(o&&(l=zw[t]))return l;if(t==="hasOwnProperty")return Yw}const a=Reflect.get(e,t,Mt(e)?e:r);if((dr(t)?fy.has(t):Qw(t))||(s||Vt(e,"get",t),i))return a;if(Mt(a)){const l=o&&Ad(t)?a:a.value;return s&&qe(l)?Ah(l):l}return qe(a)?s?Ah(a):kl(a):a}}class my extends py{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const l=Kr(i);if(!dn(r)&&!Kr(r)&&(i=ke(i),r=ke(r)),!pe(e)&&Mt(i)&&!Mt(r))return l||(i.value=r),!0}const o=pe(e)&&Ad(t)?Number(t)<e.length:Oe(e,t),a=Reflect.set(e,t,r,Mt(e)?e:s);return e===ke(s)&&(o?Lr(r,i)&&Zn(e,"set",t,r):Zn(e,"add",t,r)),a}deleteProperty(e,t){const r=Oe(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&Zn(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!dr(t)||!fy.has(t))&&Vt(e,"has",t),r}ownKeys(e){return Vt(e,"iterate",pe(e)?"length":Ss),Reflect.ownKeys(e)}}class Xw extends py{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Jw=new my,$w=new Xw,Zw=new my(!0);const Ih=n=>n,tc=n=>Reflect.getPrototypeOf(n);function eT(n,e,t){return function(...r){const s=this.__v_raw,i=ke(s),o=vi(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=s[n](...r),h=t?Ih:e?Lc:At;return!e&&Vt(i,"iterate",l?vh:Ss),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function nc(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function tT(n,e){const t={get(s){const i=this.__v_raw,o=ke(i),a=ke(s);n||(Lr(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:l}=tc(o),u=e?Ih:n?Lc:At;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&Vt(ke(s),"iterate",Ss),s.size},has(s){const i=this.__v_raw,o=ke(i),a=ke(s);return n||(Lr(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=ke(a),u=e?Ih:n?Lc:At;return!n&&Vt(l,"iterate",Ss),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return ut(t,n?{add:nc("add"),set:nc("set"),delete:nc("delete"),clear:nc("clear")}:{add(s){!e&&!dn(s)&&!Kr(s)&&(s=ke(s));const i=ke(this);return tc(i).has.call(i,s)||(i.add(s),Zn(i,"add",s,s)),this},set(s,i){!e&&!dn(i)&&!Kr(i)&&(i=ke(i));const o=ke(this),{has:a,get:l}=tc(o);let u=a.call(o,s);u||(s=ke(s),u=a.call(o,s));const h=l.call(o,s);return o.set(s,i),u?Lr(i,h)&&Zn(o,"set",s,i):Zn(o,"add",s,i),this},delete(s){const i=ke(this),{has:o,get:a}=tc(i);let l=o.call(i,s);l||(s=ke(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Zn(i,"delete",s,void 0),u},clear(){const s=ke(this),i=s.size!==0,o=s.clear();return i&&Zn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=eT(s,n,e)}),t}function Sd(n,e){const t=tT(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(Oe(t,s)&&s in r?t:r,s,i)}const nT={get:Sd(!1,!1)},rT={get:Sd(!1,!0)},sT={get:Sd(!0,!1)};const gy=new WeakMap,_y=new WeakMap,yy=new WeakMap,iT=new WeakMap;function oT(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function aT(n){return n.__v_skip||!Object.isExtensible(n)?0:oT(Dw(n))}function kl(n){return Kr(n)?n:Cd(n,!1,Jw,nT,gy)}function vy(n){return Cd(n,!1,Zw,rT,_y)}function Ah(n){return Cd(n,!0,$w,sT,yy)}function Cd(n,e,t,r,s){if(!qe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=aT(n);if(i===0)return n;const o=s.get(n);if(o)return o;const a=new Proxy(n,i===2?r:t);return s.set(n,a),a}function Ii(n){return Kr(n)?Ii(n.__v_raw):!!(n&&n.__v_isReactive)}function Kr(n){return!!(n&&n.__v_isReadonly)}function dn(n){return!!(n&&n.__v_isShallow)}function Pd(n){return n?!!n.__v_raw:!1}function ke(n){const e=n&&n.__v_raw;return e?ke(e):n}function cT(n){return!Oe(n,"__v_skip")&&Object.isExtensible(n)&&ty(n,"__v_skip",!0),n}const At=n=>qe(n)?kl(n):n,Lc=n=>qe(n)?Ah(n):n;function Mt(n){return n?n.__v_isRef===!0:!1}function ge(n){return Iy(n,!1)}function lT(n){return Iy(n,!0)}function Iy(n,e){return Mt(n)?n:new uT(n,e)}class uT{constructor(e,t){this.dep=new Rd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ke(e),this._value=t?e:At(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||dn(e)||Kr(e);e=r?e:ke(e),Lr(e,t)&&(this._rawValue=e,this._value=r?e:At(e),this.dep.trigger())}}function Ie(n){return Mt(n)?n.value:n}const hT={get:(n,e,t)=>e==="__v_raw"?n:Ie(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return Mt(s)&&!Mt(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function Ay(n){return Ii(n)?n:new Proxy(n,hT)}class dT{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Rd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return ay(this,!0),!0}get value(){const e=this.dep.track();return uy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function fT(n,e,t=!1){let r,s;return ye(n)?r=n:(r=n.get,s=n.set),new dT(r,s,t)}const rc={},Fc=new WeakMap;let ps;function pT(n,e=!1,t=ps){if(t){let r=Fc.get(t);r||Fc.set(t,r=[]),r.push(n)}}function mT(n,e,t=Ge){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=t,u=H=>s?H:dn(H)||s===!1||s===0?er(H,1):er(H);let h,f,m,g,R=!1,C=!1;if(Mt(n)?(f=()=>n.value,R=dn(n)):Ii(n)?(f=()=>u(n),R=!0):pe(n)?(C=!0,R=n.some(H=>Ii(H)||dn(H)),f=()=>n.map(H=>{if(Mt(H))return H.value;if(Ii(H))return u(H);if(ye(H))return l?l(H,2):H()})):ye(n)?e?f=l?()=>l(n,2):n:f=()=>{if(m){or();try{m()}finally{ar()}}const H=ps;ps=h;try{return l?l(n,3,[g]):n(g)}finally{ps=H}}:f=Ln,e&&s){const H=f,$=s===!0?1/0:s;f=()=>er(H(),$)}const k=Hw(),B=()=>{h.stop(),k&&k.active&&Id(k.effects,h)};if(i&&e){const H=e;e=(...$)=>{H(...$),B()}}let F=C?new Array(n.length).fill(rc):rc;const U=H=>{if(!(!(h.flags&1)||!h.dirty&&!H))if(e){const $=h.run();if(s||R||(C?$.some((re,S)=>Lr(re,F[S])):Lr($,F))){m&&m();const re=ps;ps=h;try{const S=[$,F===rc?void 0:C&&F[0]===rc?[]:F,g];F=$,l?l(e,3,S):e(...S)}finally{ps=re}}}else h.run()};return a&&a(U),h=new iy(f),h.scheduler=o?()=>o(U,!1):U,g=H=>pT(H,!1,h),m=h.onStop=()=>{const H=Fc.get(h);if(H){if(l)l(H,4);else for(const $ of H)$();Fc.delete(h)}},e?r?U(!0):F=h.run():o?o(U.bind(null,!0),!0):h.run(),B.pause=h.pause.bind(h),B.resume=h.resume.bind(h),B.stop=B,B}function er(n,e=1/0,t){if(e<=0||!qe(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Mt(n))er(n.value,e,t);else if(pe(n))for(let r=0;r<n.length;r++)er(n[r],e,t);else if(J_(n)||vi(n))n.forEach(r=>{er(r,e,t)});else if(ey(n)){for(const r in n)er(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&er(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pa(n,e,t,r){try{return r?n(...r):n()}catch(s){Vl(s,e,t)}}function bn(n,e,t,r){if(ye(n)){const s=Pa(n,e,t,r);return s&&$_(s)&&s.catch(i=>{Vl(i,e,t)}),s}if(pe(n)){const s=[];for(let i=0;i<n.length;i++)s.push(bn(n[i],e,t,r));return s}}function Vl(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ge;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](n,l,u)===!1)return}a=a.parent}if(i){or(),Pa(i,null,10,[n,l,u]),ar();return}}gT(n,t,s,r,o)}function gT(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const Gt=[];let Vn=-1;const Ai=[];let Pr=null,li=0;const Ey=Promise.resolve();let Uc=null;function wy(n){const e=Uc||Ey;return n?e.then(this?n.bind(this):n):e}function _T(n){let e=Vn+1,t=Gt.length;for(;e<t;){const r=e+t>>>1,s=Gt[r],i=oa(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function kd(n){if(!(n.flags&1)){const e=oa(n),t=Gt[Gt.length-1];!t||!(n.flags&2)&&e>=oa(t)?Gt.push(n):Gt.splice(_T(e),0,n),n.flags|=1,Ty()}}function Ty(){Uc||(Uc=Ey.then(Ry))}function yT(n){pe(n)?Ai.push(...n):Pr&&n.id===-1?Pr.splice(li+1,0,n):n.flags&1||(Ai.push(n),n.flags|=1),Ty()}function Gp(n,e,t=Vn+1){for(;t<Gt.length;t++){const r=Gt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Gt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function by(n){if(Ai.length){const e=[...new Set(Ai)].sort((t,r)=>oa(t)-oa(r));if(Ai.length=0,Pr){Pr.push(...e);return}for(Pr=e,li=0;li<Pr.length;li++){const t=Pr[li];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Pr=null,li=0}}const oa=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Ry(n){try{for(Vn=0;Vn<Gt.length;Vn++){const e=Gt[Vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Pa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Vn<Gt.length;Vn++){const e=Gt[Vn];e&&(e.flags&=-2)}Vn=-1,Gt.length=0,by(),Uc=null,(Gt.length||Ai.length)&&Ry()}}let wt=null,Sy=null;function Bc(n){const e=wt;return wt=n,Sy=n&&n.type.__scopeId||null,e}function Fn(n,e=wt,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&Hc(-1);const i=Bc(e);let o;try{o=n(...s)}finally{Bc(i),r._d&&Hc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function tn(n,e){if(wt===null)return n;const t=Ll(wt),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Ge]=e[s];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&er(o),r.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function us(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(or(),bn(l,t,8,[n.el,a,n,e]),ar())}}const vT=Symbol("_vte"),Cy=n=>n.__isTeleport,$n=Symbol("_leaveCb"),sc=Symbol("_enterCb");function Py(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return an(()=>{n.isMounted=!0}),ca(()=>{n.isUnmounting=!0}),n}const ln=[Function,Array],ky={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ln,onEnter:ln,onAfterEnter:ln,onEnterCancelled:ln,onBeforeLeave:ln,onLeave:ln,onAfterLeave:ln,onLeaveCancelled:ln,onBeforeAppear:ln,onAppear:ln,onAfterAppear:ln,onAppearCancelled:ln},Vy=n=>{const e=n.subTree;return e.component?Vy(e.component):e},IT={name:"BaseTransition",props:ky,setup(n,{slots:e}){const t=Od(),r=Py();return()=>{const s=e.default&&Vd(e.default(),!0);if(!s||!s.length)return;const i=Dy(s),o=ke(n),{mode:a}=o;if(r.isLeaving)return Uu(i);const l=Hp(i);if(!l)return Uu(i);let u=aa(l,o,r,t,f=>u=f);l.type!==Dt&&xs(l,u);let h=t.subTree&&Hp(t.subTree);if(h&&h.type!==Dt&&!ys(h,l)&&Vy(t).type!==Dt){let f=aa(h,o,r,t);if(xs(h,f),a==="out-in"&&l.type!==Dt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},Uu(i);a==="in-out"&&l.type!==Dt?f.delayLeave=(m,g,R)=>{const C=xy(r,h);C[String(h.key)]=h,m[$n]=()=>{g(),m[$n]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{R(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Dy(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Dt){e=t;break}}return e}const AT=IT;function xy(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function aa(n,e,t,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:R,onLeaveCancelled:C,onBeforeAppear:k,onAppear:B,onAfterAppear:F,onAppearCancelled:U}=e,H=String(n.key),$=xy(t,n),re=(y,E)=>{y&&bn(y,r,9,E)},S=(y,E)=>{const T=E[1];re(y,E),pe(y)?y.every(w=>w.length<=1)&&T():y.length<=1&&T()},v={mode:o,persisted:a,beforeEnter(y){let E=l;if(!t.isMounted)if(i)E=k||l;else return;y[$n]&&y[$n](!0);const T=$[H];T&&ys(n,T)&&T.el[$n]&&T.el[$n](),re(E,[y])},enter(y){let E=u,T=h,w=f;if(!t.isMounted)if(i)E=B||u,T=F||h,w=U||f;else return;let I=!1;const Ee=y[sc]=Be=>{I||(I=!0,Be?re(w,[y]):re(T,[y]),v.delayedLeave&&v.delayedLeave(),y[sc]=void 0)};E?S(E,[y,Ee]):Ee()},leave(y,E){const T=String(n.key);if(y[sc]&&y[sc](!0),t.isUnmounting)return E();re(m,[y]);let w=!1;const I=y[$n]=Ee=>{w||(w=!0,E(),Ee?re(C,[y]):re(R,[y]),y[$n]=void 0,$[T]===n&&delete $[T])};$[T]=n,g?S(g,[y,I]):I()},clone(y){const E=aa(y,e,t,r,s);return s&&s(E),E}};return v}function Uu(n){if(Dl(n))return n=zr(n),n.children=null,n}function Hp(n){if(!Dl(n))return Cy(n.type)&&n.children?Dy(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&ye(t.default))return t.default()}}function xs(n,e){n.shapeFlag&6&&n.component?(n.transition=e,xs(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Vd(n,e=!1,t){let r=[],s=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===$e?(o.patchFlag&128&&s++,r=r.concat(Vd(o.children,e,a))):(e||o.type!==Dt)&&r.push(a!=null?zr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Ny(n,e){return ye(n)?ut({name:n.name},e,{setup:n}):n}function Oy(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const jc=new WeakMap;function Go(n,e,t,r,s=!1){if(pe(n)){n.forEach((R,C)=>Go(R,e&&(pe(e)?e[C]:e),t,r,s));return}if(Ei(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Go(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Ll(r.component):r.el,o=s?null:i,{i:a,r:l}=n,u=e&&e.r,h=a.refs===Ge?a.refs={}:a.refs,f=a.setupState,m=ke(f),g=f===Ge?X_:R=>Oe(m,R);if(u!=null&&u!==l){if(qp(e),nt(u))h[u]=null,g(u)&&(f[u]=null);else if(Mt(u)){u.value=null;const R=e;R.k&&(h[R.k]=null)}}if(ye(l))Pa(l,a,12,[o,h]);else{const R=nt(l),C=Mt(l);if(R||C){const k=()=>{if(n.f){const B=R?g(l)?f[l]:h[l]:l.value;if(s)pe(B)&&Id(B,i);else if(pe(B))B.includes(i)||B.push(i);else if(R)h[l]=[i],g(l)&&(f[l]=h[l]);else{const F=[i];l.value=F,n.k&&(h[n.k]=F)}}else R?(h[l]=o,g(l)&&(f[l]=o)):C&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const B=()=>{k(),jc.delete(n)};B.id=-1,jc.set(n,B),en(B,t)}else qp(n),k()}}}function qp(n){const e=jc.get(n);e&&(e.flags|=8,jc.delete(n))}Cl().requestIdleCallback;Cl().cancelIdleCallback;const Ei=n=>!!n.type.__asyncLoader,Dl=n=>n.type.__isKeepAlive;function ET(n,e){My(n,"a",e)}function wT(n,e){My(n,"da",e)}function My(n,e,t=xt){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(xl(e,r,t),t){let s=t.parent;for(;s&&s.parent;)Dl(s.parent.vnode)&&TT(r,e,t,s),s=s.parent}}function TT(n,e,t,r){const s=xl(e,n,r,!0);Nl(()=>{Id(r[e],s)},t)}function xl(n,e,t=xt,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{or();const a=ka(t),l=bn(e,t,n,o);return a(),ar(),l});return r?s.unshift(i):s.push(i),i}}const fr=n=>(e,t=xt)=>{(!ha||n==="sp")&&xl(n,(...r)=>e(...r),t)},bT=fr("bm"),an=fr("m"),RT=fr("bu"),Ly=fr("u"),ca=fr("bum"),Nl=fr("um"),ST=fr("sp"),CT=fr("rtg"),PT=fr("rtc");function kT(n,e=xt){xl("ec",n,e)}const VT="components";function DT(n,e){return NT(VT,n,!0,e)||n}const xT=Symbol.for("v-ndc");function NT(n,e,t=!0,r=!1){const s=wt||xt;if(s){const i=s.type;{const a=A1(i,!1);if(a&&(a===e||a===fn(e)||a===Sl(fn(e))))return i}const o=Kp(s[n]||i[n],e)||Kp(s.appContext[n],e);return!o&&r?i:o}}function Kp(n,e){return n&&(n[e]||n[fn(e)]||n[Sl(fn(e))])}function Ho(n,e,t,r){let s;const i=t,o=pe(n);if(o||nt(n)){const a=o&&Ii(n);let l=!1,u=!1;a&&(l=!dn(n),u=Kr(n),n=Pl(n)),s=new Array(n.length);for(let h=0,f=n.length;h<f;h++)s[h]=e(l?u?Lc(At(n[h])):At(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,i)}else if(qe(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(n[h],h,l,i)}}else s=[];return s}function zp(n,e,t={},r,s){if(wt.ce||wt.parent&&Ei(wt.parent)&&wt.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),oe(),En($e,null,[Ve("slot",t,r)],u?-2:64)}let i=n[e];i&&i._c&&(i._d=!1),oe();const o=i&&Fy(i(t)),a=t.key||o&&o.key,l=En($e,{key:(a&&!dr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Fy(n){return n.some(e=>ua(e)?!(e.type===Dt||e.type===$e&&!Fy(e.children)):!0)?n:null}const Eh=n=>n?sv(n)?Ll(n):Eh(n.parent):null,qo=ut(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Eh(n.parent),$root:n=>Eh(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>By(n),$forceUpdate:n=>n.f||(n.f=()=>{kd(n.update)}),$nextTick:n=>n.n||(n.n=wy.bind(n.proxy)),$watch:n=>t1.bind(n)}),Bu=(n,e)=>n!==Ge&&!n.__isScriptSetup&&Oe(n,e),OT={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=n;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Bu(r,e))return o[e]=1,r[e];if(s!==Ge&&Oe(s,e))return o[e]=2,s[e];if((u=n.propsOptions[0])&&Oe(u,e))return o[e]=3,i[e];if(t!==Ge&&Oe(t,e))return o[e]=4,t[e];wh&&(o[e]=0)}}const h=qo[e];let f,m;if(h)return e==="$attrs"&&Vt(n.attrs,"get",""),h(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==Ge&&Oe(t,e))return o[e]=4,t[e];if(m=l.config.globalProperties,Oe(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Bu(s,e)?(s[e]=t,!0):r!==Ge&&Oe(r,e)?(r[e]=t,!0):Oe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,u;return!!(t[a]||n!==Ge&&a[0]!=="$"&&Oe(n,a)||Bu(e,a)||(l=i[0])&&Oe(l,a)||Oe(r,a)||Oe(qo,a)||Oe(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Oe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Wp(n){return pe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let wh=!0;function MT(n){const e=By(n),t=n.proxy,r=n.ctx;wh=!1,e.beforeCreate&&Qp(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:R,activated:C,deactivated:k,beforeDestroy:B,beforeUnmount:F,destroyed:U,unmounted:H,render:$,renderTracked:re,renderTriggered:S,errorCaptured:v,serverPrefetch:y,expose:E,inheritAttrs:T,components:w,directives:I,filters:Ee}=e;if(u&&LT(u,r,null),o)for(const Ce in o){const we=o[Ce];ye(we)&&(r[Ce]=we.bind(t))}if(s){const Ce=s.call(t,t);qe(Ce)&&(n.data=kl(Ce))}if(wh=!0,i)for(const Ce in i){const we=i[Ce],Tt=ye(we)?we.bind(t,t):ye(we.get)?we.get.bind(t,t):Ln,Xt=!ye(we)&&ye(we.set)?we.set.bind(t):Ln,Ft=Et({get:Tt,set:Xt});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Ft.value,set:ot=>Ft.value=ot})}if(a)for(const Ce in a)Uy(a[Ce],r,t,Ce);if(l){const Ce=ye(l)?l.call(t):l;Reflect.ownKeys(Ce).forEach(we=>{gc(we,Ce[we])})}h&&Qp(h,n,"c");function xe(Ce,we){pe(we)?we.forEach(Tt=>Ce(Tt.bind(t))):we&&Ce(we.bind(t))}if(xe(bT,f),xe(an,m),xe(RT,g),xe(Ly,R),xe(ET,C),xe(wT,k),xe(kT,v),xe(PT,re),xe(CT,S),xe(ca,F),xe(Nl,H),xe(ST,y),pe(E))if(E.length){const Ce=n.exposed||(n.exposed={});E.forEach(we=>{Object.defineProperty(Ce,we,{get:()=>t[we],set:Tt=>t[we]=Tt,enumerable:!0})})}else n.exposed||(n.exposed={});$&&n.render===Ln&&(n.render=$),T!=null&&(n.inheritAttrs=T),w&&(n.components=w),I&&(n.directives=I),y&&Oy(n)}function LT(n,e,t=Ln){pe(n)&&(n=Th(n));for(const r in n){const s=n[r];let i;qe(s)?"default"in s?i=An(s.from||r,s.default,!0):i=An(s.from||r):i=An(s),Mt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Qp(n,e,t){bn(pe(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Uy(n,e,t,r){let s=r.includes(".")?Zy(t,r):()=>t[r];if(nt(n)){const i=e[n];ye(i)&&Fr(s,i)}else if(ye(n))Fr(s,n.bind(t));else if(qe(n))if(pe(n))n.forEach(i=>Uy(i,e,t,r));else{const i=ye(n.handler)?n.handler.bind(t):e[n.handler];ye(i)&&Fr(s,i,n)}}function By(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!t&&!r?l=e:(l={},s.length&&s.forEach(u=>Gc(l,u,o,!0)),Gc(l,e,o)),qe(e)&&i.set(e,l),l}function Gc(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&Gc(n,i,t,!0),s&&s.forEach(o=>Gc(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=FT[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const FT={data:Yp,props:Xp,emits:Xp,methods:Do,computed:Do,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:Do,directives:Do,watch:BT,provide:Yp,inject:UT};function Yp(n,e){return e?n?function(){return ut(ye(n)?n.call(this,this):n,ye(e)?e.call(this,this):e)}:e:n}function UT(n,e){return Do(Th(n),Th(e))}function Th(n){if(pe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Bt(n,e){return n?[...new Set([].concat(n,e))]:e}function Do(n,e){return n?ut(Object.create(null),n,e):e}function Xp(n,e){return n?pe(n)&&pe(e)?[...new Set([...n,...e])]:ut(Object.create(null),Wp(n),Wp(e??{})):e}function BT(n,e){if(!n)return e;if(!e)return n;const t=ut(Object.create(null),n);for(const r in e)t[r]=Bt(n[r],e[r]);return t}function jy(){return{app:null,config:{isNativeTag:X_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jT=0;function GT(n,e){return function(r,s=null){ye(r)||(r=ut({},r)),s!=null&&!qe(s)&&(s=null);const i=jy(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:jT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:w1,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&ye(h.install)?(o.add(h),h.install(u,...f)):ye(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,m){if(!l){const g=u._ceVNode||Ve(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(g,h,m),l=!0,u._container=h,h.__vue_app__=u,Ll(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(bn(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=wi;wi=u;try{return h()}finally{wi=f}}};return u}}let wi=null;function gc(n,e){if(xt){let t=xt.provides;const r=xt.parent&&xt.parent.provides;r===t&&(t=xt.provides=Object.create(r)),t[n]=e}}function An(n,e,t=!1){const r=Od();if(r||wi){let s=wi?wi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&ye(e)?e.call(r&&r.proxy):e}}const Gy={},Hy=()=>Object.create(Gy),qy=n=>Object.getPrototypeOf(n)===Gy;function HT(n,e,t,r=!1){const s={},i=Hy();n.propsDefaults=Object.create(null),Ky(n,e,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=r?s:vy(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function qT(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,a=ke(s),[l]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(Ol(n.emitsOptions,m))continue;const g=e[m];if(l)if(Oe(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const R=fn(m);s[R]=bh(l,a,R,g,n,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{Ky(n,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!Oe(e,f)&&((h=Zr(f))===f||!Oe(e,h)))&&(l?t&&(t[f]!==void 0||t[h]!==void 0)&&(s[f]=bh(l,a,f,void 0,n,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Oe(e,f))&&(delete i[f],u=!0)}u&&Zn(n.attrs,"set","")}function Ky(n,e,t,r){const[s,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Uo(l))continue;const u=e[l];let h;s&&Oe(s,h=fn(l))?!i||!i.includes(h)?t[h]=u:(a||(a={}))[h]=u:Ol(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=ke(t),u=a||Ge;for(let h=0;h<i.length;h++){const f=i[h];t[f]=bh(s,l,f,u[f],n,!Oe(u,f))}}return o}function bh(n,e,t,r,s,i){const o=n[t];if(o!=null){const a=Oe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ye(l)){const{propsDefaults:u}=s;if(t in u)r=u[t];else{const h=ka(s);r=u[t]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(t,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Zr(t))&&(r=!0))}return r}const KT=new WeakMap;function zy(n,e,t=!1){const r=t?KT:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},a=[];let l=!1;if(!ye(n)){const h=f=>{l=!0;const[m,g]=zy(f,e,!0);ut(o,m),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!i&&!l)return qe(n)&&r.set(n,yi),yi;if(pe(i))for(let h=0;h<i.length;h++){const f=fn(i[h]);Jp(f)&&(o[f]=Ge)}else if(i)for(const h in i){const f=fn(h);if(Jp(f)){const m=i[h],g=o[f]=pe(m)||ye(m)?{type:m}:ut({},m),R=g.type;let C=!1,k=!0;if(pe(R))for(let B=0;B<R.length;++B){const F=R[B],U=ye(F)&&F.name;if(U==="Boolean"){C=!0;break}else U==="String"&&(k=!1)}else C=ye(R)&&R.name==="Boolean";g[0]=C,g[1]=k,(C||Oe(g,"default"))&&a.push(f)}}const u=[o,a];return qe(n)&&r.set(n,u),u}function Jp(n){return n[0]!=="$"&&!Uo(n)}const Dd=n=>n==="_"||n==="_ctx"||n==="$stable",xd=n=>pe(n)?n.map(xn):[xn(n)],zT=(n,e,t)=>{if(e._n)return e;const r=Fn((...s)=>xd(e(...s)),t);return r._c=!1,r},Wy=(n,e,t)=>{const r=n._ctx;for(const s in n){if(Dd(s))continue;const i=n[s];if(ye(i))e[s]=zT(s,i,r);else if(i!=null){const o=xd(i);e[s]=()=>o}}},Qy=(n,e)=>{const t=xd(e);n.slots.default=()=>t},Yy=(n,e,t)=>{for(const r in e)(t||!Dd(r))&&(n[r]=e[r])},WT=(n,e,t)=>{const r=n.slots=Hy();if(n.vnode.shapeFlag&32){const s=e._;s?(Yy(r,e,t),t&&ty(r,"_",s,!0)):Wy(e,r)}else e&&Qy(n,e)},QT=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,o=Ge;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:Yy(s,e,t):(i=!e.$stable,Wy(e,s)),o=e}else e&&(Qy(n,e),o={default:1});if(i)for(const a in s)!Dd(a)&&o[a]==null&&delete s[a]},en=l1;function YT(n){return XT(n)}function XT(n,e){const t=Cl();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=Ln,insertStaticContent:R}=n,C=(A,b,P,q=null,K=null,G=null,ne=void 0,Y=null,W=!!b.dynamicChildren)=>{if(A===b)return;A&&!ys(A,b)&&(q=V(A),ot(A,K,G,!0),A=null),b.patchFlag===-2&&(W=!1,b.dynamicChildren=null);const{type:Q,ref:de,shapeFlag:se}=b;switch(Q){case Ml:k(A,b,P,q);break;case Dt:B(A,b,P,q);break;case _c:A==null&&F(b,P,q,ne);break;case $e:w(A,b,P,q,K,G,ne,Y,W);break;default:se&1?$(A,b,P,q,K,G,ne,Y,W):se&6?I(A,b,P,q,K,G,ne,Y,W):(se&64||se&128)&&Q.process(A,b,P,q,K,G,ne,Y,W,te)}de!=null&&K?Go(de,A&&A.ref,G,b||A,!b):de==null&&A&&A.ref!=null&&Go(A.ref,null,G,A,!0)},k=(A,b,P,q)=>{if(A==null)r(b.el=a(b.children),P,q);else{const K=b.el=A.el;b.children!==A.children&&u(K,b.children)}},B=(A,b,P,q)=>{A==null?r(b.el=l(b.children||""),P,q):b.el=A.el},F=(A,b,P,q)=>{[A.el,A.anchor]=R(A.children,b,P,q,A.el,A.anchor)},U=({el:A,anchor:b},P,q)=>{let K;for(;A&&A!==b;)K=m(A),r(A,P,q),A=K;r(b,P,q)},H=({el:A,anchor:b})=>{let P;for(;A&&A!==b;)P=m(A),s(A),A=P;s(b)},$=(A,b,P,q,K,G,ne,Y,W)=>{b.type==="svg"?ne="svg":b.type==="math"&&(ne="mathml"),A==null?re(b,P,q,K,G,ne,Y,W):y(A,b,K,G,ne,Y,W)},re=(A,b,P,q,K,G,ne,Y)=>{let W,Q;const{props:de,shapeFlag:se,transition:ue,dirs:fe}=A;if(W=A.el=o(A.type,G,de&&de.is,de),se&8?h(W,A.children):se&16&&v(A.children,W,null,q,K,ju(A,G),ne,Y),fe&&us(A,null,q,"created"),S(W,A,A.scopeId,ne,q),de){for(const Me in de)Me!=="value"&&!Uo(Me)&&i(W,Me,null,de[Me],G,q);"value"in de&&i(W,"value",null,de.value,G),(Q=de.onVnodeBeforeMount)&&Pn(Q,q,A)}fe&&us(A,null,q,"beforeMount");const Te=JT(K,ue);Te&&ue.beforeEnter(W),r(W,b,P),((Q=de&&de.onVnodeMounted)||Te||fe)&&en(()=>{Q&&Pn(Q,q,A),Te&&ue.enter(W),fe&&us(A,null,q,"mounted")},K)},S=(A,b,P,q,K)=>{if(P&&g(A,P),q)for(let G=0;G<q.length;G++)g(A,q[G]);if(K){let G=K.subTree;if(b===G||tv(G.type)&&(G.ssContent===b||G.ssFallback===b)){const ne=K.vnode;S(A,ne,ne.scopeId,ne.slotScopeIds,K.parent)}}},v=(A,b,P,q,K,G,ne,Y,W=0)=>{for(let Q=W;Q<A.length;Q++){const de=A[Q]=Y?kr(A[Q]):xn(A[Q]);C(null,de,b,P,q,K,G,ne,Y)}},y=(A,b,P,q,K,G,ne)=>{const Y=b.el=A.el;let{patchFlag:W,dynamicChildren:Q,dirs:de}=b;W|=A.patchFlag&16;const se=A.props||Ge,ue=b.props||Ge;let fe;if(P&&hs(P,!1),(fe=ue.onVnodeBeforeUpdate)&&Pn(fe,P,b,A),de&&us(b,A,P,"beforeUpdate"),P&&hs(P,!0),(se.innerHTML&&ue.innerHTML==null||se.textContent&&ue.textContent==null)&&h(Y,""),Q?E(A.dynamicChildren,Q,Y,P,q,ju(b,K),G):ne||we(A,b,Y,null,P,q,ju(b,K),G,!1),W>0){if(W&16)T(Y,se,ue,P,K);else if(W&2&&se.class!==ue.class&&i(Y,"class",null,ue.class,K),W&4&&i(Y,"style",se.style,ue.style,K),W&8){const Te=b.dynamicProps;for(let Me=0;Me<Te.length;Me++){const Pe=Te[Me],bt=se[Pe],Rt=ue[Pe];(Rt!==bt||Pe==="value")&&i(Y,Pe,bt,Rt,K,P)}}W&1&&A.children!==b.children&&h(Y,b.children)}else!ne&&Q==null&&T(Y,se,ue,P,K);((fe=ue.onVnodeUpdated)||de)&&en(()=>{fe&&Pn(fe,P,b,A),de&&us(b,A,P,"updated")},q)},E=(A,b,P,q,K,G,ne)=>{for(let Y=0;Y<b.length;Y++){const W=A[Y],Q=b[Y],de=W.el&&(W.type===$e||!ys(W,Q)||W.shapeFlag&198)?f(W.el):P;C(W,Q,de,null,q,K,G,ne,!0)}},T=(A,b,P,q,K)=>{if(b!==P){if(b!==Ge)for(const G in b)!Uo(G)&&!(G in P)&&i(A,G,b[G],null,K,q);for(const G in P){if(Uo(G))continue;const ne=P[G],Y=b[G];ne!==Y&&G!=="value"&&i(A,G,Y,ne,K,q)}"value"in P&&i(A,"value",b.value,P.value,K)}},w=(A,b,P,q,K,G,ne,Y,W)=>{const Q=b.el=A?A.el:a(""),de=b.anchor=A?A.anchor:a("");let{patchFlag:se,dynamicChildren:ue,slotScopeIds:fe}=b;fe&&(Y=Y?Y.concat(fe):fe),A==null?(r(Q,P,q),r(de,P,q),v(b.children||[],P,de,K,G,ne,Y,W)):se>0&&se&64&&ue&&A.dynamicChildren?(E(A.dynamicChildren,ue,P,K,G,ne,Y),(b.key!=null||K&&b===K.subTree)&&Xy(A,b,!0)):we(A,b,P,de,K,G,ne,Y,W)},I=(A,b,P,q,K,G,ne,Y,W)=>{b.slotScopeIds=Y,A==null?b.shapeFlag&512?K.ctx.activate(b,P,q,ne,W):Ee(b,P,q,K,G,ne,W):Be(A,b,W)},Ee=(A,b,P,q,K,G,ne)=>{const Y=A.component=g1(A,q,K);if(Dl(A)&&(Y.ctx.renderer=te),_1(Y,!1,ne),Y.asyncDep){if(K&&K.registerDep(Y,xe,ne),!A.el){const W=Y.subTree=Ve(Dt);B(null,W,b,P),A.placeholder=W.el}}else xe(Y,A,b,P,K,G,ne)},Be=(A,b,P)=>{const q=b.component=A.component;if(a1(A,b,P))if(q.asyncDep&&!q.asyncResolved){Ce(q,b,P);return}else q.next=b,q.update();else b.el=A.el,q.vnode=b},xe=(A,b,P,q,K,G,ne)=>{const Y=()=>{if(A.isMounted){let{next:se,bu:ue,u:fe,parent:Te,vnode:Me}=A;{const $t=Jy(A);if($t){se&&(se.el=Me.el,Ce(A,se,ne)),$t.asyncDep.then(()=>{A.isUnmounted||Y()});return}}let Pe=se,bt;hs(A,!1),se?(se.el=Me.el,Ce(A,se,ne)):se=Me,ue&&mc(ue),(bt=se.props&&se.props.onVnodeBeforeUpdate)&&Pn(bt,Te,se,Me),hs(A,!0);const Rt=Zp(A),Jt=A.subTree;A.subTree=Rt,C(Jt,Rt,f(Jt.el),V(Jt),A,K,G),se.el=Rt.el,Pe===null&&c1(A,Rt.el),fe&&en(fe,K),(bt=se.props&&se.props.onVnodeUpdated)&&en(()=>Pn(bt,Te,se,Me),K)}else{let se;const{el:ue,props:fe}=b,{bm:Te,m:Me,parent:Pe,root:bt,type:Rt}=A,Jt=Ei(b);hs(A,!1),Te&&mc(Te),!Jt&&(se=fe&&fe.onVnodeBeforeMount)&&Pn(se,Pe,b),hs(A,!0);{bt.ce&&bt.ce._def.shadowRoot!==!1&&bt.ce._injectChildStyle(Rt);const $t=A.subTree=Zp(A);C(null,$t,P,q,A,K,G),b.el=$t.el}if(Me&&en(Me,K),!Jt&&(se=fe&&fe.onVnodeMounted)){const $t=b;en(()=>Pn(se,Pe,$t),K)}(b.shapeFlag&256||Pe&&Ei(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&A.a&&en(A.a,K),A.isMounted=!0,b=P=q=null}};A.scope.on();const W=A.effect=new iy(Y);A.scope.off();const Q=A.update=W.run.bind(W),de=A.job=W.runIfDirty.bind(W);de.i=A,de.id=A.uid,W.scheduler=()=>kd(de),hs(A,!0),Q()},Ce=(A,b,P)=>{b.component=A;const q=A.vnode.props;A.vnode=b,A.next=null,qT(A,b.props,q,P),QT(A,b.children,P),or(),Gp(A),ar()},we=(A,b,P,q,K,G,ne,Y,W=!1)=>{const Q=A&&A.children,de=A?A.shapeFlag:0,se=b.children,{patchFlag:ue,shapeFlag:fe}=b;if(ue>0){if(ue&128){Xt(Q,se,P,q,K,G,ne,Y,W);return}else if(ue&256){Tt(Q,se,P,q,K,G,ne,Y,W);return}}fe&8?(de&16&&pt(Q,K,G),se!==Q&&h(P,se)):de&16?fe&16?Xt(Q,se,P,q,K,G,ne,Y,W):pt(Q,K,G,!0):(de&8&&h(P,""),fe&16&&v(se,P,q,K,G,ne,Y,W))},Tt=(A,b,P,q,K,G,ne,Y,W)=>{A=A||yi,b=b||yi;const Q=A.length,de=b.length,se=Math.min(Q,de);let ue;for(ue=0;ue<se;ue++){const fe=b[ue]=W?kr(b[ue]):xn(b[ue]);C(A[ue],fe,P,null,K,G,ne,Y,W)}Q>de?pt(A,K,G,!0,!1,se):v(b,P,q,K,G,ne,Y,W,se)},Xt=(A,b,P,q,K,G,ne,Y,W)=>{let Q=0;const de=b.length;let se=A.length-1,ue=de-1;for(;Q<=se&&Q<=ue;){const fe=A[Q],Te=b[Q]=W?kr(b[Q]):xn(b[Q]);if(ys(fe,Te))C(fe,Te,P,null,K,G,ne,Y,W);else break;Q++}for(;Q<=se&&Q<=ue;){const fe=A[se],Te=b[ue]=W?kr(b[ue]):xn(b[ue]);if(ys(fe,Te))C(fe,Te,P,null,K,G,ne,Y,W);else break;se--,ue--}if(Q>se){if(Q<=ue){const fe=ue+1,Te=fe<de?b[fe].el:q;for(;Q<=ue;)C(null,b[Q]=W?kr(b[Q]):xn(b[Q]),P,Te,K,G,ne,Y,W),Q++}}else if(Q>ue)for(;Q<=se;)ot(A[Q],K,G,!0),Q++;else{const fe=Q,Te=Q,Me=new Map;for(Q=Te;Q<=ue;Q++){const vt=b[Q]=W?kr(b[Q]):xn(b[Q]);vt.key!=null&&Me.set(vt.key,Q)}let Pe,bt=0;const Rt=ue-Te+1;let Jt=!1,$t=0;const mn=new Array(Rt);for(Q=0;Q<Rt;Q++)mn[Q]=0;for(Q=fe;Q<=se;Q++){const vt=A[Q];if(bt>=Rt){ot(vt,K,G,!0);continue}let mt;if(vt.key!=null)mt=Me.get(vt.key);else for(Pe=Te;Pe<=ue;Pe++)if(mn[Pe-Te]===0&&ys(vt,b[Pe])){mt=Pe;break}mt===void 0?ot(vt,K,G,!0):(mn[mt-Te]=Q+1,mt>=$t?$t=mt:Jt=!0,C(vt,b[mt],P,null,K,G,ne,Y,W),bt++)}const Xs=Jt?$T(mn):yi;for(Pe=Xs.length-1,Q=Rt-1;Q>=0;Q--){const vt=Te+Q,mt=b[vt],oo=b[vt+1],is=vt+1<de?oo.el||oo.placeholder:q;mn[Q]===0?C(null,mt,P,is,K,G,ne,Y,W):Jt&&(Pe<0||Q!==Xs[Pe]?Ft(mt,P,is,2):Pe--)}}},Ft=(A,b,P,q,K=null)=>{const{el:G,type:ne,transition:Y,children:W,shapeFlag:Q}=A;if(Q&6){Ft(A.component.subTree,b,P,q);return}if(Q&128){A.suspense.move(b,P,q);return}if(Q&64){ne.move(A,b,P,te);return}if(ne===$e){r(G,b,P);for(let se=0;se<W.length;se++)Ft(W[se],b,P,q);r(A.anchor,b,P);return}if(ne===_c){U(A,b,P);return}if(q!==2&&Q&1&&Y)if(q===0)Y.beforeEnter(G),r(G,b,P),en(()=>Y.enter(G),K);else{const{leave:se,delayLeave:ue,afterLeave:fe}=Y,Te=()=>{A.ctx.isUnmounted?s(G):r(G,b,P)},Me=()=>{G._isLeaving&&G[$n](!0),se(G,()=>{Te(),fe&&fe()})};ue?ue(G,Te,Me):Me()}else r(G,b,P)},ot=(A,b,P,q=!1,K=!1)=>{const{type:G,props:ne,ref:Y,children:W,dynamicChildren:Q,shapeFlag:de,patchFlag:se,dirs:ue,cacheIndex:fe}=A;if(se===-2&&(K=!1),Y!=null&&(or(),Go(Y,null,P,A,!0),ar()),fe!=null&&(b.renderCache[fe]=void 0),de&256){b.ctx.deactivate(A);return}const Te=de&1&&ue,Me=!Ei(A);let Pe;if(Me&&(Pe=ne&&ne.onVnodeBeforeUnmount)&&Pn(Pe,b,A),de&6)zt(A.component,P,q);else{if(de&128){A.suspense.unmount(P,q);return}Te&&us(A,null,b,"beforeUnmount"),de&64?A.type.remove(A,b,P,te,q):Q&&!Q.hasOnce&&(G!==$e||se>0&&se&64)?pt(Q,b,P,!1,!0):(G===$e&&se&384||!K&&de&16)&&pt(W,b,P),q&&pn(A)}(Me&&(Pe=ne&&ne.onVnodeUnmounted)||Te)&&en(()=>{Pe&&Pn(Pe,b,A),Te&&us(A,null,b,"unmounted")},P)},pn=A=>{const{type:b,el:P,anchor:q,transition:K}=A;if(b===$e){Kt(P,q);return}if(b===_c){H(A);return}const G=()=>{s(P),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(A.shapeFlag&1&&K&&!K.persisted){const{leave:ne,delayLeave:Y}=K,W=()=>ne(P,G);Y?Y(A.el,G,W):W()}else G()},Kt=(A,b)=>{let P;for(;A!==b;)P=m(A),s(A),A=P;s(b)},zt=(A,b,P)=>{const{bum:q,scope:K,job:G,subTree:ne,um:Y,m:W,a:Q}=A;$p(W),$p(Q),q&&mc(q),K.stop(),G&&(G.flags|=8,ot(ne,A,b,P)),Y&&en(Y,b),en(()=>{A.isUnmounted=!0},b)},pt=(A,b,P,q=!1,K=!1,G=0)=>{for(let ne=G;ne<A.length;ne++)ot(A[ne],b,P,q,K)},V=A=>{if(A.shapeFlag&6)return V(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const b=m(A.anchor||A.el),P=b&&b[vT];return P?m(P):b};let M=!1;const N=(A,b,P)=>{A==null?b._vnode&&ot(b._vnode,null,null,!0):C(b._vnode||null,A,b,null,null,null,P),b._vnode=A,M||(M=!0,Gp(),by(),M=!1)},te={p:C,um:ot,m:Ft,r:pn,mt:Ee,mc:v,pc:we,pbc:E,n:V,o:n};return{render:N,hydrate:void 0,createApp:GT(N)}}function ju({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function hs({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function JT(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Xy(n,e,t=!1){const r=n.children,s=e.children;if(pe(r)&&pe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=kr(s[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Xy(o,a)),a.type===Ml&&a.patchFlag!==-1&&(a.el=o.el),a.type===Dt&&!a.el&&(a.el=o.el)}}function $T(n){const e=n.slice(),t=[0];let r,s,i,o,a;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(s=t[t.length-1],n[s]<u){e[r]=s,t.push(r);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<u?i=a+1:o=a;u<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Jy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Jy(e)}function $p(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const ZT=Symbol.for("v-scx"),e1=()=>An(ZT);function Fr(n,e,t){return $y(n,e,t)}function $y(n,e,t=Ge){const{immediate:r,deep:s,flush:i,once:o}=t,a=ut({},t),l=e&&r||!e&&i!=="post";let u;if(ha){if(i==="sync"){const g=e1();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Ln,g.resume=Ln,g.pause=Ln,g}}const h=xt;a.call=(g,R,C)=>bn(g,h,R,C);let f=!1;i==="post"?a.scheduler=g=>{en(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,R)=>{R?g():kd(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=mT(n,e,a);return ha&&(u?u.push(m):l&&m()),m}function t1(n,e,t){const r=this.proxy,s=nt(n)?n.includes(".")?Zy(r,n):()=>r[n]:n.bind(r,r);let i;ye(e)?i=e:(i=e.handler,t=e);const o=ka(this),a=$y(s,i.bind(r),t);return o(),a}function Zy(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const n1=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${fn(e)}Modifiers`]||n[`${Zr(e)}Modifiers`];function r1(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Ge;let s=t;const i=e.startsWith("update:"),o=i&&n1(r,e.slice(7));o&&(o.trim&&(s=t.map(h=>nt(h)?h.trim():h)),o.number&&(s=t.map(gh)));let a,l=r[a=Nu(e)]||r[a=Nu(fn(e))];!l&&i&&(l=r[a=Nu(Zr(e))]),l&&bn(l,n,6,s);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,bn(u,n,6,s)}}const s1=new WeakMap;function ev(n,e,t=!1){const r=t?s1:e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},a=!1;if(!ye(n)){const l=u=>{const h=ev(u,e,!0);h&&(a=!0,ut(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(qe(n)&&r.set(n,null),null):(pe(i)?i.forEach(l=>o[l]=null):ut(o,i),qe(n)&&r.set(n,o),o)}function Ol(n,e){return!n||!Tl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oe(n,e[0].toLowerCase()+e.slice(1))||Oe(n,Zr(e))||Oe(n,e))}function Zp(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:m,setupState:g,ctx:R,inheritAttrs:C}=n,k=Bc(n);let B,F;try{if(t.shapeFlag&4){const H=s||r,$=H;B=xn(u.call($,H,h,f,g,m,R)),F=a}else{const H=e;B=xn(H.length>1?H(f,{attrs:a,slots:o,emit:l}):H(f,null)),F=e.props?a:i1(a)}}catch(H){Ko.length=0,Vl(H,n,1),B=Ve(Dt)}let U=B;if(F&&C!==!1){const H=Object.keys(F),{shapeFlag:$}=U;H.length&&$&7&&(i&&H.some(vd)&&(F=o1(F,i)),U=zr(U,F,!1,!0))}return t.dirs&&(U=zr(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(t.dirs):t.dirs),t.transition&&xs(U,t.transition),B=U,Bc(k),B}const i1=n=>{let e;for(const t in n)(t==="class"||t==="style"||Tl(t))&&((e||(e={}))[t]=n[t]);return e},o1=(n,e)=>{const t={};for(const r in n)(!vd(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function a1(n,e,t){const{props:r,children:s,component:i}=n,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?em(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==r[m]&&!Ol(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?em(r,o,u):!0:!!o;return!1}function em(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!Ol(t,i))return!0}return!1}function c1({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const tv=n=>n.__isSuspense;function l1(n,e){e&&e.pendingBranch?pe(n)?e.effects.push(...n):e.effects.push(n):yT(n)}const $e=Symbol.for("v-fgt"),Ml=Symbol.for("v-txt"),Dt=Symbol.for("v-cmt"),_c=Symbol.for("v-stc"),Ko=[];let rn=null;function oe(n=!1){Ko.push(rn=n?null:[])}function u1(){Ko.pop(),rn=Ko[Ko.length-1]||null}let la=1;function Hc(n,e=!1){la+=n,n<0&&rn&&e&&(rn.hasOnce=!0)}function nv(n){return n.dynamicChildren=la>0?rn||yi:null,u1(),la>0&&rn&&rn.push(n),n}function he(n,e,t,r,s,i){return nv(O(n,e,t,r,s,i,!0))}function En(n,e,t,r,s){return nv(Ve(n,e,t,r,s,!0))}function ua(n){return n?n.__v_isVNode===!0:!1}function ys(n,e){return n.type===e.type&&n.key===e.key}const rv=({key:n})=>n??null,yc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?nt(n)||Mt(n)||ye(n)?{i:wt,r:n,k:e,f:!!t}:n:null);function O(n,e=null,t=null,r=0,s=null,i=n===$e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&rv(e),ref:e&&yc(e),scopeId:Sy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:wt};return a?(Nd(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=nt(t)?8:16),la>0&&!o&&rn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&rn.push(l),l}const Ve=h1;function h1(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===xT)&&(n=Dt),ua(n)){const a=zr(n,e,!0);return t&&Nd(a,t),la>0&&!i&&rn&&(a.shapeFlag&6?rn[rn.indexOf(n)]=a:rn.push(a)),a.patchFlag=-2,a}if(E1(n)&&(n=n.__vccOpts),e){e=d1(e);let{class:a,style:l}=e;a&&!nt(a)&&(e.class=Ht(a)),qe(l)&&(Pd(l)&&!pe(l)&&(l=ut({},l)),e.style=Ed(l))}const o=nt(n)?1:tv(n)?128:Cy(n)?64:qe(n)?4:ye(n)?2:0;return O(n,e,t,r,s,o,i,!0)}function d1(n){return n?Pd(n)||qy(n)?ut({},n):n:null}function zr(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=n,u=e?f1(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&rv(u),ref:e&&e.ref?t&&i?pe(i)?i.concat(yc(e)):[i,yc(e)]:yc(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==$e?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&zr(n.ssContent),ssFallback:n.ssFallback&&zr(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&xs(h,l.clone(h)),h}function Rh(n=" ",e=0){return Ve(Ml,null,n,e)}function Un(n,e){const t=Ve(_c,null,n);return t.staticCount=e,t}function yt(n="",e=!1){return e?(oe(),En(Dt,null,n)):Ve(Dt,null,n)}function xn(n){return n==null||typeof n=="boolean"?Ve(Dt):pe(n)?Ve($e,null,n.slice()):ua(n)?kr(n):Ve(Ml,null,String(n))}function kr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:zr(n)}function Nd(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(pe(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Nd(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!qy(e)?e._ctx=wt:s===3&&wt&&(wt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:wt},t=32):(e=String(e),r&64?(t=16,e=[Rh(e)]):t=8);n.children=e,n.shapeFlag|=t}function f1(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ht([e.class,r.class]));else if(s==="style")e.style=Ed([e.style,r.style]);else if(Tl(s)){const i=e[s],o=r[s];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Pn(n,e,t,r=null){bn(n,e,7,[t,r])}const p1=jy();let m1=0;function g1(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||p1,i={uid:m1++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zy(r,s),emitsOptions:ev(r,s),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:r.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=r1.bind(null,i),n.ce&&n.ce(i),i}let xt=null;const Od=()=>xt||wt;let qc,Sh;{const n=Cl(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};qc=e("__VUE_INSTANCE_SETTERS__",t=>xt=t),Sh=e("__VUE_SSR_SETTERS__",t=>ha=t)}const ka=n=>{const e=xt;return qc(n),n.scope.on(),()=>{n.scope.off(),qc(e)}},tm=()=>{xt&&xt.scope.off(),qc(null)};function sv(n){return n.vnode.shapeFlag&4}let ha=!1;function _1(n,e=!1,t=!1){e&&Sh(e);const{props:r,children:s}=n.vnode,i=sv(n);HT(n,r,i,e),WT(n,s,t||e);const o=i?y1(n,e):void 0;return e&&Sh(!1),o}function y1(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,OT);const{setup:r}=t;if(r){or();const s=n.setupContext=r.length>1?I1(n):null,i=ka(n),o=Pa(r,n,0,[n.props,s]),a=$_(o);if(ar(),i(),(a||n.sp)&&!Ei(n)&&Oy(n),a){if(o.then(tm,tm),e)return o.then(l=>{nm(n,l)}).catch(l=>{Vl(l,n,0)});n.asyncDep=o}else nm(n,o)}else iv(n)}function nm(n,e,t){ye(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:qe(e)&&(n.setupState=Ay(e)),iv(n)}function iv(n,e,t){const r=n.type;n.render||(n.render=r.render||Ln);{const s=ka(n);or();try{MT(n)}finally{ar(),s()}}}const v1={get(n,e){return Vt(n,"get",""),n[e]}};function I1(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,v1),slots:n.slots,emit:n.emit,expose:e}}function Ll(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Ay(cT(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in qo)return qo[t](n)},has(e,t){return t in e||t in qo}})):n.proxy}function A1(n,e=!0){return ye(n)?n.displayName||n.name:n.name||e&&n.__name}function E1(n){return ye(n)&&"__vccOpts"in n}const Et=(n,e)=>fT(n,e,ha);function Md(n,e,t){try{Hc(-1);const r=arguments.length;return r===2?qe(e)&&!pe(e)?ua(e)?Ve(n,null,[e]):Ve(n,e):Ve(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&ua(t)&&(t=[t]),Ve(n,e,t))}finally{Hc(1)}}const w1="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ch;const rm=typeof window<"u"&&window.trustedTypes;if(rm)try{Ch=rm.createPolicy("vue",{createHTML:n=>n})}catch{}const ov=Ch?n=>Ch.createHTML(n):n=>n,T1="http://www.w3.org/2000/svg",b1="http://www.w3.org/1998/Math/MathML",Jn=typeof document<"u"?document:null,sm=Jn&&Jn.createElement("template"),R1={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?Jn.createElementNS(T1,n):e==="mathml"?Jn.createElementNS(b1,n):t?Jn.createElement(n,{is:t}):Jn.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>Jn.createTextNode(n),createComment:n=>Jn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Jn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{sm.innerHTML=ov(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=sm.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Er="transition",wo="animation",ki=Symbol("_vtc"),av={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},cv=ut({},ky,av),S1=n=>(n.displayName="Transition",n.props=cv,n),Vi=S1((n,{slots:e})=>Md(AT,lv(n),e)),ds=(n,e=[])=>{pe(n)?n.forEach(t=>t(...e)):n&&n(...e)},im=n=>n?pe(n)?n.some(e=>e.length>1):n.length>1:!1;function lv(n){const e={};for(const w in n)w in av||(e[w]=n[w]);if(n.css===!1)return e;const{name:t="v",type:r,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:m=`${t}-leave-active`,leaveToClass:g=`${t}-leave-to`}=n,R=C1(s),C=R&&R[0],k=R&&R[1],{onBeforeEnter:B,onEnter:F,onEnterCancelled:U,onLeave:H,onLeaveCancelled:$,onBeforeAppear:re=B,onAppear:S=F,onAppearCancelled:v=U}=e,y=(w,I,Ee,Be)=>{w._enterCancelled=Be,Cr(w,I?h:a),Cr(w,I?u:o),Ee&&Ee()},E=(w,I)=>{w._isLeaving=!1,Cr(w,f),Cr(w,g),Cr(w,m),I&&I()},T=w=>(I,Ee)=>{const Be=w?S:F,xe=()=>y(I,w,Ee);ds(Be,[I,xe]),om(()=>{Cr(I,w?l:i),kn(I,w?h:a),im(Be)||am(I,r,C,xe)})};return ut(e,{onBeforeEnter(w){ds(B,[w]),kn(w,i),kn(w,o)},onBeforeAppear(w){ds(re,[w]),kn(w,l),kn(w,u)},onEnter:T(!1),onAppear:T(!0),onLeave(w,I){w._isLeaving=!0;const Ee=()=>E(w,I);kn(w,f),w._enterCancelled?(kn(w,m),Ph(w)):(Ph(w),kn(w,m)),om(()=>{w._isLeaving&&(Cr(w,f),kn(w,g),im(H)||am(w,r,k,Ee))}),ds(H,[w,Ee])},onEnterCancelled(w){y(w,!1,void 0,!0),ds(U,[w])},onAppearCancelled(w){y(w,!0,void 0,!0),ds(v,[w])},onLeaveCancelled(w){E(w),ds($,[w])}})}function C1(n){if(n==null)return null;if(qe(n))return[Gu(n.enter),Gu(n.leave)];{const e=Gu(n);return[e,e]}}function Gu(n){return Ow(n)}function kn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[ki]||(n[ki]=new Set)).add(e)}function Cr(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[ki];t&&(t.delete(e),t.size||(n[ki]=void 0))}function om(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let P1=0;function am(n,e,t,r){const s=n._endId=++P1,i=()=>{s===n._endId&&r()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=uv(n,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{n.removeEventListener(u,m),i()},m=g=>{g.target===n&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),n.addEventListener(u,m)}function uv(n,e){const t=window.getComputedStyle(n),r=R=>(t[R]||"").split(", "),s=r(`${Er}Delay`),i=r(`${Er}Duration`),o=cm(s,i),a=r(`${wo}Delay`),l=r(`${wo}Duration`),u=cm(a,l);let h=null,f=0,m=0;e===Er?o>0&&(h=Er,f=o,m=i.length):e===wo?u>0&&(h=wo,f=u,m=l.length):(f=Math.max(o,u),h=f>0?o>u?Er:wo:null,m=h?h===Er?i.length:l.length:0);const g=h===Er&&/\b(?:transform|all)(?:,|$)/.test(r(`${Er}Property`).toString());return{type:h,timeout:f,propCount:m,hasTransform:g}}function cm(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>lm(t)+lm(n[r])))}function lm(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Ph(n){return(n?n.ownerDocument:document).body.offsetHeight}function k1(n,e,t){const r=n[ki];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Kc=Symbol("_vod"),hv=Symbol("_vsh"),dv={name:"show",beforeMount(n,{value:e},{transition:t}){n[Kc]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):To(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),To(n,!0),r.enter(n)):r.leave(n,()=>{To(n,!1)}):To(n,e))},beforeUnmount(n,{value:e}){To(n,e)}};function To(n,e){n.style.display=e?n[Kc]:"none",n[hv]=!e}const V1=Symbol(""),D1=/(?:^|;)\s*display\s*:/;function x1(n,e,t){const r=n.style,s=nt(t);let i=!1;if(t&&!s){if(e)if(nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&vc(r,a,"")}else for(const o in e)t[o]==null&&vc(r,o,"");for(const o in t)o==="display"&&(i=!0),vc(r,o,t[o])}else if(s){if(e!==t){const o=r[V1];o&&(t+=";"+o),r.cssText=t,i=D1.test(t)}}else e&&n.removeAttribute("style");Kc in n&&(n[Kc]=i?r.display:"",n[hv]&&(r.display="none"))}const um=/\s*!important$/;function vc(n,e,t){if(pe(t))t.forEach(r=>vc(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=N1(n,e);um.test(t)?n.setProperty(Zr(r),t.replace(um,""),"important"):n[r]=t}}const hm=["Webkit","Moz","ms"],Hu={};function N1(n,e){const t=Hu[e];if(t)return t;let r=fn(e);if(r!=="filter"&&r in n)return Hu[e]=r;r=Sl(r);for(let s=0;s<hm.length;s++){const i=hm[s]+r;if(i in n)return Hu[e]=i}return e}const dm="http://www.w3.org/1999/xlink";function fm(n,e,t,r,s,i=jw(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(dm,e.slice(6,e.length)):n.setAttributeNS(dm,e,t):t==null||i&&!ny(t)?n.removeAttribute(e):n.setAttribute(e,i?"":dr(t)?String(t):t)}function pm(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?ov(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=ny(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function ui(n,e,t,r){n.addEventListener(e,t,r)}function O1(n,e,t,r){n.removeEventListener(e,t,r)}const mm=Symbol("_vei");function M1(n,e,t,r,s=null){const i=n[mm]||(n[mm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=L1(e);if(r){const u=i[e]=B1(r,s);ui(n,a,u,l)}else o&&(O1(n,a,o,l),i[e]=void 0)}}const gm=/(?:Once|Passive|Capture)$/;function L1(n){let e;if(gm.test(n)){e={};let r;for(;r=n.match(gm);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Zr(n.slice(2)),e]}let qu=0;const F1=Promise.resolve(),U1=()=>qu||(F1.then(()=>qu=0),qu=Date.now());function B1(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;bn(j1(r,t.value),e,5,[r])};return t.value=n,t.attached=U1(),t}function j1(n,e){if(pe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const _m=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,G1=(n,e,t,r,s,i)=>{const o=s==="svg";e==="class"?k1(n,r,o):e==="style"?x1(n,t,r):Tl(e)?vd(e)||M1(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):H1(n,e,r,o))?(pm(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fm(n,e,r,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!nt(r))?pm(n,fn(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),fm(n,e,r,o))};function H1(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&_m(e)&&ye(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return _m(e)&&nt(t)?!1:e in n}const fv=new WeakMap,pv=new WeakMap,zc=Symbol("_moveCb"),ym=Symbol("_enterCb"),q1=n=>(delete n.props.mode,n),K1=q1({name:"TransitionGroup",props:ut({},cv,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Od(),r=Py();let s,i;return Ly(()=>{if(!s.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!X1(s[0].el,t.vnode.el,o)){s=[];return}s.forEach(W1),s.forEach(Q1);const a=s.filter(Y1);Ph(t.vnode.el),a.forEach(l=>{const u=l.el,h=u.style;kn(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[zc]=m=>{m&&m.target!==u||(!m||m.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",f),u[zc]=null,Cr(u,o))};u.addEventListener("transitionend",f)}),s=[]}),()=>{const o=ke(n),a=lv(o);let l=o.tag||$e;if(s=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(s.push(h),xs(h,aa(h,a,r,t)),fv.set(h,h.el.getBoundingClientRect()))}i=e.default?Vd(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&xs(h,aa(h,a,r,t))}return Ve(l,null,i)}}}),z1=K1;function W1(n){const e=n.el;e[zc]&&e[zc](),e[ym]&&e[ym]()}function Q1(n){pv.set(n,n.el.getBoundingClientRect())}function Y1(n){const e=fv.get(n),t=pv.get(n),r=e.left-t.left,s=e.top-t.top;if(r||s){const i=n.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",n}}function X1(n,e,t){const r=n.cloneNode(),s=n[ki];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=uv(r);return i.removeChild(r),o}const vm=n=>{const e=n.props["onUpdate:modelValue"]||!1;return pe(e)?t=>mc(e,t):e};function J1(n){n.target.composing=!0}function Im(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ku=Symbol("_assign"),_n={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[Ku]=vm(s);const i=r||s.props&&s.props.type==="number";ui(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=gh(a)),n[Ku](a)}),t&&ui(n,"change",()=>{n.value=n.value.trim()}),e||(ui(n,"compositionstart",J1),ui(n,"compositionend",Im),ui(n,"change",Im))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[Ku]=vm(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?gh(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===l)||(n.value=l))}},$1=["ctrl","shift","alt","meta"],Z1={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>$1.some(t=>n[`${t}Key`]&&!e.includes(t))},Ti=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=Z1[e[o]];if(a&&a(s,e))return}return n(s,...i)}))},e0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mv=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=(s=>{if(!("key"in s))return;const i=Zr(s.key);if(e.some(o=>o===i||e0[o]===i))return n(s)}))},t0=ut({patchProp:G1},R1);let Am;function n0(){return Am||(Am=YT(t0))}const r0=((...n)=>{const e=n0().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=i0(r);if(!s)return;const i=e._component;!ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,s0(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function s0(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function i0(n){return nt(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const hi=typeof document<"u";function gv(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function o0(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&gv(n.default)}const Ne=Object.assign;function zu(n,e){const t={};for(const r in e){const s=e[r];t[r]=Rn(s)?s.map(n):n(s)}return t}const zo=()=>{},Rn=Array.isArray;function Em(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}const _v=/#/g,a0=/&/g,c0=/\//g,l0=/=/g,u0=/\?/g,yv=/\+/g,h0=/%5B/g,d0=/%5D/g,vv=/%5E/g,f0=/%60/g,Iv=/%7B/g,p0=/%7C/g,Av=/%7D/g,m0=/%20/g;function Ld(n){return n==null?"":encodeURI(""+n).replace(p0,"|").replace(h0,"[").replace(d0,"]")}function g0(n){return Ld(n).replace(Iv,"{").replace(Av,"}").replace(vv,"^")}function kh(n){return Ld(n).replace(yv,"%2B").replace(m0,"+").replace(_v,"%23").replace(a0,"%26").replace(f0,"`").replace(Iv,"{").replace(Av,"}").replace(vv,"^")}function _0(n){return kh(n).replace(l0,"%3D")}function y0(n){return Ld(n).replace(_v,"%23").replace(u0,"%3F")}function v0(n){return y0(n).replace(c0,"%2F")}function da(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const I0=/\/$/,A0=n=>n.replace(I0,"");function Wu(n,e,t="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=n(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=b0(r??e,t),{fullPath:r+i+o,path:r,query:s,hash:da(o)}}function E0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function wm(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function w0(n,e,t){const r=e.matched.length-1,s=t.matched.length-1;return r>-1&&r===s&&Di(e.matched[r],t.matched[s])&&Ev(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Di(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Ev(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!T0(n[t],e[t]))return!1;return!0}function T0(n,e){return Rn(n)?Tm(n,e):Rn(e)?Tm(e,n):n===e}function Tm(n,e){return Rn(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function b0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const wr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Vh=(function(n){return n.pop="pop",n.push="push",n})({}),Qu=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function R0(n){if(!n)if(hi){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),A0(n)}const S0=/^[^#]+#/;function C0(n,e){return n.replace(S0,"#")+e}function P0(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Fl=()=>({left:window.scrollX,top:window.scrollY});function k0(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=P0(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function bm(n,e){return(history.state?history.state.position-e:-1)+n}const Dh=new Map;function V0(n,e){Dh.set(n,e)}function D0(n){const e=Dh.get(n);return Dh.delete(n),e}function x0(n){return typeof n=="string"||n&&typeof n=="object"}function wv(n){return typeof n=="string"||typeof n=="symbol"}let Xe=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const Tv=Symbol("");Xe.MATCHER_NOT_FOUND+"",Xe.NAVIGATION_GUARD_REDIRECT+"",Xe.NAVIGATION_ABORTED+"",Xe.NAVIGATION_CANCELLED+"",Xe.NAVIGATION_DUPLICATED+"";function xi(n,e){return Ne(new Error,{type:n,[Tv]:!0},e)}function Xn(n,e){return n instanceof Error&&Tv in n&&(e==null||!!(n.type&e))}const N0=["params","query","hash"];function O0(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of N0)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function M0(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<t.length;++r){const s=t[r].replace(yv," "),i=s.indexOf("="),o=da(i<0?s:s.slice(0,i)),a=i<0?null:da(s.slice(i+1));if(o in e){let l=e[o];Rn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Rm(n){let e="";for(let t in n){const r=n[t];if(t=_0(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Rn(r)?r.map(s=>s&&kh(s)):[r&&kh(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function L0(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Rn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const F0=Symbol(""),Sm=Symbol(""),Ul=Symbol(""),Fd=Symbol(""),xh=Symbol("");function bo(){let n=[];function e(r){return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Vr(n,e,t,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=m=>{m===!1?l(xi(Xe.NAVIGATION_ABORTED,{from:t,to:e})):m instanceof Error?l(m):x0(m)?l(xi(Xe.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>n.call(r&&r.instances[s],e,t,u));let f=Promise.resolve(h);n.length<3&&(f=f.then(u)),f.catch(m=>l(m))})}function Yu(n,e,t,r,s=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(gv(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vr(u,t,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=o0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Vr(m,t,r,o,a,s)()}))}}return i}function U0(n,e){const t=[],r=[],s=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(u=>Di(u,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(u=>Di(u,l))||s.push(l))}return[t,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let B0=()=>location.protocol+"//"+location.host;function bv(n,e){const{pathname:t,search:r,hash:s}=e,i=n.indexOf("#");if(i>-1){let o=s.includes(n.slice(i))?n.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),wm(a,"")}return wm(t,n)+r+s}function j0(n,e,t,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=bv(n,location),R=t.value,C=e.value;let k=0;if(m){if(t.value=g,e.value=m,o&&o===R){o=null;return}k=C?m.position-C.position:0}else r(g);s.forEach(B=>{B(t.value,R,{delta:k,type:Vh.pop,direction:k?k>0?Qu.forward:Qu.back:Qu.unknown})})};function l(){o=t.value}function u(m){s.push(m);const g=()=>{const R=s.indexOf(m);R>-1&&s.splice(R,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ne({},m.state,{scroll:Fl()}),"")}}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function Cm(n,e,t,r=!1,s=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:s?Fl():null}}function G0(n){const{history:e,location:t}=window,r={value:bv(n,t)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=n.indexOf("#"),m=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:B0()+n+l;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),t[h?"replace":"assign"](m)}}function o(l,u){i(l,Ne({},e.state,Cm(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const h=Ne({},s.value,e.state,{forward:l,scroll:Fl()});i(h.current,h,!0),i(l,Ne({},Cm(r.value,l,null),{position:h.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function H0(n){n=R0(n);const e=G0(n),t=j0(n,e.state,e.location,e.replace);function r(i,o=!0){o||t.pauseListeners(),history.go(i)}const s=Ne({location:"",base:n,go:r,createHref:C0.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Ts=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var ct=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(ct||{});const q0={type:Ts.Static,value:""},K0=/[a-zA-Z0-9_]/;function z0(n){if(!n)return[[]];if(n==="/")return[[q0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(g){throw new Error(`ERR (${t})/"${u}": ${g}`)}let t=ct.Static,r=t;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(t===ct.Static?i.push({type:Ts.Static,value:u}):t===ct.Param||t===ct.ParamRegExp||t===ct.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ts.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==ct.ParamRegExp){r=t,t=ct.EscapeNext;continue}switch(t){case ct.Static:l==="/"?(u&&f(),o()):l===":"?(f(),t=ct.Param):m();break;case ct.EscapeNext:m(),t=r;break;case ct.Param:l==="("?t=ct.ParamRegExp:K0.test(l)?m():(f(),t=ct.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case ct.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=ct.ParamRegExpEnd:h+=l;break;case ct.ParamRegExpEnd:f(),t=ct.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===ct.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}const Pm="[^/]+?",W0={sensitive:!1,strict:!1,start:!0,end:!0};var jt=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(jt||{});const Q0=/[.+*?^${}()[\]/\\]/g;function Y0(n,e){const t=Ne({},W0,e),r=[];let s=t.start?"^":"";const i=[];for(const u of n){const h=u.length?[]:[jt.Root];t.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const m=u[f];let g=jt.Segment+(t.sensitive?jt.BonusCaseSensitive:0);if(m.type===Ts.Static)f||(s+="/"),s+=m.value.replace(Q0,"\\$&"),g+=jt.Static;else if(m.type===Ts.Param){const{value:R,repeatable:C,optional:k,regexp:B}=m;i.push({name:R,repeatable:C,optional:k});const F=B||Pm;if(F!==Pm){g+=jt.BonusCustomRegExp;try{`${F}`}catch(H){throw new Error(`Invalid custom RegExp for param "${R}" (${F}): `+H.message)}}let U=C?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;f||(U=k&&u.length<2?`(?:/${U})`:"/"+U),k&&(U+="?"),s+=U,g+=jt.Dynamic,k&&(g+=jt.BonusOptional),C&&(g+=jt.BonusRepeatable),F===".*"&&(g+=jt.BonusWildcard)}h.push(g)}r.push(h)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=jt.BonusStrict}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",R=i[m-1];f[R.name]=g&&R.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const m of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of m)if(g.type===Ts.Static)h+=g.value;else if(g.type===Ts.Param){const{value:R,repeatable:C,optional:k}=g,B=R in u?u[R]:"";if(Rn(B)&&!C)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const F=Rn(B)?B.join("/"):B;if(!F)if(k)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${R}"`);h+=F}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function X0(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===jt.Static+jt.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===jt.Static+jt.Segment?1:-1:0}function Rv(n,e){let t=0;const r=n.score,s=e.score;for(;t<r.length&&t<s.length;){const i=X0(r[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-r.length)===1){if(km(r))return 1;if(km(s))return-1}return s.length-r.length}function km(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const J0={strict:!1,end:!0,sensitive:!1};function $0(n,e,t){const r=Y0(z0(n.path),t),s=Ne(r,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Z0(n,e){const t=[],r=new Map;e=Em(J0,e);function s(f){return r.get(f)}function i(f,m,g){const R=!g,C=Dm(f);C.aliasOf=g&&g.record;const k=Em(e,f),B=[C];if("alias"in f){const H=typeof f.alias=="string"?[f.alias]:f.alias;for(const $ of H)B.push(Dm(Ne({},C,{components:g?g.record.components:C.components,path:$,aliasOf:g?g.record:C})))}let F,U;for(const H of B){const{path:$}=H;if(m&&$[0]!=="/"){const re=m.record.path,S=re[re.length-1]==="/"?"":"/";H.path=m.record.path+($&&S+$)}if(F=$0(H,m,k),g?g.alias.push(F):(U=U||F,U!==F&&U.alias.push(F),R&&f.name&&!xm(F)&&o(f.name)),Sv(F)&&l(F),C.children){const re=C.children;for(let S=0;S<re.length;S++)i(re[S],F,g&&g.children[S])}g=g||F}return U?()=>{o(U)}:zo}function o(f){if(wv(f)){const m=r.get(f);m&&(r.delete(f),t.splice(t.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=t.indexOf(f);m>-1&&(t.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const m=nb(f,t);t.splice(m,0,f),f.record.name&&!xm(f)&&r.set(f.record.name,f)}function u(f,m){let g,R={},C,k;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw xi(Xe.MATCHER_NOT_FOUND,{location:f});k=g.record.name,R=Ne(Vm(m.params,g.keys.filter(U=>!U.optional).concat(g.parent?g.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),f.params&&Vm(f.params,g.keys.map(U=>U.name))),C=g.stringify(R)}else if(f.path!=null)C=f.path,g=t.find(U=>U.re.test(C)),g&&(R=g.parse(C),k=g.record.name);else{if(g=m.name?r.get(m.name):t.find(U=>U.re.test(m.path)),!g)throw xi(Xe.MATCHER_NOT_FOUND,{location:f,currentLocation:m});k=g.record.name,R=Ne({},m.params,f.params),C=g.stringify(R)}const B=[];let F=g;for(;F;)B.unshift(F.record),F=F.parent;return{name:k,path:C,params:R,matched:B,meta:tb(B)}}n.forEach(f=>i(f));function h(){t.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Vm(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function Dm(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:eb(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function eb(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function xm(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function tb(n){return n.reduce((e,t)=>Ne(e,t.meta),{})}function nb(n,e){let t=0,r=e.length;for(;t!==r;){const i=t+r>>1;Rv(n,e[i])<0?r=i:t=i+1}const s=rb(n);return s&&(r=e.lastIndexOf(s,r-1)),r}function rb(n){let e=n;for(;e=e.parent;)if(Sv(e)&&Rv(n,e)===0)return e}function Sv({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Nm(n){const e=An(Ul),t=An(Fd),r=Et(()=>{const l=Ie(n.to);return e.resolve(l)}),s=Et(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],f=t.matched;if(!h||!f.length)return-1;const m=f.findIndex(Di.bind(null,h));if(m>-1)return m;const g=Om(l[u-2]);return u>1&&Om(h)===g&&f[f.length-1].path!==g?f.findIndex(Di.bind(null,l[u-2])):m}),i=Et(()=>s.value>-1&&cb(t.params,r.value.params)),o=Et(()=>s.value>-1&&s.value===t.matched.length-1&&Ev(t.params,r.value.params));function a(l={}){if(ab(l)){const u=e[Ie(n.replace)?"replace":"push"](Ie(n.to)).catch(zo);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Et(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function sb(n){return n.length===1?n[0]:n}const ib=Ny({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Nm,setup(n,{slots:e}){const t=kl(Nm(n)),{options:r}=An(Ul),s=Et(()=>({[Mm(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Mm(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&sb(e.default(t));return n.custom?i:Md("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),ob=ib;function ab(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function cb(n,e){for(const t in e){const r=e[t],s=n[t];if(typeof r=="string"){if(r!==s)return!1}else if(!Rn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Om(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Mm=(n,e,t)=>n??e??t,lb=Ny({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=An(xh),s=Et(()=>n.route||r.value),i=An(Sm,0),o=Et(()=>{let u=Ie(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Et(()=>s.value.matched[o.value]);gc(Sm,Et(()=>o.value+1)),gc(F0,a),gc(xh,s);const l=ge();return Fr(()=>[l.value,a.value,n.name],([u,h,f],[m,g,R])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Di(h,g)||!m)&&(h.enterCallbacks[f]||[]).forEach(C=>C(u))},{flush:"post"}),()=>{const u=s.value,h=n.name,f=a.value,m=f&&f.components[h];if(!m)return Lm(t.default,{Component:m,route:u});const g=f.props[h],R=g?g===!0?u.params:typeof g=="function"?g(u):g:null,k=Md(m,Ne({},R,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Lm(t.default,{Component:k,route:u})||k}}});function Lm(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const ub=lb;function hb(n){const e=Z0(n.routes,n),t=n.parseQuery||M0,r=n.stringifyQuery||Rm,s=n.history,i=bo(),o=bo(),a=bo(),l=lT(wr);let u=wr;hi&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=zu.bind(null,V=>""+V),f=zu.bind(null,v0),m=zu.bind(null,da);function g(V,M){let N,te;return wv(V)?(N=e.getRecordMatcher(V),te=M):te=V,e.addRoute(te,N)}function R(V){const M=e.getRecordMatcher(V);M&&e.removeRoute(M)}function C(){return e.getRoutes().map(V=>V.record)}function k(V){return!!e.getRecordMatcher(V)}function B(V,M){if(M=Ne({},M||l.value),typeof V=="string"){const P=Wu(t,V,M.path),q=e.resolve({path:P.path},M),K=s.createHref(P.fullPath);return Ne(P,q,{params:m(q.params),hash:da(P.hash),redirectedFrom:void 0,href:K})}let N;if(V.path!=null)N=Ne({},V,{path:Wu(t,V.path,M.path).path});else{const P=Ne({},V.params);for(const q in P)P[q]==null&&delete P[q];N=Ne({},V,{params:f(P)}),M.params=f(M.params)}const te=e.resolve(N,M),J=V.hash||"";te.params=h(m(te.params));const A=E0(r,Ne({},V,{hash:g0(J),path:te.path})),b=s.createHref(A);return Ne({fullPath:A,hash:J,query:r===Rm?L0(V.query):V.query||{}},te,{redirectedFrom:void 0,href:b})}function F(V){return typeof V=="string"?Wu(t,V,l.value.path):Ne({},V)}function U(V,M){if(u!==V)return xi(Xe.NAVIGATION_CANCELLED,{from:M,to:V})}function H(V){return S(V)}function $(V){return H(Ne(F(V),{replace:!0}))}function re(V,M){const N=V.matched[V.matched.length-1];if(N&&N.redirect){const{redirect:te}=N;let J=typeof te=="function"?te(V,M):te;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=F(J):{path:J},J.params={}),Ne({query:V.query,hash:V.hash,params:J.path!=null?{}:V.params},J)}}function S(V,M){const N=u=B(V),te=l.value,J=V.state,A=V.force,b=V.replace===!0,P=re(N,te);if(P)return S(Ne(F(P),{state:typeof P=="object"?Ne({},J,P.state):J,force:A,replace:b}),M||N);const q=N;q.redirectedFrom=M;let K;return!A&&w0(r,te,N)&&(K=xi(Xe.NAVIGATION_DUPLICATED,{to:q,from:te}),Ft(te,te,!0,!1)),(K?Promise.resolve(K):E(q,te)).catch(G=>Xn(G)?Xn(G,Xe.NAVIGATION_GUARD_REDIRECT)?G:Xt(G):we(G,q,te)).then(G=>{if(G){if(Xn(G,Xe.NAVIGATION_GUARD_REDIRECT))return S(Ne({replace:b},F(G.to),{state:typeof G.to=="object"?Ne({},J,G.to.state):J,force:A}),M||q)}else G=w(q,te,!0,b,J);return T(q,te,G),G})}function v(V,M){const N=U(V,M);return N?Promise.reject(N):Promise.resolve()}function y(V){const M=Kt.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(V):V()}function E(V,M){let N;const[te,J,A]=U0(V,M);N=Yu(te.reverse(),"beforeRouteLeave",V,M);for(const P of te)P.leaveGuards.forEach(q=>{N.push(Vr(q,V,M))});const b=v.bind(null,V,M);return N.push(b),pt(N).then(()=>{N=[];for(const P of i.list())N.push(Vr(P,V,M));return N.push(b),pt(N)}).then(()=>{N=Yu(J,"beforeRouteUpdate",V,M);for(const P of J)P.updateGuards.forEach(q=>{N.push(Vr(q,V,M))});return N.push(b),pt(N)}).then(()=>{N=[];for(const P of A)if(P.beforeEnter)if(Rn(P.beforeEnter))for(const q of P.beforeEnter)N.push(Vr(q,V,M));else N.push(Vr(P.beforeEnter,V,M));return N.push(b),pt(N)}).then(()=>(V.matched.forEach(P=>P.enterCallbacks={}),N=Yu(A,"beforeRouteEnter",V,M,y),N.push(b),pt(N))).then(()=>{N=[];for(const P of o.list())N.push(Vr(P,V,M));return N.push(b),pt(N)}).catch(P=>Xn(P,Xe.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function T(V,M,N){a.list().forEach(te=>y(()=>te(V,M,N)))}function w(V,M,N,te,J){const A=U(V,M);if(A)return A;const b=M===wr,P=hi?history.state:{};N&&(te||b?s.replace(V.fullPath,Ne({scroll:b&&P&&P.scroll},J)):s.push(V.fullPath,J)),l.value=V,Ft(V,M,N,b),Xt()}let I;function Ee(){I||(I=s.listen((V,M,N)=>{if(!zt.listening)return;const te=B(V),J=re(te,zt.currentRoute.value);if(J){S(Ne(J,{replace:!0,force:!0}),te).catch(zo);return}u=te;const A=l.value;hi&&V0(bm(A.fullPath,N.delta),Fl()),E(te,A).catch(b=>Xn(b,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_CANCELLED)?b:Xn(b,Xe.NAVIGATION_GUARD_REDIRECT)?(S(Ne(F(b.to),{force:!0}),te).then(P=>{Xn(P,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_DUPLICATED)&&!N.delta&&N.type===Vh.pop&&s.go(-1,!1)}).catch(zo),Promise.reject()):(N.delta&&s.go(-N.delta,!1),we(b,te,A))).then(b=>{b=b||w(te,A,!1),b&&(N.delta&&!Xn(b,Xe.NAVIGATION_CANCELLED)?s.go(-N.delta,!1):N.type===Vh.pop&&Xn(b,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),T(te,A,b)}).catch(zo)}))}let Be=bo(),xe=bo(),Ce;function we(V,M,N){Xt(V);const te=xe.list();return te.length?te.forEach(J=>J(V,M,N)):console.error(V),Promise.reject(V)}function Tt(){return Ce&&l.value!==wr?Promise.resolve():new Promise((V,M)=>{Be.add([V,M])})}function Xt(V){return Ce||(Ce=!V,Ee(),Be.list().forEach(([M,N])=>V?N(V):M()),Be.reset()),V}function Ft(V,M,N,te){const{scrollBehavior:J}=n;if(!hi||!J)return Promise.resolve();const A=!N&&D0(bm(V.fullPath,0))||(te||!N)&&history.state&&history.state.scroll||null;return wy().then(()=>J(V,M,A)).then(b=>b&&k0(b)).catch(b=>we(b,V,M))}const ot=V=>s.go(V);let pn;const Kt=new Set,zt={currentRoute:l,listening:!0,addRoute:g,removeRoute:R,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:C,resolve:B,options:n,push:H,replace:$,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:xe.add,isReady:Tt,install(V){V.component("RouterLink",ob),V.component("RouterView",ub),V.config.globalProperties.$router=zt,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>Ie(l)}),hi&&!pn&&l.value===wr&&(pn=!0,H(s.location).catch(te=>{}));const M={};for(const te in wr)Object.defineProperty(M,te,{get:()=>l.value[te],enumerable:!0});V.provide(Ul,zt),V.provide(Fd,vy(M)),V.provide(xh,l);const N=V.unmount;Kt.add(V),V.unmount=function(){Kt.delete(V),Kt.size<1&&(u=wr,I&&I(),I=null,l.value=wr,pn=!1,Ce=!1),N()}}};function pt(V){return V.reduce((M,N)=>M.then(()=>y(N)),Promise.resolve())}return zt}function qs(){return An(Ul)}function db(n){return An(Fd)}const ic=ge([]);let fb=0;function Bl(){return{toasts:ic,showToast:(e,t=2e3)=>{const r=++fb;ic.value.push({id:r,message:e}),setTimeout(()=>{ic.value=ic.value.filter(s=>s.id!==r)},t)}}}const Ks=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},pb={class:"toast_container"},mb={__name:"Toast",setup(n){const{toasts:e}=Bl();return(t,r)=>(oe(),he("div",pb,[Ve(z1,{name:"toast",tag:"div"},{default:Fn(()=>[(oe(!0),he($e,null,Ho(Ie(e),s=>(oe(),he("div",{key:s.id,class:"toast_item"},Je(s.message),1))),128))]),_:1})]))}},gb=Ks(mb,[["__scopeId","data-v-85e050dc"]]),_b={class:"app_root"},yb={__name:"App",setup(n){const e=db(),t=ge("slide-left");return Fr(()=>e.path,(r,s)=>{const i=["/splash","/signup"];if(i.includes(r)||i.includes(s)){t.value="fade";return}s==="/mypage"&&r==="/report"?t.value="slide-right":t.value="slide-left"},{immediate:!0}),(r,s)=>{const i=DT("router-view");return oe(),he("div",_b,[Ve(Vi,{name:t.value,mode:"out-in"},{default:Fn(()=>[Ve(i)]),_:1},8,["name"]),Ve(gb)])}}},vb=Ks(yb,[["__scopeId","data-v-5219c484"]]),Ib={class:"logo_wrapper"},Ab={__name:"index",setup(n){const e=qs();return an(()=>{setTimeout(()=>{e.replace("/signup")},3e3)}),(t,r)=>(oe(),he("div",Ib,[...r[0]||(r[0]=[Un('<div class="logo" data-v-3fb4302d><svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3fb4302d><g clip-path="url(#clip0_17_220)" data-v-3fb4302d><path d="M24 27H48" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-3fb4302d></path><path d="M24 39H34.5" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-3fb4302d></path><path d="M31.5 58.5L27 54H18C15.6131 54 13.3239 53.0518 11.636 51.364C9.94821 49.6761 9 47.3869 9 45V21C9 18.6131 9.94821 16.3239 11.636 14.636C13.3239 12.9482 15.6131 12 18 12H54C56.3869 12 58.6761 12.9482 60.364 14.636C62.0518 16.3239 63 18.6131 63 21V33" stroke="#535765" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-3fb4302d></path><path d="M54 66L64.05 56.148C64.6663 55.5499 65.1565 54.8345 65.4918 54.0438C65.827 53.2532 66.0004 52.4034 66.0018 51.5446C66.0032 50.6859 65.8326 49.8355 65.4999 49.0438C65.1672 48.2521 64.6793 47.535 64.065 46.935C62.8114 45.709 61.1286 45.021 59.3751 45.0177C57.6217 45.0143 55.9363 45.6958 54.678 46.917L54.006 47.577L53.337 46.917C52.0835 45.6919 50.4014 45.0045 48.6486 45.0011C46.8959 44.9977 45.2111 45.6787 43.953 46.899C43.3365 47.4968 42.846 48.2121 42.5105 49.0026C42.175 49.7932 42.0013 50.6429 41.9996 51.5017C41.998 52.3604 42.1684 53.2108 42.5008 54.0027C42.8332 54.7945 43.3208 55.5117 43.935 56.112L54 66Z" stroke="#7B509F" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" data-v-3fb4302d></path></g><defs data-v-3fb4302d><clipPath id="clip0_17_220" data-v-3fb4302d><rect width="72" height="72" fill="white" data-v-3fb4302d></rect></clipPath></defs></svg><p data-v-3fb4302d>BUG REPORT</p></div>',1)])]))}},Eb=Ks(Ab,[["__scopeId","data-v-3fb4302d"]]),wb=()=>{};var Fm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Tb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(t[h],t[f],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Cv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Tb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new bb;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const R=u<<6&192|f;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rb=function(n){const e=Cv(n);return Pv.encodeByteArray(e,!0)},Wc=function(n){return Rb(n).replace(/\./g,"")},kv=function(n){try{return Pv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=()=>Vv().__FIREBASE_DEFAULTS__,Cb=()=>{if(typeof process>"u"||typeof Fm>"u")return;const n=Fm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kv(n[1]);return e&&JSON.parse(e)},jl=()=>{try{return wb()||Sb()||Cb()||Pb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dv=n=>jl()?.emulatorHosts?.[n],kb=n=>{const e=Dv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xv=()=>jl()?.config,Nv=n=>jl()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ud(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Wc(JSON.stringify(t)),Wc(JSON.stringify(o)),""].join(".")}const Wo={};function xb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wo))Wo[e]?n.emulator.push(e):n.prod.push(e);return n}function Nb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Um=!1;function Ov(n,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||Wo[n]===e||Wo[n]||Um)return;Wo[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=xb().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Um=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=Nb(r),g=t("text"),R=document.getElementById(g)||document.createElement("span"),C=t("learnmore"),k=document.getElementById(C)||document.createElement("a"),B=t("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const U=m.element;a(U),h(k,C);const H=u();l(F,B),U.append(F,R,k,H),document.body.appendChild(U)}i?(R.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function Mv(){const n=jl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ub(){const n=ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Lv(){return!Mv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fv(){return!Mv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Uv(){try{return typeof indexedDB=="object"}catch{return!1}}function Bb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="FirebaseError";class Wn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jb,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Gb(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Wn(s,a,r)}}function Gb(n,e){return n.replace(Hb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Hb=/\{\$([^}]+)}/g;function qb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ns(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(Bm(i)&&Bm(o)){if(!Ns(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Bm(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kb(n,e){const t=new zb(n,e);return t.subscribe.bind(t)}class zb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Wb(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Xu),s.error===void 0&&(s.error=Xu),s.complete===void 0&&(s.complete=Xu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class Wr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Vb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xb(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yb(n){return n===ms?void 0:n}function Xb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Qb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const $b={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Zb=be.INFO,eR={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},tR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=eR[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bd{constructor(e){this.name=e,this._logLevel=Zb,this._logHandler=tR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$b[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const nR=(n,e)=>e.some(t=>n instanceof t);let jm,Gm;function rR(){return jm||(jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sR(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,Nh=new WeakMap,jv=new WeakMap,Ju=new WeakMap,jd=new WeakMap;function iR(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Ur(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Bv.set(t,n)}).catch(()=>{}),jd.set(e,n),e}function oR(n){if(Nh.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Nh.set(n,e)}let Oh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Nh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aR(n){Oh=n(Oh)}function cR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call($u(this),e,...t);return jv.set(r,e.sort?e.sort():[e]),Ur(r)}:sR().includes(n)?function(...e){return n.apply($u(this),e),Ur(Bv.get(this))}:function(...e){return Ur(n.apply($u(this),e))}}function lR(n){return typeof n=="function"?cR(n):(n instanceof IDBTransaction&&oR(n),nR(n,rR())?new Proxy(n,Oh):n)}function Ur(n){if(n instanceof IDBRequest)return iR(n);if(Ju.has(n))return Ju.get(n);const e=lR(n);return e!==n&&(Ju.set(n,e),jd.set(e,n)),e}const $u=n=>jd.get(n);function uR(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Ur(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ur(o.result),l.oldVersion,l.newVersion,Ur(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const hR=["get","getKey","getAll","getAllKeys","count"],dR=["put","add","delete","clear"],Zu=new Map;function Hm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zu.get(e))return Zu.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=dR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hR.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&l.done]))[0]};return Zu.set(e,i),i}aR(n=>({...n,get:(e,t,r)=>Hm(e,t)||n.get(e,t,r),has:(e,t)=>!!Hm(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function pR(n){return n.getComponent()?.type==="VERSION"}const Mh="@firebase/app",qm="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Bd("@firebase/app"),mR="@firebase/app-compat",gR="@firebase/analytics-compat",_R="@firebase/analytics",yR="@firebase/app-check-compat",vR="@firebase/app-check",IR="@firebase/auth",AR="@firebase/auth-compat",ER="@firebase/database",wR="@firebase/data-connect",TR="@firebase/database-compat",bR="@firebase/functions",RR="@firebase/functions-compat",SR="@firebase/installations",CR="@firebase/installations-compat",PR="@firebase/messaging",kR="@firebase/messaging-compat",VR="@firebase/performance",DR="@firebase/performance-compat",xR="@firebase/remote-config",NR="@firebase/remote-config-compat",OR="@firebase/storage",MR="@firebase/storage-compat",LR="@firebase/firestore",FR="@firebase/ai",UR="@firebase/firestore-compat",BR="firebase",jR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]",GR={[Mh]:"fire-core",[mR]:"fire-core-compat",[_R]:"fire-analytics",[gR]:"fire-analytics-compat",[vR]:"fire-app-check",[yR]:"fire-app-check-compat",[IR]:"fire-auth",[AR]:"fire-auth-compat",[ER]:"fire-rtdb",[wR]:"fire-data-connect",[TR]:"fire-rtdb-compat",[bR]:"fire-fn",[RR]:"fire-fn-compat",[SR]:"fire-iid",[CR]:"fire-iid-compat",[PR]:"fire-fcm",[kR]:"fire-fcm-compat",[VR]:"fire-perf",[DR]:"fire-perf-compat",[xR]:"fire-rc",[NR]:"fire-rc-compat",[OR]:"fire-gcs",[MR]:"fire-gcs-compat",[LR]:"fire-fst",[UR]:"fire-fst-compat",[FR]:"fire-vertex","fire-js":"fire-js",[BR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,HR=new Map,Fh=new Map;function Km(n,e){try{n.container.addComponent(e)}catch(t){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Os(n){const e=n.name;if(Fh.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Fh.set(e,n);for(const t of Qc.values())Km(t,n);for(const t of HR.values())Km(t,n);return!0}function Gl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function un(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Va("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=jR;function Gv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Lh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(t||(t=xv()),!t)throw Br.create("no-options");const i=Qc.get(s);if(i){if(Ns(t,i.options)&&Ns(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new Jb(s);for(const l of Fh.values())o.addComponent(l);const a=new KR(t,r,o);return Qc.set(s,a),a}function Hv(n=Lh){const e=Qc.get(n);if(!e&&n===Lh&&xv())return Gv();if(!e)throw Br.create("no-app",{appName:n});return e}function Bn(n,e,t){let r=GR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(o.join(" "));return}Os(new Wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebase-heartbeat-database",WR=1,fa="firebase-heartbeat-store";let eh=null;function qv(){return eh||(eh=uR(zR,WR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fa)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),eh}async function QR(n){try{const t=(await qv()).transaction(fa),r=await t.objectStore(fa).get(Kv(n));return await t.done,r}catch(e){if(e instanceof Wn)cr.warn(e.message);else{const t=Br.create("idb-get",{originalErrorMessage:e?.message});cr.warn(t.message)}}}async function zm(n,e){try{const r=(await qv()).transaction(fa,"readwrite");await r.objectStore(fa).put(e,Kv(n)),await r.done}catch(t){if(t instanceof Wn)cr.warn(t.message);else{const r=Br.create("idb-set",{originalErrorMessage:t?.message});cr.warn(r.message)}}}function Kv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=1024,XR=30;class JR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>XR){const s=eS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wm(),{heartbeatsToSend:t,unsentEntries:r}=$R(this._heartbeatsCache.heartbeats),s=Wc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return cr.warn(e),""}}}function Wm(){return new Date().toISOString().substring(0,10)}function $R(n,e=YR){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Qm(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Qm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ZR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uv()?Bb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qm(n){return Wc(JSON.stringify({version:2,heartbeats:n})).length}function eS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n){Os(new Wr("platform-logger",e=>new fR(e),"PRIVATE")),Os(new Wr("heartbeat",e=>new JR(e),"PRIVATE")),Bn(Mh,qm,n),Bn(Mh,qm,"esm2020"),Bn("fire-js","")}tS("");var nS="firebase",rS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(nS,rS,"app");var Ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,zv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function y(){}y.prototype=v.prototype,S.F=v.prototype,S.prototype=new y,S.prototype.constructor=S,S.D=function(E,T,w){for(var I=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)I[Ee-2]=arguments[Ee];return v.prototype[T].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,v,y){y||(y=0);const E=Array(16);if(typeof v=="string")for(var T=0;T<16;++T)E[T]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(T=0;T<16;++T)E[T]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=S.g[0],y=S.g[1],T=S.g[2];let w=S.g[3],I;I=v+(w^y&(T^w))+E[0]+3614090360&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+E[1]+3905402710&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+E[2]+606105819&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+E[3]+3250441966&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+E[4]+4118548399&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+E[5]+1200080426&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+E[6]+2821735955&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+E[7]+4249261313&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+E[8]+1770035416&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+E[9]+2336552879&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+E[10]+4294925233&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+E[11]+2304563134&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(w^y&(T^w))+E[12]+1804603682&4294967295,v=y+(I<<7&4294967295|I>>>25),I=w+(T^v&(y^T))+E[13]+4254626195&4294967295,w=v+(I<<12&4294967295|I>>>20),I=T+(y^w&(v^y))+E[14]+2792965006&4294967295,T=w+(I<<17&4294967295|I>>>15),I=y+(v^T&(w^v))+E[15]+1236535329&4294967295,y=T+(I<<22&4294967295|I>>>10),I=v+(T^w&(y^T))+E[1]+4129170786&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+E[6]+3225465664&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+E[11]+643717713&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+E[0]+3921069994&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+E[5]+3593408605&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+E[10]+38016083&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+E[15]+3634488961&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+E[4]+3889429448&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+E[9]+568446438&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+E[14]+3275163606&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+E[3]+4107603335&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+E[8]+1163531501&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(T^w&(y^T))+E[13]+2850285829&4294967295,v=y+(I<<5&4294967295|I>>>27),I=w+(y^T&(v^y))+E[2]+4243563512&4294967295,w=v+(I<<9&4294967295|I>>>23),I=T+(v^y&(w^v))+E[7]+1735328473&4294967295,T=w+(I<<14&4294967295|I>>>18),I=y+(w^v&(T^w))+E[12]+2368359562&4294967295,y=T+(I<<20&4294967295|I>>>12),I=v+(y^T^w)+E[5]+4294588738&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+E[8]+2272392833&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+E[11]+1839030562&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+E[14]+4259657740&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+E[1]+2763975236&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+E[4]+1272893353&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+E[7]+4139469664&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+E[10]+3200236656&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+E[13]+681279174&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+E[0]+3936430074&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+E[3]+3572445317&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+E[6]+76029189&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(y^T^w)+E[9]+3654602809&4294967295,v=y+(I<<4&4294967295|I>>>28),I=w+(v^y^T)+E[12]+3873151461&4294967295,w=v+(I<<11&4294967295|I>>>21),I=T+(w^v^y)+E[15]+530742520&4294967295,T=w+(I<<16&4294967295|I>>>16),I=y+(T^w^v)+E[2]+3299628645&4294967295,y=T+(I<<23&4294967295|I>>>9),I=v+(T^(y|~w))+E[0]+4096336452&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+E[7]+1126891415&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+E[14]+2878612391&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+E[5]+4237533241&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+E[12]+1700485571&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+E[3]+2399980690&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+E[10]+4293915773&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+E[1]+2240044497&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+E[8]+1873313359&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+E[15]+4264355552&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+E[6]+2734768916&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+E[13]+1309151649&4294967295,y=T+(I<<21&4294967295|I>>>11),I=v+(T^(y|~w))+E[4]+4149444226&4294967295,v=y+(I<<6&4294967295|I>>>26),I=w+(y^(v|~T))+E[11]+3174756917&4294967295,w=v+(I<<10&4294967295|I>>>22),I=T+(v^(w|~y))+E[2]+718787259&4294967295,T=w+(I<<15&4294967295|I>>>17),I=y+(w^(T|~v))+E[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+w&4294967295}r.prototype.v=function(S,v){v===void 0&&(v=S.length);const y=v-this.blockSize,E=this.C;let T=this.h,w=0;for(;w<v;){if(T==0)for(;w<=y;)s(this,S,w),w+=this.blockSize;if(typeof S=="string"){for(;w<v;)if(E[T++]=S.charCodeAt(w++),T==this.blockSize){s(this,E),T=0;break}}else for(;w<v;)if(E[T++]=S[w++],T==this.blockSize){s(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var y=S.length-8;y<S.length;++y)S[y]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,y=0;y<4;++y)for(let E=0;E<32;E+=8)S[v++]=this.g[y]>>>E&255;return S};function i(S,v){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=v(S)}function o(S,v){this.h=v;const y=[];let E=!0;for(let T=S.length-1;T>=0;T--){const w=S[T]|0;E&&w==v||(y[T]=w,E=!1)}this.g=y}var a={};function l(S){return-128<=S&&S<128?i(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return k(u(-S));const v=[];let y=1;for(let E=0;S>=y;E++)v[E]=S/y|0,y*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return k(h(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(v,8));let E=f;for(let w=0;w<S.length;w+=8){var T=Math.min(8,S.length-w);const I=parseInt(S.substring(w,w+T),v);T<8?(T=u(Math.pow(v,T)),E=E.j(T).add(u(I))):(E=E.j(y),E=E.add(u(I)))}return E}var f=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(C(this))return-k(this).m();let S=0,v=1;for(let y=0;y<this.g.length;y++){const E=this.i(y);S+=(E>=0?E:4294967296+E)*v,v*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R(this))return"0";if(C(this))return"-"+k(this).toString(S);const v=u(Math.pow(S,6));var y=this;let E="";for(;;){const T=H(y,v).g;y=B(y,T.j(v));let w=((y.g.length>0?y.g[0]:y.h)>>>0).toString(S);if(y=T,R(y))return w+E;for(;w.length<6;)w="0"+w;E=w+E}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function R(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function C(S){return S.h==-1}n.l=function(S){return S=B(this,S),C(S)?-1:R(S)?0:1};function k(S){const v=S.g.length,y=[];for(let E=0;E<v;E++)y[E]=~S.g[E];return new o(y,~S.h).add(m)}n.abs=function(){return C(this)?k(this):this},n.add=function(S){const v=Math.max(this.g.length,S.g.length),y=[];let E=0;for(let T=0;T<=v;T++){let w=E+(this.i(T)&65535)+(S.i(T)&65535),I=(w>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);E=I>>>16,w&=65535,I&=65535,y[T]=I<<16|w}return new o(y,y[y.length-1]&-2147483648?-1:0)};function B(S,v){return S.add(k(v))}n.j=function(S){if(R(this)||R(S))return f;if(C(this))return C(S)?k(this).j(k(S)):k(k(this).j(S));if(C(S))return k(this.j(k(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const v=this.g.length+S.g.length,y=[];for(var E=0;E<2*v;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(let T=0;T<S.g.length;T++){const w=this.i(E)>>>16,I=this.i(E)&65535,Ee=S.i(T)>>>16,Be=S.i(T)&65535;y[2*E+2*T]+=I*Be,F(y,2*E+2*T),y[2*E+2*T+1]+=w*Be,F(y,2*E+2*T+1),y[2*E+2*T+1]+=I*Ee,F(y,2*E+2*T+1),y[2*E+2*T+2]+=w*Ee,F(y,2*E+2*T+2)}for(S=0;S<v;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=v;S<2*v;S++)y[S]=0;return new o(y,0)};function F(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function U(S,v){this.g=S,this.h=v}function H(S,v){if(R(v))throw Error("division by zero");if(R(S))return new U(f,f);if(C(S))return v=H(k(S),v),new U(k(v.g),k(v.h));if(C(v))return v=H(S,k(v)),new U(k(v.g),v.h);if(S.g.length>30){if(C(S)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var y=m,E=v;E.l(S)<=0;)y=$(y),E=$(E);var T=re(y,1),w=re(E,1);for(E=re(E,2),y=re(y,2);!R(E);){var I=w.add(E);I.l(S)<=0&&(T=T.add(y),w=I),E=re(E,1),y=re(y,1)}return v=B(S,T.j(v)),new U(T,v)}for(T=f;S.l(v)>=0;){for(y=Math.max(1,Math.floor(S.m()/v.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),w=u(y),I=w.j(v);C(I)||I.l(S)>0;)y-=E,w=u(y),I=w.j(v);R(w)&&(w=m),T=T.add(w),S=B(S,I)}return new U(T,S)}n.B=function(S){return H(this,S).h},n.and=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let E=0;E<v;E++)y[E]=this.i(E)&S.i(E);return new o(y,this.h&S.h)},n.or=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let E=0;E<v;E++)y[E]=this.i(E)|S.i(E);return new o(y,this.h|S.h)},n.xor=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let E=0;E<v;E++)y[E]=this.i(E)^S.i(E);return new o(y,this.h^S.h)};function $(S){const v=S.g.length+1,y=[];for(let E=0;E<v;E++)y[E]=S.i(E)<<1|S.i(E-1)>>>31;return new o(y,S.h)}function re(S,v){const y=v>>5;v%=32;const E=S.g.length-y,T=[];for(let w=0;w<E;w++)T[w]=v>0?S.i(w+y)>>>v|S.i(w+y+1)<<32-v:S.i(w+y);return new o(T,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,jr=o}).apply(typeof Ym<"u"?Ym:typeof self<"u"?self:typeof window<"u"?window:{});var oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wv,xo,Qv,Ic,Uh,Yv,Xv,Jv;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oc=="object"&&oc];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function s(c,d){if(d)e:{var p=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var x=c[_];if(!(x in p))break e;p=p[x]}c=c[c.length-1],_=p[c],d=d(_),d!=_&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(d){var p=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&p.push([_,d[_]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,p){return c.call.apply(c.bind,arguments)}function u(c,d,p){return u=l,u.apply(null,arguments)}function h(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function f(c,d){function p(){}p.prototype=d.prototype,c.Z=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Ob=function(_,x,L){for(var Z=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)Z[ve-2]=arguments[ve];return d.prototype[x].apply(_,Z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const p=Array(d);for(let _=0;_<d;_++)p[_]=c[_];return p}return[]}function R(c,d){for(let _=1;_<arguments.length;_++){const x=arguments[_];var p=typeof x;if(p=p!="object"?p:x?Array.isArray(x)?"array":p:"null",p=="array"||p=="object"&&typeof x.length=="number"){p=c.length||0;const L=x.length||0;c.length=p+L;for(let Z=0;Z<L;Z++)c[p+Z]=x[Z]}else c.push(x)}}class C{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(c){o.setTimeout(()=>{throw c},0)}function B(){var c=S;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class F{constructor(){this.h=this.g=null}add(d,p){const _=U.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var U=new C(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let $,re=!1,S=new F,v=()=>{const c=Promise.resolve(void 0);$=()=>{c.then(y)}};function y(){for(var c;c=B();){try{c.h.call(c.g)}catch(p){k(p)}var d=U;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}re=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};o.addEventListener("test",p,d),o.removeEventListener("test",p,d)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ee(c,d){T.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(Ee,T),Ee.prototype.init=function(c,d){const p=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),xe=0;function Ce(c,d,p,_,x){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=x,this.key=++xe,this.da=this.fa=!1}function we(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tt(c,d,p){for(const _ in c)d.call(p,c[_],_,c)}function Xt(c,d){for(const p in c)d.call(void 0,c[p],p,c)}function Ft(c){const d={};for(const p in c)d[p]=c[p];return d}const ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pn(c,d){let p,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(p in _)c[p]=_[p];for(let L=0;L<ot.length;L++)p=ot[L],Object.prototype.hasOwnProperty.call(_,p)&&(c[p]=_[p])}}function Kt(c){this.src=c,this.g={},this.h=0}Kt.prototype.add=function(c,d,p,_,x){const L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);const Z=pt(c,d,_,x);return Z>-1?(d=c[Z],p||(d.fa=!1)):(d=new Ce(d,this.src,L,!!_,x),d.fa=p,c.push(d)),d};function zt(c,d){const p=d.type;if(p in c.g){var _=c.g[p],x=Array.prototype.indexOf.call(_,d,void 0),L;(L=x>=0)&&Array.prototype.splice.call(_,x,1),L&&(we(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function pt(c,d,p,_){for(let x=0;x<c.length;++x){const L=c[x];if(!L.da&&L.listener==d&&L.capture==!!p&&L.ha==_)return x}return-1}var V="closure_lm_"+(Math.random()*1e6|0),M={};function N(c,d,p,_,x){if(Array.isArray(d)){for(let L=0;L<d.length;L++)N(c,d[L],p,_,x);return null}return p=ne(p),c&&c[Be]?c.J(d,p,a(_)?!!_.capture:!1,x):te(c,d,p,!1,_,x)}function te(c,d,p,_,x,L){if(!d)throw Error("Invalid event type");const Z=a(x)?!!x.capture:!!x;let ve=K(c);if(ve||(c[V]=ve=new Kt(c)),p=ve.add(d,p,_,Z,L),p.proxy)return p;if(_=J(),p.proxy=_,_.src=c,_.listener=p,c.addEventListener)w||(x=Z),x===void 0&&(x=!1),c.addEventListener(d.toString(),_,x);else if(c.attachEvent)c.attachEvent(P(d.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function J(){function c(p){return d.call(c.src,c.listener,p)}const d=q;return c}function A(c,d,p,_,x){if(Array.isArray(d))for(var L=0;L<d.length;L++)A(c,d[L],p,_,x);else _=a(_)?!!_.capture:!!_,p=ne(p),c&&c[Be]?(c=c.i,L=String(d).toString(),L in c.g&&(d=c.g[L],p=pt(d,p,_,x),p>-1&&(we(d[p]),Array.prototype.splice.call(d,p,1),d.length==0&&(delete c.g[L],c.h--)))):c&&(c=K(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pt(d,p,_,x)),(p=c>-1?d[c]:null)&&b(p))}function b(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Be])zt(d.i,c);else{var p=c.type,_=c.proxy;d.removeEventListener?d.removeEventListener(p,_,c.capture):d.detachEvent?d.detachEvent(P(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=K(d))?(zt(p,c),p.h==0&&(p.src=null,d[V]=null)):we(c)}}}function P(c){return c in M?M[c]:M[c]="on"+c}function q(c,d){if(c.da)c=!0;else{d=new Ee(d,this);const p=c.listener,_=c.ha||c.src;c.fa&&b(c),c=p.call(_,d)}return c}function K(c){return c=c[V],c instanceof Kt?c:null}var G="__closure_events_fn_"+(Math.random()*1e9>>>0);function ne(c){return typeof c=="function"?c:(c[G]||(c[G]=function(d){return c.handleEvent(d)}),c[G])}function Y(){E.call(this),this.i=new Kt(this),this.M=this,this.G=null}f(Y,E),Y.prototype[Be]=!0,Y.prototype.removeEventListener=function(c,d,p,_){A(this,c,d,p,_)};function W(c,d){var p,_=c.G;if(_)for(p=[];_;_=_.G)p.push(_);if(c=c.M,_=d.type||d,typeof d=="string")d=new T(d,c);else if(d instanceof T)d.target=d.target||c;else{var x=d;d=new T(_,c),pn(d,x)}x=!0;let L,Z;if(p)for(Z=p.length-1;Z>=0;Z--)L=d.g=p[Z],x=Q(L,_,!0,d)&&x;if(L=d.g=c,x=Q(L,_,!0,d)&&x,x=Q(L,_,!1,d)&&x,p)for(Z=0;Z<p.length;Z++)L=d.g=p[Z],x=Q(L,_,!1,d)&&x}Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const p=c.g[d];for(let _=0;_<p.length;_++)we(p[_]);delete c.g[d],c.h--}}this.G=null},Y.prototype.J=function(c,d,p,_){return this.i.add(String(c),d,!1,p,_)},Y.prototype.K=function(c,d,p,_){return this.i.add(String(c),d,!0,p,_)};function Q(c,d,p,_){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let x=!0;for(let L=0;L<d.length;++L){const Z=d[L];if(Z&&!Z.da&&Z.capture==p){const ve=Z.listener,at=Z.ha||Z.src;Z.fa&&zt(c.i,Z),x=ve.call(at,_)!==!1&&x}}return x&&!_.defaultPrevented}function de(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function se(c){c.g=de(()=>{c.g=null,c.i&&(c.i=!1,se(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class ue extends E{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(c){E.call(this),this.h=c,this.g={}}f(fe,E);var Te=[];function Me(c){Tt(c.g,function(d,p){this.g.hasOwnProperty(p)&&b(d)},c),c.g={}}fe.prototype.N=function(){fe.Z.N.call(this),Me(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=o.JSON.stringify,bt=o.JSON.parse,Rt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Jt(){}function $t(){}var mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xs(){T.call(this,"d")}f(Xs,T);function vt(){T.call(this,"c")}f(vt,T);var mt={},oo=null;function is(){return oo=oo||new Y}mt.Ia="serverreachability";function Jf(c){T.call(this,mt.Ia,c)}f(Jf,T);function ao(c){const d=is();W(d,new Jf(d))}mt.STAT_EVENT="statevent";function $f(c,d){T.call(this,mt.STAT_EVENT,c),this.stat=d}f($f,T);function Ut(c){const d=is();W(d,new $f(d,c))}mt.Ja="timingevent";function Zf(c,d){T.call(this,mt.Ja,c),this.size=d}f(Zf,T);function co(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function lo(){this.g=!0}lo.prototype.ua=function(){this.g=!1};function lw(c,d,p,_,x,L){c.info(function(){if(c.g)if(L){var Z="",ve=L.split("&");for(let je=0;je<ve.length;je++){var at=ve[je].split("=");if(at.length>1){const gt=at[0];at=at[1];const Cn=gt.split("_");Z=Cn.length>=2&&Cn[1]=="type"?Z+(gt+"="+at+"&"):Z+(gt+"=redacted&")}}}else Z=null;else Z=L;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+d+`
`+p+`
`+Z})}function uw(c,d,p,_,x,L,Z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+d+`
`+p+`
`+L+" "+Z})}function Js(c,d,p,_){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+dw(c,p)+(_?" "+_:"")})}function hw(c,d){c.info(function(){return"TIMEOUT: "+d})}lo.prototype.info=function(){};function dw(c,d){if(!c.g)return d;if(!d)return null;try{const L=JSON.parse(d);if(L){for(c=0;c<L.length;c++)if(Array.isArray(L[c])){var p=L[c];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var x=_[0];if(x!="noop"&&x!="stop"&&x!="close")for(let Z=1;Z<_.length;Z++)_[Z]=""}}}}return Pe(L)}catch{return d}}var Ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ep={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tp;function Iu(){}f(Iu,Jt),Iu.prototype.g=function(){return new XMLHttpRequest},tp=new Iu;function uo(c){return encodeURIComponent(String(c))}function fw(c){var d=1;c=c.split(":");const p=[];for(;d>0&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function gr(c,d,p,_){this.j=c,this.i=d,this.l=p,this.S=_||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var rp={},Au={};function Eu(c,d,p){c.M=1,c.A=Wa(Sn(d)),c.u=p,c.R=!0,sp(c,null)}function sp(c,d){c.F=Date.now(),za(c),c.B=Sn(c.A);var p=c.B,_=c.S;Array.isArray(_)||(_=[String(_)]),_p(p.i,"t",_),c.C=0,p=c.j.L,c.h=new np,c.g=Op(c.j,p?d:null,!c.u),c.P>0&&(c.O=new ue(u(c.Y,c,c.g),c.P)),d=c.V,p=c.g,_=c.ba;var x="readystatechange";Array.isArray(x)||(x&&(Te[0]=x.toString()),x=Te);for(let L=0;L<x.length;L++){const Z=N(p,x[L],_||d.handleEvent,!1,d.h||d);if(!Z)break;d.g[Z.key]=Z}d=c.J?Ft(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),ao(),lw(c.i,c.v,c.B,c.l,c.S,c.u)}gr.prototype.ba=function(c){c=c.target;const d=this.O;d&&vr(c)==3?d.j():this.Y(c)},gr.prototype.Y=function(c){try{if(c==this.g)e:{const ve=vr(this.g),at=this.g.ya(),je=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Tp(this.g)))){this.K||ve!=4||at==7||(at==8||je<=0?ao(3):ao(2)),wu(this);var d=this.g.ca();this.X=d;var p=pw(this);if(this.o=d==200,uw(this.i,this.v,this.B,this.l,this.S,ve,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,x=this.g;if((_=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_)){var L=_;break t}}L=null}if(c=L)Js(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tu(this,c);else{this.o=!1,this.m=3,Ut(12),os(this),ho(this);break e}}if(this.R){c=!0;let gt;for(;!this.K&&this.C<p.length;)if(gt=mw(this,p),gt==Au){ve==4&&(this.m=4,Ut(14),c=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==rp){this.m=4,Ut(15),Js(this.i,this.l,p,"[Invalid Chunk]"),c=!1;break}else Js(this.i,this.l,gt,null),Tu(this,gt);if(ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||p.length!=0||this.h.h||(this.m=1,Ut(16),c=!1),this.o=this.o&&c,!c)Js(this.i,this.l,p,"[Invalid Chunked Response]"),os(this),ho(this);else if(p.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Du(Z),Z.P=!0,Ut(11))}}else Js(this.i,this.l,p,null),Tu(this,p);ve==4&&os(this),this.o&&!this.K&&(ve==4?Vp(this.j,this):(this.o=!1,za(this)))}else Pw(this.g),d==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),os(this),ho(this)}}}catch{}finally{}};function pw(c){if(!ip(c))return c.g.la();const d=Tp(c.g);if(d==="")return"";let p="";const _=d.length,x=vr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return os(c),ho(c),"";c.h.i=new o.TextDecoder}for(let L=0;L<_;L++)c.h.h=!0,p+=c.h.i.decode(d[L],{stream:!(x&&L==_-1)});return d.length=0,c.h.g+=p,c.C=0,c.h.g}function ip(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function mw(c,d){var p=c.C,_=d.indexOf(`
`,p);return _==-1?Au:(p=Number(d.substring(p,_)),isNaN(p)?rp:(_+=1,_+p>d.length?Au:(d=d.slice(_,_+p),c.C=_+p,d)))}gr.prototype.cancel=function(){this.K=!0,os(this)};function za(c){c.T=Date.now()+c.H,op(c,c.H)}function op(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=co(u(c.aa,c),d)}function wu(c){c.D&&(o.clearTimeout(c.D),c.D=null)}gr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(hw(this.i,this.B),this.M!=2&&(ao(),Ut(17)),os(this),this.m=2,ho(this)):op(this,this.T-c)};function ho(c){c.j.I==0||c.K||Vp(c.j,c)}function os(c){wu(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Me(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Tu(c,d){try{var p=c.j;if(p.I!=0&&(p.g==c||bu(p.h,c))){if(!c.L&&bu(p.h,c)&&p.I==3){try{var _=p.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<c.F)$a(p),Xa(p);else break e;Vu(p),Ut(18)}}else p.xa=x[1],0<p.xa-p.K&&x[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=co(u(p.Va,p),6e3));lp(p.h)<=1&&p.ta&&(p.ta=void 0)}else cs(p,11)}else if((c.L||p.g==c)&&$a(p),!I(d))for(x=p.Ba.g.parse(d),d=0;d<x.length;d++){let je=x[d];const gt=je[0];if(!(gt<=p.K))if(p.K=gt,je=je[1],p.I==2)if(je[0]=="c"){p.M=je[1],p.ba=je[2];const Cn=je[3];Cn!=null&&(p.ka=Cn,p.j.info("VER="+p.ka));const ls=je[4];ls!=null&&(p.za=ls,p.j.info("SVER="+p.za));const Ir=je[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(_=1.5*Ir,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Ar=c.g;if(Ar){const ec=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var L=_.h;L.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ru(L,L.h),L.h=null))}if(_.G){const xu=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;xu&&(_.wa=xu,ze(_.J,_.G,xu))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-c.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var Z=c;if(_.na=Np(_,_.L?_.ba:null,_.W),Z.L){up(_.h,Z);var ve=Z,at=_.O;at&&(ve.H=at),ve.D&&(wu(ve),za(ve)),_.g=Z}else Pp(_);p.i.length>0&&Ja(p)}else je[0]!="stop"&&je[0]!="close"||cs(p,7);else p.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?cs(p,7):ku(p):je[0]!="noop"&&p.l&&p.l.qa(je),p.A=0)}}ao(4)}catch{}}var gw=class{constructor(c,d){this.g=c,this.map=d}};function ap(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cp(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lp(c){return c.h?1:c.g?c.g.size:0}function bu(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ru(c,d){c.g?c.g.add(d):c.h=d}function up(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ap.prototype.cancel=function(){if(this.i=hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hp(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const p of c.g.values())d=d.concat(p.G);return d}return g(c.i)}var dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _w(c,d){if(c){c=c.split("&");for(let p=0;p<c.length;p++){const _=c[p].indexOf("=");let x,L=null;_>=0?(x=c[p].substring(0,_),L=c[p].substring(_+1)):x=c[p],d(x,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _r(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof _r?(this.l=c.l,fo(this,c.j),this.o=c.o,this.g=c.g,po(this,c.u),this.h=c.h,Su(this,yp(c.i)),this.m=c.m):c&&(d=String(c).match(dp))?(this.l=!1,fo(this,d[1]||"",!0),this.o=mo(d[2]||""),this.g=mo(d[3]||"",!0),po(this,d[4]),this.h=mo(d[5]||"",!0),Su(this,d[6]||"",!0),this.m=mo(d[7]||"")):(this.l=!1,this.i=new _o(null,this.l))}_r.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(go(d,fp,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(go(d,fp,!0),"@"),c.push(uo(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&c.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(go(p,p.charAt(0)=="/"?Iw:vw,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",go(p,Ew)),c.join("")},_r.prototype.resolve=function(c){const d=Sn(this);let p=!!c.j;p?fo(d,c.j):p=!!c.o,p?d.o=c.o:p=!!c.g,p?d.g=c.g:p=c.u!=null;var _=c.h;if(p)po(d,c.u);else if(p=!!c.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var x=d.h.lastIndexOf("/");x!=-1&&(_=d.h.slice(0,x+1)+_)}if(x=_,x==".."||x==".")_="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){_=x.lastIndexOf("/",0)==0,x=x.split("/");const L=[];for(let Z=0;Z<x.length;){const ve=x[Z++];ve=="."?_&&Z==x.length&&L.push(""):ve==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),_&&Z==x.length&&L.push("")):(L.push(ve),_=!0)}_=L.join("/")}else _=x}return p?d.h=_:p=c.i.toString()!=="",p?Su(d,yp(c.i)):p=!!c.m,p&&(d.m=c.m),d};function Sn(c){return new _r(c)}function fo(c,d,p){c.j=p?mo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function po(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Su(c,d,p){d instanceof _o?(c.i=d,ww(c.i,c.l)):(p||(d=go(d,Aw)),c.i=new _o(d,c.l))}function ze(c,d,p){c.i.set(d,p)}function Wa(c){return ze(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function mo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function go(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,yw),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fp=/[#\/\?@]/g,vw=/[#\?:]/g,Iw=/[#\?]/g,Aw=/[#\?@]/g,Ew=/#/g;function _o(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function as(c){c.g||(c.g=new Map,c.h=0,c.i&&_w(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=_o.prototype,n.add=function(c,d){as(this),this.i=null,c=$s(this,c);let p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function pp(c,d){as(c),d=$s(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mp(c,d){return as(c),d=$s(c,d),c.g.has(d)}n.forEach=function(c,d){as(this),this.g.forEach(function(p,_){p.forEach(function(x){c.call(d,x,_,this)},this)},this)};function gp(c,d){as(c);let p=[];if(typeof d=="string")mp(c,d)&&(p=p.concat(c.g.get($s(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)p=p.concat(c[d]);return p}n.set=function(c,d){return as(this),this.i=null,c=$s(this,c),mp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=gp(this,c),c.length>0?String(c[0]):d):d};function _p(c,d,p){pp(c,d),p.length>0&&(c.i=null,c.g.set($s(c,d),g(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var p=d[_];const x=uo(p);p=gp(this,p);for(let L=0;L<p.length;L++){let Z=x;p[L]!==""&&(Z+="="+uo(p[L])),c.push(Z)}}return this.i=c.join("&")};function yp(c){const d=new _o;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function $s(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function ww(c,d){d&&!c.j&&(as(c),c.i=null,c.g.forEach(function(p,_){const x=_.toLowerCase();_!=x&&(pp(this,_),_p(this,x,p))},c)),c.j=d}function Tw(c,d){const p=new lo;if(o.Image){const _=new Image;_.onload=h(yr,p,"TestLoadImage: loaded",!0,d,_),_.onerror=h(yr,p,"TestLoadImage: error",!1,d,_),_.onabort=h(yr,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(yr,p,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else d(!1)}function bw(c,d){const p=new lo,_=new AbortController,x=setTimeout(()=>{_.abort(),yr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:_.signal}).then(L=>{clearTimeout(x),L.ok?yr(p,"TestPingServer: ok",!0,d):yr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(x),yr(p,"TestPingServer: error",!1,d)})}function yr(c,d,p,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(p)}catch{}}function Rw(){this.g=new Rt}function Cu(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Cu,Jt),Cu.prototype.g=function(){return new Qa(this.i,this.h)};function Qa(c,d){Y.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Qa,Y),n=Qa.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,vo(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vp(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function vp(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?yo(this):vo(this),this.readyState==3&&vp(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,yo(this))},n.Na=function(c){this.g&&(this.response=c,yo(this))},n.ga=function(){this.g&&yo(this)};function yo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,vo(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function vo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ip(c){let d="";return Tt(c,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function Pu(c,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Ip(p),typeof c=="string"?p!=null&&uo(p):ze(c,d,p))}function Ye(c){Y.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ye,Y);var Sw=/^https?$/i,Cw=["POST","PUT"];n=Ye.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tp.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(L){Ap(this,L);return}if(c=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)p.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())p.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),x=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Cw,d,void 0)>=0)||_||x||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Z]of p)this.g.setRequestHeader(L,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(L){Ap(this,L)}};function Ap(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Ep(c),Ya(c)}function Ep(c){c.A||(c.A=!0,W(c,"complete"),W(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,W(this,"complete"),W(this,"abort"),Ya(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?wp(this):this.Xa())},n.Xa=function(){wp(this)};function wp(c){if(c.h&&typeof i<"u"){if(c.v&&vr(c)==4)setTimeout(c.Ca.bind(c),0);else if(W(c,"readystatechange"),vr(c)==4){c.h=!1;try{const L=c.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=L===0){let Z=String(c.D).match(dp)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),_=!Sw.test(Z?Z.toLowerCase():"")}p=_}if(p)W(c,"complete"),W(c,"success");else{c.o=6;try{var x=vr(c)>2?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.ca()+"]",Ep(c)}}finally{Ya(c)}}}}function Ya(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const p=c.g;c.g=null,d||W(c,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),bt(d)}};function Tp(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pw(c){const d={};c=(c.g&&vr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(I(c[_]))continue;var p=fw(c[_]);const x=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=d[x]||[];d[x]=L,L.push(p)}Xt(d,function(_){return _.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function bp(c){this.za=0,this.i=[],this.j=new lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Io("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Io("baseRetryDelayMs",5e3,c),this.Za=Io("retryDelaySeedMs",1e4,c),this.Ta=Io("forwardChannelMaxRetries",2,c),this.va=Io("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ap(c&&c.concurrentRequestLimit),this.Ba=new Rw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=bp.prototype,n.ka=8,n.I=1,n.connect=function(c,d,p,_){Ut(0),this.W=c,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=Np(this,null,this.W),Ja(this)};function ku(c){if(Rp(c),c.I==3){var d=c.V++,p=Sn(c.J);if(ze(p,"SID",c.M),ze(p,"RID",d),ze(p,"TYPE","terminate"),Ao(c,p),d=new gr(c,c.j,d),d.M=2,d.A=Wa(Sn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=d.A,p=!0),p||(d.g=Op(d.j,null),d.g.ea(d.A)),d.F=Date.now(),za(d)}xp(c)}function Xa(c){c.g&&(Du(c),c.g.cancel(),c.g=null)}function Rp(c){Xa(c),c.v&&(o.clearTimeout(c.v),c.v=null),$a(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ja(c){if(!cp(c.h)&&!c.m){c.m=!0;var d=c.Ea;$||v(),re||($(),re=!0),S.add(d,c),c.D=0}}function kw(c,d){return lp(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=co(u(c.Ea,c,d),Dp(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const x=new gr(this,this.j,c);let L=this.o;if(this.U&&(L?(L=Ft(L),pn(L,this.U)):L=this.U),this.u!==null||this.R||(x.J=L,L=null),this.S)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Cp(this,x,d),p=Sn(this.J),ze(p,"RID",c),ze(p,"CVER",22),this.G&&ze(p,"X-HTTP-Session-Id",this.G),Ao(this,p),L&&(this.R?d="headers="+uo(Ip(L))+"&"+d:this.u&&Pu(p,this.u,L)),Ru(this.h,x),this.Ra&&ze(p,"TYPE","init"),this.S?(ze(p,"$req",d),ze(p,"SID","null"),x.U=!0,Eu(x,p,null)):Eu(x,p,d),this.I=2}}else this.I==3&&(c?Sp(this,c):this.i.length==0||cp(this.h)||Sp(this))};function Sp(c,d){var p;d?p=d.l:p=c.V++;const _=Sn(c.J);ze(_,"SID",c.M),ze(_,"RID",p),ze(_,"AID",c.K),Ao(c,_),c.u&&c.o&&Pu(_,c.u,c.o),p=new gr(c,c.j,p,c.D+1),c.u===null&&(p.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Cp(c,p,1e3),p.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ru(c.h,p),Eu(p,_,d)}function Ao(c,d){c.H&&Tt(c.H,function(p,_){ze(d,_,p)}),c.l&&Tt({},function(p,_){ze(d,_,p)})}function Cp(c,d,p){p=Math.min(c.i.length,p);const _=c.l?u(c.l.Ka,c.l,c):null;e:{var x=c.i;let ve=-1;for(;;){const at=["count="+p];ve==-1?p>0?(ve=x[0].g,at.push("ofs="+ve)):ve=0:at.push("ofs="+ve);let je=!0;for(let gt=0;gt<p;gt++){var L=x[gt].g;const Cn=x[gt].map;if(L-=ve,L<0)ve=Math.max(0,x[gt].g-100),je=!1;else try{L="req"+L+"_"||"";try{var Z=Cn instanceof Map?Cn:Object.entries(Cn);for(const[ls,Ir]of Z){let Ar=Ir;a(Ir)&&(Ar=Pe(Ir)),at.push(L+ls+"="+encodeURIComponent(Ar))}}catch(ls){throw at.push(L+"type="+encodeURIComponent("_badmap")),ls}}catch{_&&_(Cn)}}if(je){Z=at.join("&");break e}}Z=void 0}return c=c.i.splice(0,p),d.G=c,Z}function Pp(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;$||v(),re||($(),re=!0),S.add(d,c),c.A=0}}function Vu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=co(u(c.Da,c),Dp(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,kp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=co(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Xa(this),kp(this))};function Du(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function kp(c){c.g=new gr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Sn(c.na);ze(d,"RID","rpc"),ze(d,"SID",c.M),ze(d,"AID",c.K),ze(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&ze(d,"TO",c.ia),ze(d,"TYPE","xmlhttp"),Ao(c,d),c.u&&c.o&&Pu(d,c.u,c.o),c.O&&(c.g.H=c.O);var p=c.g;c=c.ba,p.M=1,p.A=Wa(Sn(d)),p.u=null,p.R=!0,sp(p,c)}n.Va=function(){this.C!=null&&(this.C=null,Xa(this),Vu(this),Ut(19))};function $a(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Vp(c,d){var p=null;if(c.g==d){$a(c),Du(c),c.g=null;var _=2}else if(bu(c.h,d))p=d.G,up(c.h,d),_=1;else return;if(c.I!=0){if(d.o)if(_==1){p=d.u?d.u.length:0,d=Date.now()-d.F;var x=c.D;_=is(),W(_,new Zf(_,p)),Ja(c)}else Pp(c);else if(x=d.m,x==3||x==0&&d.X>0||!(_==1&&kw(c,d)||_==2&&Vu(c)))switch(p&&p.length>0&&(d=c.h,d.i=d.i.concat(p)),x){case 1:cs(c,5);break;case 4:cs(c,10);break;case 3:cs(c,6);break;default:cs(c,2)}}}function Dp(c,d){let p=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(p*=2),p*d}function cs(c,d){if(c.j.info("Error code "+d),d==2){var p=u(c.bb,c),_=c.Ua;const x=!_;_=new _r(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fo(_,"https"),Wa(_),x?Tw(_.toString(),p):bw(_.toString(),p)}else Ut(2);c.I=0,c.l&&c.l.pa(d),xp(c),Rp(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function xp(c){if(c.I=0,c.ja=[],c.l){const d=hp(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ja,d),R(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Np(c,d,p){var _=p instanceof _r?Sn(p):new _r(p);if(_.g!="")d&&(_.g=d+"."+_.g),po(_,_.u);else{var x=o.location;_=x.protocol,d=d?d+"."+x.hostname:x.hostname,x=+x.port;const L=new _r(null);_&&fo(L,_),d&&(L.g=d),x&&po(L,x),p&&(L.h=p),_=L}return p=c.G,d=c.wa,p&&d&&ze(_,p,d),ze(_,"VER",c.ka),Ao(c,_),_}function Op(c,d,p){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ye(new Cu({ab:p})):new Ye(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mp(){}n=Mp.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Za(){}Za.prototype.g=function(c,d){return new Zt(c,d)};function Zt(c,d){Y.call(this),this.g=new bp(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!I(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Zs(this)}f(Zt,Y),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){ku(this.g)},Zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.v&&(p={},p.__data__=Pe(c),c=p);d.i.push(new gw(d.Ya++,c)),d.I==3&&Ja(d)},Zt.prototype.N=function(){this.g.l=null,delete this.j,ku(this.g),delete this.g,Zt.Z.N.call(this)};function Lp(c){Xs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(Lp,Xs);function Fp(){vt.call(this),this.status=1}f(Fp,vt);function Zs(c){this.g=c}f(Zs,Mp),Zs.prototype.ra=function(){W(this.g,"a")},Zs.prototype.qa=function(c){W(this.g,new Lp(c))},Zs.prototype.pa=function(c){W(this.g,new Fp)},Zs.prototype.oa=function(){W(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Jv=function(){return new Za},Xv=function(){return is()},Yv=mt,Uh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,Ic=Ka,ep.COMPLETE="complete",Qv=ep,$t.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",Y.prototype.listen=Y.prototype.J,xo=$t,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Wv=Ye}).apply(typeof oc<"u"?oc:typeof self<"u"?self:typeof window<"u"?window:{});const Xm="@firebase/firestore",Jm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Bd("@firebase/firestore");function di(){return Ms.logLevel}function z(n,...e){if(Ms.logLevel<=be.DEBUG){const t=e.map(Gd);Ms.debug(`Firestore (${Zi}): ${n}`,...t)}}function tt(n,...e){if(Ms.logLevel<=be.ERROR){const t=e.map(Gd);Ms.error(`Firestore (${Zi}): ${n}`,...t)}}function pa(n,...e){if(Ms.logLevel<=be.WARN){const t=e.map(Gd);Ms.warn(`Firestore (${Zi}): ${n}`,...t)}}function Gd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$v(n,r,t)}function $v(n,e,t){let r=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw tt(r),new Error(r)}function ce(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||$v(e,s,r)}function ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Wn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ct.UNAUTHENTICATED)))}shutdown(){}}class oS{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ce(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new sS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class aS{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cS{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $m{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $m(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $m(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function _e(n,e){return n<e?-1:n>e?1:0}function Bh(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return th(s)===th(i)?_e(s,i):th(s)?1:-1}return _e(n.length,e.length)}const hS=55296,dS=57343;function th(n){const e=n.charCodeAt(0);return e>=hS&&e<=dS}function Ni(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function Zv(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="__name__";class Dn{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Dn.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return _e(e.length,t.length)}static compareSegments(e,t){const r=Dn.isNumericId(e),s=Dn.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Dn.extractNumericId(e).compare(Dn.extractNumericId(t)):Bh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class De extends Dn{construct(e,t,r){return new De(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new De(t)}static emptyPath(){return new De([])}}const fS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Dn{construct(e,t,r){return new Qe(e,t,r)}static isValidIdentifier(e){return fS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zm}static keyField(){return new Qe([Zm])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(t)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(De.fromString(e))}static fromName(e){return new ee(De.fromString(e).popFirst(5))}static empty(){return new ee(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return De.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n,e,t){if(!t)throw new X(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pS(n,e,t,r){if(e===!0&&r===!0)throw new X(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eg(n){if(!ee.isDocumentKey(n))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tg(n){if(ee.isDocumentKey(n))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hl(n);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(n,e){const t={typeString:n};return e&&(t.value=e),t}function xa(n,e){if(!tI(n))throw new X(j.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new X(j.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-62135596800,rg=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*rg);return new Le(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ng)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rg}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xa(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ng;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:it("string",Le._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Le(0,0))}static max(){return new le(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=-1;class Yc{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function jh(n){return n.fields.find((e=>e.kind===2))}function gs(n){return n.fields.filter((e=>e.kind!==2))}Yc.UNKNOWN_ID=-1;class Ac{constructor(e,t){this.fieldPath=e,this.kind=t}}class ma{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ma(0,cn.min())}}function nI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Le(t+1,0):new Le(t,r));return new cn(s,ee.empty(),e)}function rI(n){return new cn(n.readTime,n.key,Oi)}class cn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cn(le.min(),ee.empty(),Oi)}static max(){return new cn(le.max(),ee.empty(),Oi)}}function qd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==sI)throw n;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):D.reject(t)}static resolve(e){return new D(((t,r)=>{t(e)}))}static reject(e){return new D(((t,r)=>{r(e)}))}static waitFor(e){return new D(((t,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&t()}),(l=>r(l)))})),o=!0,i===s&&t()}))}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next((s=>s?D.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new D(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;t(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,t){return new D(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class ql{static open(e,t,r,s){try{return new ql(t,e.transaction(s,r))}catch(i){throw new Qo(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ir,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Qo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Kd(r.target.error);this.S.reject(new Qo(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(z(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gS(t)}}class Gr{static delete(e){return z(nn,"Removing database:",e),vs(Vv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Uv())return!1;if(Gr.F())return!0;const e=ht(),t=Gr.M(e),r=0<t&&t<10,s=oI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Gr.M(ht())===12.2&&tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(z(nn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Qo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new X(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new X(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Qo(e,o))},s.onupgradeneeded=i=>{z(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{z(nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=ql.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next((u=>(a.C(),u))).catch((u=>(a.abort(u),D.reject(u)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z(nn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class mS{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return vs(this.U.delete())}}class Qo extends X{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ts(n){return n.name==="IndexedDbTransactionError"}class gS{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z(nn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(z(nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vs(r)}add(e){return z(nn,"ADD",this.store.name,e,e),vs(this.store.add(e))}get(e){return vs(this.store.get(e)).next((t=>(t===void 0&&(t=null),z(nn,"GET",this.store.name,e,t),t)))}delete(e){return z(nn,"DELETE",this.store.name,e),vs(this.store.delete(e))}count(){return z(nn,"COUNT",this.store.name),vs(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new D(((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new D(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,t){z(nn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,a)=>a.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new D(((r,s)=>{t.onerror=i=>{const o=Kd(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,t){const r=[];return new D(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new mS(a),u=t(a.primaryKey,a.value,l);if(u instanceof D){const h=u.catch((f=>(l.done(),D.reject(f))));r.push(h)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}})).next((()=>D.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vs(n){return new D(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Kd(r.target.error);t(s)}}))}let sg=!1;function Kd(n){const e=Gr.M(ht());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sg||(sg=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Yo="IndexBackfiller";class _S{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){z(Yo,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();z(Yo,`Documents written: ${t}`)}catch(t){ts(t)?z(Yo,"Ignoring IndexedDB error during index backfill: ",t):await es(t)}await this.re(6e4)}))}}class yS{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,i=!0;return D.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return z(Yo,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(z(Yo,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a)))).next((()=>o.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,i)=>{const o=rI(i);qd(o,r)>0&&(r=o)})),new cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=-1;function Kl(n){return n==null}function ga(n){return n===0&&1/n==-1/0}function aI(n){return typeof n=="number"&&Number.isInteger(n)&&!ga(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="";function Lt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ig(e)),e=vS(n.get(t),e);return ig(e)}function vS(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Xc:t+="";break;default:t+=i}}return t}function ig(n){return n+Xc+""}function On(n){const e=n.length;if(ce(e>=2,64408,{path:n}),e===2)return ce(n.charAt(0)===Xc&&n.charAt(1)==="",56145,{path:n}),De.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(Xc,i);switch((o<0||o>t)&&ie(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:ie(61167,{path:n})}i=o+2}return new De(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="remoteDocuments",Na="owner",ti="owner",_a="mutationQueues",IS="userId",gn="mutations",og="batchId",bs="userMutationsIndex",ag=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n,e){return[n,Lt(e)]}function cI(n,e,t){return[n,Lt(e),t]}const AS={},Mi="documentMutations",Jc="remoteDocumentsV14",ES=["prefixPath","collectionGroup","readTime","documentId"],wc="documentKeyIndex",wS=["prefixPath","collectionGroup","documentId"],lI="collectionGroupIndex",TS=["collectionGroup","readTime","prefixPath","documentId"],ya="remoteDocumentGlobal",Gh="remoteDocumentGlobalKey",Li="targets",uI="queryTargetsIndex",bS=["canonicalId","targetId"],Fi="targetDocuments",RS=["targetId","path"],zd="documentTargetsIndex",SS=["path","targetId"],$c="targetGlobalKey",Ps="targetGlobal",va="collectionParents",CS=["collectionId","parent"],Ui="clientMetadata",PS="clientId",zl="bundles",kS="bundleId",Wl="namedQueries",VS="name",Wd="indexConfiguration",DS="indexId",Hh="collectionGroupIndex",xS="collectionGroup",Xo="indexState",NS=["indexId","uid"],hI="sequenceNumberIndex",OS=["uid","sequenceNumber"],Jo="indexEntries",MS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dI="documentKeyIndex",LS=["indexId","uid","orderedDocumentKey"],Ql="documentOverlays",FS=["userId","collectionPath","documentId"],qh="collectionPathOverlayIndex",US=["userId","collectionPath","largestBatchId"],fI="collectionGroupOverlayIndex",BS=["userId","collectionGroup","largestBatchId"],Qd="globals",jS="name",pI=[_a,gn,Mi,_s,Li,Na,Ps,Fi,Ui,ya,va,zl,Wl],GS=[...pI,Ql],mI=[_a,gn,Mi,Jc,Li,Na,Ps,Fi,Ui,ya,va,zl,Wl,Ql],gI=mI,Yd=[...gI,Wd,Xo,Jo],HS=Yd,_I=[...Yd,Qd],qS=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends iI{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function ft(n,e){const t=ae(n);return Gr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t){this.comparator=e,this.root=t||It.EMPTY}insert(e,t){return new Ke(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ac(this.root,e,this.comparator,!0)}}class ac{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new It(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new It(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(e){return new lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ue(this.comparator);return t.data=e,t}}class lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ni(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Yt([])}unionWith(e){let t=new Ue(Qe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ni(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vI("Invalid base64 string: "+i):i}})(e);return new rt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const KS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(n){if(ce(!!n,39018),typeof n=="string"){let e=0;const t=KS.exec(n);if(ce(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ur(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="server_timestamp",AI="__type__",EI="__previous_value__",wI="__local_write_time__";function Xd(n){return(n?.mapValue?.fields||{})[AI]?.stringValue===II}function Yl(n){const e=n.mapValue.fields[EI];return Xd(e)?Yl(e):e}function Ia(n){const e=lr(n.mapValue.fields[wI].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Zc="(default)";class Ls{constructor(e,t){this.projectId=e,this.database=t||Zc}static empty(){return new Ls("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof Ls&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="__type__",TI="__max__",Mr={mapValue:{fields:{__type__:{stringValue:TI}}}},$d="__vector__",Bi="value",Tc={nullValue:"NULL_VALUE"};function Qr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xd(n)?4:bI(n)?9007199254740991:Xl(n)?10:11:ie(28295,{value:n})}function qn(n,e){if(n===e)return!0;const t=Qr(n);if(t!==Qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ia(n).isEqual(Ia(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=lr(s.timestampValue),a=lr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return ur(s.bytesValue).isEqual(ur(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),a=We(i.doubleValue);return o===a?ga(o)===ga(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Ni(n.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(cg(o)!==cg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qn(o[l],a[l])))return!1;return!0})(n,e);default:return ie(52216,{left:n})}}function Aa(n,e){return(n.values||[]).find((t=>qn(t,e)))!==void 0}function Yr(n,e){if(n===e)return 0;const t=Qr(n),r=Qr(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=We(i.integerValue||i.doubleValue),l=We(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return ug(n.timestampValue,e.timestampValue);case 4:return ug(Ia(n),Ia(e));case 5:return Bh(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=ur(i),l=ur(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=_e(a[u],l[u]);if(h!==0)return h}return _e(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=_e(We(i.latitude),We(o.latitude));return a!==0?a:_e(We(i.longitude),We(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hg(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Bi]?.arrayValue,h=l[Bi]?.arrayValue,f=_e(u?.values?.length||0,h?.values?.length||0);return f!==0?f:hg(u,h)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Mr.mapValue&&o===Mr.mapValue)return 0;if(i===Mr.mapValue)return 1;if(o===Mr.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Bh(l[f],h[f]);if(m!==0)return m;const g=Yr(a[l[f]],u[h[f]]);if(g!==0)return g}return _e(l.length,h.length)})(n.mapValue,e.mapValue);default:throw ie(23264,{he:t})}}function ug(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);const t=lr(n),r=lr(e),s=_e(t.seconds,r.seconds);return s!==0?s:_e(t.nanos,r.nanos)}function hg(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Yr(t[s],r[s]);if(i)return i}return _e(t.length,r.length)}function ji(n){return zh(n)}function zh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=lr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ur(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=zh(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${zh(t.fields[o])}`;return s+"}"})(n.mapValue):ie(61005,{value:n})}function bc(n){switch(Qr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yl(n);return e?16+bc(e):16;case 5:return 2*n.stringValue.length;case 6:return ur(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+bc(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return ns(r.fields,((i,o)=>{s+=i.length+bc(o)})),s})(n.mapValue);default:throw ie(13486,{value:n})}}function Ea(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wh(n){return!!n&&"integerValue"in n}function wa(n){return!!n&&"arrayValue"in n}function dg(n){return!!n&&"nullValue"in n}function fg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rc(n){return!!n&&"mapValue"in n}function Xl(n){return(n?.mapValue?.fields||{})[Jd]?.stringValue===$d}function $o(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ns(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=$o(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$o(n.arrayValue.values[t]);return e}return{...n}}function bI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TI}const RI={mapValue:{fields:{[Jd]:{stringValue:$d},[Bi]:{arrayValue:{}}}}};function WS(n){return"nullValue"in n?Tc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ea(Ls.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Xl(n)?RI:{mapValue:{}}:ie(35942,{value:n})}function QS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ea(Ls.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?RI:"mapValue"in n?Xl(n)?{mapValue:{}}:Mr:ie(61959,{value:n})}function pg(n,e){const t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function mg(n,e){const t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(t)}setAll(e){let t=Qe.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=$o(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ns(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Nt($o(this.value))}}function SI(n){const e=[];return ns(n.fields,((t,r)=>{const s=new Qe([t]);if(Rc(r)){const i=SI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ze(e,0,le.min(),le.min(),le.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,s){return new Ze(e,1,t,le.min(),r,s,0)}static newNoDocument(e,t){return new Ze(e,2,t,le.min(),le.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new Ze(e,3,t,le.min(),le.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){this.position=e,this.inclusive=t}}function gg(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=Yr(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _g(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t="asc"){this.field=e,this.dir=t}}function YS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{}class Re extends CI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new XS(e,t,r):t==="array-contains"?new ZS(e,r):t==="in"?new NI(e,r):t==="not-in"?new eC(e,r):t==="array-contains-any"?new tC(e,r):new Re(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new JS(e,r):new $S(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yr(t,this.value)):t!==null&&Qr(this.value)===Qr(t)&&this.matchesComparison(Yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fe extends CI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fe(e,t)}matches(e){return Hi(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hi(n){return n.op==="and"}function Qh(n){return n.op==="or"}function Zd(n){return PI(n)&&Hi(n)}function PI(n){for(const e of n.filters)if(e instanceof Fe)return!1;return!0}function Yh(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+ji(n.value);if(Zd(n))return n.filters.map((e=>Yh(e))).join(",");{const e=n.filters.map((t=>Yh(t))).join(",");return`${n.op}(${e})`}}function kI(n,e){return n instanceof Re?(function(r,s){return s instanceof Re&&r.op===s.op&&r.field.isEqual(s.field)&&qn(r.value,s.value)})(n,e):n instanceof Fe?(function(r,s){return s instanceof Fe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&kI(o,s.filters[a])),!0):!1})(n,e):void ie(19439)}function VI(n,e){const t=n.filters.concat(e);return Fe.create(t,n.op)}function DI(n){return n instanceof Re?(function(t){return`${t.field.canonicalString()} ${t.op} ${ji(t.value)}`})(n):n instanceof Fe?(function(t){return t.op.toString()+" {"+t.getFilters().map(DI).join(" ,")+"}"})(n):"Filter"}class XS extends Re{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class JS extends Re{constructor(e,t){super(e,"in",t),this.keys=xI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $S extends Re{constructor(e,t){super(e,"not-in",t),this.keys=xI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xI(n,e){return(e.arrayValue?.values||[]).map((t=>ee.fromName(t.referenceValue)))}class ZS extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wa(t)&&Aa(t.arrayValue,this.value)}}class NI extends Re{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}}class eC extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Aa(this.value.arrayValue,t)}}class tC extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Aa(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Xh(n,e=null,t=[],r=[],s=null,i=null,o=null){return new nC(n,e,t,r,s,i,o)}function Fs(n){const e=ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Yh(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Kl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ji(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ji(r))).join(",")),e.Te=t}return e.Te}function Oa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_g(n.startAt,e.startAt)&&_g(n.endAt,e.endAt)}function el(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tl(n,e){return n.filters.filter((t=>t instanceof Re&&t.field.isEqual(e)))}function yg(n,e,t){let r=Tc,s=!0;for(const i of tl(n,e)){let o=Tc,a=!0;switch(i.op){case"<":case"<=":o=WS(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Tc}pg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];pg({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function vg(n,e,t){let r=Mr,s=!0;for(const i of tl(n,e)){let o=Mr,a=!0;switch(i.op){case">=":case">":o=QS(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Mr}mg({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];mg({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OI(n,e,t,r,s,i,o,a){return new eo(n,e,t,r,s,i,o,a)}function Ma(n){return new eo(n)}function Ig(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MI(n){return n.collectionGroup!==null}function Zo(n){const e=ae(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(Qe.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ta(i,r))})),t.has(Qe.keyField().canonicalString())||e.Ie.push(new Ta(Qe.keyField(),r))}return e.Ie}function on(n){const e=ae(n);return e.Ee||(e.Ee=rC(e,Zo(n))),e.Ee}function rC(n,e){if(n.limitType==="F")return Xh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ta(s.field,i)}));const t=n.endAt?new Gi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gi(n.startAt.position,n.startAt.inclusive):null;return Xh(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jh(n,e){const t=n.filters.concat([e]);return new eo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nl(n,e,t){return new eo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jl(n,e){return Oa(on(n),on(e))&&n.limitType===e.limitType}function LI(n){return`${Fs(on(n))}|lt:${n.limitType}`}function fi(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>DI(s))).join(", ")}]`),Kl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ji(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ji(s))).join(",")),`Target(${r})`})(on(n))}; limitType=${n.limitType})`}function La(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,l){const u=gg(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,Zo(r),s)||r.endAt&&!(function(o,a,l){const u=gg(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,Zo(r),s))})(n,e)}function FI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UI(n){return(e,t)=>{let r=!1;for(const s of Zo(n)){const i=sC(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sC(n,e,t){const r=n.field.isKeyField()?ee.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Yr(l,u):ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ns(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new Ke(ee.comparator);function sn(){return iC}const BI=new Ke(ee.comparator);function No(...n){let e=BI;for(const t of n)e=e.insert(t.key,t);return e}function jI(n){let e=BI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Mn(){return ea()}function GI(){return ea()}function ea(){return new pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oC=new Ke(ee.comparator),aC=new Ue(ee.comparator);function Ae(...n){let e=aC;for(const t of n)e=e.add(t);return e}const cC=new Ue(_e);function ef(){return cC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ga(e)?"-0":e}}function HI(n){return{integerValue:""+n}}function lC(n,e){return aI(e)?HI(e):tf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this._=void 0}}function uC(n,e,t){return n instanceof qi?(function(s,i){const o={fields:{[AI]:{stringValue:II},[wI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xd(i)&&(i=Yl(i)),i&&(o.fields[EI]=i),{mapValue:o}})(t,e):n instanceof Ki?KI(n,e):n instanceof zi?zI(n,e):(function(s,i){const o=qI(s,i),a=Ag(o)+Ag(s.Ae);return Wh(o)&&Wh(s.Ae)?HI(a):tf(s.serializer,a)})(n,e)}function hC(n,e,t){return n instanceof Ki?KI(n,e):n instanceof zi?zI(n,e):t}function qI(n,e){return n instanceof ba?(function(r){return Wh(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class qi extends $l{}class Ki extends $l{constructor(e){super(),this.elements=e}}function KI(n,e){const t=WI(e);for(const r of n.elements)t.some((s=>qn(s,r)))||t.push(r);return{arrayValue:{values:t}}}class zi extends $l{constructor(e){super(),this.elements=e}}function zI(n,e){let t=WI(e);for(const r of n.elements)t=t.filter((s=>!qn(s,r)));return{arrayValue:{values:t}}}class ba extends $l{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ag(n){return We(n.integerValue||n.doubleValue)}function WI(n){return wa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t){this.field=e,this.transform=t}}function dC(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ki&&s instanceof Ki||r instanceof zi&&s instanceof zi?Ni(r.elements,s.elements,qn):r instanceof ba&&s instanceof ba?qn(r.Ae,s.Ae):r instanceof qi&&s instanceof qi})(n.transform,e.transform)}class fC{constructor(e,t){this.version=e,this.transformResults=t}}class Ot{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zl{}function YI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eu(n.key,Ot.none()):new to(n.key,n.data,Ot.none());{const t=n.data,r=Nt.empty();let s=new Ue(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new mr(n.key,r,new Yt(s.toArray()),Ot.none())}}function pC(n,e,t){n instanceof to?(function(s,i,o){const a=s.value.clone(),l=wg(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof mr?(function(s,i,o){if(!Sc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wg(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(XI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function ta(n,e,t,r){return n instanceof to?(function(i,o,a,l){if(!Sc(i.precondition,o))return a;const u=i.value.clone(),h=Tg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof mr?(function(i,o,a,l){if(!Sc(i.precondition,o))return a;const u=Tg(i.fieldTransforms,l,o),h=o.data;return h.setAll(XI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(i,o,a){return Sc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function mC(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=qI(r.transform,s||null);i!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,i))}return t||null}function Eg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ni(r,s,((i,o)=>dC(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class to extends Zl{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mr extends Zl{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function XI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function wg(n,e,t){const r=new Map;ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,hC(o,a,t[s]))}return r}function Tg(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,uC(i,o,e))}return r}class eu extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JI extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pC(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ta(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GI();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=YI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ae())}isEqual(e){return this.batchId===e.batchId&&Ni(this.mutations,e.mutations,((t,r)=>Eg(t,r)))&&Ni(this.baseMutations,e.baseMutations,((t,r)=>Eg(t,r)))}}class rf{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return oC})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rf(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Se;function _C(n){switch(n){case j.OK:return ie(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ie(15467,{code:n})}}function $I(n){if(n===void 0)return tt("GRPC error has no .code"),j.UNKNOWN;switch(n){case st.OK:return j.OK;case st.CANCELLED:return j.CANCELLED;case st.UNKNOWN:return j.UNKNOWN;case st.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case st.INTERNAL:return j.INTERNAL;case st.UNAVAILABLE:return j.UNAVAILABLE;case st.UNAUTHENTICATED:return j.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case st.NOT_FOUND:return j.NOT_FOUND;case st.ALREADY_EXISTS:return j.ALREADY_EXISTS;case st.PERMISSION_DENIED:return j.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case st.ABORTED:return j.ABORTED;case st.OUT_OF_RANGE:return j.OUT_OF_RANGE;case st.UNIMPLEMENTED:return j.UNIMPLEMENTED;case st.DATA_LOSS:return j.DATA_LOSS;default:return ie(39323,{code:n})}}(Se=st||(st={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new jr([4294967295,4294967295],0);function bg(n){const e=yC().encode(n),t=new zv;return t.update(e),new Uint8Array(t.digest())}function Rg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jr([t,r],0),new jr([s,i],0)]}class of{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oo(`Invalid padding: ${t}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=jr.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(jr.fromNumber(r)));return s.compare(vC)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=bg(e),[r,s]=Rg(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new of(i,s,t);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=bg(e),[r,s]=Rg(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ua.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fa(le.min(),s,new Ke(_e),sn(),Ae())}}class Ua{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ua(r,t,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class ZI{constructor(e,t){this.targetId=e,this.Ce=t}}class eA{constructor(e,t,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Sg{constructor(){this.ve=0,this.Fe=Cg(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),t=Ae(),r=Ae();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}})),new Ua(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Cg()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IC{constructor(e){this.Ge=e,this.ze=new Map,this.je=sn(),this.Je=cc(),this.He=cc(),this.Ye=new Ke(_e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(el(i))if(r===0){const o=new ee(i.path);this.et(t,o,Ze.newNoDocument(o,le.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=ur(r).toUint8Array()}catch(l){if(l instanceof vI)return pa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new of(o,s,i)}catch(l){return pa(l instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&el(a.target)){const l=new ee(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ze.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let r=Ae();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Fa(e,t,this.Ye,this.je,r);return this.je=sn(),this.Je=cc(),this.He=cc(),this.Ye=new Ke(_e),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Sg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ue(_e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ue(_e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cc(){return new Ke(ee.comparator)}function Cg(){return new Ke(ee.comparator)}const AC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wC={and:"AND",or:"OR"};class TC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $h(n,e){return n.useProto3Json||Kl(e)?e:{value:e}}function Wi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bC(n,e){return Wi(n,e.toTimestamp())}function qt(n){return ce(!!n,49232),le.fromTimestamp((function(t){const r=lr(t);return new Le(r.seconds,r.nanos)})(n))}function af(n,e){return Zh(n,e).canonicalString()}function Zh(n,e){const t=(function(s){return new De(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function nA(n){const e=De.fromString(n);return ce(hA(e),10190,{key:e.toString()}),e}function rl(n,e){return af(n.databaseId,e.path)}function ks(n,e){const t=nA(e);if(t.get(1)!==n.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(iA(t))}function rA(n,e){return af(n.databaseId,e)}function sA(n){const e=nA(n);return e.length===4?De.emptyPath():iA(e)}function ed(n){return new De(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iA(n){return ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Pg(n,e,t){return{name:rl(n,e),fields:t.value.mapValue.fields}}function RC(n,e,t){const r=ks(n,e.name),s=qt(e.updateTime),i=e.createTime?qt(e.createTime):le.min(),o=new Nt({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function SC(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ce(h===void 0||typeof h=="string",58123),rt.fromBase64String(h||"")):(ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?j.UNKNOWN:$I(u.code);return new X(h,u.message||"")})(o);t=new eA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ks(n,r.document.name),i=qt(r.document.updateTime),o=r.document.createTime?qt(r.document.createTime):le.min(),a=new Nt({mapValue:{fields:r.document.fields}}),l=Ze.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Cc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ks(n,r.document),i=r.readTime?qt(r.readTime):le.min(),o=Ze.newNoDocument(s,i),a=r.removedTargetIds||[];t=new Cc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ks(n,r.document),i=r.removedTargetIds||[];t=new Cc([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gC(s,i),a=r.targetId;t=new ZI(a,o)}}return t}function sl(n,e){let t;if(e instanceof to)t={update:Pg(n,e.key,e.value)};else if(e instanceof eu)t={delete:rl(n,e.key)};else if(e instanceof mr)t={update:Pg(n,e.key,e.data),updateMask:xC(e.fieldMask)};else{if(!(e instanceof JI))return ie(16599,{Vt:e.type});t={verify:rl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof qi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ba)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ie(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:bC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)})(n,e.precondition)),t}function td(n,e){const t=e.currentDocument?(function(i){return i.updateTime!==void 0?Ot.updateTime(qt(i.updateTime)):i.exists!==void 0?Ot.exists(i.exists):Ot.none()})(e.currentDocument):Ot.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let l=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new qi;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ki(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new zi(h)}else"increment"in a?l=new ba(o,a.increment):ie(16584,{proto:a});const u=Qe.fromServerFormat(a.fieldPath);return new QI(u,l)})(n,s))):[];if(e.update){e.update.name;const s=ks(n,e.update.name),i=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const u=l.fieldPaths||[];return new Yt(u.map((h=>Qe.fromServerFormat(h))))})(e.updateMask);return new mr(s,i,o,t,r)}return new to(s,i,t,r)}if(e.delete){const s=ks(n,e.delete);return new eu(s,t)}if(e.verify){const s=ks(n,e.verify);return new JI(s,t)}return ie(1463,{proto:e})}function CC(n,e){return n&&n.length>0?(ce(e!==void 0,14353),n.map((t=>(function(s,i){let o=s.updateTime?qt(s.updateTime):qt(i);return o.isEqual(le.min())&&(o=qt(i)),new fC(o,s.transformResults||[])})(t,e)))):[]}function oA(n,e){return{documents:[rA(n,e.path)]}}function aA(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rA(n,s);const i=(function(u){if(u.length!==0)return uA(Fe.create(u,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:pi(m.field),direction:kC(m.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=$h(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:s}}function cA(n){let e=sA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ce(r===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=(function(f){const m=lA(f);return m instanceof Fe&&Zd(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((m=>(function(R){return new Ta(mi(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(m)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let m;return m=typeof f=="object"?f.value:f,Kl(m)?null:m})(t.limit));let l=null;t.startAt&&(l=(function(f){const m=!!f.before,g=f.values||[];return new Gi(g,m)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const m=!f.before,g=f.values||[];return new Gi(g,m)})(t.endAt)),OI(e,s,o,i,a,"F",l,u)}function PC(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=mi(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=mi(t.unaryFilter.field);return Re.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mi(t.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mi(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Re.create(mi(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fe.create(t.compositeFilter.filters.map((r=>lA(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(t.compositeFilter.op))})(n):ie(30097,{filter:n})}function kC(n){return AC[n]}function VC(n){return EC[n]}function DC(n){return wC[n]}function pi(n){return{fieldPath:n.canonicalString()}}function mi(n){return Qe.fromServerFormat(n.fieldPath)}function uA(n){return n instanceof Re?(function(t){if(t.op==="=="){if(fg(t.value))return{unaryFilter:{field:pi(t.field),op:"IS_NAN"}};if(dg(t.value))return{unaryFilter:{field:pi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fg(t.value))return{unaryFilter:{field:pi(t.field),op:"IS_NOT_NAN"}};if(dg(t.value))return{unaryFilter:{field:pi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pi(t.field),op:VC(t.op),value:t.value}}})(n):n instanceof Fe?(function(t){const r=t.getFilters().map((s=>uA(s)));return r.length===1?r[0]:{compositeFilter:{op:DC(t.op),filters:r}}})(n):ie(54877,{filter:n})}function xC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,r,s,i=le.min(),o=le.min(),a=rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.yt=e}}function NC(n,e){let t;if(e.document)t=RC(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=Bs(e.noDocument.readTime);t=Ze.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie(56709);{const r=ee.fromSegments(e.unknownDocument.path),s=Bs(e.unknownDocument.version);t=Ze.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const i=new Le(s[0],s[1]);return le.fromTimestamp(i)})(e.readTime)),t}function kg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:il(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:rl(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Wi(i,o.version.toTimestamp()),createTime:Wi(i,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Us(e.version)};else{if(!e.isUnknownDocument())return ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Us(e.version)}}return r}function il(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Us(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bs(n){const e=new Le(n.seconds,n.nanoseconds);return le.fromTimestamp(e)}function Is(n,e){const t=(e.baseMutations||[]).map((i=>td(n.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>td(n.yt,i))),s=Le.fromMillis(e.localWriteTimeMs);return new nf(e.batchId,s,t,r)}function Mo(n){const e=Bs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bs(n.lastLimboFreeSnapshotVersion):le.min();let r;return r=(function(i){return i.documents!==void 0})(n.query)?(function(i){const o=i.documents.length;return ce(o===1,1966,{count:o}),on(Ma(sA(i.documents[0])))})(n.query):(function(i){return on(cA(i))})(n.query),new nr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function fA(n,e){const t=Us(e.snapshotVersion),r=Us(e.lastLimboFreeSnapshotVersion);let s;s=el(e.target)?oA(n.yt,e.target):aA(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function pA(n){const e=cA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nl(e,e.limit,"L"):e}function nh(n,e){return new sf(e.largestBatchId,td(n.yt,e.overlayMutation))}function Vg(n,e){const t=e.path.lastSegment();return[n,Lt(e.path.popLast()),t]}function Dg(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Us(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{getBundleMetadata(e,t){return xg(e).get(t).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Bs(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,t){return xg(e).put((function(s){return{bundleId:s.id,createTime:Us(qt(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return Ng(e).get(t).next((r=>{if(r)return(function(i){return{name:i.name,query:pA(i.bundledQuery),readTime:Bs(i.readTime)}})(r)}))}saveNamedQuery(e,t){return Ng(e).put((function(s){return{name:s.name,readTime:Us(qt(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function xg(n){return ft(n,zl)}function Ng(n){return ft(n,Wl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new tu(e,r)}getOverlay(e,t){return Ro(e).get(Vg(this.userId,t)).next((r=>r?nh(this.serializer,r):null))}getOverlays(e,t){const r=Mn();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((i,o)=>{const a=new sf(t,o);s.push(this.St(e,a))})),D.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((o=>s.add(Lt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Ro(e).Z(qh,a))})),D.waitFor(i)}getOverlaysForCollection(e,t,r){const s=Mn(),i=Lt(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ro(e).J(qh,o).next((a=>{for(const l of a){const u=nh(this.serializer,l);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const i=Mn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ro(e).ee({index:fI,range:a},((l,u,h)=>{const f=nh(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}St(e,t){return Ro(e).put((function(s,i,o){const[a,l,u]=Vg(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sl(s.yt,o.mutation)}})(this.serializer,this.userId,t))}}function Ro(n){return ft(n,Ql)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{bt(e){return ft(e,Qd)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(We(e.integerValue));else if("doubleValue"in e){const r=We(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ga(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=lr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ur(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?bI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=Bi,i=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(We(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ee.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}As.Kt=new As;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=255;function LC(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Og(n){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=LC(255&r[i]);if(s+=o,o!==8)break}return s})(n);return Math.ceil(e/8)}class FC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=Og(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=Og(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(ri),this.sn(255)}_n(){this.an(ri),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ri?(this.sn(ri),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ri?(this.an(ri),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class UC{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class BC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class So{constructor(){this.cn=new FC,this.ln=new UC(this.cn),this.hn=new BC(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Es(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Pc(this.En),directionalValue:Pc(this.dn),orderedDocumentKey:Pc(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Tr(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Mg(n.En,e.En),t!==0?t:(t=Mg(n.dn,e.dn),t!==0?t:ee.comparator(n.In,e.In)))}function Mg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Pc(n){return Fv()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function Lg(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class Fg{constructor(e){this.mn=new Ue(((t,r)=>Qe.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=jh(e);if(t!==void 0&&!this.wn(t))return!1;const r=gs(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ue(Qe.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ac(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ac(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ac(r.field,r.dir==="asc"?0:1)));return new Yc(Yc.UNKNOWN_ID,this.collectionId,t,ma.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){if(ce(n instanceof Re||n instanceof Fe,20012),n instanceof Re){if(n instanceof NI){const t=n.value.arrayValue?.values?.map((r=>Re.create(n.field,"==",r)))||[];return Fe.create(t,"or")}return n}const e=n.filters.map((t=>mA(t)));return Fe.create(e,n.op)}function jC(n){if(n.getFilters().length===0)return[];const e=sd(mA(n));return ce(gA(e),7391),nd(e)||rd(e)?[e]:e.getFilters()}function nd(n){return n instanceof Re}function rd(n){return n instanceof Fe&&Zd(n)}function gA(n){return nd(n)||rd(n)||(function(t){if(t instanceof Fe&&Qh(t)){for(const r of t.getFilters())if(!nd(r)&&!rd(r))return!1;return!0}return!1})(n)}function sd(n){if(ce(n instanceof Re||n instanceof Fe,34018),n instanceof Re)return n;if(n.filters.length===1)return sd(n.filters[0]);const e=n.filters.map((r=>sd(r)));let t=Fe.create(e,n.op);return t=ol(t),gA(t)?t:(ce(t instanceof Fe,64498),ce(Hi(t),40251),ce(t.filters.length>1,57927),t.filters.reduce(((r,s)=>cf(r,s))))}function cf(n,e){let t;return ce(n instanceof Re||n instanceof Fe,38388),ce(e instanceof Re||e instanceof Fe,25473),t=n instanceof Re?e instanceof Re?(function(s,i){return Fe.create([s,i],"and")})(n,e):Ug(n,e):e instanceof Re?Ug(e,n):(function(s,i){if(ce(s.filters.length>0&&i.filters.length>0,48005),Hi(s)&&Hi(i))return VI(s,i.getFilters());const o=Qh(s)?s:i,a=Qh(s)?i:s,l=o.filters.map((u=>cf(u,a)));return Fe.create(l,"or")})(n,e),ol(t)}function Ug(n,e){if(Hi(e))return VI(e,n.getFilters());{const t=e.filters.map((r=>cf(n,r)));return Fe.create(t,"or")}}function ol(n){if(ce(n instanceof Re||n instanceof Fe,11850),n instanceof Re)return n;const e=n.getFilters();if(e.length===1)return ol(e[0]);if(PI(n))return n;const t=e.map((s=>ol(s))),r=[];return t.forEach((s=>{s instanceof Re?r.push(s):s instanceof Fe&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Fe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.Cn=new lf}addToCollectionParentIndex(e,t){return this.Cn.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(cn.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class lf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ue(De.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ue(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="IndexedDbIndexManager",lc=new Uint8Array(0);class HC{constructor(e,t){this.databaseId=t,this.vn=new lf,this.Fn=new pr((r=>Fs(r)),((r,s)=>Oa(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const i={collectionId:r,parent:Lt(s)};return jg(e).put(i)}return D.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Zv(t),""],!1,!0);return jg(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==t)break;r.push(On(o.parent))}return r}))}addFieldIndex(e,t){const r=Co(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=ii(e);return i.next((a=>{o.put(Dg(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const r=Co(e),s=ii(e),i=si(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Co(e),r=si(e),s=ii(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return D.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new Fg(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,t){const r=si(e);let s=!0;const i=new Map;return D.forEach(this.Mn(t),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=Ae();const a=[];return D.forEach(i,((l,u)=>{z(Bg,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(l)} to execute ${Fs(t)}`);const h=(function(U,H){const $=jh(H);if($===void 0)return null;for(const re of tl(U,$.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(u,l),f=(function(U,H){const $=new Map;for(const re of gs(H))for(const S of tl(U,re.fieldPath))switch(S.op){case"==":case"in":$.set(re.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return $.set(re.fieldPath.canonicalString(),S.value),Array.from($.values())}return null})(u,l),m=(function(U,H){const $=[];let re=!0;for(const S of gs(H)){const v=S.kind===0?yg(U,S.fieldPath,U.startAt):vg(U,S.fieldPath,U.startAt);$.push(v.value),re&&(re=v.inclusive)}return new Gi($,re)})(u,l),g=(function(U,H){const $=[];let re=!0;for(const S of gs(H)){const v=S.kind===0?vg(U,S.fieldPath,U.endAt):yg(U,S.fieldPath,U.endAt);$.push(v.value),re&&(re=v.inclusive)}return new Gi($,re)})(u,l),R=this.On(l,u,m),C=this.On(l,u,g),k=this.Nn(l,u,f),B=this.Bn(l.indexId,h,R,m.inclusive,C,g.inclusive,k);return D.forEach(B,(F=>r.Y(F,t.limit).next((U=>{U.forEach((H=>{const $=ee.fromSegments(H.documentKey);o.has($)||(o=o.add($),a.push($))}))}))))})).next((()=>a))}return D.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=jC(Fe.create(e.filters,"and")).map((r=>Xh(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,i.length),u=l/(t!=null?t.length:1),h=[];for(let f=0;f<l;++f){const m=t?this.Ln(t[f/u]):lc,g=this.kn(e,m,r[f%u],s),R=this.qn(e,m,i[f%u],o),C=a.map((k=>this.kn(e,m,k,!0)));h.push(...this.createRange(g,R,C))}return h}kn(e,t,r,s){const i=new Es(e,ee.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new Es(e,ee.empty(),t,r);return s?i.An():i}xn(e,t){const r=new Fg(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return D.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(l){let u=new Ue(Qe.comparator),h=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new So;for(const s of gs(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);As.Kt.Dt(i,o)}return r.un()}Ln(e){const t=new So;return As.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new So;return As.Kt.Dt(Ea(this.databaseId,t),r.Pn((function(i){const o=gs(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new So);let i=0;for(const o of gs(e)){const a=r[i++];for(const l of s)if(this.Un(t,o.fieldPath)&&wa(a))s=this.Kn(s,o,a);else{const u=l.Pn(o.kind);As.Kt.Dt(a,u)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new So;l.seed(a.un()),As.Kt.Dt(o,l.Pn(t.kind)),i.push(l)}return i}Un(e,t){return!!e.filters.find((r=>r instanceof Re&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Co(e),s=ii(e);return(t?r.J(Hh,IDBKeyRange.bound(t,t)):r.J()).next((i=>{const o=[];return D.forEach(i,(a=>s.get([a.indexId,this.uid]).next((l=>{o.push((function(h,f){const m=f?new ma(f.sequenceNumber,new cn(Bs(f.readTime),new ee(On(f.documentKey)),f.largestBatchId)):ma.empty(),g=h.fields.map((([R,C])=>new Ac(Qe.fromServerFormat(R),C)));return new Yc(h.indexId,h.collectionGroup,g,m)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:_e(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Co(e),i=ii(e);return this.Gn(e).next((o=>s.J(Hh,IDBKeyRange.bound(t,t)).next((a=>D.forEach(a,(l=>i.put(Dg(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,t){const r=new Map;return D.forEach(t,((s,i)=>{const o=r.get(s.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),D.forEach(a,(l=>this.zn(e,s,l).next((u=>{const h=this.jn(i,l);return u.isEqual(h)?D.resolve():this.Jn(e,i,l,u,h)})))))))}))}Hn(e,t,r,s){return si(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return si(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=si(e);let i=new Ue(Tr);return s.ee({index:dI,range:IDBKeyRange.only([r.indexId,this.uid,Pc(this.$n(r,t))])},((o,a)=>{i=i.add(new Es(r.indexId,t,Lg(a.arrayValue),Lg(a.directionalValue)))})).next((()=>i))}jn(e,t){let r=new Ue(Tr);const s=this.Qn(t,e);if(s==null)return r;const i=jh(t);if(i!=null){const o=e.data.field(i.fieldPath);if(wa(o))for(const a of o.arrayValue.values||[])r=r.add(new Es(t.indexId,e.key,this.Ln(a),s))}else r=r.add(new Es(t.indexId,e.key,lc,s));return r}Jn(e,t,r,s,i){z(Bg,"Updating index entries for document '%s'",t.key);const o=[];return(function(l,u,h,f,m){const g=l.getIterator(),R=u.getIterator();let C=ni(g),k=ni(R);for(;C||k;){let B=!1,F=!1;if(C&&k){const U=h(C,k);U<0?F=!0:U>0&&(B=!0)}else C!=null?F=!0:B=!0;B?(f(k),k=ni(R)):F?(m(C),C=ni(g)):(C=ni(g),k=ni(R))}})(s,i,Tr,(a=>{o.push(this.Hn(e,t,r,a))}),(a=>{o.push(this.Yn(e,t,r,a))})),D.waitFor(o)}Gn(e){let t=1;return ii(e).ee({index:hI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((o,a)=>Tr(o,a))).filter(((o,a,l)=>!a||Tr(o,l[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=Tr(o,e),l=Tr(o,t);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,lc,ee.empty()),l=s[o+1].Vn(this.uid,lc,ee.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,t){return Tr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gg)}getMinOffset(e,t){return D.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||ie(44426))))).next(Gg)}}function jg(n){return ft(n,va)}function si(n){return ft(n,Jo)}function Co(n){return ft(n,Wd)}function ii(n){return ft(n,Xo)}function Gg(n){ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;qd(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new cn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n,e,t){const r=n.store(gn),s=n.store(Mi),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.ee({range:o},((h,f,m)=>(a++,m.delete())));i.push(l.next((()=>{ce(a===1,47070,{batchId:t.batchId})})));const u=[];for(const h of t.mutations){const f=cI(e,h.key.path,t.batchId);i.push(s.delete(f)),u.push(h.key)}return D.waitFor(i).next((()=>u))}function al(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(_A,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);class nu{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){ce(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new nu(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return br(e).ee({index:bs,range:r},((s,i,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const i=gi(e),o=br(e);return o.add({}).next((a=>{ce(typeof a=="number",49019);const l=new nf(a,t,r,s),u=(function(g,R,C){const k=C.baseMutations.map((F=>sl(g.yt,F))),B=C.mutations.map((F=>sl(g.yt,F)));return{userId:R,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:k,mutations:B}})(this.serializer,this.userId,l),h=[];let f=new Ue(((m,g)=>_e(m.canonicalString(),g.canonicalString())));for(const m of s){const g=cI(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,AS))}return f.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),D.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,t){return br(e).get(t).next((r=>r?(ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Is(this.serializer,r)):null))}er(e,t){return this.Xn[t]?D.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return br(e).ee({index:bs,range:s},((o,a,l)=>{a.userId===this.userId&&(ce(a.batchId>=r,47524,{tr:r}),i=Is(this.serializer,a)),l.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Cs;return br(e).ee({index:bs,range:t,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Cs],[this.userId,Number.POSITIVE_INFINITY]);return br(e).J(bs,t).next((r=>r.map((s=>Is(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ec(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return gi(e).ee({range:s},((o,a,l)=>{const[u,h,f]=o,m=On(h);if(u===this.userId&&t.path.isEqual(m))return br(e).get(f).next((g=>{if(!g)throw ie(61480,{nr:o,batchId:f});ce(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:f}),i.push(Is(this.serializer,g))}));l.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ue(_e);const s=[];return t.forEach((i=>{const o=Ec(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=gi(e).ee({range:a},((u,h,f)=>{const[m,g,R]=u,C=On(g);m===this.userId&&i.path.isEqual(C)?r=r.add(R):f.done()}));s.push(l)})),D.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Ec(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ue(_e);return gi(e).ee({range:o},((l,u,h)=>{const[f,m,g]=l,R=On(m);f===this.userId&&r.isPrefixOf(R)?R.length===s&&(a=a.add(g)):h.done()})).next((()=>this.rr(e,a)))}rr(e,t){const r=[],s=[];return t.forEach((i=>{s.push(br(e).get(i).next((o=>{if(o===null)throw ie(35274,{batchId:i});ce(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Is(this.serializer,o))})))})),D.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return yA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),D.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return D.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return gi(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const l=On(i[1]);s.push(l)}else a.done()})).next((()=>{ce(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,t){return vA(e,this.userId,t)}_r(e){return IA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Cs,lastStreamToken:""}))}}function vA(n,e,t){const r=Ec(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return gi(n).ee({range:i,X:!0},((a,l,u)=>{const[h,f,m]=a;h===e&&f===s&&(o=!0),u.done()})).next((()=>o))}function br(n){return ft(n,gn)}function gi(n){return ft(n,Mi)}function IA(n){return ft(n,_a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new js(0)}static cr(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new js(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>le.fromTimestamp(new Le(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>oi(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ce(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const i=[];return oi(e).ee(((o,a)=>{const l=Mo(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))})).next((()=>D.waitFor(i))).next((()=>s))}forEachTarget(e,t){return oi(e).ee(((r,s)=>{const i=Mo(s);t(i)}))}lr(e){return qg(e).get($c).next((t=>(ce(t!==null,2888),t)))}hr(e,t){return qg(e).put($c,t)}Pr(e,t){return oi(e).put(fA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Fs(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return oi(e).ee({range:s,index:uI},((o,a,l)=>{const u=Mo(a);Oa(t,u.target)&&(i=u,l.done())})).next((()=>i))}addMatchingKeys(e,t,r){const s=[],i=Dr(e);return t.forEach((o=>{const a=Lt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),D.waitFor(s)}removeMatchingKeys(e,t,r){const s=Dr(e);return D.forEach(t,(i=>{const o=Lt(i.path);return D.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,t){const r=Dr(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Dr(e);let i=Ae();return s.ee({range:r,X:!0},((o,a,l)=>{const u=On(o[1]),h=new ee(u);i=i.add(h)})).next((()=>i))}containsKey(e,t){const r=Lt(t.path),s=IDBKeyRange.bound([r],[Zv(r)],!1,!0);let i=0;return Dr(e).ee({index:zd,X:!0,range:s},(([o,a],l,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}At(e,t){return oi(e).get(t).next((r=>r?Mo(r):null))}}function oi(n){return ft(n,Li)}function qg(n){return ft(n,Ps)}function Dr(n){return ft(n,Fi)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="LruGarbageCollector",AA=1048576;function zg([n,e],[t,r]){const s=_e(n,t);return s===0?_e(e,r):s}class KC{constructor(e){this.Ir=e,this.buffer=new Ue(zg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(Kg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ts(t)?z(Kg,"Ignoring IndexedDB error during garbage collection: ",t):await es(t)}await this.Vr(3e5)}))}}class zC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return D.resolve(Qt.ce);const r=new KC(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(Hg)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),di()<=be.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function wA(n,e){return new zC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.db=e,this.garbageCollector=wA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return uc(e,r)}removeReference(e,t,r){return uc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uc(e,t)}br(e,t){return(function(s,i){let o=!1;return IA(s).te((a=>vA(s,a,i).next((l=>(l&&(o=!0),D.resolve(!l)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,a)=>{if(a<=t){const l=this.br(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,le.min()),Dr(e).delete((function(f){return[0,Lt(f.path)]})(o)))))}));s.push(l)}})).next((()=>D.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uc(e,t)}Sr(e,t){const r=Dr(e);let s,i=Qt.ce;return r.ee({index:zd},(([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Qt.ce&&t(new ee(On(s)),i),i=u,s=l):i=Qt.ce})).next((()=>{i!==Qt.ce&&t(new ee(On(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(n,e){return Dr(n).put((function(r,s){return{targetId:0,path:Lt(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.changes=new pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fs(e).put(r)}removeEntry(e,t,r){return fs(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],il(o),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ze.newInvalidDocument(t);return fs(e).ee({index:wc,range:IDBKeyRange.only(Po(t))},((s,i)=>{r=this.Cr(t,i)})).next((()=>r))}vr(e,t){let r={size:0,document:Ze.newInvalidDocument(t)};return fs(e).ee({index:wc,range:IDBKeyRange.only(Po(t))},((s,i)=>{r={document:this.Cr(t,i),size:al(i)}})).next((()=>r))}getEntries(e,t){let r=sn();return this.Fr(e,t,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,t){let r=sn(),s=new Ke(ee.comparator);return this.Fr(e,t,((i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,al(o))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return D.resolve();let s=new Ue(Yg);t.forEach((l=>s=s.add(l)));const i=IDBKeyRange.bound(Po(s.first()),Po(s.last())),o=s.getIterator();let a=o.getNext();return fs(e).ee({index:wc,range:i},((l,u,h)=>{const f=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Yg(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(Po(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),il(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fs(e).J(IDBKeyRange.bound(a,l,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=sn();for(const f of u){const m=this.Cr(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(La(t,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,t,r,s){let i=sn();const o=Qg(t,r),a=Qg(t,cn.max());return fs(e).ee({index:lI,range:IDBKeyRange.bound(o,a,!0)},((l,u,h)=>{const f=this.Cr(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new YC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Wg(e).get(Gh).next((t=>(ce(!!t,20021),t)))}Dr(e,t){return Wg(e).put(Gh,t)}Cr(e,t){if(t){const r=NC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return Ze.newInvalidDocument(e)}}function bA(n){return new QC(n)}class YC extends TA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new pr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Ue(((i,o)=>_e(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=kg(this.Nr.serializer,o);s=s.add(i.path.popLast());const u=al(l);r+=u-a.size,t.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=kg(this.Nr.serializer,o.convertToNoDocument(le.min()));t.push(this.Nr.addEntry(e,i,l))}})),s.forEach((i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),t.push(this.Nr.updateMetadata(e,r)),D.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function Wg(n){return ft(n,ya)}function fs(n){return ft(n,Jc)}function Po(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qg(n,e){const t=e.documentKey.path.toArray();return[n,il(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Yg(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=_e(t[i],r[i]),s)return s;return s=_e(t.length,r.length),s||(s=_e(t[t.length-2],r[r.length-2]),s||_e(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ta(r.mutation,s,Yt.empty(),Le.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ae()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ae()){const s=Mn();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let o=No();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Mn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ae())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,r,s){let i=sn();const o=ea(),a=(function(){return ea()})();return t.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof mr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ta(h.mutation,u,h.mutation.getFieldMask(),Le.now())):o.set(u.key,Yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),t.forEach(((u,h)=>a.set(u,new XC(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,t){const r=ea();let s=new Ke(((o,a)=>o-a)),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Yt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||Ae()).add(l);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=GI();h.forEach((m=>{if(!i.has(m)){const g=YI(t.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return D.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):D.resolve(Mn());let a=Oi,l=i;return o.next((u=>D.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?D.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{l=l.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ae()))).next((h=>({batchId:a,changes:jI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next((r=>{let s=No();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=No();return this.indexManager.getCollectionParents(e,i).next((a=>D.forEach(a,(l=>{const u=(function(f,m){return new eo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((f,m)=>{o=o.insert(f,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ze.newInvalidDocument(h)))}));let a=No();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&ta(h.mutation,u,Yt.empty(),Le.now()),La(t,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return D.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:qt(s.createTime)}})(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:pA(s.bundledQuery),readTime:qt(s.readTime)}})(t)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new Ke(ee.comparator),this.qr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mn();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),D.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const s=Mn(),i=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Ke(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Mn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Mn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return D.resolve(a)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sf(t,r));let i=this.qr.get(t);i===void 0&&(i=Ae(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this.Qr=new Ue(_t.$r),this.Ur=new Ue(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new _t(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new _t(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ee(new De([])),r=new _t(t,e),s=new _t(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ee(new De([])),r=new _t(t,e),s=new _t(t,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new _t(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ee.comparator(e.key,t.key)||_e(e.Yr,t.Yr)}static Kr(e,t){return _e(e.Yr,t.Yr)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ue(_t.$r)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nf(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,t){return D.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Cs:this.tr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _t(t,0),s=new _t(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ue(_e);return t.forEach((s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),D.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new _t(new ee(i),0);let a=new Ue(_e);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),D.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return D.forEach(t.mutations,(s=>{const i=new _t(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new _t(t,0),s=this.Zr.firstAfterOrEqual(r);return D.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.ri=e,this.docs=(function(){return new Ke(ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(t))}getEntries(e,t){let r=sn();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ze.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=sn();const o=t.path,a=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||qd(rI(h),r)<=0||(s.has(h.key)||La(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ie(9500)}ii(e,t){return D.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new nP(this)}getSize(e){return D.resolve(this.size)}}class nP extends TA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),D.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.persistence=e,this.si=new pr((t=>Fs(t)),Oa),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new uf,this.targetCount=0,this.ai=js.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),D.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new js(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.Pr(t),D.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),D.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.ui={},this.overlays={},this.ci=new Qt(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new rP(this),this.indexManager=new GC,this.remoteDocumentCache=(function(s){return new tP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dA(t),this.Ii=new JC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $C,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const s=new sP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return D.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class sP extends iI{constructor(e){super(),this.currentSequenceNumber=e}}class ru{constructor(e){this.persistence=e,this.Ri=new uf,this.Vi=null}static mi(e){return new ru(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),D.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.fi,(r=>{const s=ee.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return D.or([()=>D.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cl{constructor(e,t){this.persistence=e,this.pi=new pr((r=>Lt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=wA(this,t)}static mi(e,t){return new cl(e,t)}Ei(){}di(e){return D.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return D.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?D.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((a=>{a||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bc(e.data.value)),t}br(e,t,r){return D.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.serializer=e}k(e,t,r,s){const i=new ql("createOrUpgrade",t);r<1&&s>=1&&((function(l){l.createObjectStore(Na)})(e),(function(l){l.createObjectStore(_a,{keyPath:IS}),l.createObjectStore(gn,{keyPath:og,autoIncrement:!0}).createIndex(bs,ag,{unique:!0}),l.createObjectStore(Mi)})(e),Xg(e),(function(l){l.createObjectStore(_s)})(e));let o=D.resolve();return r<3&&s>=3&&(r!==0&&((function(l){l.deleteObjectStore(Fi),l.deleteObjectStore(Li),l.deleteObjectStore(Ps)})(e),Xg(e)),o=o.next((()=>(function(l){const u=l.store(Ps),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put($c,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(l,u){return u.store(gn).J().next((f=>{l.deleteObjectStore(gn),l.createObjectStore(gn,{keyPath:og,autoIncrement:!0}).createIndex(bs,ag,{unique:!0});const m=u.store(gn),g=f.map((R=>m.put(R)));return D.waitFor(g)}))})(e,i)))),o=o.next((()=>{(function(l){l.createObjectStore(Ui,{keyPath:PS})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(l){l.createObjectStore(ya)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(zl,{keyPath:kS})})(e),(function(l){l.createObjectStore(Wl,{keyPath:VS})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(l){const u=l.createObjectStore(Ql,{keyPath:FS});u.createIndex(qh,US,{unique:!1}),u.createIndex(fI,BS,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(l){const u=l.createObjectStore(Jc,{keyPath:ES});u.createIndex(wc,wS),u.createIndex(lI,TS)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(_s)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(l){l.createObjectStore(Wd,{keyPath:DS,autoIncrement:!0}).createIndex(Hh,xS,{unique:!1}),l.createObjectStore(Xo,{keyPath:NS}).createIndex(hI,OS,{unique:!1}),l.createObjectStore(Jo,{keyPath:MS}).createIndex(dI,LS,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{t.objectStore(Xo).clear()})).next((()=>{t.objectStore(Jo).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(Qd,{keyPath:jS})})(e)}))),r<18&&s>=18&&Fv()&&(o=o.next((()=>{t.objectStore(Xo).clear()})).next((()=>{t.objectStore(Jo).clear()}))),o}wi(e){let t=0;return e.store(_s).ee(((r,s)=>{t+=al(s)})).next((()=>{const r={byteSize:t};return e.store(ya).put(Gh,r)}))}yi(e){const t=e.store(_a),r=e.store(gn);return t.J().next((s=>D.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Cs],[i.userId,i.lastAcknowledgedBatchId]);return r.J(bs,o).next((a=>D.forEach(a,(l=>{ce(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Is(this.serializer,l);return yA(e,i.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(Fi),r=e.store(_s);return e.store(Ps).get($c).next((s=>{const i=[];return r.ee(((o,a)=>{const l=new De(o),u=(function(f){return[0,Lt(f)]})(l);i.push(t.get(u).next((h=>h?D.resolve():(f=>t.put({targetId:0,path:Lt(f),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>D.waitFor(i)))}))}bi(e,t){e.createObjectStore(va,{keyPath:CS});const r=t.store(va),s=new lf,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Lt(l)})}};return t.store(_s).ee({X:!0},((o,a)=>{const l=new De(o);return i(l.popLast())})).next((()=>t.store(Mi).ee({X:!0},(([o,a,l],u)=>{const h=On(a);return i(h.popLast())}))))}Di(e){const t=e.store(Li);return t.ee(((r,s)=>{const i=Mo(s),o=fA(this.serializer,i);return t.put(o)}))}Ci(e,t){const r=t.store(_s),s=[];return r.ee(((i,o)=>{const a=t.store(Jc),l=(function(f){return f.document?new ee(De.fromString(f.document.name).popFirst(5)):f.noDocument?ee.fromSegments(f.noDocument.path):f.unknownDocument?ee.fromSegments(f.unknownDocument.path):ie(36783)})(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>D.waitFor(s)))}Fi(e,t){const r=t.store(gn),s=bA(this.serializer),i=new hf(ru.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let u=a.get(l.userId)??Ae();Is(this.serializer,l).keys().forEach((h=>u=u.add(h))),a.set(l.userId,u)})),D.forEach(a,((l,u)=>{const h=new Ct(u),f=tu.wt(this.serializer,h),m=i.getIndexManager(h),g=nu.wt(h,this.serializer,m,i.referenceDelegate);return new RA(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Kh(t,Qt.ce),l).next()}))}))}}function Xg(n){n.createObjectStore(Fi,{keyPath:RS}).createIndex(zd,SS,{unique:!0}),n.createObjectStore(Li,{keyPath:"targetId"}).createIndex(uI,bS,{unique:!0}),n.createObjectStore(Ps)}const Rr="IndexedDbPersistence",rh=18e5,sh=5e3,ih="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oP="main";class df{constructor(e,t,r,s,i,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!df.v())throw new X(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WC(this,s),this.$i=t+oP,this.serializer=new dA(l),this.Ui=new Gr(this.$i,this.Ni,new iP(this.serializer)),this.hi=new MC,this.Pi=new qC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.Ii=new OC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&tt(Rr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,ih);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Qt(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ts(e))return z(Rr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(Rr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return ko(e).get(ti).next((t=>D.resolve(this.es(t))))}ts(e){return hc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rh)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=ft(t,Ui);return r.J().next((s=>{const i=this.ss(s,rh),o=s.filter((a=>i.indexOf(a)===-1));return D.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?D.resolve(!0):ko(e).get(ti).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sh)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,ih);return!1}}return!(!this.networkEnabled||!this.inForeground)||hc(e).J().next((r=>this.ss(r,sh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&z(Rr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Na,Ui],(e=>{const t=new Kh(e,Qt.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>hc(e).J().next((t=>this.ss(t,rh).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return nu.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return tu.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){z(Rr,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=(function(l){return l===18?qS:l===17?_I:l===16?HS:l===15?Yd:l===14?gI:l===13?mI:l===12?GS:l===11?pI:void ie(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(a=>(o=new Kh(a,this.ci?this.ci.next():Qt.ce),t==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new X(j.FAILED_PRECONDITION,sI);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return ko(e).get(ti).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sh)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new X(j.FAILED_PRECONDITION,ih)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ko(e).put(ti,t)}static v(){return Gr.v()}Zi(e){const t=ko(e);return t.get(ti).next((r=>this.es(r)?(z(Rr,"Releasing primary lease."),t.delete(ti)):D.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Lv()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return z(Rr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return tt(Rr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ko(n){return ft(n,Na)}function hc(n){return ft(n,Ui)}function SA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ae(),s=Ae();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ff(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Lv()?8:oI(ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new aP;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(di()<=be.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",fi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),D.resolve()):(di()<=be.DEBUG&&z("QueryEngine","Query:",fi(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(di()<=be.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",fi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(t))):D.resolve())}ys(e,t){if(Ig(t))return D.resolve(null);let r=on(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=nl(t,null,"F"),r=on(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,a);return this.Cs(t,u,o,l.readTime)?this.ys(e,nl(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,s){return Ig(t)||s.isEqual(le.min())?D.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,r,s)?D.resolve(null):(di()<=be.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fi(t)),this.vs(e,o,t,nI(s,Oi)).next((a=>a)))}))}Ds(e,t){let r=new Ue(UI(e));return t.forEach(((s,i)=>{La(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return di()<=be.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",fi(t)),this.ps.getDocumentsMatchingQuery(e,t,cn.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="LocalStore",cP=3e8;class lP{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ke(_e),this.xs=new pr((i=>Fs(i)),Oa),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function PA(n,e,t,r){return new lP(n,e,t,r)}async function kA(n,e){const t=ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let l=Ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function uP(n,e){const t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,m=f.keys();let g=D.resolve();return m.forEach((R=>{g=g.next((()=>h.getEntry(l,R))).next((C=>{const k=u.docVersions.get(R);ce(k!==null,48541),C.version.compareTo(k)<0&&(f.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),h.addEntry(C)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function VA(n){const e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hP(n,e){const t=ae(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const m=s.get(f);if(!m)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(rt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),(function(C,k,B){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=cP?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(m,g,h)&&a.push(t.Pi.updateTargetData(i,g))}));let l=sn(),u=Ae();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(dP(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(le.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return D.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(t.Ms=s,i)))}function dP(n,e,t){let r=Ae(),s=Ae();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let o=sn();return t.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z(pf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function fP(n,e){const t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ll(n,e){const t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,D.resolve(s)):t.Pi.allocateTargetId(r).next((o=>(s=new nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Qi(n,e,t){const r=ae(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ts(o))throw o;z(pf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function id(n,e,t){const r=ae(n);let s=le.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=ae(l),m=f.xs.get(h);return m!==void 0?D.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)})(r,o,on(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?s:le.min(),t?i:Ae()))).next((a=>(NA(r,FI(e),a),{documents:a,Qs:i})))))}function DA(n,e){const t=ae(n),r=ae(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function xA(n,e){const t=ae(n),r=t.Os.get(e)||le.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,nI(r,Oi),Number.MAX_SAFE_INTEGER))).then((s=>(NA(t,e,s),s)))}function NA(n,e,t){let r=n.Os.get(e)||le.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore_clients";function Jg(n,e){return`${OA}_${n}_${e}`}const MA="firestore_mutations";function $g(n,e,t){let r=`${MA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const LA="firestore_targets";function oh(n,e){return`${LA}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SharedClientState";class ul{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ws(e,t,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new X(s.error.code,s.error.message))),o?new ul(e,t,s.state,i):(tt(Nn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class na{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new X(r.error.code,r.error.message))),i?new na(e,r.state,s):(tt(Nn,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=ef();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=aI(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new hl(e,i):(tt(Nn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class mf{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new mf(t.clientId,t.onlineState):(tt(Nn,`Failed to parse online state: ${e}`),null)}}class od{constructor(){this.activeTargetIds=ef()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ah{constructor(e,t,r,s,i){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ke(_e),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Jg(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new od),this.ro=new RegExp(`^${OA}_${o}_([^_]*)$`),this.io=new RegExp(`^${MA}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${LA}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Jg(this.persistenceKey,r));if(s){const i=hl.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(oh(this.persistenceKey,e));if(s){const i=na.Ws(e,s);i&&(r=i.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oh(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return z(Nn,"READ",e,t),t}setItem(e,t){z(Nn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){z(Nn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(z(Nn,"EVENT",t.key,t.newValue),t.key===this.eo)return void tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(i){let o=Qt.ce;if(i!=null)try{const a=JSON.parse(i);ce(typeof a=="number",30636,{So:i}),o=a}catch(a){tt(Nn,"Failed to read sequence number from WebStorage",a)}return o})(t.newValue);r!==Qt.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const s=new ul(this.currentUser,e,t,r),i=$g(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const t=$g(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const s=oh(this.persistenceKey,e),i=new na(e,t,r);this.setItem(s,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return hl.Ws(r,t)}fo(e,t){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return ul.Ws(new Ct(i),s,t)}yo(e,t){const r=this.so.exec(e),s=Number(r[1]);return na.Ws(s,t)}uo(e){return mf.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);z(Nn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach((l=>{s.has(l)||o.push(l)})),s.forEach((l=>{i.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=ef();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class FA{constructor(){this.Mo=new od,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new od,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="ConnectivityMonitor";class e_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(Zg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(Zg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function ad(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="RestConnection",mP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const o=ad(),a=this.zo(e,t.toUriEncodedString());z(ch,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=zs(u);return this.Jo(e,a,l,r,h).then((f=>(z(ch,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw pa(ch,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}Ho(e,t,r,s,i,o){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=mP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class yP extends gP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=ad();return new Promise(((a,l)=>{const u=new Wv;u.setWithCredentials(!0),u.listenOnce(Qv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ic.NO_ERROR:const f=u.getResponseJson();z(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Ic.TIMEOUT:z(St,`RPC '${e}' ${o} timed out`),l(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const m=u.getStatus();if(z(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const R=g?.error;if(R&&R.status&&R.message){const C=(function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(F)>=0?F:j.UNKNOWN})(R.status);l(new X(C,R.message))}else l(new X(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new X(j.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{z(St,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);z(St,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",h,r,15)}))}T_(e,t,r){const s=ad(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jv(),a=Xv(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=i.join("");z(St,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,g=!1;const R=new _P({Yo:k=>{g?z(St,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(z(St,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),z(St,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Zo:()=>f.close()}),C=(k,B,F)=>{k.listen(B,(U=>{try{F(U)}catch(H){setTimeout((()=>{throw H}),0)}}))};return C(f,xo.EventType.OPEN,(()=>{g||(z(St,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),C(f,xo.EventType.CLOSE,(()=>{g||(g=!0,z(St,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(f))})),C(f,xo.EventType.ERROR,(k=>{g||(g=!0,pa(St,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new X(j.UNAVAILABLE,"The operation could not be completed")))})),C(f,xo.EventType.MESSAGE,(k=>{if(!g){const B=k.data[0];ce(!!B,16349);const F=B,U=F?.error||F[0]?.error;if(U){z(St,`RPC '${e}' stream ${s} received error:`,U);const H=U.status;let $=(function(v){const y=st[v];if(y!==void 0)return $I(y)})(H),re=U.message;$===void 0&&($=j.INTERNAL,re="Unknown error status: "+H+" with message "+U.message),g=!0,R.a_(new X($,re)),f.close()}else z(St,`RPC '${e}' stream ${s} received:`,B),R.u_(B)}})),C(a,Yv.STAT_EVENT,(k=>{k.stat===Uh.PROXY?z(St,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Uh.NOPROXY&&z(St,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return typeof window<"u"?window:null}function kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){return new TC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="PersistentStream";class jA{constructor(e,t,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(tt(t.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new X(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return z(t_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(z(t_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vP extends jA{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=SC(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?qt(o.readTime):le.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ed(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=el(l)?{documents:oA(i,l)}:{query:aA(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tA(i,o.resumeToken);const u=$h(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Wi(i,o.snapshotVersion.toTimestamp());const u=$h(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=PC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ed(this.serializer),t.removeTarget=e,this.q_(t)}}class IP extends jA{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=CC(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ed(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>sl(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{}class EP extends AP{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Zh(t,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(j.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Zh(t,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(j.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tt(t),this.aa=!1):z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class TP{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Qs(this)&&(z(Gs,"Restarting streams for network reachability change."),await(async function(l){const u=ae(l);u.Ea.add(4),await Ba(u),u.Ra.set("Unknown"),u.Ea.delete(4),await iu(u)})(this))}))})),this.Ra=new wP(r,s)}}async function iu(n){if(Qs(n))for(const e of n.da)await e(!0)}async function Ba(n){for(const e of n.da)await e(!1)}function ou(n,e){const t=ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yf(t)?_f(t):ro(t).O_()&&gf(t,e))}function Yi(n,e){const t=ae(n),r=ro(t);t.Ia.delete(e),r.O_()&&GA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qs(t)&&t.Ra.set("Unknown"))}function gf(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ro(n).Y_(e)}function GA(n,e){n.Va.Ue(e),ro(n).Z_(e)}function _f(n){n.Va=new IC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ro(n).start(),n.Ra.ua()}function yf(n){return Qs(n)&&!ro(n).x_()&&n.Ia.size>0}function Qs(n){return ae(n).Ea.size===0}function HA(n){n.Va=void 0}async function bP(n){n.Ra.set("Online")}async function RP(n){n.Ia.forEach(((e,t)=>{gf(n,e)}))}async function SP(n,e){HA(n),yf(n)?(n.Ra.ha(e),_f(n)):n.Ra.set("Unknown")}async function CP(n,e,t){if(n.Ra.set("Online"),e instanceof eA&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(n,e)}catch(r){z(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(n,r)}else if(e instanceof Cc?n.Va.Ze(e):e instanceof ZI?n.Va.st(e):n.Va.tt(e),!t.isEqual(le.min()))try{const r=await VA(n.localStore);t.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),GA(i,l);const f=new nr(h.target,l,u,h.sequenceNumber);gf(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){z(Gs,"Failed to raise snapshot:",r),await dl(n,r)}}async function dl(n,e,t){if(!ts(e))throw e;n.Ea.add(1),await Ba(n),n.Ra.set("Offline"),t||(t=()=>VA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{z(Gs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await iu(n)}))}function qA(n,e){return e().catch((t=>dl(n,t,e)))}async function no(n){const e=ae(n),t=Xr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cs;for(;PP(e);)try{const s=await fP(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,kP(e,s)}catch(s){await dl(e,s)}KA(e)&&zA(e)}function PP(n){return Qs(n)&&n.Ta.length<10}function kP(n,e){n.Ta.push(e);const t=Xr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function KA(n){return Qs(n)&&!Xr(n).x_()&&n.Ta.length>0}function zA(n){Xr(n).start()}async function VP(n){Xr(n).ra()}async function DP(n){const e=Xr(n);for(const t of n.Ta)e.ea(t.mutations)}async function xP(n,e,t){const r=n.Ta.shift(),s=rf.from(r,e,t);await qA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await no(n)}async function NP(n,e){e&&Xr(n).X_&&await(async function(r,s){if((function(o){return _C(o)&&o!==j.ABORTED})(s.code)){const i=r.Ta.shift();Xr(r).B_(),await qA(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await no(r)}})(n,e),KA(n)&&zA(n)}async function n_(n,e){const t=ae(n);t.asyncQueue.verifyOperationInProgress(),z(Gs,"RemoteStore received new credentials");const r=Qs(t);t.Ea.add(3),await Ba(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await iu(t)}async function cd(n,e){const t=ae(n);e?(t.Ea.delete(2),await iu(t)):e||(t.Ea.add(2),await Ba(t),t.Ra.set("Unknown"))}function ro(n){return n.ma||(n.ma=(function(t,r,s){const i=ae(t);return i.sa(),new vP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:bP.bind(null,n),t_:RP.bind(null,n),r_:SP.bind(null,n),H_:CP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yf(n)?_f(n):n.Ra.set("Unknown")):(await n.ma.stop(),HA(n))}))),n.ma}function Xr(n){return n.fa||(n.fa=(function(t,r,s){const i=ae(t);return i.sa(),new IP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:VP.bind(null,n),r_:NP.bind(null,n),ta:DP.bind(null,n),na:xP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await no(n)):(await n.fa.stop(),n.Ta.length>0&&(z(Gs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new vf(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(n,e){if(tt("AsyncQueue",`${e}: ${n}`),ts(n))return new X(j.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{static emptySet(e){return new bi(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=No(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new Ke(ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xi{constructor(e,t,r,s,i,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new Xi(e,t,bi.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class MP{constructor(){this.queries=s_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ae(t),i=s.queries;s.queries=s_(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new X(j.ABORTED,"Firestore shutting down"))}}function s_(){return new pr((n=>LI(n)),Jl)}async function WA(n,e){const t=ae(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new OP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=If(o,`Initialization of query '${fi(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Af(t)}async function QA(n,e){const t=ae(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function LP(n,e){const t=ae(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Af(t)}function FP(n,e,t){const r=ae(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function Af(n){n.Ca.forEach((e=>{e.next()}))}var ld,i_;(i_=ld||(ld={})).Ma="default",i_.Cache="cache";class YA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.key=e}}class JA{constructor(e){this.key=e}}class UP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=UI(e),this.tu=new bi(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new r_,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const m=s.get(h),g=La(this.query,f)?f:null,R=!!m&&this.mutatedKeys.has(m.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;m&&g?m.data.isEqual(g.data)?R!==C&&(r.track({type:3,doc:g}),k=!0):this.su(m,g)||(r.track({type:2,doc:g}),k=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),k=!0):m&&!g&&(r.track({type:1,doc:m}),k=!0,(l||u)&&(a=!0)),k&&(g?(o=o.add(g),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,R){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:k})}};return C(g)-C(R)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Xi(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new JA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new XA(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ae();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const so="SyncEngine";class BP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jP{constructor(e){this.key=e,this.hu=!1}}class GP{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pr((a=>LI(a)),Jl),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ee.comparator),this.Au=new Map,this.Ru=new uf,this.Vu={},this.mu=new Map,this.fu=js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HP(n,e,t=!0){const r=au(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await $A(r,e,t,!0),s}async function qP(n,e){const t=au(n);await $A(t,e,!0,!1)}async function $A(n,e,t,r){const s=await ll(n.localStore,on(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await Ef(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&ou(n.remoteStore,s),a}async function Ef(n,e,t,r,s){n.pu=(f,m,g)=>(async function(C,k,B,F){let U=k.view.ru(B);U.Cs&&(U=await id(C.localStore,k.query,!1).then((({documents:S})=>k.view.ru(S,U))));const H=F&&F.targetChanges.get(k.targetId),$=F&&F.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges(U,C.isPrimaryClient,H,$);return ud(C,k.targetId,re.au),re.snapshot})(n,f,m,g);const i=await id(n.localStore,e,!0),o=new UP(e,i.Qs),a=o.ru(i.documents),l=Ua.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,l);ud(n,t,u.au);const h=new BP(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function KP(n,e,t){const r=ae(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Jl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Qi(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Yi(r.remoteStore,s.targetId),Ji(r,s.targetId)})).catch(es)):(Ji(r,s.targetId),await Qi(r.localStore,s.targetId,!0))}async function zP(n,e){const t=ae(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yi(t.remoteStore,r.targetId))}async function WP(n,e,t){const r=Rf(n);try{const s=await(function(o,a){const l=ae(o),u=Le.now(),h=a.reduce(((g,R)=>g.add(R.key)),Ae());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let R=sn(),C=Ae();return l.Ns.getEntries(g,h).next((k=>{R=k,R.forEach(((B,F)=>{F.isValidDocument()||(C=C.add(B))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,R))).next((k=>{f=k;const B=[];for(const F of a){const U=mC(F,f.get(F.key).overlayedDocument);U!=null&&B.push(new mr(F.key,U,SI(U.value.mapValue),Ot.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,B,a)})).next((k=>{m=k;const B=k.applyToLocalDocumentSet(f,C);return l.documentOverlayCache.saveOverlays(g,k.batchId,B)}))})).then((()=>({batchId:m.batchId,changes:jI(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ke(_e)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,t),await rs(r,s.changes),await no(r.remoteStore)}catch(s){const i=If(s,"Failed to persist write");t.reject(i)}}async function ZA(n,e){const t=ae(n);try{const r=await hP(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=t.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))})),await rs(t,r,e)}catch(r){await es(r)}}function o_(n,e,t){const r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=ae(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const m of f.Sa)m.va(a)&&(u=!0)})),u&&Af(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QP(n,e,t){const r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ke(ee.comparator);o=o.insert(i,Ze.newNoDocument(i,le.min()));const a=Ae().add(i),l=new Fa(le.min(),new Map,new Ke(_e),o,a);await ZA(r,l),r.du=r.du.remove(i),r.Au.delete(e),bf(r)}else await Qi(r.localStore,e,!1).then((()=>Ji(r,e,t))).catch(es)}async function YP(n,e){const t=ae(n),r=e.batch.batchId;try{const s=await uP(t.localStore,e);Tf(t,r,null),wf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await rs(t,s)}catch(s){await es(s)}}async function XP(n,e,t){const r=ae(n);try{const s=await(function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(ce(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Tf(r,e,t),wf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await rs(r,s)}catch(s){await es(s)}}function wf(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Tf(n,e,t){const r=ae(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ji(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||eE(n,r)}))}function eE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yi(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),bf(n))}function ud(n,e,t){for(const r of t)r instanceof XA?(n.Ru.addReference(r.key,e),JP(n,r)):r instanceof JA?(z(so,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||eE(n,r.key)):ie(19791,{wu:r})}function JP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(z(so,"New document in limbo: "+t),n.Eu.add(r),bf(n))}function bf(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ee(De.fromString(e)),r=n.fu.next();n.Au.set(r,new jP(t)),n.du=n.du.insert(t,r),ou(n.remoteStore,new nr(on(Ma(t.path)),r,"TargetPurposeLimboResolution",Qt.ce))}}async function rs(n,e,t){const r=ae(n),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=ff.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>D.forEach(u,(m=>D.forEach(m.Es,(g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g))).next((()=>D.forEach(m.ds,(g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))))))}catch(f){if(!ts(f))throw f;z(pf,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ms.get(m),R=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,C)}}})(r.localStore,i))}async function $P(n,e){const t=ae(n);if(!t.currentUser.isEqual(e)){z(so,"User change. New user:",e.toKey());const r=await kA(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new X(j.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rs(t,r.Ls)}}function ZP(n,e){const t=ae(n),r=t.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=t.Iu.get(e);if(!i)return s;for(const o of i){const a=t.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function e2(n,e){const t=ae(n),r=await id(t.localStore,e.query,!0),s=e.view.cu(r);return t.isPrimaryClient&&ud(t,e.targetId,s.au),s}async function t2(n,e){const t=ae(n);return xA(t.localStore,e).then((r=>rs(t,r)))}async function n2(n,e,t,r){const s=ae(n),i=await(function(a,l){const u=ae(a),h=ae(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.er(f,l).next((m=>m?u.localDocuments.getDocuments(f,m):D.resolve(null)))))})(s.localStore,e);i!==null?(t==="pending"?await no(s.remoteStore):t==="acknowledged"||t==="rejected"?(Tf(s,e,r||null),wf(s,e),(function(a,l){ae(ae(a).mutationQueue).ir(l)})(s.localStore,e)):ie(6720,"Unknown batchState",{Su:t}),await rs(s,i)):z(so,"Cannot apply mutation batch with id: "+e)}async function r2(n,e){const t=ae(n);if(au(t),Rf(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await a_(t,r.toArray());t.gu=!0,await cd(t.remoteStore,!0);for(const i of s)ou(t.remoteStore,i)}else if(e===!1&&t.gu!==!1){const r=[];let s=Promise.resolve();t.Iu.forEach(((i,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(Ji(t,o),Qi(t.localStore,o,!0)))),Yi(t.remoteStore,o)})),await s,await a_(t,r),(function(o){const a=ae(o);a.Au.forEach(((l,u)=>{Yi(a.remoteStore,u)})),a.Ru.Jr(),a.Au=new Map,a.du=new Ke(ee.comparator)})(t),t.gu=!1,await cd(t.remoteStore,!1)}}async function a_(n,e,t){const r=ae(n),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await ll(r.localStore,on(l[0]));for(const u of l){const h=r.Tu.get(u),f=await e2(r,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await DA(r.localStore,o);a=await ll(r.localStore,u),await Ef(r,tE(u),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function tE(n){return OI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function s2(n){return(function(t){return ae(ae(t).persistence).Ts()})(ae(n).localStore)}async function i2(n,e,t,r){const s=ae(n);if(s.gu)return void z(so,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const o=await xA(s.localStore,FI(i[0])),a=Fa.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);await rs(s,o,a);break}case"rejected":await Qi(s.localStore,e,!0),Ji(s,e,r);break;default:ie(64155,t)}}async function o2(n,e,t){const r=au(n);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){z(so,"Adding an already active target "+s);continue}const i=await DA(r.localStore,s),o=await ll(r.localStore,i);await Ef(r,tE(i),o.targetId,!1,o.resumeToken),ou(r.remoteStore,o)}for(const s of t)r.Iu.has(s)&&await Qi(r.localStore,s,!1).then((()=>{Yi(r.remoteStore,s),Ji(r,s)})).catch(es)}}function au(n){const e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QP.bind(null,e),e.Pu.H_=LP.bind(null,e.eventManager),e.Pu.yu=FP.bind(null,e.eventManager),e}function Rf(n){const e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XP.bind(null,e),e}class Ra{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PA(this.persistence,new CA,e.initialUser,this.serializer)}Cu(e){return new hf(ru.mi,this.serializer)}Du(e){return new FA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ra.provider={build:()=>new Ra};class a2 extends Ra{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ce(this.persistence.referenceDelegate instanceof cl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new hf((r=>cl.mi(r,t)),this.serializer)}}class nE extends Ra{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Rf(this.xu.syncEngine),await no(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return PA(this.persistence,new CA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new EA(r,e.asyncQueue,t)}Mu(e,t){const r=new yS(t,this.persistence);return new _S(e.asyncQueue,r)}Cu(e){const t=SA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new df(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UA(),kc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new FA}}class c2 extends nE{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ah&&(this.sharedClientState.syncEngine={Co:n2.bind(null,t),vo:i2.bind(null,t),Fo:o2.bind(null,t),Ts:s2.bind(null,t),Do:t2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await r2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=UA();if(!ah.v(t))throw new X(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=SA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ah(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Sa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$P.bind(null,this.syncEngine),await cd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MP})()}createDatastore(e){const t=su(e.databaseInfo.databaseId),r=(function(i){return new yP(i)})(e.databaseInfo);return(function(i,o,a,l){return new EP(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,o,a){return new TP(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>o_(this.syncEngine,t,0)),(function(){return e_.v()?new e_:new pP})())}createSyncEngine(e,t){return(function(s,i,o,a,l,u,h){const f=new GP(s,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ae(t);z(Gs,"RemoteStore shutting down."),r.Ea.add(5),await Ba(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sa.provider={build:()=>new Sa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class l2{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{z(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(z(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=If(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lh(n,e){n.asyncQueue.verifyOperationInProgress(),z(Jr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await kA(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function c_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await u2(n);z(Jr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>n_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>n_(e.remoteStore,s))),n._onlineComponents=e}async function u2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(Jr,"Using user provided OfflineComponentProvider");try{await lh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;pa("Error using user provided cache. Falling back to memory cache: "+t),await lh(n,new Ra)}}else z(Jr,"Using default OfflineComponentProvider"),await lh(n,new a2(void 0));return n._offlineComponents}async function sE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(Jr,"Using user provided OnlineComponentProvider"),await c_(n,n._uninitializedComponentsProvider._online)):(z(Jr,"Using default OnlineComponentProvider"),await c_(n,new Sa))),n._onlineComponents}function h2(n){return sE(n).then((e=>e.syncEngine))}async function hd(n){const e=await sE(n),t=e.eventManager;return t.onListen=HP.bind(null,e.syncEngine),t.onUnlisten=KP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zP.bind(null,e.syncEngine),t}function d2(n,e,t={}){const r=new ir;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new rE({next:m=>{h.Nu(),o.enqueueAndForget((()=>QA(i,f)));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new X(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new X(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new YA(Ma(a.path),h,{includeMetadataChanges:!0,qa:!0});return WA(i,f)})(await hd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firestore.googleapis.com",u_=!0;class h_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f2,this.ssl=u_}else this.host=e.host,this.ssl=e.ssl??u_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AA)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new iS;switch(r.type){case"firstParty":return new cS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=l_.get(t);r&&(z("ComponentProvider","Removing Datastore"),l_.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class et{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xa(t,et._jsonSchema))return new et(e,r||null,new ee(De.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:it("string",et._jsonSchemaVersion),referencePath:it("string")};class Hr extends ss{constructor(e,t,r){super(e,t,Ma(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ee(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function fl(n,e,...t){if(n=dt(n),eI("collection","path",e),n instanceof Sf){const r=De.fromString(e,...t);return tg(r),new Hr(n,null,r)}{if(!(n instanceof et||n instanceof Hr))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return tg(r),new Hr(n.firestore,null,r)}}function kt(n,e,...t){if(n=dt(n),arguments.length===1&&(e=Hd.newId()),eI("doc","path",e),n instanceof Sf){const r=De.fromString(e,...t);return eg(r),new et(n,null,new ee(r))}{if(!(n instanceof et||n instanceof Hr))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return eg(r),new et(n.firestore,n instanceof Hr?n.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="AsyncQueue";class f_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BA(this,"async_queue_retry"),this._c=()=>{const r=kc();r&&z(d_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=kc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;z(d_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,tt("INTERNAL UNHANDLED ERROR: ",p_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=vf.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:p_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function p_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(n,["next","error","complete"])}class $r extends Sf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new f_,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f_(e),this._firestoreClient=void 0,await e}}}function p2(n,e,t){t||(t=Zc);const r=Gl(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),i=r.getOptions(t);if(Ns(i,e))return s;throw new X(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new X(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AA)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&zs(e.host)&&Ud(e.host),r.initialize({options:e,instanceIdentifier:t})}function Cf(n){if(n._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m2(n),n._firestoreClient}function m2(n){const e=n._freezeSettings(),t=(function(s,i,o,a){return new zS(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,iE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new l2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(rt.fromBase64String(e))}catch(t){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hn(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xa(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:it("string",hn._jsonSchemaVersion),bytes:it("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jn._jsonSchemaVersion}}static fromJSON(e){if(xa(e,jn._jsonSchema))return new jn(e.latitude,e.longitude)}}jn._jsonSchemaVersion="firestore/geoPoint/1.0",jn._jsonSchema={type:it("string",jn._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xa(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gn(e.vectorValues);throw new X(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:it("string",Gn._jsonSchemaVersion),vectorValues:it("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=/^__.*__$/;class _2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new to(e,this.data,t,this.fieldTransforms)}}class oE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:n})}}class Pf{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aE(this.Ac)&&g2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class y2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||su(e)}Cc(e,t,r,s=!1){return new Pf({Ac:e,methodName:t,Dc:r,path:Qe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uu(n){const e=n._freezeSettings(),t=su(n._databaseId);return new y2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cE(n,e,t,r,s,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);Vf("Data must be an object, but it was:",o,r);const a=lE(r,o);let l,u;if(i.merge)l=new Yt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=dd(e,f,t);if(!o.contains(m))throw new X(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hE(h,m)||h.push(m)}l=new Yt(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new _2(new Nt(a),l,u)}class hu extends lu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hu}}class kf extends lu{_toFieldTransform(e){return new QI(e.path,new qi)}isEqual(e){return e instanceof kf}}function v2(n,e,t,r){const s=n.Cc(1,e,t);Vf("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();ns(r,((l,u)=>{const h=Df(e,l,t);u=dt(u);const f=s.yc(h);if(u instanceof hu)i.push(h);else{const m=ja(u,f);m!=null&&(i.push(h),o.set(h,m))}}));const a=new Yt(i);return new oE(o,a,s.fieldTransforms)}function I2(n,e,t,r,s,i){const o=n.Cc(1,e,t),a=[dd(e,r,t)],l=[s];if(i.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(dd(e,i[m])),l.push(i[m+1]);const u=[],h=Nt.empty();for(let m=a.length-1;m>=0;--m)if(!hE(u,a[m])){const g=a[m];let R=l[m];R=dt(R);const C=o.yc(g);if(R instanceof hu)u.push(g);else{const k=ja(R,C);k!=null&&(u.push(g),h.set(g,k))}}const f=new Yt(u);return new oE(h,f,o.fieldTransforms)}function A2(n,e,t,r=!1){return ja(t,n.Cc(r?4:3,e))}function ja(n,e){if(uE(n=dt(n)))return Vf("Unsupported field value:",e,n),lE(n,e);if(n instanceof lu)return(function(r,s){if(!aE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let l=ja(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:Wi(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wi(s.serializer,i)}}if(r instanceof jn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hn)return{bytesValue:tA(s.serializer,r._byteString)};if(r instanceof et){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:af(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gn)return(function(o,a){return{mapValue:{fields:{[Jd]:{stringValue:$d},[Bi]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return tf(a.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Hl(r)}`)})(n,e)}function lE(n,e){const t={};return yI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ns(n,((r,s)=>{const i=ja(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function uE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof jn||n instanceof hn||n instanceof et||n instanceof lu||n instanceof Gn)}function Vf(n,e,t){if(!uE(t)||!tI(t)){const r=Hl(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function dd(n,e,t){if((e=dt(e))instanceof cu)return e._internalPath;if(typeof e=="string")return Df(n,e);throw pl("Field path arguments must be of type string or ",n,!1,void 0,t)}const E2=new RegExp("[~\\*/\\[\\]]");function Df(n,e,t){if(e.search(E2)>=0)throw pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cu(...e.split("."))._internalPath}catch{throw pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pl(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(j.INVALID_ARGUMENT,a+n+l)}function hE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(du("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class w2 extends dE{data(){return super.data()}}function du(n,e){return typeof e=="string"?Df(n,e):e instanceof cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xf{}class Nf extends xf{}function fE(n,e,...t){let r=[];e instanceof xf&&r.push(e),r=r.concat(t),(function(i){const o=i.filter((l=>l instanceof Of)).length,a=i.filter((l=>l instanceof fu)).length;if(o>1||o>0&&a>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class fu extends Nf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fu(e,t,r)}_apply(e){const t=this._parse(e);return mE(e._query,t),new ss(e.firestore,e.converter,Jh(e._query,t))}_parse(e){const t=uu(e.firestore);return(function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){__(f,h);const R=[];for(const C of f)R.push(g_(l,i,C));m={arrayValue:{values:R}}}else m=g_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||__(f,h),m=A2(a,o,f,h==="in"||h==="not-in");return Re.create(u,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function b2(n,e,t){const r=e,s=du("where",n);return fu._create(s,r,t)}class Of extends xf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Of(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Fe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)mE(o,l),o=Jh(o,l)})(e._query,t),new ss(e.firestore,e.converter,Jh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mf extends Nf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mf(e,t)}_apply(e){const t=(function(s,i,o){if(s.startAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ta(i,o)})(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new eo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function pE(n,e="asc"){const t=e,r=du("orderBy",n);return Mf._create(r,t)}class Lf extends Nf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Lf(e,t,r)}_apply(e){return new ss(e.firestore,e.converter,nl(e._query,this._limit,this._limitType))}}function R2(n){return Lf._create("limit",n,"F")}function g_(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MI(e)&&t.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(De.fromString(t));if(!ee.isDocumentKey(r))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ea(n,new ee(r))}if(t instanceof et)return Ea(n,t._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hl(t)}.`)}function __(n,e){if(!Array.isArray(n)||n.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mE(n,e){const t=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class S2{convertValue(e,t="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ns(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[Bi].arrayValue?.values?.map((r=>We(r.doubleValue)));return new Gn(t)}convertGeoPoint(e){return new jn(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const t=lr(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=De.fromString(e);ce(hA(r),9688,{name:e});const s=new Ls(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(t)||tt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Lo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vs extends dE{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(du("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:it("string",Vs._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class Vc extends Vs{data(e={}){return super.data(e)}}class Ri{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vc(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new Vc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Vc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:C2(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n){n=wn(n,et);const e=wn(n.firestore,$r);return d2(Cf(e),n._key).then((t=>AE(e,n,t)))}Ri._jsonSchemaVersion="firestore/querySnapshot/1.0",Ri._jsonSchema={type:it("string",Ri._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class _E extends S2{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function ws(n,e,t){n=wn(n,et);const r=wn(n.firestore,$r),s=gE(n.converter,e,t);return pu(r,[cE(uu(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ot.none())])}function fd(n,e,t,...r){n=wn(n,et);const s=wn(n.firestore,$r),i=uu(s);let o;return o=typeof(e=dt(e))=="string"||e instanceof cu?I2(i,"updateDoc",n._key,e,t,r):v2(i,"updateDoc",n._key,e),pu(s,[o.toMutation(n._key,Ot.exists(!0))])}function yE(n){return pu(wn(n.firestore,$r),[new eu(n._key,Ot.none())])}function vE(n,e){const t=wn(n.firestore,$r),r=kt(n),s=gE(n.converter,e);return pu(t,[cE(uu(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Ot.exists(!1))]).then((()=>r))}function IE(n,...e){n=dt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||m_(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(m_(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,a;if(n instanceof et)o=wn(n.firestore,$r),a=Ma(n._key.path),i={next:l=>{e[r]&&e[r](AE(o,n,l))},error:e[r+1],complete:e[r+2]};else{const l=wn(n,ss);o=wn(l.firestore,$r),a=l._query;const u=new _E(o);i={next:h=>{e[r]&&e[r](new Ri(o,u,l,h))},error:e[r+1],complete:e[r+2]},T2(n._query)}return(function(u,h,f,m){const g=new rE(m),R=new YA(h,g,f);return u.asyncQueue.enqueueAndForget((async()=>WA(await hd(u),R))),()=>{g.Nu(),u.asyncQueue.enqueueAndForget((async()=>QA(await hd(u),R)))}})(Cf(o),a,s,i)}function pu(n,e){return(function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget((async()=>WP(await h2(r),s,i))),i.promise})(Cf(n),e)}function AE(n,e,t){const r=t.docs.get(e._key),s=new _E(n);return new Vs(n,s,e._key,r,new Lo(t.hasPendingWrites,t.fromCache),e.converter)}class P2{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=x2(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function k2(n){return new P2(n)}class V2{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sa.provider,this._offlineComponentProvider={build:t=>new nE(t,e?.cacheSizeBytes,this.forceOwnership)}}}class D2{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sa.provider,this._offlineComponentProvider={build:t=>new c2(t,e?.cacheSizeBytes)}}}function x2(n){return new V2(n?.forceOwnership)}function N2(){return new D2}function qr(){return new kf("serverTimestamp")}(function(e,t=!0){(function(s){Zi=s})(Ws),Os(new Wr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new $r(new oS(r.getProvider("auth-internal")),new lS(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Bn(Xm,Jm,e),Bn(Xm,Jm,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebasestorage.googleapis.com",O2="storageBucket",M2=120*1e3,L2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Wn{constructor(e,t,r=0){super(uh(e),`Firebase Storage: ${t} (${uh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function uh(n){return"storage/"+n}function F2(){const n="An unknown error occurred, please check the error payload for server response.";return new Qn(Kn.UNKNOWN,n)}function U2(){return new Qn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B2(){return new Qn(Kn.CANCELED,"User canceled the upload/download.")}function j2(n){return new Qn(Kn.INVALID_URL,"Invalid URL '"+n+"'.")}function G2(n){return new Qn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function y_(n){return new Qn(Kn.INVALID_ARGUMENT,n)}function wE(){return new Qn(Kn.APP_DELETED,"The Firebase app was deleted.")}function H2(n){return new Qn(Kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yn.makeFromUrl(e,t)}catch{return new yn(e,"")}if(r.path==="")return r;throw G2(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(H){H.path_=decodeURIComponent(H.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),R={bucket:1,path:3},C=t===EE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",B=new RegExp(`^https?://${C}/${s}/${k}`,"i"),U=[{regex:a,indices:l,postModify:i},{regex:g,indices:R,postModify:u},{regex:B,indices:{bucket:1,path:2},postModify:u}];for(let H=0;H<U.length;H++){const $=U[H],re=$.regex.exec(e);if(re){const S=re[$.indices.bucket];let v=re[$.indices.path];v||(v=""),r=new yn(S,v),$.postModify(r);break}}if(r==null)throw j2(e);return r}}class q2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...k){u||(u=!0,e.apply(null,k))}function f(k){s=setTimeout(()=>{s=null,n(g,l())},k)}function m(){i&&clearTimeout(i)}function g(k,...B){if(u){m();return}if(k){m(),h.call(null,k,...B);return}if(l()||o){m(),h.call(null,k,...B);return}r<64&&(r*=2);let U;a===1?(a=2,U=0):U=(r+Math.random())*1e3,f(U)}let R=!1;function C(k){R||(R=!0,m(),!u&&(s!==null?(k||(a=2),clearTimeout(s),f(0)):k||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,C(!0)},t),C}function z2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){return n!==void 0}function v_(n,e,t,r){if(r<e)throw y_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw y_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Q2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var ml;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ml||(ml={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t,r,s,i,o,a,l,u,h,f,m=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,C)=>{this.resolve_=R,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ml.NO_ERROR,l=i.getStatus();if(!a||Y2(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ml.ABORT;r(!1,new fc(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new fc(u,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());W2(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=F2();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?wE():B2();o(l)}else{const l=U2();o(l)}};this.canceled_?t(!1,new fc(!1,null,!0)):this.backoffId_=K2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&z2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function J2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ek(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function tk(n,e,t,r,s,i,o=!0,a=!1){const l=Q2(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return Z2(h,e),J2(h,t),$2(h,i),ek(h,r),new X2(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function rk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this._service=e,t instanceof yn?this._location=t:this._location=yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gl(e,t)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rk(this._location.path)}get storage(){return this._service}get parent(){const e=nk(this._location.path);if(e===null)return null;const t=new yn(this._location.bucket,e);return new gl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw H2(e)}}function I_(n,e){const t=e?.[O2];return t==null?null:yn.makeFromBucketSpec(t,n)}function sk(n,e,t,r={}){n.host=`${e}:${t}`;const s=zs(e);s&&(Ud(`https://${n.host}/b`),Ov("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Db(i,n.app.options.projectId))}class ik{constructor(e,t,r,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=EE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M2,this._maxUploadRetryTime=L2,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=I_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=I_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gl(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new q2(wE());{const o=tk(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const A_="@firebase/storage",E_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="storage";function ok(n=Hv(),e){n=dt(n);const r=Gl(n,TE).getImmediate({identifier:e}),s=kb("storage");return s&&ak(r,...s),r}function ak(n,e,t,r={}){sk(n,e,t,r)}function ck(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new ik(t,r,s,e,Ws)}function lk(){Os(new Wr(TE,ck,"PUBLIC").setMultipleInstances(!0)),Bn(A_,E_,""),Bn(A_,E_,"esm2020")}lk();function bE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uk=bE,RE=new Va("auth","Firebase",bE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new Bd("@firebase/auth");function hk(n,...e){_l.logLevel<=be.WARN&&_l.warn(`Auth (${Ws}): ${n}`,...e)}function Dc(n,...e){_l.logLevel<=be.ERROR&&_l.error(`Auth (${Ws}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(n,...e){throw Uf(n,...e)}function Tn(n,...e){return Uf(n,...e)}function Ff(n,e,t){const r={...uk(),[e]:t};return new Va("auth","Firebase",r).create(e,{appName:n.name})}function Ds(n){return Ff(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(n,"argument-error"),Ff(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return RE.create(n,...e)}function me(n,e,...t){if(!n)throw Uf(e,...t)}function rr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Dc(e),new Error(e)}function hr(n,e){n||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return typeof self<"u"&&self.location?.href||""}function fk(){return w_()==="http:"||w_()==="https:"}function w_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fk()||Lb()||"connection"in navigator)?navigator.onLine:!0}function mk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this.shortDelay=e,this.longDelay=t,hr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ob()||Fb()}get(){return pk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e){hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yk=new Ga(3e4,6e4);function jf(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function io(n,e,t,r,s={}){return CE(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Da({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...i};return Mb()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&zs(n.emulatorConfig.host)&&(u.credentials="include"),SE.fetch()(await PE(n,n.config.apiHost,t,a),u)})}async function CE(n,e,t){n._canInitEmulator=!1;const r={...gk,...e};try{const s=new Ik(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pc(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw pc(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ff(n,h,u);zn(n,h)}}catch(s){if(s instanceof Wn)throw s;zn(n,"network-request-failed",{message:String(s)})}}async function vk(n,e,t,r,s={}){const i=await io(n,e,t,r,s);return"mfaPendingCredential"in i&&zn(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function PE(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?Bf(n.config,s):`${n.config.apiScheme}://${s}`;return _k.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Ik{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),yk.get())})}}function pc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Tn(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e){return io(n,"POST","/v1/accounts:delete",e)}async function yl(n,e){return io(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ek(n,e=!1){const t=dt(n),r=await t.getIdToken(e),s=Gf(r);me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:ra(hh(s.auth_time)),issuedAtTime:ra(hh(s.iat)),expirationTime:ra(hh(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function hh(n){return Number(n)*1e3}function Gf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=kv(t);return s?JSON.parse(s):(Dc("Failed to decode base64 JWT payload"),null)}catch(s){return Dc("Caught error parsing JWT payload as JSON",s?.toString()),null}}function T_(n){const e=Gf(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wn&&wk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function wk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n){const e=n.auth,t=await n.getIdToken(),r=await Ca(n,yl(e,{idToken:t}));me(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?kE(s.providerUserInfo):[],o=Rk(n.providerData,i),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!o?.length,u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new md(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function bk(n){const e=dt(n);await vl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Rk(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e){const t=await CE(n,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await PE(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&zs(n.emulatorConfig.host)&&(l.credentials="include"),SE.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ck(n,e){return io(n,"POST","/v2/accounts:revokeToken",jf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");const t=T_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await Sk(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new Si;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vn{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Tk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ek(this,e)}reload(){return bk(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await Ca(this,Ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:R,stsTokenManager:C}=t;me(f&&C,e,"internal-error");const k=Si.fromJSON(this.name,C);me(typeof f=="string",e,"internal-error"),Sr(r,e.name),Sr(s,e.name),me(typeof m=="boolean",e,"internal-error"),me(typeof g=="boolean",e,"internal-error"),Sr(i,e.name),Sr(o,e.name),Sr(a,e.name),Sr(l,e.name),Sr(u,e.name),Sr(h,e.name);const B=new vn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:h});return R&&Array.isArray(R)&&(B.providerData=R.map(F=>({...F}))),l&&(B._redirectEventId=l),B}static async _fromIdTokenResponse(e,t,r=!1){const s=new Si;s.updateFromServerResponse(t);const i=new vn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await vl(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new Si;a.updateFromIdToken(r);const l=new vn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new md(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function sr(n){hr(n instanceof Function,"Expected a class definition");let e=b_.get(n);return e?(hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,b_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VE.type="NONE";const R_=VE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ci{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xc(this.userKey,s.apiKey,i),this.fullPersistenceKey=xc("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yl(this.auth,{idToken:e}).catch(()=>{});return t?vn._fromGetAccountInfoResponse(this.auth,t,e):null}return vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ci(sr(R_),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||sr(R_);const o=xc(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await yl(e,{idToken:h}).catch(()=>{});if(!m)break;f=await vn._fromGetAccountInfoResponse(e,m,h)}else f=vn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ci(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LE(e))return"Blackberry";if(FE(e))return"Webos";if(xE(e))return"Safari";if((e.includes("chrome/")||NE(e))&&!e.includes("edge/"))return"Chrome";if(ME(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function DE(n=ht()){return/firefox\//i.test(n)}function xE(n=ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NE(n=ht()){return/crios\//i.test(n)}function OE(n=ht()){return/iemobile/i.test(n)}function ME(n=ht()){return/android/i.test(n)}function LE(n=ht()){return/blackberry/i.test(n)}function FE(n=ht()){return/webos/i.test(n)}function Hf(n=ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pk(n=ht()){return Hf(n)&&!!window.navigator?.standalone}function kk(){return Ub()&&document.documentMode===10}function UE(n=ht()){return Hf(n)||ME(n)||FE(n)||LE(n)||/windows phone/i.test(n)||OE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e=[]){let t;switch(n){case"Browser":t=S_(ht());break;case"Worker":t=`${S_(ht())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e={}){return io(n,"GET","/v2/passwordPolicy",jf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=6;class Nk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new Vk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yl(this,{idToken:e}),r=await vn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(un(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(Ds(this));const t=e?dt(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Dk(this),t=new Nk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ck(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sr(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function mu(n){return dt(n)}class C_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kb(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mk(n){qf=n}function Lk(n){return qf.loadJS(n)}function Fk(){return qf.gapiScript}function Uk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n,e){const t=Gl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Ns(i,e??{}))return s;zn(s,"already-initialized")}return t.initialize({options:e})}function jk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Gk(n,e,t){const r=mu(n);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=jE(e),{host:o,port:a}=Hk(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(Ns(u,r.config.emulator)&&Ns(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zs(o)?(Ud(`${i}//${o}${l}`),Ov("Auth",!0)):qk()}function jE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Hk(n){const e=jE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:P_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:P_(o)}}}function P_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(n,e){return vk(n,"POST","/v1/accounts:signInWithIdp",jf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="http://localhost";class Hs extends GE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const o=new Hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Pi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pi(e,t)}buildRequest(){const e={requestUri:Kk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Da(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ha{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hs._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return tr.credential(t,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ha{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ha{constructor(){super("twitter.com")}static credential(e,t){return Hs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Or.credential(t,r)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await vn._fromIdTokenResponse(e,r,s),o=k_(r);return new $i({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=k_(r);return new $i({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function k_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Wn{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Il.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Il(e,t,r,s)}}function HE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Il._fromErrorAndOperation(n,i,e,r):i})}async function zk(n,e,t=!1){const r=await Ca(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $i._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(n,e,t=!1){const{auth:r}=n;if(un(r.app))return Promise.reject(Ds(r));const s="reauthenticate";try{const i=await Ca(n,HE(r,s,e,n),t);me(i.idToken,r,"internal-error");const o=Gf(i.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(n.uid===a,r,"user-mismatch"),$i._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e,t=!1){if(un(n.app))return Promise.reject(Ds(n));const r="signIn",s=await HE(n,r,e),i=await $i._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function Yk(n,e,t,r){return dt(n).onIdTokenChanged(e,t,r)}function Xk(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function Jk(n,e,t,r){return dt(n).onAuthStateChanged(e,t,r)}function qE(n){return dt(n).signOut()}const Al="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Al,"1"),this.storage.removeItem(Al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1e3,Zk=10;class zE extends KE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);kk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Zk):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},$k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zE.type="LOCAL";const eV=zE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends KE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WE.type="SESSION";const QE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new gu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,i)),l=await tV(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=zf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function rV(n){Hn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function sV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iV(){return navigator?.serviceWorker?.controller||null}function oV(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebaseLocalStorageDb",aV=1,El="firebaseLocalStorage",JE="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _u(n,e){return n.transaction([El],e?"readwrite":"readonly").objectStore(El)}function cV(){const n=indexedDB.deleteDatabase(XE);return new qa(n).toPromise()}function gd(){const n=indexedDB.open(XE,aV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(El,{keyPath:JE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(El)?e(r):(r.close(),await cV(),e(await gd()))})})}async function V_(n,e,t){const r=_u(n,!0).put({[JE]:e,value:t});return new qa(r).toPromise()}async function lV(n,e){const t=_u(n,!1).get(e),r=await new qa(t).toPromise();return r===void 0?null:r.value}function D_(n,e){const t=_u(n,!0).delete(e);return new qa(t).toPromise()}const uV=800,hV=3;class $E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>hV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gu._getInstance(oV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sV(),!this.activeServiceWorker)return;this.sender=new nV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gd();return await V_(e,Al,"1"),await D_(e,Al),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>V_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>lV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>D_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_u(s,!1).getAll();return new qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$E.type="LOCAL";const dV=$E;new Ga(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e){return e?sr(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends GE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fV(n){return Qk(n.auth,new Wf(n),n.bypassAuthState)}function pV(n){const{auth:e,user:t}=n;return me(t,e,"internal-error"),Wk(t,new Wf(n),n.bypassAuthState)}async function mV(n){const{auth:e,user:t}=n;return me(t,e,"internal-error"),zk(t,new Wf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fV;case"linkViaPopup":case"linkViaRedirect":return mV;case"reauthViaPopup":case"reauthViaRedirect":return pV;default:zn(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new Ga(2e3,1e4);async function _V(n,e,t){if(un(n.app))return Promise.reject(Tn(n,"operation-not-supported-in-this-environment"));const r=mu(n);dk(n,e,Kf);const s=ZE(r,t);return new Rs(r,"signInViaPopup",e,s).executeNotNull()}class Rs extends ew{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gV.get())};e()}}Rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="pendingRedirect",Nc=new Map;class vV extends ew{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const r=await IV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IV(n,e){const t=wV(e),r=EV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function AV(n,e){Nc.set(n._key(),e)}function EV(n){return sr(n._redirectPersistence)}function wV(n){return xc(yV,n.config.apiKey,n.name)}async function TV(n,e,t=!1){if(un(n.app))return Promise.reject(Ds(n));const r=mu(n),s=ZE(r,e),o=await new vV(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=600*1e3;class RV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!tw(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Tn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bV&&this.cachedEventUids.clear(),this.cachedEventUids.has(x_(e))}saveEventToCache(e){this.cachedEventUids.add(x_(e)),this.lastProcessedEventTime=Date.now()}}function x_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function SV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(n,e={}){return io(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kV=/^https?/;async function VV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await CV(n);for(const t of e)try{if(DV(t))return}catch{}zn(n,"unauthorized-domain")}function DV(n){const e=pd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!kV.test(t))return!1;if(PV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Ga(3e4,6e4);function N_(){const n=Hn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NV(n){return new Promise((e,t)=>{function r(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),t(Tn(n,"network-request-failed"))},timeout:xV.get()})}if(Hn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hn().gapi?.load)r();else{const s=Uk("iframefcb");return Hn()[s]=()=>{gapi.load?r():t(Tn(n,"network-request-failed"))},Lk(`${Fk()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function OV(n){return Oc=Oc||NV(n),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new Ga(5e3,15e3),LV="__/auth/iframe",FV="emulator/auth/iframe",UV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jV(n){const e=n.config;me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bf(e,FV):`https://${n.config.authDomain}/${LV}`,r={apiKey:e.apiKey,appName:n.name,v:Ws},s=BV.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Da(r).slice(1)}`}async function GV(n){const e=await OV(n),t=Hn().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:jV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UV,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(n,"network-request-failed"),a=Hn().setTimeout(()=>{i(o)},MV.get());function l(){Hn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qV=500,KV=600,zV="_blank",WV="http://localhost";class O_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QV(n,e,t,r=qV,s=KV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...HV,width:r.toString(),height:s.toString(),top:i,left:o},u=ht().toLowerCase();t&&(a=NE(u)?zV:t),DE(u)&&(e=e||WV,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,R])=>`${m}${g}=${R},`,"");if(Pk(u)&&a!=="_self")return YV(e||"",a),new O_(null);const f=window.open(e||"",a,h);me(f,n,"popup-blocked");try{f.focus()}catch{}return new O_(f)}function YV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="__/auth/handler",JV="emulator/auth/handler",$V=encodeURIComponent("fac");async function M_(n,e,t,r,s,i){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ws,eventId:s};if(e instanceof Kf){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",qb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ha){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${$V}=${encodeURIComponent(l)}`:"";return`${ZV(n)}?${Da(a).slice(1)}${u}`}function ZV({config:n}){return n.emulator?Bf(n,JV):`https://${n.authDomain}/${XV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="webStorageSupport";class eD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=TV,this._overrideRedirectResult=AV}async _openPopup(e,t,r,s){hr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await M_(e,t,r,pd(),s);return QV(e,i,zf())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await M_(e,t,r,pd(),s);return rV(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(hr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await GV(e),r=new RV(e);return t.register("authEvent",s=>(me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dh,{type:dh},s=>{const i=s?.[0]?.[dh];i!==void 0&&t(!!i),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UE()||xE()||Hf()}}const tD=eD;var L_="@firebase/auth",F_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sD(n){Os(new Wr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BE(n)},u=new Ok(r,s,i,l);return jk(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Os(new Wr("auth-internal",e=>{const t=mu(e.getProvider("auth").getImmediate());return(r=>new nD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(L_,F_,rD(n)),Bn(L_,F_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=300,oD=Nv("authIdTokenMaxAge")||iD;let U_=null;const aD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oD)return;const s=t?.token;U_!==s&&(U_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cD(n=Hv()){const e=Gl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Bk(n,{popupRedirectResolver:tD,persistence:[dV,eV,QE]}),r=Nv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aD(i.toString());Xk(t,o,()=>o(t.currentUser)),Yk(t,a=>o(a))}}const s=Dv("auth");return s&&Gk(t,`http://${s}`),t}function lD(){return document.getElementsByTagName("head")?.[0]??document}Mk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",lD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sD("Browser");const uD={apiKey:"AIzaSyAo-asycc7bdBDPMoOJ7EDP9hbVDeg9Hrs",authDomain:"bug-report-ce99b.firebaseapp.com",projectId:"bug-report-ce99b",storageBucket:"bug-report-ce99b.firebasestorage.app",messagingSenderId:"1090635700217",appId:"1:1090635700217:web:ed04a55b86508d25014f28",measurementId:"G-MPXMZXYFHE"},Qf=Gv(uD),lt=p2(Qf,{localCache:k2({tabManager:N2()})});ok(Qf);const wl=cD(Qf),nw=new tr;nw.setCustomParameters({prompt:"select_account"});const Fo=ge(null),Mc=ge(!0),rw=ge(!1);let B_=!1;const sw=async n=>{if(!n)return;const e=kt(lt,"users",n.uid);(await _i(e)).exists()?await ws(e,{lastLoginAt:qr()},{merge:!0}):await ws(e,{displayName:n.displayName??"",email:n.email??"",photoURL:n.photoURL??"",groupId:null,createdAt:qr(),lastLoginAt:qr()})},j_=()=>{B_||(B_=!0,Jk(wl,async n=>{if(Fo.value=n,n)try{await sw(n)}catch(e){console.error("ensureUserDoc error in onAuthStateChanged:",e)}Mc.value=!1,rw.value=!0}))};function yu(){j_();const n=Et(()=>!!Fo.value),e=async()=>{try{Mc.value=!0;const r=await _V(wl,nw);return Fo.value=r.user,await sw(r.user),r.user}catch(r){throw console.error("Google login error:",r),r}finally{Mc.value=!1}},t=async()=>{try{await qE(wl),Fo.value=null}catch(r){throw console.error("Logout error:",r),r}};return an(()=>{j_()}),{currentUser:Fo,isLoggedIn:n,loading:Mc,isAuthReady:rw,loginWithGoogle:e,logout:t}}const hD={class:"signup_wrapper"},dD=["disabled"],fD={class:"gsi-material-button-content-wrapper"},pD={class:"gsi-material-button-icon"},mD={version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{display:"block"}},gD={__name:"index",setup(n){const e=qs(),{loading:t}=yu(),r=()=>{e.push("/signup/terms")};return(s,i)=>(oe(),he("div",hD,[i[4]||(i[4]=O("div",{class:"title_wrapper"},[O("p",{class:"title"},"BUG REPORT"),O("p",{class:"subtitle"},"     .")],-1)),O("button",{class:"gsi-material-button",onClick:r,disabled:Ie(t)},[i[3]||(i[3]=O("div",{class:"gsi-material-button-state"},null,-1)),O("div",fD,[O("div",pD,[(oe(),he("svg",mD,[...i[0]||(i[0]=[Un('<path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z" data-v-601297cd></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z" data-v-601297cd></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z" data-v-601297cd></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z" data-v-601297cd></path><path fill="none" d="M0 0h48v48H0z" data-v-601297cd></path>',5)])]))]),i[1]||(i[1]=O("span",{class:"gsi-material-button-contents"},"Sign in with Google",-1)),i[2]||(i[2]=O("span",{style:{display:"none"}},"Sign in with Google",-1))])],8,dD)]))}},_D=Ks(gD,[["__scopeId","data-v-601297cd"]]),yD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",vD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",ID={class:"header"},AD={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ED={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wD={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Yf={__name:"Header",props:{title:{type:String,required:!0},leftIcon:{type:String,default:null},rightIcon:{type:String,default:null}},setup(n){return(e,t)=>(oe(),he("header",ID,[n.leftIcon?(oe(),he("button",{key:0,class:"icon_btn left",onClick:t[0]||(t[0]=r=>e.$emit("left-action")),"aria-label":"left button"},[n.leftIcon==="close-menu"?(oe(),he("svg",AD,[...t[2]||(t[2]=[Un('<g clip-path="url(#clip0_22_490)"><path d="M3.93555 6H19.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.93555 12H16.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.93555 18H13.9355" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_22_490"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2)])])):n.leftIcon==="close"?(oe(),he("svg",ED,[...t[3]||(t[3]=[O("g",{"clip-path":"url(#clip0_22_459)"},[O("path",{d:"M15 6L9 12L15 18",stroke:"#535765","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),O("defs",null,[O("clipPath",{id:"clip0_22_459"},[O("rect",{width:"24",height:"24",fill:"white"})])],-1)])])):yt("",!0)])):yt("",!0),O("h1",null,Je(n.title),1),n.rightIcon?(oe(),he("button",{key:1,class:"icon_btn right",onClick:t[1]||(t[1]=r=>e.$emit("right-action")),"aria-label":"right button"},[n.rightIcon==="menu"?(oe(),he("svg",wD,[...t[4]||(t[4]=[Un('<g clip-path="url(#clip0_8_377)"><path d="M4 6H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 12H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 18H20" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_8_377"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2)])])):yt("",!0)])):yt("",!0)]))}},fh=ge(!1),G_=ge("alert"),H_=ge(""),q_=ge(""),K_=ge(""),z_=ge(""),W_=ge(""),ph=ge(null),mh=ge(null);function vu(){const n=(s,i,o="",a={})=>{G_.value=s,H_.value=i,q_.value=o,K_.value=a.okLabel||"",z_.value=a.cancelLabel||"",W_.value=a.confirmLabel||"",ph.value=a.onConfirm||null,mh.value=a.onCancel||null,fh.value=!0},e=()=>{fh.value=!1};return{isOpen:fh,modalType:G_,modalTitle:H_,modalMessage:q_,okLabel:K_,cancelLabel:z_,confirmLabel:W_,openModal:n,closeModal:e,confirm:()=>{ph.value&&ph.value(),e()},cancel:()=>{mh.value&&mh.value(),e()}}}function TD(){const n=[" .    .","   .",".    .","     .",",   .","       ."," ,   .","     .","  ,   .","      .",". .","    .  ."," . .","      .","   .","    ."," .     .","    .","   ."," .   ."];return{getRandomMessage:()=>{const t=Math.floor(Math.random()*n.length);return n[t]}}}const ai=ge(null),Vo=ge(null);function Ys(){const{currentUser:n}=yu(),e=async()=>{if(!n.value){ai.value=null,Vo.value=null;return}const s=kt(lt,"users",n.value.uid),i=await _i(s);if(!i.exists()){ai.value=null,Vo.value=null;return}const o=i.data();if(ai.value=o.groupId??null,o.groupId){const a=kt(lt,"groups",o.groupId),l=await _i(a);Vo.value=l.exists()?{id:l.id,...l.data()}:null}else Vo.value=null};return{currentGroupId:ai,currentGroup:Vo,loadUserGroup:e,createGroup:async s=>{if(!n.value)throw new Error(" .");const i=s.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(i))throw new Error(" ID     .");const o=kt(lt,"groups",i);if((await _i(o)).exists())throw new Error("   ID.");await ws(o,{createdByUid:n.value.uid,createdAt:qr()});const l=kt(lt,"groups",i,"members",n.value.uid);await ws(l,{role:"owner",joinedAt:qr()});const u=kt(lt,"users",n.value.uid);await ws(u,{groupId:i},{merge:!0}),ai.value=i,await e()},joinGroup:async s=>{if(!n.value)throw new Error(" .");const i=s.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(i))throw new Error(" ID     .");const o=kt(lt,"groups",i);if(!(await _i(o)).exists())throw new Error("  ID  .");const l=kt(lt,"groups",i,"members",n.value.uid);await ws(l,{role:"member",joinedAt:qr()});const u=kt(lt,"users",n.value.uid);await ws(u,{groupId:i},{merge:!0}),ai.value=i,await e()}}}function iw(){const n=ge([]),e=ge(!1),{currentGroupId:t}=Ys();let r=null;const s=l=>{if(!l)return;r&&(r(),r=null);const u=fl(lt,"reports"),h=fE(u,b2("groupId","==",l),pE("createdAt","desc"),R2(20));r=IE(h,{includeMetadataChanges:!0},f=>{const m=f.docs.map(g=>{const R=g.data();let C=R.createdAt;if(C&&C.seconds){const k=new Date(C.seconds*1e3),B=k.getFullYear(),F=String(k.getMonth()+1).padStart(2,"0"),U=String(k.getDate()).padStart(2,"0"),H=String(k.getHours()).padStart(2,"0"),$=String(k.getMinutes()).padStart(2,"0");C=`${B}-${F}-${U} ${H}:${$}`}return{id:g.id,...R,images:R.images||[],createdAt:C}});n.value=m,!e.value&&m.length>0&&(e.value=!0),console.log("   Firestore :",l,n.value)},f=>{console.error("Firestore  :",f)})};Fr(t,l=>{n.value=[],e.value=!1,r&&(r(),r=null),l&&s(l)},{immediate:!0});const i=async l=>{try{const u=fl(lt,"reports"),h=await vE(u,{...l,createdAt:qr(),reactions:{"":0,"":0,"":0,"":0,"":0}});return console.log("  :",h.id),h.id}catch(u){throw console.error("  :",u),u}},o=async(l,u)=>{try{const h=kt(lt,"reports",l);await fd(h,u),console.log("  :",l)}catch(h){console.error("  :",h)}},a=async l=>{try{const u=kt(lt,"reports",l);await yE(u),console.log("  :",l)}catch(u){console.error("  :",u)}};return Nl(()=>{r&&(r(),r=null)}),{reports:n,isFetched:e,addReport:i,updateReport:o,removeReport:a}}const bD={key:0,class:"select_list"},RD=["onClick"],_d={__name:"CustomSelect",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=[" "," "," "," "],r=e,s=ge(!1),i=()=>{s.value=!s.value},o=a=>{r("update:modelValue",a),s.value=!1};return(a,l)=>(oe(),he("div",{class:"custom_select",onClick:i},[O("span",{class:Ht({placeholder:!n.modelValue})},Je(n.modelValue||""),3),s.value?(oe(),he("ul",bD,[(oe(),he($e,null,Ho(t,(u,h)=>O("li",{key:h,onClick:Ti(f=>o(u),["stop"])},Je(u),9,RD)),64))])):yt("",!0)]))}},SD={class:"report_form"},CD={class:"form_row"},PD={class:"form_field"},kD={class:"form_field"},VD=["placeholder"],DD={class:"form_field"},xD=["disabled"],Q_={__name:"ReportForm",setup(n){const{openModal:e}=vu(),{getRandomMessage:t}=TD(),{addReport:r}=iw(),{currentGroupId:s}=Ys(),i=ge(""),o=ge(""),a=ge(""),l=ge(null),u=()=>{const R=l.value;if(!R)return;R.style.height="auto";const C=Math.min(R.scrollHeight,130);R.style.height=`${C}px`,R.style.overflowY=R.scrollHeight>130?"auto":"hidden",R.value.trim()?R.style.padding="10px 16px":R.style.padding="10px 16px 0"},h=Et(()=>{const R=new Date,C=R.getFullYear(),k=String(R.getMonth()+1).padStart(2,"0"),B=String(R.getDate()).padStart(2,"0"),F=String(R.getHours()).padStart(2,"0"),U=String(R.getMinutes()).padStart(2,"0");return`${C}-${k}-${B} ${F}:${U}`}),f=Et(()=>i.value&&a.value),m=()=>{let R=o.value.replace(/\D/g,"");R.length>=5&&(R=R.replace(/(\d{4})(\d)/,"$1-$2")),R.length>=8&&(R=R.replace(/(\d{4}-\d{2})(\d)/,"$1-$2")),R.length>=11&&(R=R.replace(/(\d{4}-\d{2}-\d{2})(\d)/,"$1 $2")),R.length>=14&&(R=R.replace(/(\d{4}-\d{2}-\d{2} \d{2})(\d)/,"$1:$2")),o.value=R},g=async()=>{if(!s.value){e("alert","  ."," ID      .");return}const R=new Date,C=R.toISOString().slice(0,16).replace("T"," "),k=o.value||R.toISOString().slice(0,16).replace("T"," "),B={groupId:s.value,category:i.value,occurredAt:k,content:a.value,createdAt:C,isOpen:!1,isEditing:!1,iconSrc:"/src/assets/images/open_icon.png"};try{await r(B);const F=t();e("alert"," .",F),i.value="",o.value="",a.value=""}catch(F){console.error("  :",F),e("alert"," ","   .")}};return(R,C)=>(oe(),he("section",SD,[C[6]||(C[6]=O("h2",null," ",-1)),O("form",{class:"form_wrapper",onSubmit:Ti(g,["prevent"])},[O("div",CD,[O("div",PD,[C[3]||(C[3]=O("label",null,"",-1)),Ve(_d,{modelValue:i.value,"onUpdate:modelValue":C[0]||(C[0]=k=>i.value=k)},null,8,["modelValue"])]),O("div",kD,[C[4]||(C[4]=O("label",{for:"time"},"",-1)),tn(O("input",{id:"time",type:"text","onUpdate:modelValue":C[1]||(C[1]=k=>o.value=k),placeholder:h.value,onInput:m,maxlength:"16"},null,40,VD),[[_n,o.value]])])]),O("div",DD,[C[5]||(C[5]=O("label",{for:"content"},"",-1)),tn(O("textarea",{id:"content","onUpdate:modelValue":C[2]||(C[2]=k=>a.value=k),placeholder:"  ",ref_key:"textareaRef",ref:l,onInput:u},null,544),[[_n,a.value]])]),O("button",{class:"submit_btn",disabled:!f.value},"",8,xD)],32)]))}},ND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPOSURBVHgB7VhdUtRAEO6e3S2p0irjCYgnkBuIJ2ABxX0jKFg+wgmAE8CjPyjhbUGReALwBK43CCdwLcsSasm0Pdn872R3E7I+UHxVWztJJjNfema6v26AW9xwIJRAs7luNBp/TInSJEEGUu0+ERkDHYU8R4ldFNi9urjXcZzdLhTE2ASftlZnpRRziF6TXzOhBIigA4gdgXTwub13Ns47IwkqYkS4z8ObUCEI0EXCreOjdwfD+uEIclv81Zua4dVS8Q87PFGXTRNcZ0dHE/nDCMDgiWZ0cyDCNltzC4oSHCRHXbakzT/n5NP7b1AC88/WHgshLW7OJrfJMJJaggutNQuJ9hPkbO/S23Acu/Am16HVsswe1Xe42UyQfKLbl3XdAJi2nHN8+GEFKkS7bbv8N7/YemkD4bK6J/19Dg+zfUX2hjoU4YEgINdDbwMmBG/KW4dg76q92p97BEEKvijAmdP/2onAse0uHyA7vJYS5rJ9BgkCRaeNpLBhwhAIX6MLpGb2eeqQNC3LqP2t/wyvjw/3SkWaolh8vqrm9CORd3n1IHkYUxasX9Rj6wF7/f8Gir1Do2Emn6ROMUmOp9g3Guocb0G0Wq/ZnVz57ootM5/rpgg5BILpzytoGhLGSVlQBf6ozaEIrk3OOwXfKcNs7U5jObczYrykGdGRPiRSTEdtIheuTS6O3xLEWV5/Si4xiiEEC0BFm8WlV8vjkOOlsU4O3/6AfIYRQRpqwQLk/FCI0lYxexS5UYplGOpQCh6E36YEBZPkgep21eQASlrwS/sjqxrYingwST6t36smN0AQE6cJAseZS/JobztJMtW/InKQJUjo/YouEI1RL2tIliLHhjGjNqS9R9qCMrYg6pKgIST9yFPacgl3lF7F9CERJFzJYtB/BWkGxoQiyX/bUBJBShAyTBFMWbB3t+eGbU5oxrJgFUjmK9TrpfxliqDSZxDuAQRDJyCrRnIOtU2y8VqjB9EJ2zoBWTXSApkGFNQAwaSAZNNbzaY1saVWkQf6YsKHTiAPEOxnVvEy1+7UdmBCYOe+k8x/dOmsPqtDXGHXcRpcsShYNTxR33Dab1yoAKq2U5v6vcus4rQz60/D+3mDLCytbrJ2jV4K9OFZkbpKFnF9x0/eY+3J5AJXNT5BHckkVCGIn3V94lrtyLoOVeVLqXTlU323ZWjGySU3kqBPsvWCpRVulq1o5UHtOT4U1qgyythZW1hXYYvN5BWCxqDlqtpOkfpOyQKmZWCj8Yhjo6FyCCZtDgyMLONZKavYShLPoddzq6rt3OJG4R9UyOMP7scZawAAAABJRU5ErkJggg==",OD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALxSURBVHgB7ZhBbxJBFMffm0XaI9+g26PxUv0E208goY3iSaqYmHho+wmAk1d7M2kReqNVET8B9OZJvRiPrt8ATUxs2Z3nG2CXlQ6wLMuaGP4JMPNmZue3b97OzgNgpf9cCP9A2exBRqz/zIIUGwjCdoW4aDVe2rq+iQPuPigekIQSFzNBOyJU3jROyuP9DUhQu/limQiec3Fd02zdvHXnx9cvHz8EjYl5cAhXCpg6XO8wQZYhtvoWgq575Wy2WvWu1ykFCeg6HNXfnlX3hpXKzv1im38ths0YaeMul0+9ngKWLI3nwMUblWC970mvDGgG25YKqIPrT0puO5t/avoGXuZRkexg36kxmOeLXEm5DyAtRMoQYVcIeK972kLAdUAt41DsKVuisW1ArwyEDz27ixyDjbrt38ykCXL5J4UeOZ8Q5QFvARzEaKpfNWku92wD5oJTMXeyTYhe3ClPmQZfPwjHY8pBuEE/jZTnGO6bro14CZpn1U2YC85/IPo3jkS1a9dluOb5SWXcrvVgj9xSEEhKtKi3ZqqPvHRvQ0Q4pWbjuA4weiimwSlptxmG2vJcS1IU3r0+voAZCgOntJN/XOcJrDBwSloPcnz4ryF00zbECvd3zE2Dmwg4j5YJtzDgsuEWAkwCLjKg2iqSgIsMCJL8jZqWCBcdMChCe9wUF5xS7IeFOOGUFj4P8vvZyt0rDstoMlFscEpxHFgtBTkokm+MA04p2hIL+X1ac1xwSpE82Gy8qufyj0CljeNt6sDZPK+e6sapdBPWf2cmpZixAXqQMKeMtV98/iOTY/aQPfwizJil5ySeBkd8MvsVpP2w4xIDjCotIOcLfl4q0pebEINS4Jij2uj6s8fp1YFhMi0Ja3ww2HMgZcMCcJxw1UbbEH0OP1ajNDpHPUoVuJhRyQ1vG20DHIgqCnwrSXQXO800OLPiDOwQYhd1gURhPHObphl5cYGzO6PEMbkVTAPmxlIxx/8eSOEczQO30korhdAfqQG2SzafVEcAAAAASUVORK5CYII=",MD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAP9SURBVHgB7VhdbtNAEJ7ZJAIJJMwJMCegNwBOUNNCCU8YCIjH9ARJT9A+IijCfSuFgjkB5QblBuYEBCEEKPUOs/7ddbZxfnmo+klVbe9m9tvZ+V2Ac5xxIMwAz+s6rdYvV6J0SZCD1LhCRM7IRCG/ocQBChyc/Ll8HIY7A5gSExO82+7cklKsIsYe/8yFGUAEx4B4LJD23u/vHk3ym1qCihgRvmHxLiwQBBghYf/w4OXeuHlYQ67Pu+5ZxKuj4j885oUGrJrsvSodXeSNEYDDC63Y1kCELdZmH6YlOEqOBqzJgP/Cj+9efYEZcOfe05tCSJ8fb+lmMo6kleBa+6mPRG80ckH8N94Mw2BqI7eh3fbdITW3+dHTSN622WXTJgBNzYWHb18/ggVifz+I+N+d9faTAAgfqm8ysXO4Xp0rqh+UU+QOQUBRjPEmLAnxxbgLme0qW03XriFI2Y4yHIXpbpeCMAgG7EBB/i4lrFbnjBIEKryNpAhgyRAIn4oXJK86bjiJ5/tO43fze/5++HZ3pkwzLdbvd9SaSSaK/55c1Z3R0GDzT7PUHnDU/2+gMjq0Wq4+YngxSc6nmCoNbYG3gvWNZx6B7AkBn6px7O6DTlfG8JCNf+vw4HU4VhAhp0Bwk3UFXQNNOYYGVeIvnjkVQQ0IZY/3s6ICugrsBTkV5CVsJ2OIvTo5rJTySCtFhxkHpbhWWCVRBDUQBHuEaQrLSEL+XO4Cwjo57JiDwthRGAQFzIH3B7s7TKZfLMTEdHJq7MPB7latICrNqVq2zUVQQRHQSU5NrgZzE0yEiNGcbvs2k2yYE6eVZFXHmRUGQdS8CbLAOQ05daxVm1zb6HRhDphxEOMfSCJnW0tQEqyiRi63OSalwmk/lQMqt++Mk8OKcZPUkEw3o4epQVlqEG1NUFUw0VaacbCrO0TuOGpMzYFalO2ENE/R1KAgEUlMd0JIKzVSIcsQ1jiXEZ7Ii7OWIGdoEDQ0OLw0jPJnbmhqNbgo6P0KDYdf9TGDoKrPILcBBMdWQC4a+hrKJKpthaUexOLIbAXkomEWyDRSQY0Q1AtIVr3vef7Sjrrdfu5C0uGlsBXIIwTTzqo85saFxjYsCUM62db7H1s7a+/qEB9xmPicvfnrGx0nFs3NcP9FBAuAuttpXPy5w6zKttOSz5PvpwnhYNsrgi0U9eHRNPcqVZT3O0nzXtaeYwqLsQm9SlKHugjisUFC3Fo7cl2H6uZLVekqpiZhy7HIGVv11FYca+3HfMugqmJ0YYFQNsdO4dddo0xcEuX3KqyxldMugiagFam7nWnud2a8wPQdbLVucG50VA/BpN0RwcidGlfKKreSxG8wHEaLuts5x5nCPxmq5MYgrihXAAAAAElFTkSuQmCC",LD={class:"modal_box"},FD={key:0,class:"modal_title"},Xf={__name:"Modal",props:{type:{type:String,default:"alert"},title:String,message:String,okLabel:{type:String,default:""},cancelLabel:{type:String,default:""},confirmLabel:{type:String,default:""}},emits:["confirm","cancel","close"],setup(n,{emit:e}){const t=e;let r="";const s=i=>{i.key==="Escape"&&t("close")};return an(()=>{r=document.body.style.overflow,document.body.style.overflow="hidden",window.addEventListener("keydown",s)}),Nl(()=>{document.body.style.overflow=r,window.removeEventListener("keydown",s)}),(i,o)=>(oe(),he("div",{class:"modal_overlay",onClick:o[3]||(o[3]=Ti(a=>t("close"),["self"]))},[O("div",LD,[n.title?(oe(),he("h3",FD,Je(n.title),1)):yt("",!0),n.message?(oe(),he("p",{key:1,class:Ht(["modal_message",{notice_message:n.title===""}])},Je(n.message),3)):yt("",!0),n.type==="help"?zp(i.$slots,"help",{key:2}):zp(i.$slots,"default",{key:3}),O("div",{class:Ht(["modal_buttons",`type_${n.type}`])},[n.type==="confirm"?(oe(),he($e,{key:0},[O("button",{class:"btn_cancel",onClick:o[0]||(o[0]=a=>t("cancel"))},Je(n.cancelLabel),1),O("button",{class:"btn_confirm",onClick:o[1]||(o[1]=a=>t("confirm"))},Je(n.confirmLabel),1)],64)):(oe(),he("button",{key:1,class:"btn_ok",onClick:o[2]||(o[2]=a=>t("confirm"))},Je(n.okLabel),1))],2)])]))}},UD={class:"report_list"},BD={class:"filter_wrapper"},jD={class:"filter_row"},GD={class:"form_field category_box"},HD={class:"form_field"},qD={class:"filter_row"},KD={class:"form_field"},zD=["disabled"],WD={key:0,class:"empty_text"},QD={key:1,class:"empty_text"},YD={key:2,class:"report_items"},XD={class:"item_inner"},JD={class:"item_left"},$D=["onClick"],ZD=["src"],ex={class:"item_right"},tx={class:"item_info"},nx={class:"item_row"},rx={class:"item_field"},sx={key:0,class:"item_category"},ix={class:"item_field"},ox={key:0,class:"item_date"},ax=["onUpdate:modelValue"],cx={class:"item_registered web"},lx={key:0,class:"item_detail"},ux={class:"item_field"},hx={class:"item_contents"},dx={key:0,class:"item_content"},fx=["onUpdate:modelValue"],px={class:"item_buttons"},mx=["onClick"],gx=["onClick"],_x={class:"item_registered mob"},yx={class:"reaction_wrapper"},vx=["onClick"],Ix={class:"count"},Ax={class:"comment_section"},Ex=["onClick"],wx=["src"],Tx={class:"comment_inner"},bx={key:0,class:"comment_area"},Rx={class:"comment_list"},Sx={key:0,class:"comment_item_edit"},Cx=["onUpdate:modelValue"],Px={class:"comment_icons"},kx=["onClick"],Vx={class:"comment_content"},Dx={key:0,class:"comment_icons"},xx=["onClick"],Nx=["onClick"],Ox={class:"comment_date item_registered"},Mx={class:"comment_input_row"},Lx=["onUpdate:modelValue","onKeyup"],Fx=["onClick"],Y_={__name:"ReportList",setup(n){const e=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",import.meta.url).href,t=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",import.meta.url).href,r=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAnoSURBVHgB7Vl9cFTVFf+9t/lqgsmGaiCAZhMhDQQ1MIKUD5NVysC0kkBFRQubdEBF7BBq0ZlOWxLrjHX8A9PBgbZIkuKIloEkLVSgzAQ7EPmDSgLmQ8DJIl8RgWxCSGF337s99973Nrtsstm3MFP/8Oy82Y/7dc69v3Pu75wFvpP/ryi4g1Jir7P7E/zlmqoUMgUOXWUOTdXBVNWjK1qzrqr1Xl1rOOJe6sYdkjtiACnuYDZ9g64qJZqiQ1dBSjNo9JAR9Flhuqor/Hf+XQNqoKLySMftG6LiNqXEvrMUCjum00dSHYxvCT268c4fpvAXRBv1Y7SqS1e1Yw/nv1+O2xQbbkMWp+6sgKpuIGWTmNh1OSOpa+w8jIeJR2yXCkXnBqlizPzMMYuUi111BxGjxAyhxal15bSjG3QDJiY8Hph1D2YsyMTM+WMxalyy6Hu6zYNTX3TjvY2f4/zFPtlfGAmCFs2isrXNny1/BzFITAY8Q5j36spnhOt0U/FkezyWvjoRJSvHRxz74bYv8JdNJ9DTdxO6jUOKMd3GPLZ4bWrzkTI3LEpMPuDTlfW0g3aBb/6i9zfr5gyrPJdnlv0Am7Y+jhFpCXIs10BBuk9TqxGDWDaA7z4pXGo6Kldg5RsPImeyPeo5cvPS8fyLDxhOzrhP8HkKHUXV0U9iiGUDfLpazKMNpCNiVFYyip8ffudvlWefy8PUaRlyE4xIleRV18CiWIeQwkqYQnFdLoql6yYiVnEW3SvmkKepMLpDimBRLBugQXcgKK5nG9A5VHsWq0fuQ85rtag93BE27lANtacb7U2y/TEyAMY83ATamCxYlBhOgCiCIi4jITn5aeK9oeIU+rv96PymF2u3/ztsWEMltXv8cPP2D2T7mMwRJnwMZ2bZsCiWDeDwEY4HGctN6ff4SAFF+KU9OTFsXH+PLxC004LahQObfhBDTLQ8hBjNGXG7Got+fa5f/L50Qz7uzvqeUH598SNh42R7slC+okS2d5y8alINcz4PLEocrIqqumnvs4QXkCFNe89j0YoJmF06Tjxvwym6cZ/YvrYNH6/oEga5XHmY7Rpo59J+6urA7nMjgGZYFOsQAg6aC3IYNe2/MGg/4RMc81d6UT6IT3B5d2tL8O5zUNbDolg2IM6PKu4DHO980eYjl7Bz68mwfsInyFrGBveJ2o/acK6rL6C89CdfAyxKVBDiiYoep5eTMi6vTXNIWkwchjeSKbVVrXhoRgbGTxq4SDnmG14/JZSvKJ4eMh+HDt99QehoHwQc+ZxqfOfYuVsIRqxWi/PXd+1d5R5Ot2HJnEhWFNbIsyvuvJpBjTUzaeEQIFLGyZxrTT6ecuVGnG/bh23YSMr3XPeGsFiajzHBUuklKLnuRqLu7KqPbIQynPL0JpQX1Ndm8BZaQGZeCi06kGnxp7phPibkDU5pOJWet3iXQaUHlA/5HJifIGVjbu+1hCmeg2VDRqdhfEAn2sAc0tGkm5nOK8OfrhhwCjhjX693yNmuXfMaeEdI7GfB2dtAiGaUemapqd6I/GgYA1SXXEThtySRtgnY2VGMbZ8uwLynHBh9b4pc3Fg0c1wKpkzPGHI2fvOOuCs+QB+40akpCSh3TcGJ+p+hddcyrFg0WW6ISHQoe1NZaSQNI6aUeclPbzZJGz/i32+fjZTUeMHlZ80bK57x+Xac7OgWSv2qchqyclLFWM593nrsCH5x5TDSk5Pw0H13IzHRhmxHGlraL+Ou1ASULclH1W+LUDhtHBITbOKZmpeBP+5sESchHFxl6Tc79lQOpWPEKES0wUMwsQdu3bPXifsM4Hs07fj8cdmYvzg7bKzgPt0a3Jd7sYbugeWz8sTvc+fcJ56hhGdqkJcanawAbjciSEQIEcKbzaPmPStWNGHfjjOIRvg9oAivAZ1A4rD9e6/fxEcHTmLxr3fLiobKDN9CS6RxESGUm/wk5z2lPCrw6MCd8NC/zmPfrjNISYsXcOJQGEzSRifhq5ZetE3qwR+enIUCgtBQim/823GseqsR9Ye+RPd/bwrlDQjRaagV3vbdQxox7D2wIGNHDcVll1msMkMevw9GkRMXzLgHP395MjLHpsCK9BJUtuxqxZb6VnhI6ZAQqoqd50lTVe+uF9dGmmdYA7jMG71jvR7HKmSs1uXuBMXwKY9k4N2ax2FFnn7ln2g6cTFknkA1T4Rq5Z3e+sjKc4mKC+3vWlLp92vZ1LuGbO5moRQYR49+HTbGzMCyX63FX5vCM7RPj3fBqGowOZfCqYmHPlQASenRKM8lajp9sEvUMcuK8rY76IYpokWrWdCFdKuIKNTjxxmKQuWUgS2fmRfSHtgAEWnos84qtf6Eqki37m0ZEDBEFmRrZuZ+UD1wEiysn2CjhthTksLaTQbK0ztuwuU9L1QiBompsDWDTkE4NdiQJ2BmYPYUytAWTg9rDzkB+m6PoSbEJSonxi3KKzprpGjhCHbA/zQ/Z2meMQu2SAfmDmsTtJrunASnp94ahCydAMe/TUcjVMXBAgSO4YmFObAqP3wwU9y4IuZD5AQFunKj0V6ywdJJWDLA52d1/J8XswzCl87NG4lX1j0c0o/T5mUv78WEOTUYX1iDZ8s/prgfylK3/u5HmHT/9wMwksagwBefUAcLEvX/A3MmbC+l6tkLArPGTZk7cST+9N5c3MUZpiH8tl75ywM41v6NZKm0wtlL1/DJ0XN4wpkjCBuXJHovefR+HDh2Fpd6+o06K4ejkmXL/7Hb37qnJRq9oj4BihYuTm9Np+UF2s2DKO9avQ/tp4PKJSLOA593XsWSdXuIOgycRBpR6b+/8RPkZ48UmkgORCNtkSl0TAbQ/VsYiBz0/e2qR8OUL31pH9pOXzWTFrN+aqZCaCUjfvrarUYkYvfrCwdqpDzXJihFq1f0PqCa9VAJnxG3KF/20n60f9ktqbCZwfHIAsFomUzgGZ3EFSwixtkTZITnujeQ4Ii6K/SoHdnCCcBt0Fuh5J83n8CFC31S+VX7ZZFKlBtF5ZrDhpRXnAqzOen3FkkbpCHHOy+j+Df/wFfkGz3ERt/ccTSowCWsiLrAFfU9QPF/vW7TK0KT8dDKBKX3orpAbS3kjE63QQscJdV2701/o8ZDpTGWmdUIMdZguYpkopRIlPveX10VjV5Rn0BS0o0qJk5BYaYfiB2HTHZ0Y/fp5xDlubjpckpIjHOKU5HZFpN/ycqxci6FyeIWc/v6vLXR6hW1AQebyzw+zesEL+4al5jxt6n53y+HwCf+OIQoH2yENz7eSUY2Gwl7SGnd8JlOn+Z3on5t1LexZSpRUMA5S5xLs+kugs0UXlEmGDTrNqXm5GFXVDtnL9lUSuNoDhTqko12agpqk294qzwWlP9Ovg3yP4qdPbrF5RiqAAAAAElFTkSuQmCC",import.meta.url).href,s=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAibSURBVHgB7Vm9b1xVFj/3vhlnsl5W42yTpckk2iLSFutdUUQ0GXc0gBFQ0DB2gRAVzl+AXUGXpIEyHgnhAkU2ooDOpkBKBeMuDcpQ4SoM4ms88949nI9777sDyH5vbAkKrjN5M+/zfPzOOb9zHsBf649dBs5xddu77VYr3wBjbjrjOkUGHWcQIDMjB25QNGAvn+JHD4avDOGc1rkosHp5t5M7d9sZWC2MA7QAzmLc0n6krUH+zvsMbNNlWw8enl0RC2dcz7bvrxW5+5LEXiUrAxqDSGbRDylBGzD0K+yjf7TtFVnx5VP/eX8DzrgyOMN67tL9TYIHW76FlgS3LCiZm7dkGvYAKWG81ZH2sReM/hm6Bp7515MvmG+Odg9gzjW3Aqvt+xsk1NtiVQssPAPSYMb2VmX8MVBlSBH2iBFI8W+5jr53L19+4bujo90HMMeaKwZW27sdEu6LwrqlFOciZMQ+YMECB8GT/fTb0DEk88mWjo3sQvP/gwf1Y2K+GLDwFgnRButx7vEtMOEt4xwi7jFsRUn2knhFgBSuXcrzyT2YY9X2gFg/g0cFOGS4OBOzjFjbW5n2aTYqWOjM6X4+l2LFWToqHuNz5bso+ONicWl4sD6qI888Hnies40EpH8wihmwn//w41Jhi6sEkH7wChgfC2i2L/40WZrmx9dI9b7aX6qEmJGVb43tm1Bz1VaArL4qqRBK+LAAU1dsHYzWRwdcpLC1gWXAIudRgPHWwXB9NHi4PsQs35B7WFFQzxMdsQs1V20FHLqOWl9zPD+eIQDjcen61ritMWFQMhNtxmNIodGWGKBDLvWUhStQczWg7rJED8RaRkVn49LD7ROLt7vtnS3SZOSmsKnWdR5maJqLC7dvLO9sjek4mOYmKY6Sn0hJihYJefr/KtRctRVwYPyDY+bRTGJxjbTrOXtR9oHAgs/FcF6vcMWasQ0IaRUspyjUVCIKQ+1VPwaM+1rTp8QBocCgpweahYwIZTyF0GAH8BApYwbFGOjTqeQszlq1MtBcCpDVBiqw0AXNMRl6KHlY6V37rfHxpePi+CoJ3td6YDTleuVKziSxwnsHUHPV94C1B0rKQuaQwiVw8VhWyNgy6xTZ9Fa4RlXGUPQ4CQD6VEv79qDmqq3AhQvQlwpA+A3ChFSo37USt2ayTqtdptQy6wSFIRa58UdQc1UKG6q+7Xwh3yiMoSDFjlZYlBTI8AmV1wkjdVqdM9i2TStZx0DzDu17teRFvlpbJ6mWq3Go1KToADPs20a+N/z0jeGZFeBmZercPt28o9DwAojFvFWzVLBALRhuzhQpyfPXOxv2KSvlawurhU0CWg0ydLZYOTpFCXuq8FO3T187PnAhZhylEAg2aVZiYJZELR4vUyoGeiHQCzASc4b9EthUMLP9dvdee24FiolbNVK4fK72AoXA0ypL5wGWwkNMlcZ5yhG84/Eu+/0nyUS/+dBxc2Xh7/mbcytAXVbP+SCTbC0PlWZF4SDVNFBmAzOtZKgBnk7rHbyCoWgFDgTqyaC8iwYiWohu7SQZT67EFpdTN8dW0T88MFKS3RQpHGL/i1qwjMIneCx40gWPppZXkpf2Ep0TRTxRAeBxCPhGHcstpE17iWFnSurgPeApgkaFNjRq3dBeJrERjYQQix3/fTu3AjQiGYAN7jQi4kywQtJp2VAPvOWJ/4PLlyZFfo1+9TEK76EGJnRqkRMp/QjKxzpxOLcCdKMtETJtHZMHh4yjhBliRVWMT7cGg/XRw8H6sLnoNrxlIR216L0i9jHUiQA1ZMUMGWJeBT49evmAhOljQhFAiJd3u03gFQNTPUMrVmLqBdoirCd2Mc16gV1IvRD4lE+3CHdGe6/3T5Lx1LHKV99/uHftHy+xgF0tRJAEnghuood8YRLaYO3lJ688d9j69yo0cniHhF9G3werZb1BMpgZv8SUC3D38cev3zpNvkpUgle3s0OFxbzFcxymEy5UVRmLyPdkdKhCFFYD2Y9O4oBLKjfotjzG3Zn7ju5zJ/9h4e6oYnNfWYGoyPWdzqRwXbLivXQG6mdAnmJ4ihAph8yC1LKZgtDp8IuUVB5EU47Nybi64HMrENaN6x/wWEWKjgiYch2OTYqd7xeLW8RK20TsNumcXlAmYl8nc8CeOPrktblkmeuiG+QFAswjVNYpmBcyFogYW3bqrnIG4vM7xGeyAh47HWZhhBl7wyt8/HNzqa71edXuB1h4EnkffOBJ0ZkhaPoZJ1moRVOIMCsNXVzgRmG80lycnkrcfm/V8gDj/xhgHzmIAX/1DiB4I/7epl9b4xaMMod3uKnHQLUj/U6ndBzQMEC7sDLaq+6JWh6YONxF7gsg0AqIPa78BvRNiSjSI4UeZTk85u8zPXBacRMCqNxrvFtHpsoKPH19Z42E/K8UIiiJHfjmfpbL+zlPgAykBS9AyWjFBYjFzw/Dbj7x4ru9qnJVVoCe1PO0IZlCl+xTiZp4BWOzEjAeKUcQVHmOVmHU+1hT0mpr1qrKVVmBAuBmyn/KCUSAjdrcydmoeR7QeyoOt0JHljDZwK38tEIJareqXNVjIJnng2eWEKwLELFcQokLlMyQBumELiWCkWpbfxf2kWeh564APX44CwlQHpQo5L2CMmkwZkAWX6GD9HGH5bWBhcZ7zHZyeqzygKu6AvxqNDQcVtGMM028Kb0AeEjFaoVfVvDHumxFhAr532Iy3XZJDIFOMkBew56vApOFyV0ZdYCfplkfkDDTzLNMh3lDhQ/X8vfG37IVumYQGhcXvOHpc/IadnjxeNKvKldlBbg5KaY5WRK/hhTD1r8TUyh8Nm3OCh+VoOJ04UJjBaVYoUn74yQzET2ZUCG7VbmQ1eZCy8v32s42KKU6LlT/k0oMeEDvi7cfft6rZLl/PvveGtFnugfc9DSc3rlhfyGf3K0j/F/rz7B+AQqbt3gTEA/uAAAAAElFTkSuQmCC",import.meta.url).href,i=vu(),{reports:o,isFetched:a,removeReport:l,updateReport:u}=iw(),h=["","","","",""],f=ge({}),m=async(V,M)=>{const N=o.value.find(P=>P.id===V);if(!N)return;N.reactions||(N.reactions={},h.forEach(P=>N.reactions[P]=0));const te=f.value[V]||[],J=te.includes(M),A=J?Math.max(0,(N.reactions[M]||0)-1):(N.reactions[M]||0)+1,b=kt(lt,"reports",V);await fd(b,{[`reactions.${M}`]:A}),N.reactions[M]=A,J?(f.value[V]=te.filter(P=>P!==M),localStorage.removeItem(`${V}_${M}`)):(f.value[V]=[...te,M],localStorage.setItem(`${V}_${M}`,"true"))};an(()=>{o.value.forEach(V=>{f.value[V.id]=h.filter(M=>localStorage.getItem(`${V.id}_${M}`)==="true")})});const g=ge(!1),R=ge(".");let C=null,k=null;Fr(a,V=>{V?(clearTimeout(k),g.value=!1,clearInterval(C)):k=setTimeout(()=>{g.value=!0,C=setInterval(()=>{R.value=R.value.length<3?R.value+".":"."},500)},600)}),ca(()=>{clearTimeout(k),clearInterval(C)});const B=ge(""),F=ge(""),U=ge(""),H=Et(()=>B.value||F.value.trim()||U.value.trim()),$=()=>{F.value=F.value.replace(/[^\d]/g,"").substring(0,8)},re=Et(()=>o.value.filter(M=>{const N=!B.value||M.category===B.value,te=!F.value||M.occurredAt&&M.occurredAt.replace(/[-:\s]/g,"").includes(F.value),J=!U.value||M.content&&M.content.toLowerCase().includes(U.value.toLowerCase());return N&&te&&J}).sort((M,N)=>{const te=J=>{if(!J)return 0;if(typeof J.toDate=="function")return J.toDate().getTime();const A=new Date(J).getTime();return Number.isNaN(A)?0:A};return te(N.createdAt)-te(M.createdAt)})),S=()=>{console.log(" :",{category:B.value,date:F.value,keyword:U.value})},v=V=>{const M=o.value.find(N=>N.id===V);M&&(M.isRotating=!0,setTimeout(()=>M.isOpen=!M.isOpen,300),setTimeout(()=>M.isRotating=!1,600))},y=V=>o.value[V].isEditing=!0,E=async V=>{const M=o.value[V];M.isEditing=!1;try{await u(M.id,{category:M.category,occurredAt:M.occurredAt,content:M.content}),i.openModal("alert"," "," .")}catch(N){console.error(" :",N),i.openModal("alert"," ","   .")}},T=V=>{const M=o.value[V];i.openModal("confirm"," ","?",{onConfirm:async()=>{try{await l(M.id),await new Promise(N=>setTimeout(N,300)),i.openModal("alert"," "," .")}catch(N){console.error("  :",N),i.openModal("alert"," ","   .")}}})},w=V=>{if(!V)return"-";try{if(typeof V.toDate=="function"){const N=V.toDate(),te=N.getFullYear(),J=String(N.getMonth()+1).padStart(2,"0"),A=String(N.getDate()).padStart(2,"0"),b=String(N.getHours()).padStart(2,"0"),P=String(N.getMinutes()).padStart(2,"0");return`${te}-${J}-${A} ${b}:${P}`}if(typeof V=="string")return V.slice(0,16);const M=new Date(V);if(!Number.isNaN(M.getTime())){const N=M.getFullYear(),te=String(M.getMonth()+1).padStart(2,"0"),J=String(M.getDate()).padStart(2,"0"),A=String(M.getHours()).padStart(2,"0"),b=String(M.getMinutes()).padStart(2,"0");return`${N}-${te}-${J} ${A}:${b}`}return"-"}catch(M){return console.error("  :",M),"-"}},I=ge({}),Ee=ge({}),Be=ge({}),xe=ge({}),Ce=localStorage.getItem("localUserId")||(()=>{const V=crypto.randomUUID();return localStorage.setItem("localUserId",V),V})(),we=V=>{xe.value[V]=!xe.value[V],xe.value[V]&&!I.value[V]&&Tt(V)},Tt=V=>{const M=fl(lt,"reports",V,"comments"),N=fE(M,pE("createdAt","asc"));IE(N,te=>{I.value[V]=te.docs.map(J=>({id:J.id,...J.data()}))})},Xt=async V=>{const M=Ee.value[V];if(!M?.trim())return;const N=fl(lt,"reports",V,"comments");await vE(N,{content:M.trim(),authorId:Ce,createdAt:qr()}),Ee.value[V]=""},Ft=V=>{Be.value[V.id]=V.content},ot=async(V,M)=>{const N=Be.value[M];if(!N?.trim())return;const te=kt(lt,"reports",V,"comments",M);await fd(te,{content:N.trim()}),delete Be.value[M]},pn=async(V,M)=>{i.openModal("confirm"," "," ?",{onConfirm:async()=>{try{const N=kt(lt,"reports",V,"comments",M);await yE(N),i.openModal("alert"," "," .")}catch(N){console.error("  :",N),i.openModal("alert"," ","    .")}}})},Kt=ge(!1),zt=()=>Kt.value=window.scrollY>300;an(()=>window.addEventListener("scroll",zt)),ca(()=>window.removeEventListener("scroll",zt));const pt=()=>window.scrollTo({top:0,behavior:"smooth"});return(V,M)=>(oe(),he("section",UD,[M[11]||(M[11]=O("h2",null," ",-1)),O("div",BD,[O("div",jD,[O("div",GD,[M[3]||(M[3]=O("label",{class:"label_text"},"",-1)),Ve(_d,{modelValue:B.value,"onUpdate:modelValue":M[0]||(M[0]=N=>B.value=N),showAll:!0},null,8,["modelValue"])]),O("div",HD,[M[4]||(M[4]=O("label",{class:"label_text",for:"searchDate"},"",-1)),tn(O("input",{id:"searchDate",type:"text","onUpdate:modelValue":M[1]||(M[1]=N=>F.value=N),placeholder:"YYYYMMDD",maxlength:"8",onInput:$},null,544),[[_n,F.value]])])]),O("div",qD,[O("div",KD,[M[5]||(M[5]=O("label",{class:"label_text",for:"searchKeyword"},"",-1)),tn(O("input",{id:"searchKeyword",type:"text","onUpdate:modelValue":M[2]||(M[2]=N=>U.value=N),placeholder:" "},null,512),[[_n,U.value]])]),O("button",{class:"search_btn",disabled:!H.value,onClick:S},"  ",8,zD)])]),M[12]||(M[12]=O("div",{class:"line"},null,-1)),g.value?(oe(),he("p",WD,"    "+Je(R.value),1)):re.value.length?(oe(),he("div",YD,[(oe(!0),he($e,null,Ho(re.value,(N,te)=>(oe(),he("div",{key:N.id,class:"report_item"},[O("div",XD,[O("div",JD,[O("div",{class:Ht(["item_icon",{rotating:N.isRotating}]),onClick:J=>v(N.id)},[Ve(Vi,{name:"fade",mode:"out-in"},{default:Fn(()=>[(oe(),he("img",{key:N.isOpen,src:N.isOpen?Ie(t):Ie(e),alt:"toggle icon",class:"icon_img"},null,8,ZD))]),_:2},1024)],10,$D)]),O("div",ex,[O("div",tx,[O("div",nx,[O("div",rx,[M[6]||(M[6]=O("label",null,"",-1)),N.isEditing?(oe(),En(_d,{key:1,modelValue:N.category,"onUpdate:modelValue":J=>N.category=J,class:"edit_select"},null,8,["modelValue","onUpdate:modelValue"])):(oe(),he("p",sx,Je(N.category),1))]),O("div",ix,[M[7]||(M[7]=O("label",null,"",-1)),N.isEditing?tn((oe(),he("input",{key:1,type:"text","onUpdate:modelValue":J=>N.occurredAt=J,placeholder:"YYYY-MM-DD HH:MM",maxlength:"16"},null,8,ax)),[[_n,N.occurredAt]]):(oe(),he("p",ox,Je(N.occurredAt),1))])]),O("p",cx,"  "+Je(w(N.createdAt)),1)]),N.isOpen?(oe(),he("div",lx,[O("div",ux,[M[8]||(M[8]=O("label",null,"",-1)),O("div",hx,[N.isEditing?tn((oe(),he("textarea",{key:1,"onUpdate:modelValue":J=>N.content=J,class:"edit_textarea",rows:"3"},null,8,fx)),[[_n,N.content]]):(oe(),he("p",dx,Je(N.content),1))])]),O("div",px,[O("button",{class:"btn_edit",onClick:J=>N.isEditing?E(te):y(te)},Je(N.isEditing?"":""),9,mx),O("button",{class:"btn_delete",onClick:J=>T(te)},"  ",8,gx)])])):yt("",!0),O("p",_x," "+Je(N.createdAt),1),O("div",yx,[(oe(),he($e,null,Ho(h,(J,A)=>O("button",{key:A,class:Ht(["reaction_btn",{active:f.value[N.id]?.includes(J)}]),onClick:b=>m(N.id,J)},[O("p",null,Je(J),1),O("p",Ix,Je(N.reactions?.[J]||0),1)],10,vx)),64))])])]),O("div",Ax,[O("div",{class:"comment_header",onClick:J=>we(N.id)},[O("img",{src:xe.value[N.id]?Ie(s):Ie(r),alt:" ",class:Ht(["comment_toggle_icon",{rotating:xe.value[N.id]}])},null,10,wx)],8,Ex),O("div",Tx,[Ve(Vi,{name:"fade"},{default:Fn(()=>[xe.value[N.id]?(oe(),he("div",bx,[O("div",Rx,[(oe(!0),he($e,null,Ho(I.value[N.id],(J,A)=>(oe(),he("div",{key:J.id,class:"comment_item"},[Be.value[J.id]!==void 0?(oe(),he("div",Sx,[tn(O("input",{"onUpdate:modelValue":b=>Be.value[J.id]=b,class:"comment_edit_input"},null,8,Cx),[[_n,Be.value[J.id]]]),O("div",Px,[O("img",{src:ND,alt:"",class:"comment_icon_btn",onClick:b=>ot(N.id,J.id)},null,8,kx)])])):(oe(),he($e,{key:1},[O("div",{class:Ht(["comment_box",`comment_box--type-${A%3+1}`])},[O("p",Vx,Je(J.content),1),J.authorId===Ie(Ce)?(oe(),he("div",Dx,[O("img",{src:OD,alt:"",class:"comment_icon_btn",onClick:b=>Ft(J)},null,8,xx),O("img",{src:MD,alt:"",class:"comment_icon_btn",onClick:b=>pn(N.id,J.id)},null,8,Nx)])):yt("",!0)],2),O("p",Ox,Je(w(J.createdAt)),1)],64))]))),128))])])):yt("",!0)]),_:2},1024),O("div",Mx,[M[9]||(M[9]=O("p",{class:"comment_title"},"",-1)),tn(O("input",{"onUpdate:modelValue":J=>Ee.value[N.id]=J,placeholder:" ",class:"comment_input",onKeyup:mv(J=>Xt(N.id),["enter"])},null,40,Lx),[[_n,Ee.value[N.id]]]),O("button",{class:"submit_btn",onClick:J=>Xt(N.id)},"  ",8,Fx)])])])]))),128))])):(oe(),he("p",QD,"   . ")),tn(O("button",{class:"btn_top",onClick:pt},[...M[10]||(M[10]=[Un('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1904_442)"><path d="M20 5C32 5 35 8 35 20C35 32 32 35 20 35C8 35 5 32 5 20C5 8 8 5 20 5Z" fill="#6000B4" fill-opacity="0.1" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 21.6666L20 16.6666L25 21.6666" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_1904_442"><rect width="40" height="40" fill="white"></rect></clipPath></defs></svg>',1)])],512),[[dv,Kt.value]]),Ie(i)&&Ie(i).isOpen.value?(oe(),En(Xf,{key:3,type:Ie(i).modalType.value,title:Ie(i).modalTitle.value,message:Ie(i).modalMessage.value,onConfirm:Ie(i).confirm,onCancel:Ie(i).cancel,onClose:Ie(i).closeModal},null,8,["type","title","message","onConfirm","onCancel","onClose"])):yt("",!0)]))}},ci=ge("light");function Ux(){const n=()=>{ci.value=ci.value==="light"?"dark":"light",document.documentElement.setAttribute("data-theme",ci.value)},e=t=>{ci.value=t,document.documentElement.setAttribute("data-theme",ci.value)};return an(()=>{const t=localStorage.getItem("theme");e(t||"light")}),{theme:ci,toggleTheme:n}}const Bx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjfSURBVHgB7VlRaxzXFT73zqxWlhx75PbBhFKPQkpNaOuNacGBplpBaQ0tVIodx66pvfvS0rRE2j9Qrf5AJL3UL6VamVLFMUGyk4dCHjRuoA2kxGso1MXUGj0UCoFojOzVamfm3n73zsxKlXa1O5L6FB1xPYPnzt3vnHvOd849Q3Qoh/LFFkYHJD/+8u08ccqHjJ2RnHKCkyWYwCApDbkiSQw77hWXDlhM2oeMWAs2QBcEk2Mh0XGAZBKA1b/4I9yT5OqObMnYFF4ZpQOWPSkA4BYXNBUyWQA40lbmMWBGWonomiih51it1nqt/71CkGVTG1nhbWTDsuO+MUcphFNKuXhsYZwL9hguch3wlM0BUls+VgAqaehQAoPUc5KuH8piq/VEhk34pjju94Q2xjSllFQKXDi6MC2IvQ1rDyiwxFlidYAWHtDOEmOuIL0jTFue2CoXcvjjFv4/cnLB9k15yu8RDEoQ7q1cbtZKg6krBZTLvH508T7AvaW9O7Z0PFwhqbBef/pCaIqbggubDKijFcTeSDnZKnjVmoEflgOADzIAn5HSx7XRw6bsc7M2dSldsdCl/jv34e9n4DYaNEAyMpgHlil/8NnFmWTe979yewnP80LFg5pLcvHe8uX/CdyfGgsF0WO8vZENBurZkOpZgO4VtKHvQ1zVvZAbveHKRo8se4u/2DUmOu7A68ptGJ1p+jdXXk3LjWDj5a3gz9tgJIDXwJlyHeX+4eT29aTJJxpmaDVMZXFJkfWhhCn0Duid6AkZ7hETQceY2JWFLvcvFELiY7C0AiVJAwura3Jt2PGK3ta5jdDPE2sykSKnB457tbp9zSAjLYBmcB0NVt8DeORKSqlQXbVSviE86iBtd+AyOB4BOBGxCiUuscKlMbodvBLG6SdbmIjBNJVW69bNsORnyPXVDpghawB0shu+Vkaq3VA748mMUaYO0nYHpM8mwCanRGxVWPcJcA0veqNuy/kSyYojiVHMSlJUW81737tQwaWSPz1vA3AZ7HPNj91Iu5QhKkz2ltbnix2tr6TlDlzuVdanQuLPmg4lK7cDrxXgKtsSi96RzAg2HtAu4jy84vqGPx6zkKZR5UqhISe9xe7At1UgNOA6XIOKsioS0V1vdGa3hUCYFmnwQivhuJ1BVKtFz++RXhwLKg+43uIvXUoh7WIgr5NRxPMMGpSpg6j5inmaia1LgeuUGplwBVfP56JMKWXHT108upBH2C5Jg5FiH1Do6t3V1050WujVF975HFXngEpgyBeSs57Bv/zjwgrtUQrG3cK6KafWjgXe02NB+c//al0jtdgBPhQVXyJhlDvUheCdFcX8Mq6NhKwN0j4k5Gyi3hda6/2B/bS/0TYf7FAAVsxFlEm6UBOMOdSFoPap6vqHRRVcwPkQ7UEKdLdwnX2wWsuGdq0vpNqRgNahyPM/+N3ycxd+e506KiClretH9YQhHhm51IVA0aq2vnoPimDkaU9iTKCUsNb7AqorBTCeHQllrS84hfvpzgpoOlSuoA4mgq0FTx5087PZI+tzkfXjEhuns9w3ZvOUUlAQavA1gH52JJCwPnYgYGrgmddRAaFOVjyqOTUdet1xsgNKxHxHbMkdlDEnKKWsHQ1KcBtXAYbFMbQLoUoVq3hcpk4KRIVYRKFpT8whU8WbbBZzqjL91tmb42nWQLKsfPjvS4MA72FIFQO13nBZVt46QbNjcx0VUCUDJcGIkbe6P2D87e8/c/CO08zgmlLZb176zmyOUsrac36p3u+v1PrEqjDZZLt5O2z8oy+9t4wDia1qes1CQePlDz+7WqUuJXcah5Fe8z7etzQdq3VIeoGUw48+KXa9TreyYwe4was6CCmu/7OZVHRYfVh0sYOT0XFSH+5VPFgsw5a+9srcGB2wtIoBRza7DCobU+rtr356bRq5oByTQeJOx6Uppge/9/v7dr57drJGbti7Pd/hQudP3s7jx5aQAKSIjo9PBK8NdlOcbZeXzs1NYI1y3HZhoaJmI1FIPEB8LJIp7gUUuP/5U1TEKcCo8e0A4Yd5Q8JAXYZcFBo0XH9nZ6HXkmd++Pztz0Ou6xrVVYMabNxxL83QHuTrr8yOq0CGIQbi/pBec1MppE5Uvap+EnElm8RfXBGTnsNoZv3Wm6Xt67esRvHSTHyIQYXPVMskFRVulX/+tThtZORZGKGiQKszdVK1aiWYLsA17UbluI4bmSgrIvBtpaUCDdOc2TxGClVd2t998VbqpJTIQ6foPv6oWMSaw4C7KONzQ3Ta01mfmG7FRJZvNsaaR1TVONto6QFtdct/9dYUGldjqoUSb6nnkxz+5NHVfVPhyTyoNoMmgMGHsD4awVIdR62YclelQQP6njdbk5X6H39VpFQK2AuWZI1lxMLxZpctKuyGP3548F1mJSqA8TtLQuWhJAbQOMOxHwFcclu907Yr4bijHmOiRHE/KFpQ2GCRpXO5eZv+T+B1MUnRH3ZDBiTL7cDvqoAS5/GVCmNsZtMXNUPYvhBLuQNUQnO9om5GdtRXjeJP/bY//+u53d7t2Jn76NEbJeQER++E7p6o3UD/kwXLubNzZdqnnBi5UQbQT+GedsRMMsngS+vzO2lzu3RVb+bRMa41srNwn5E4oKVq4IakA80lwyg/6/XvuE53yc4ambUywr+OdcYxbBHTZqjc1NDZ28nWG6PeYqnjeqkK5m9/8w9T6NuMJwEWKUPJKQwsRQ7j0vFNUoegaqKQff6G7YeGJUwaCvH5CaQwgjWs+OwghV5LRMmNkLDe7Wz5PSmgJJe7iU9KNKFiARkWltuSPTk1M2h0Tf5PgYznseidZP5mAwEVK2Pj9XffnEuDJ/UXmmr1WqUhw2HERYVieo2zZ8Qd8XE0zrTN7wjNGGKxpXWmj58Tnzb9vsG04In2+ZXytPoQwXUDOA/XiM8QcUMsqneomZDiXdn8xiA9fBiZ5tQ7k6aVeKAKbJUXX705FLBGDgrhGwHcC8kIQWnpqpbLJ8pFQi5UqV4Vkle9939+jw7lUA5l3/JfAaR8wqX42CkAAAAASUVORK5CYII=",jx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAaESURBVHgB7Vm/axxHFH4zu74sLuI1aQwhaGVSqEjgCCncBJROnePKJATuRCDGjXWkSxNJ/0Cs/QvujhBUGcmdixgpkICagEoXSbyCQJQiaA2JOJ9mZ/K9md2TrJNPJ92oip4kTrq93Xnve+9974eILuVS/t8i6IJk7u1HzUKYh0aYPRPo5afZ3S5dgFyIAXM31hIji41C6kQLQ0ZSbsT+9GY2n5NnkXQBomW/qaVJDOCxP5JiklcX6ALEuwcYfR0UG0B+yqIfGMGvMCgPip53L3j3gA5VU5OZMhLRj6cbfFsvkLjWDyPvXvDqgbkE6B8A/cAkhdA2fLSAAYG2xuCdvNZ/6dULXj2gFdDnxAXerDwJkxmpX1hDyOXCfuTXC94MYPQRNA2XuIZNgAGig79XtAsjG0ok9UK93o7Jk3gzQCkwD1FilRcc8pSR1t1QRamjUZfM+P16qGrevODFgLlkNRFCNAa0KfhLdDazT7PN7A6Up9QmtHQ5AUZq+fKCFwOUksw8zPvGhYt43gf61fUo6qUIqD0XVpadUBf8eGFiAxh9KN5wCJuSbai7BfSrz2xuz+dAPa08RDapCy9emMiA2WQtPtBBi6RIKsWg4o46gn4lKuynOC23IQQn4bPxQRgsztxqJzSBnKsOzMbtuHb1astI+aCQ5jqQJxs6tuqKpZ9+vbt80n31+veLJPRSwYwkTZkTegf3dXuaOtnWfEZnlDMZMBuvxVGkWiYQC2CUuGwRyoJlEPtm50DTx0fD51UD2rGWwXMt6ZpjJWuIMIEtchleu0rCkM3xDRnLgE+geL8GxQUUlyZm5NAqG813M+o27jXCw7R+/u2zkW3z+x+0mxTIxUKS7VQHRvAzpP07Q350ZaQ62ZP72Wm6idMUV6Fu4VMLhVXcQHFc4IOs++2Bezg8lXo/HbdFmKm3ExmFDS0KVG7UDvdcY4kAftGOEDKA1NVSdXZHGCJepziF1NKGHiipQXlGlHF76HYMKoh7JOb4ig8ZggRWoQSD6SaeO1U+twQHQRVYkDL8dGVNd3bXhw0Rw8o/apKQ3zLiWpRNGMe4BIlLGy65NnpFh+dX/Lgks8xEugE2wxSnkyMFjxxohr2e6UAs/b1+rzvSgNvx2u9ghelXEtQ+SEDxYkXtQ/Hc/2TFcgOG1ELdUNI0DQ9EVZg6PWCQfrG3fv/60XuG6wCqpKumxprn4tJeyXEN7B15a8SOS4QzoKQQAcVctbleWAOggrbBRUPAhcffQNh8JSQtwoWJa4NL661r5Td4qzF7c7WLC7bXIQ+CEIoxCLUKUYCeAaCxDGcYMDCfEcx0mCWA7tLxe09M4rl4NaFaDclVNMH51WBO7tUyDxuVcQFi3t56dj5DWHGSTM9yweXcq0QxWAgQWnJZS/P14dAdSaOzN1aTUIYNE+omkEiYGbQU7uHWEPaOyNDjd6kmO1vb4xnCikvSLYTGA26vS/431fxcJjEUNyvqHyi++fqcG6uQsSEUyQYc2nQF6PCwCi24Gyxhln7Z/nxkIbv5UbuJqHioOdcqEAZFDC1SIPIDsJzaH634mQwYGILOc8DbYInSABdWrvgANTW9vX3ywTNgmb42G1DYbSz43gp1YRu9lV4vHEvxSkI6g5RJu3xrpt0lGTXwO0ILGwghXJ9P3OeH3Oef2MwpzZ8XU1xP7LYiIFYecwKl+y/PpnglE20l6jPtJLzyBvojxLNF0XoC+59iyAsD9AMqNxaCmSb9V8nl8yheyUTzwPaz+UwFL5c1T1u20Age3LH/kUPTVp9ABJw/dkXE75idQvXTSZRnmXgis0gHInXFzpYbtB+mZSmyFEYfljVM5SXBhprO7ubp3eZp4mcroTFtCfOiGtx55q31Dr1g0S8Lo23YDKY2pbxsq71t5t778LtF5MJSORvzvJAfXKFpXIoRXRtQOynKngbHLv/xwxfL5EG87YVCpVKonmvbw9id6LVQ04K06INy+SQ3uWXYIXlBnyUgT7K7+7j31jt3IkAyyx7gPga1oo4udsb2N4PeRqZ/Pv3yMXkSr7vRKNLIBctIZZthO9spRl7YYQXVWvpDn8WrAdugRMR+6tjGMg2VrOQqNomR4+F5xPv/B1RITKm5bRCqNgORgzbQO/os3g3ASoS3EyuDLfVgW+0ffZYL+R8ZHmu3cIfLXr2Dvt87+izeWOio5Nnj3pvv3v4LFbeOxg09j/x698m9H+lSLuVSvMt/LqYh337ZdD0AAAAASUVORK5CYII=",Gx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgmSURBVHgB7VlLjxvFFj6nuv3IoJt4GVbT3Ksrru7i4rC4PCSIR2IRHhIJEgIJiZlBPMQGJr/A4Q/AICGxAGEiIQURUEawgAWKDausyMAqK2J2sMJCPMZuVxXn1KurPZ64A14gMWWVuu1+1HfO+c5Xp8oAh+2w/b0bVrmpk/Vavx5pbOd1+fSkLr/45RZ9ZjjYHM29t9Vr1VdWtrQQJxXqjkLQWuivFcD2l8Mnzh80xkbz0+w3zHt5bdoZ1/S7v8ifzg5G88eIm1h0A4MfNxp9lap1mWqk3hEKXp5376njl7LmkX9c1YhdTeCpA4FH6m2d6N59/37/+t3/uZDNe3YPpusyUR2ZAqia3hBHV/o89iJ8Cw2Ypkf6MoE7ZKKBBgA+kjHzb0bZV0JnZIAmzxN46myEPUeFKqOvc4EpYd895Z6a8/a4Xu8vwndDA+7/1/vbBLpNHenF2rw8wd09NdlHhVPHP9ggymTKAOYPaDJTM3jzG38EckRWf27W90VwUlevE+ghj2OclVKvQfvO9nuvwR8xoJN98DJ58SXzIttRCdglQGvfD14clu5tXWrR713DdwOYj0wdf26Pik45EphgZ3a8ndGZkTiKJ2SqvnbOoq5gkqqt2+/pbR2EE+eDv5ApIa5Swh4jz0DeUDipyeFYwdrwyuYwvvfU8YvEdewRdVaV5Tt4rys2QLAByhrjDRLGGdfp/LHd3ad2y2NfauX1PRpbZTQ+RUZTlyO5Mj4x/KzsuIMjILBLtDnmeI9S6NE88A/e+tEWgb9M8FYdbQJ4w39jTAHeJjVlAkcC1W0kCVf/d2fvXPzOwfDMSIq9NRp7NBUh71pjnbwzF+rsDw9kF1n6NkxCOfrQ961Z8A8dv3iO4LxWgPWAIyPMuUloSx/+nfNCFEctku5//1824sq1TcqF/BVSo4CB8Ky1Hnmzs9CAKcouc4+4iCYCQg+uXVkvJe3D5HkC0A1c97wHR504F5hWdiSOhTk6aUU2gmhHRBbd2+8q8/ybrza380QPGEPOic1GNFV3oQEkmZ3gfaIPDbUZX2etl1q/SopiuA2GGua+wH8L0FAGlZ8LXKS8cRwZZ5yJkE6wm93dy0rObE5fsRQiFUxZAeHk4gikamDBU0f97rUZ6qCWfQcMS3x3nncAtf/uAdoeG6ON8Wa+YDNQt9Ia9OKxhp8/N8hTikIKVloTOL/QgN+a4zMS1CaFdmtvRZ8te5+1HlYtYA/Wctz9xh/neRJ+1rgELGDU/lpssDcI3cTXyTpvdeIxf/j0+TWVTJ+ZUl5Ofp2cncVbqRYKBtz6YT+qb1AnPllZMu1EJVljhI+MBenuB7of40goc52fdXTi7yxEg2fWqmKqbABzn9L6WyODaJIPTR7wd6MqpDIJ4D7gic0Df87GShcx5fLHGl8kPU0d2fXLz35XBdfCWihYmsKjxmtEGaaFT95QJmBR9yhA63GhUGMhsS4X/HfzpFEhilycH3kCp6viqmzAVE9P22SzoJRLTogAOVl1wOmEax9HMX4GrFa5ozcCDaV8ftjIqU5VXGnVG2mAFg8SZlSGELzqAQEWk5fLDQhzBaqSlFqpBed1JwgmqjQvtKvCqmwAcfwOp/Msk7baRHRyWHjagUQvpRY4hOc8eC+fBf28IpljVhVXZQOcTHqqFIMZLztJjMoIO/PaJNdR5MhYdFEpjItl1T+/dAPQTf3u3A3EOeC8GvQ+GAIu6b3W2xoo0IhzIZQg4Xlh37F8A1xp4Au34GVTywAG+sRqZCgS6GMnOgMQy88KHSJsizysLO+VVciCQ132suewB+DlM6pGg+FWpaSLjHbGFbWRq2ZNkacrh6CyAUXR5uoXnxNGcSLV4d9mEtMZo62URhVryCv3GxTGVG3VVahIUm1K4khxjBvQ50axPuAcKRY6vj4yntdh3rAetwZ6YwUsl0Id2gopALtkDp6D4P3A40CzIItgZvD9CoZRcefWC1aSm4+9vVoFWyUDcq1PB0qAK4VLILWTSYiM8JWqo0aYqSFeoelCei0aXnDyeV3kG1WwLQwVe3+ioM+TC4OzhZgt4OLCzBV5RSGX+IihpZJdyBvDbCTsDoUsrtkZXYRIj6a5OLG3s38hXzkCDD7XyAuYjF8qQYdEDvWNcCKKpRq/SOJQ4NnFjQWvXM2jA+85D0B4yWW1wxY21OXmk29mf8iAe/95YWMq4SoNlXlagChUx+i7Uw/paWGWmWCvxwa4NbDdkfC0sfngF/fgSnFVKBe9DzKVqMu1p95Yv2kDqHzuSgHHwh5PSFSufVSYVSEUZOAqVZeOYma+cEbZd9lVHHjDYLYk9/WU+dxG64jtg3AeKKMEreWlz1aeCG4F5b0fl9VRjeQiA6VFPPocgWKBr2NZLiY+s1ACo3XFu0Y3HQHabOX153BWGu22CDCL40UIlvaHEEo5EJcYxQRm3GLASzODx3tJKpTiSusfFYhzcNj+ou0mqo4btyebH/fzVJ2c1hRQx5w3ouicjpq/815Tztdo739C/8DQpu3Zg/7luZlWvZi7QXv8lksb44bsTBoSx7SbzZ12l/XY7C5L5B1uug4Te03TX1UbKpHrsIRWfU18g5Y3xLE8ycnj5GXaUy2OymxRchTymrTbg/Yai8Sf9j63pUQAjqrzRIld63H2vNKT4HEZvG+uUZSISrvff/bCeVhCW4oBO7Snn9fSNfpLaHvcUA6sBnNuOtGIj02TC9t5rb4GS2pLS2Lf2u1elteTLtGkTRRqM31oa/w7Ou7kQu+MPnn+Czhsh+2wLa39Dg6V7kYHEKisAAAAAElFTkSuQmCC",Hx={class:"terms_modal"},qx={key:0,class:"termagree_wrapper"},Kx={__name:"TermsModal",props:{showAgree:{type:Boolean,default:!0},useRouterClose:{type:Boolean,default:!1}},emits:["close-terms"],setup(n,{emit:e}){const t=n,r=e,s=qs(),{isLoggedIn:i,loginWithGoogle:o}=yu(),{currentGroupId:a,loadUserGroup:l}=Ys(),u=()=>{t.useRouterClose?s.push("/signup"):r("close-terms")},h=()=>{u()},f=async()=>{await l(),a.value?s.push("/report"):s.push("/signup/groupjoin")},m=async()=>{try{i.value||await o(),await f()}catch(g){console.error("login error in TermsModal:",g),window.alert(" .     .")}};return an(async()=>{t.useRouterClose&&i.value&&await f()}),(g,R)=>(oe(),he("div",Hx,[Ve(Yf,{title:"  ",leftIcon:n.showAgree?"":"close",onLeftAction:u},null,8,["leftIcon"]),O("div",{class:Ht(["terms_wrapper",{nofooter:!n.showAgree}])},[R[1]||(R[1]=Un('<div class="terms_inner" data-v-a25fac8f><p class="termtitle" data-v-a25fac8f>1 ()</p><p class="termscript" data-v-a25fac8f>     (Bug Report)   ,  ( &quot;&quot;)   ,      .<br data-v-a25fac8f>         ,           . </p><p class="termtitle" data-v-a25fac8f>2 ()</p><p class="termscript" data-v-a25fac8f>         , ,        .<br data-v-a25fac8f>        .<br data-v-a25fac8f>  ID             . </p><p class="termtitle" data-v-a25fac8f>3 ( )</p><p class="termscript" data-v-a25fac8f>       ,      .<br data-v-a25fac8f>          ,     .<br data-v-a25fac8f>           . </p><p class="termtitle" data-v-a25fac8f>4 ( )</p><p class="termscript" data-v-a25fac8f>      ,        .<br data-v-a25fac8f>        ,       .<br data-v-a25fac8f>             . </p><p class="termtitle" data-v-a25fac8f>5 (   )</p><p class="termscript" data-v-a25fac8f>       , ,  ,   (Firebase, Google )      .<br data-v-a25fac8f>     , ,        ,<br data-v-a25fac8f>         , , ,      .<br data-v-a25fac8f>    , ,    .<br data-v-a25fac8f>     ,       . </p><p class="termtitle" data-v-a25fac8f>6 ( )</p><p class="termscript" data-v-a25fac8f>       Google  .<br data-v-a25fac8f>  Google   Firebase Authentication  Firestore   ,<br data-v-a25fac8f>     3  . </p><p class="termtitle" data-v-a25fac8f>7 (  )</p><p class="termscript" data-v-a25fac8f>              .<br data-v-a25fac8f>       <br data-v-a25fac8f>  , ,      <br data-v-a25fac8f>      , ,  <br data-v-a25fac8f>       </p><p class="termtitle" data-v-a25fac8f>8 ( )</p><p class="termscript" data-v-a25fac8f>        ,        .<br data-v-a25fac8f>           . </p><p class="termtitle" data-v-a25fac8f>9 (  )</p><p class="termscript" data-v-a25fac8f>     ,          . </p></div>',1)),n.showAgree?(oe(),he("div",qx,[R[0]||(R[0]=O("p",{class:"terminfo"},"      .",-1)),O("div",{class:"modal_buttons type_confirm"},[O("button",{class:"btn_cancel",onClick:h},""),O("button",{class:"btn_confirm",onClick:m},"")])])):yt("",!0)],2)]))}},ow=Ks(Kx,[["__scopeId","data-v-a25fac8f"]]),zx={class:"mypage_wrapper"},Wx={class:"menu_wrapper"},Qx={class:"right"},Yx={class:"submenu_wrapper"},Xx={class:"change_group_body"},Jx={class:"change_group_hint"},$x={__name:"index",emits:["close-menu"],setup(n,{emit:e}){const t=e,r=()=>t("close-menu"),s=qs(),{openModal:i}=vu(),{showToast:o}=Bl(),a=ge(null),l=y=>{a.value=a.value===y?null:y},u=ge(!1),h=()=>u.value=!0,{currentGroupId:f,loadUserGroup:m,joinGroup:g}=Ys();an(async()=>{await m()});const R=Et(()=>f.value||""),C=async y=>{if(!y)return!1;try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(y),!0;{const E=document.createElement("textarea");E.value=y,E.style.position="fixed",E.style.opacity="0",document.body.appendChild(E),E.focus(),E.select();const T=document.execCommand("copy");return document.body.removeChild(E),T}}catch(E){return console.error("copyToClipboard error:",E),!1}},k=async()=>{try{await qE(wl)}catch(y){console.error("logout error:",y)}s.replace("/signup")},B=()=>{i("alert","  ID",R.value,{okLabel:"",async onConfirm(){const y=await C(R.value);o(y?" ~":" .   .")}})},F=()=>{const y="/bug-report/",E=new URL(y,window.location.origin);if(!R.value)return E.toString();const T=btoa(R.value);return E.searchParams.set("g",T),E.toString()},U=async()=>{const y=F(),E={title:"   ",text:"          .",url:y};try{if(navigator.share&&(!navigator.canShare||navigator.canShare(E))){await navigator.share(E);return}}catch(w){console.error("navigator.share error",w)}await C(y)?i("alert"," ",`   .
    .`):i("alert"," ",`  .
     .`)},H=ge(!1),$=ge(""),re=()=>{$.value="",H.value=!0},S=()=>{H.value=!1},v=async()=>{const y=$.value;if(!y){i("alert"," ID ","  ID  .");return}const E=y.trim().toLowerCase();if(!/^[a-z0-9]+$/.test(E)){i("alert"," ID "," ID     .");return}if(E===R.value){i("alert"," ID ","    ID .");return}try{await g(E),o(" ID ."),H.value=!1,r()}catch(T){console.error("change group error:",T),i("alert"," ID ",T.message||"    .")}};return(y,E)=>(oe(),he($e,null,[O("div",zx,[u.value?yt("",!0):(oe(),En(Yf,{key:0,title:"BUG REPORT",leftIcon:"close-menu",onLeftAction:r})),O("div",Wx,[O("div",{class:Ht(["menu_inner",{open:a.value==="info"}]),onClick:E[0]||(E[0]=T=>l("info"))},[E[4]||(E[4]=Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_667)" data-v-bc2f7308><path d="M12.007 1L12.245 1.005C13.4393 1.05368 14.5918 1.45796 15.5548 2.166C16.5178 2.87404 17.2474 3.85357 17.65 4.979L17.728 5.212C18.1463 6.55144 18.0819 7.99512 17.546 9.292L17.453 9.502L17.503 9.5C18.0387 9.48757 18.5675 9.62176 19.0325 9.88806C19.4974 10.1544 19.8807 10.5427 20.141 11.011L20.222 11.169C20.5351 11.8354 20.5817 12.5963 20.3523 13.296C20.123 13.9957 19.6349 14.5813 18.988 14.933L18.798 15.029L17 15.85V16.813L18.166 17.979L18.306 18.133C18.7843 18.7 19.0322 19.426 19.0008 20.1671C18.9693 20.9083 18.6607 21.6106 18.136 22.135C17.049 23.223 15.309 23.296 14.106 22.279L13.946 22.133L12 20.185L10.054 22.132C9.5387 22.6495 8.8503 22.9582 8.12115 22.9988C7.392 23.0394 6.67357 22.8091 6.104 22.352L5.954 22.224C4.784 21.151 4.67 19.345 5.72 18.104L5.866 17.946L7 16.812V15.85L5.166 15.01L4.985 14.917C4.34545 14.5619 3.865 13.9767 3.6412 13.2802C3.41741 12.5837 3.46703 11.8282 3.78 11.167C4.01943 10.6687 4.39494 10.2483 4.86315 9.95442C5.33137 9.6605 5.87318 9.50504 6.426 9.506L6.556 9.509L6.526 9.445C6.24952 8.82172 6.0795 8.1565 6.023 7.477L6.006 7.217V7C6.00594 5.44762 6.60757 3.95564 7.68446 2.83753C8.76136 1.71942 10.2297 1.06221 11.781 1.004L12.005 1H12.007ZM12.01 16H12C11.7348 16 11.4804 16.1054 11.2929 16.2929C11.1054 16.4804 11 16.7348 11 17C11 17.2652 11.1054 17.5196 11.2929 17.7071C11.4804 17.8946 11.7348 18 12 18H12.01C12.2752 18 12.5296 17.8946 12.7171 17.7071C12.9046 17.5196 13.01 17.2652 13.01 17C13.01 16.7348 12.9046 16.4804 12.7171 16.2929C12.5296 16.1054 12.2752 16 12.01 16ZM12.01 13H12C11.7348 13 11.4804 13.1054 11.2929 13.2929C11.1054 13.4804 11 13.7348 11 14C11 14.2652 11.1054 14.5196 11.2929 14.7071C11.4804 14.8946 11.7348 15 12 15H12.01C12.2752 15 12.5296 14.8946 12.7171 14.7071C12.9046 14.5196 13.01 14.2652 13.01 14C13.01 13.7348 12.9046 13.4804 12.7171 13.2929C12.5296 13.1054 12.2752 13 12.01 13ZM12.01 8H12C11.7348 8 11.4804 8.10536 11.2929 8.29289C11.1054 8.48043 11 8.73478 11 9C11 9.26522 11.1054 9.51957 11.2929 9.70711C11.4804 9.89464 11.7348 10 12 10H12.01C12.2752 10 12.5296 9.89464 12.7171 9.70711C12.9046 9.51957 13.01 9.26522 13.01 9C13.01 8.73478 12.9046 8.48043 12.7171 8.29289C12.5296 8.10536 12.2752 8 12.01 8ZM10.01 5H10C9.73478 5 9.48043 5.10536 9.29289 5.29289C9.10536 5.48043 9 5.73478 9 6C9 6.26522 9.10536 6.51957 9.29289 6.70711C9.48043 6.89464 9.73478 7 10 7H10.01C10.2752 7 10.5296 6.89464 10.7171 6.70711C10.9046 6.51957 11.01 6.26522 11.01 6C11.01 5.73478 10.9046 5.48043 10.7171 5.29289C10.5296 5.10536 10.2752 5 10.01 5ZM14.01 5H14C13.7348 5 13.4804 5.10536 13.2929 5.29289C13.1054 5.48043 13 5.73478 13 6C13 6.26522 13.1054 6.51957 13.2929 6.70711C13.4804 6.89464 13.7348 7 14 7H14.01C14.2752 7 14.5296 6.89464 14.7171 6.70711C14.9046 6.51957 15.01 6.26522 15.01 6C15.01 5.73478 14.9046 5.48043 14.7171 5.29289C14.5296 5.10536 14.2752 5 14.01 5Z" fill="url(#paint0_linear_16_667)" data-v-bc2f7308></path></g><defs data-v-bc2f7308><linearGradient id="paint0_linear_16_667" x1="3.50312" y1="1" x2="25.8872" y2="12.6032" gradientUnits="userSpaceOnUse" data-v-bc2f7308><stop stop-color="#6000B4" data-v-bc2f7308></stop><stop offset="1" stop-color="#006192" data-v-bc2f7308></stop></linearGradient><clipPath id="clip0_16_667" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308> </p></div>',1)),O("div",Qx,[(oe(),he("svg",{class:Ht(["arrow_icon",{rotated:a.value==="info"}]),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...E[3]||(E[3]=[O("path",{d:"M6 4L10 8L6 12",stroke:"#848A9C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))])],2),Ve(Vi,{name:"submenu"},{default:Fn(()=>[tn(O("div",Yx,[O("div",{class:"submenu_inner",onClick:Ti(B,["stop"])},[...E[5]||(E[5]=[O("p",{class:"submenutitle"}," ID ",-1)])]),O("div",{class:"submenu_inner",onClick:Ti(U,["stop"])},[...E[6]||(E[6]=[O("p",{class:"submenutitle"}," ",-1)])]),O("div",{class:"submenu_inner",onClick:Ti(re,["stop"])},[...E[7]||(E[7]=[O("p",{class:"submenutitle"}," ID ",-1)])])],512),[[dv,a.value==="info"]])]),_:1}),O("div",{class:"menu_inner",onClick:h},[...E[8]||(E[8]=[Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_745)" data-v-bc2f7308><path d="M9 5H7C6.46957 5 5.96086 5.21071 5.58579 5.58579C5.21071 5.96086 5 6.46957 5 7V19C5 19.5304 5.21071 20.0391 5.58579 20.4142C5.96086 20.7893 6.46957 21 7 21H17C17.5304 21 18.0391 20.7893 18.4142 20.4142C18.7893 20.0391 19 19.5304 19 19V7C19 6.46957 18.7893 5.96086 18.4142 5.58579C18.0391 5.21071 17.5304 5 17 5H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5C15 5.53043 14.7893 6.03914 14.4142 6.41421C14.0391 6.78929 13.5304 7 13 7H11C10.4696 7 9.96086 6.78929 9.58579 6.41421C9.21071 6.03914 9 5.53043 9 5Z" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 12H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 16H15" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></g><defs data-v-bc2f7308><clipPath id="clip0_16_745" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308></p></div><div class="right" data-v-bc2f7308><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><path d="M6 4L10 8L6 12" stroke="#848A9C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></svg></div>',2)])]),O("div",{class:"menu_inner",onClick:k},[...E[9]||(E[9]=[Un('<div class="left" data-v-bc2f7308><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><g clip-path="url(#clip0_16_727)" data-v-bc2f7308><path d="M14 8V6C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4H5C4.46957 4 3.96086 4.21071 3.58579 4.58579C3.21071 4.96086 3 5.46957 3 6V18C3 18.5304 3.21071 19.0391 3.58579 19.4142C3.96086 19.7893 4.46957 20 5 20H12C12.5304 20 13.0391 19.7893 13.4142 19.4142C13.7893 19.0391 14 18.5304 14 18V16" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M9 12H21L18 9" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path><path d="M18 15L21 12" stroke="#535765" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></g><defs data-v-bc2f7308><clipPath id="clip0_16_727" data-v-bc2f7308><rect width="24" height="24" fill="white" data-v-bc2f7308></rect></clipPath></defs></svg><p class="menutitle" data-v-bc2f7308></p></div><div class="right" data-v-bc2f7308><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bc2f7308><path d="M6 4L10 8L6 12" stroke="#848A9C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-bc2f7308></path></svg></div>',2)])])])]),Ve(Vi,{name:"fade"},{default:Fn(()=>[u.value?(oe(),En(ow,{key:0,showAgree:!1,onCloseTerms:E[1]||(E[1]=T=>u.value=!1)})):yt("",!0)]),_:1}),H.value?(oe(),En(Xf,{key:0,type:"confirm",title:" ID ",message:`  ID  .
(+ )`,"cancel-label":"","confirm-label":"",onCancel:S,onClose:S,onConfirm:v},{default:Fn(()=>[O("div",Xx,[tn(O("input",{"onUpdate:modelValue":E[2]||(E[2]=T=>$.value=T),type:"text",placeholder:": team2025",class:"change_group_input"},null,512),[[_n,$.value]]),O("p",Jx,"   ID: "+Je(R.value||"-"),1)])]),_:1})):yt("",!0)],64))}},aw=Ks($x,[["__scopeId","data-v-bc2f7308"]]),Zx={id:"app",class:"app_wrap"},eN={class:"btns_wrapper"},tN=["src"],nN={class:"btns_inner"},rN=["src","alt"],sN={class:"main_content"},iN={key:0,class:"tab_wrapper"},oN={key:1,class:"desktop_layout"},aN={key:2,class:"mobile_layout"},cN={key:0,class:"mypage_overlay"},lN={__name:"index",setup(n){const e=qs(),t=ge(!1),r=()=>{t.value=!0},s=()=>{t.value=!1},{isOpen:i,modalType:o,modalTitle:a,modalMessage:l,okLabel:u,cancelLabel:h,confirmLabel:f,openModal:m,closeModal:g,confirm:R,cancel:C}=vu(),k=ge("form"),B=ge(!1),{theme:F,toggleTheme:U}=Ux(),{currentGroupId:H,loadUserGroup:$}=Ys(),{currentUser:re,isAuthReady:S}=yu(),v=["1.   ","2.  ID  ","3.   ","4.  ","5.  ","6.   "],y=()=>{const T=v.join(`
`);m("alert","",T)},E=()=>{B.value=window.innerWidth<1024};return an(()=>{E(),window.addEventListener("resize",E);const T=Fr(()=>S.value,async w=>{if(w){if(T(),!re.value){e.replace("/signup");return}await $(),H.value||e.replace("/signup")}},{immediate:!0})}),ca(()=>{window.removeEventListener("resize",E)}),(T,w)=>(oe(),he("div",Zx,[Ve(Yf,{title:"BUG REPORT",rightIcon:"menu",onRightAction:r}),O("div",eN,[O("button",{class:"noti_btn",onClick:y},[O("img",{src:Ie(Gx),alt:" "},null,8,tN)]),O("div",nN,[O("button",{class:"theme_toggle_btn",onClick:w[0]||(w[0]=(...I)=>Ie(U)&&Ie(U)(...I))},[O("img",{src:Ie(F)==="light"?Ie(Bx):Ie(jx),alt:Ie(F)==="light"?" ":" "},null,8,rN)]),O("button",{class:"help_btn",onClick:w[1]||(w[1]=I=>Ie(m)("help",""))},[...w[4]||(w[4]=[Un('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-77f692ff><g clip-path="url(#clip0_1904_299)" data-v-77f692ff><path d="M12 2L12.642 2.005L13.258 2.022L13.557 2.035L14.136 2.069L14.689 2.115C19.376 2.57 21.339 4.448 21.855 9.021L21.885 9.311L21.931 9.864L21.972 10.591L21.978 10.741L21.995 11.358L22 12L21.995 12.642L21.978 13.258L21.965 13.557L21.931 14.136L21.885 14.689C21.43 19.376 19.552 21.339 14.979 21.855L14.689 21.885L14.136 21.931L13.409 21.972L13.259 21.978L12.642 21.995L12 22L11.358 21.995L10.742 21.978L10.443 21.965L9.86398 21.931L9.31098 21.885C4.62398 21.43 2.66098 19.552 2.14498 14.979L2.11498 14.689L2.06898 14.136L2.02798 13.409L2.02198 13.259L2.00498 12.642L2.00098 12.324V11.676L2.00498 11.358L2.02198 10.742L2.03498 10.443L2.06898 9.864L2.11498 9.311C2.56998 4.624 4.44798 2.661 9.02098 2.145L9.31098 2.115L9.86398 2.069L10.591 2.028L10.741 2.022L11.358 2.005C11.568 2.002 11.782 2 12 2ZM12 11H11L10.883 11.007C10.6399 11.0359 10.4159 11.153 10.2534 11.336C10.0909 11.519 10.0011 11.7552 10.0011 12C10.0011 12.2448 10.0909 12.481 10.2534 12.664C10.4159 12.847 10.6399 12.9641 10.883 12.993L11 13V16L11.007 16.117C11.0333 16.3402 11.1341 16.5481 11.293 16.707C11.4519 16.8659 11.6598 16.9667 11.883 16.993L12 17H13L13.117 16.993C13.3402 16.9667 13.548 16.8659 13.707 16.707C13.8659 16.5481 13.9667 16.3402 13.993 16.117L14 16L13.993 15.883C13.9691 15.679 13.8829 15.4873 13.7462 15.3339C13.6095 15.1806 13.4289 15.0731 13.229 15.026L13.117 15.006L13 15V12L12.993 11.883C12.9667 11.6598 12.8659 11.4519 12.707 11.293C12.548 11.1341 12.3402 11.0333 12.117 11.007L12 11ZM12.01 8L11.883 8.007C11.6399 8.03591 11.4159 8.15296 11.2534 8.33597C11.0909 8.51897 11.0011 8.75524 11.0011 9C11.0011 9.24476 11.0909 9.48103 11.2534 9.66403C11.4159 9.84704 11.6399 9.96409 11.883 9.993L12 10L12.127 9.993C12.37 9.96409 12.594 9.84704 12.7566 9.66403C12.9191 9.48103 13.0089 9.24476 13.0089 9C13.0089 8.75524 12.9191 8.51897 12.7566 8.33597C12.594 8.15296 12.37 8.03591 12.127 8.007L12.01 8Z" fill="url(#paint0_linear_1904_299)" data-v-77f692ff></path></g><defs data-v-77f692ff><linearGradient id="paint0_linear_1904_299" x1="2.00098" y1="2" x2="25.0434" y2="17.4656" gradientUnits="userSpaceOnUse" data-v-77f692ff><stop stop-color="#6000B4" data-v-77f692ff></stop><stop offset="1" stop-color="#006192" data-v-77f692ff></stop></linearGradient><clipPath id="clip0_1904_299" data-v-77f692ff><rect width="24" height="24" fill="white" data-v-77f692ff></rect></clipPath></defs></svg>',1)])])])]),O("main",sN,[B.value?(oe(),he("div",iN,[O("button",{class:Ht({active:k.value==="form"}),onClick:w[2]||(w[2]=I=>k.value="form")},"   ",2),O("button",{class:Ht({active:k.value==="list"}),onClick:w[3]||(w[3]=I=>k.value="list")},"   ",2)])):yt("",!0),B.value?(oe(),he("div",aN,[k.value==="form"?(oe(),En(Q_,{key:0})):(oe(),En(Y_,{key:1}))])):(oe(),he("div",oN,[Ve(Q_),Ve(Y_)]))]),Ve(Vi,{name:"mypage-slide",appear:!1},{default:Fn(()=>[t.value?(oe(),he("div",cN,[Ve(aw,{onCloseMenu:s})])):yt("",!0)]),_:1}),Ie(i)?(oe(),En(Xf,{key:0,type:Ie(o),title:Ie(a),message:Ie(l),"ok-label":Ie(u),"cancel-label":Ie(h),"confirm-label":Ie(f),onConfirm:Ie(R),onCancel:Ie(C),onClose:Ie(g)},{help:Fn(()=>[...w[5]||(w[5]=[O("div",{class:"help_list"},[O("p",{class:"help_text"},"1.  // ."),O("p",{class:"help_text"},"2.    ."),O("p",{class:"help_text"},"3.     .")],-1),O("div",{class:"line"},null,-1),O("div",{class:"help_actions"},[O("div",{class:"help_action"},[O("img",{src:yD,alt:""}),O("p",null,"")]),O("div",{class:"help_action"},[O("img",{src:vD,alt:""}),O("p",null,"")])],-1)])]),_:1},8,["type","title","message","ok-label","cancel-label","confirm-label","onConfirm","onCancel","onClose"])):yt("",!0)]))}},uN=Ks(lN,[["__scopeId","data-v-77f692ff"]]),hN={class:"groupjoin_wrapper"},dN={class:"groupid_wrapper"},fN={class:"form_field"},pN={__name:"GroupJoin",setup(n){const e=qs(),{currentGroupId:t,loadUserGroup:r,joinGroup:s}=Ys(),{showToast:i}=Bl(),o=ge("");an(async()=>{await r(),t.value&&e.push("/report")});const a=async()=>{const u=o.value.trim();if(!u){i(" ID  .");return}try{await s(u),i(" ."),e.push("/report")}catch(h){console.error("joinGroup error:",h),i(h.message||"  .   .")}},l=()=>{e.push("/signup/groupcreate")};return(u,h)=>(oe(),he("div",hN,[h[2]||(h[2]=O("p",{class:"title"},"BUG REPORT",-1)),O("div",dN,[O("div",fN,[tn(O("input",{type:"text",placeholder:" ID  .","onUpdate:modelValue":h[0]||(h[0]=f=>o.value=f),onKeyup:mv(a,["enter"])},null,544),[[_n,o.value]])]),O("button",{class:"submit_btn",onClick:a},"   ")]),O("div",{class:"groupidcreate_wrapper"},[h[1]||(h[1]=O("p",null,"   ID  .",-1)),O("button",{class:"btn_secondary",onClick:l},"  ID  ")])]))}},mN={class:"groupcreate_wrapper"},gN={class:"groupid_wrapper"},_N={class:"filter_row"},yN={class:"form_field"},vN={__name:"GroupCreate",setup(n){const e=qs(),{currentGroupId:t,loadUserGroup:r,createGroup:s}=Ys(),{showToast:i}=Bl(),o=ge(""),a=ge(!1);an(async()=>{await r(),t.value&&e.push("/report")});const l=async()=>{const f=o.value.trim().toLowerCase();if(!f){i(" ID  .");return}if(!/^[a-z0-9]+$/.test(f)){i("    .");return}try{const m=kt(lt,"groups",f);(await _i(m)).exists()?(i("   ID."),a.value=!1):(i("   ID."),a.value=!0)}catch(m){console.error("duplicate check error:",m),i("    .")}},u=async()=>{const f=o.value.trim().toLowerCase();if(!f){i(" ID  .");return}if(!a.value){i("    .");return}try{await s(f),i(" ."),e.push("/report")}catch(m){console.error("createGroup error:",m),i(m.message||"  .")}},h=()=>{e.push("/signup/groupjoin")};return(f,m)=>(oe(),he("div",mN,[m[2]||(m[2]=O("p",{class:"title"},"BUG REPORT",-1)),O("div",gN,[m[1]||(m[1]=O("p",null,[Rh("  ID ."),O("br"),Rh("    ID. ")],-1)),O("div",_N,[O("div",yN,[tn(O("input",{type:"text",placeholder:"+ ","onUpdate:modelValue":m[0]||(m[0]=g=>o.value=g)},null,512),[[_n,o.value]])]),O("button",{class:"confirm_btn",onClick:l},"   ")]),O("button",{class:"submit_btn",onClick:u},"  ID  ")]),O("p",{class:"back",onClick:h},"")]))}},IN=hb({history:H0("/bug-report/"),routes:[{path:"/",redirect:"/splash"},{path:"/splash",component:Eb},{path:"/signup",component:_D},{path:"/report",component:uN},{path:"/mypage",component:aw},{path:"/signup/terms",component:ow,props:{showAgree:!0,useRouterClose:!0}},{path:"/signup/groupjoin",component:pN},{path:"/signup/groupcreate",component:vN}]});console.log("main.js ");const cw=r0(vb);console.log("app ");cw.use(IN);cw.mount("#app");console.log("mount ");
