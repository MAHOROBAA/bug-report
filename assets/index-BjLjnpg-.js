(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function au(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Vt={},ds=[],en=()=>{},Fp=()=>!1,Ka=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),lu=n=>n.startsWith("onUpdate:"),ie=Object.assign,cu=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},tI=Object.prototype.hasOwnProperty,vt=(n,t)=>tI.call(n,t),at=Array.isArray,ps=n=>za(n)==="[object Map]",Lp=n=>za(n)==="[object Set]",ct=n=>typeof n=="function",qt=n=>typeof n=="string",Tn=n=>typeof n=="symbol",Nt=n=>n!==null&&typeof n=="object",Bp=n=>(Nt(n)||ct(n))&&ct(n.then)&&ct(n.catch),Up=Object.prototype.toString,za=n=>Up.call(n),eI=n=>za(n).slice(8,-1),jp=n=>za(n)==="[object Object]",uu=n=>qt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ri=au(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qa=n=>{const t=Object.create(null);return(e=>t[e]||(t[e]=n(e)))},nI=/-\w/g,Hn=qa(n=>n.replace(nI,t=>t.slice(1).toUpperCase())),rI=/\B([A-Z])/g,zr=qa(n=>n.replace(rI,"-$1").toLowerCase()),Kp=qa(n=>n.charAt(0).toUpperCase()+n.slice(1)),Fl=qa(n=>n?`on${Kp(n)}`:""),Un=(n,t)=>!Object.is(n,t),Qo=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},zp=(n,t,e,r=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:r,value:e})},dc=n=>{const t=parseFloat(n);return isNaN(t)?n:t},sI=n=>{const t=qt(n)?Number(n):NaN;return isNaN(t)?n:t};let If;const Ga=()=>If||(If=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hu(n){if(at(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],s=qt(r)?lI(r):hu(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(qt(n)||Nt(n))return n}const iI=/;(?![^(]*\))/g,oI=/:([^]+)/,aI=/\/\*[^]*?\*\//g;function lI(n){const t={};return n.replace(aI,"").split(iI).forEach(e=>{if(e){const r=e.split(oI);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Qn(n){let t="";if(qt(n))t=n;else if(at(n))for(let e=0;e<n.length;e++){const r=Qn(n[e]);r&&(t+=r+" ")}else if(Nt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const cI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uI=au(cI);function qp(n){return!!n||n===""}const Gp=n=>!!(n&&n.__v_isRef===!0),Le=n=>qt(n)?n:n==null?"":at(n)||Nt(n)&&(n.toString===Up||!ct(n.toString))?Gp(n)?Le(n.value):JSON.stringify(n,Hp,2):String(n),Hp=(n,t)=>Gp(t)?Hp(n,t.value):ps(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,s],i)=>(e[Ll(r,i)+" =>"]=s,e),{})}:Lp(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Ll(e))}:Tn(t)?Ll(t):Nt(t)&&!at(t)&&!jp(t)?String(t):t,Ll=(n,t="")=>{var e;return Tn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ve;class hI{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ve,!t&&ve&&(this.index=(ve.scopes||(ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ve;try{return ve=this,t()}finally{ve=e}}}on(){++this._on===1&&(this.prevScope=ve,ve=this)}off(){this._on>0&&--this._on===0&&(ve=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function fI(){return ve}let Dt;const Bl=new WeakSet;class Qp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ve&&ve.active&&ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bl.has(this)&&(Bl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$p(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ef(this),Xp(this);const t=Dt,e=ze;Dt=this,ze=!0;try{return this.fn()}finally{Yp(this),Dt=t,ze=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pu(t);this.deps=this.depsTail=void 0,Ef(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pc(this)&&this.run()}get dirty(){return pc(this)}}let Wp=0,Pi,Ci;function $p(n,t=!1){if(n.flags|=8,t){n.next=Ci,Ci=n;return}n.next=Pi,Pi=n}function fu(){Wp++}function du(){if(--Wp>0)return;if(Ci){let t=Ci;for(Ci=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Pi;){let t=Pi;for(Pi=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){n||(n=r)}t=e}}if(n)throw n}function Xp(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Yp(n){let t,e=n.depsTail,r=e;for(;r;){const s=r.prevDep;r.version===-1?(r===e&&(e=s),pu(r),dI(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=t,n.depsTail=e}function pc(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Jp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Jp(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ki)||(n.globalVersion=Ki,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!pc(n))))return;n.flags|=2;const t=n.dep,e=Dt,r=ze;Dt=n,ze=!0;try{Xp(n);const s=n.fn(n._value);(t.version===0||Un(s,n._value))&&(n.flags|=128,n._value=s,t.version++)}catch(s){throw t.version++,s}finally{Dt=e,ze=r,Yp(n),n.flags&=-3}}function pu(n,t=!1){const{dep:e,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),e.subs===n&&(e.subs=r,!r&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)pu(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function dI(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let ze=!0;const Zp=[];function gn(){Zp.push(ze),ze=!1}function _n(){const n=Zp.pop();ze=n===void 0?!0:n}function Ef(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Dt;Dt=void 0;try{t()}finally{Dt=e}}}let Ki=0;class pI{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mu{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Dt||!ze||Dt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Dt)e=this.activeLink=new pI(Dt,this),Dt.deps?(e.prevDep=Dt.depsTail,Dt.depsTail.nextDep=e,Dt.depsTail=e):Dt.deps=Dt.depsTail=e,tm(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const r=e.nextDep;r.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=r),e.prevDep=Dt.depsTail,e.nextDep=void 0,Dt.depsTail.nextDep=e,Dt.depsTail=e,Dt.deps===e&&(Dt.deps=r)}return e}trigger(t){this.version++,Ki++,this.notify(t)}notify(t){fu();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{du()}}}function tm(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)tm(r)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const mc=new WeakMap,Cr=Symbol(""),gc=Symbol(""),zi=Symbol("");function he(n,t,e){if(ze&&Dt){let r=mc.get(n);r||mc.set(n,r=new Map);let s=r.get(e);s||(r.set(e,s=new mu),s.map=r,s.key=e),s.track()}}function fn(n,t,e,r,s,i){const o=mc.get(n);if(!o){Ki++;return}const l=c=>{c&&c.trigger()};if(fu(),t==="clear")o.forEach(l);else{const c=at(n),h=c&&uu(e);if(c&&e==="length"){const f=Number(r);o.forEach((p,E)=>{(E==="length"||E===zi||!Tn(E)&&E>=f)&&l(p)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(zi)),t){case"add":c?h&&l(o.get("length")):(l(o.get(Cr)),ps(n)&&l(o.get(gc)));break;case"delete":c||(l(o.get(Cr)),ps(n)&&l(o.get(gc)));break;case"set":ps(n)&&l(o.get(Cr));break}}du()}function Yr(n){const t=Tt(n);return t===n?t:(he(t,"iterate",zi),Ue(n)?t:t.map(re))}function Ha(n){return he(n=Tt(n),"iterate",zi),n}const mI={__proto__:null,[Symbol.iterator](){return Ul(this,Symbol.iterator,re)},concat(...n){return Yr(this).concat(...n.map(t=>at(t)?Yr(t):t))},entries(){return Ul(this,"entries",n=>(n[1]=re(n[1]),n))},every(n,t){return ln(this,"every",n,t,void 0,arguments)},filter(n,t){return ln(this,"filter",n,t,e=>e.map(re),arguments)},find(n,t){return ln(this,"find",n,t,re,arguments)},findIndex(n,t){return ln(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return ln(this,"findLast",n,t,re,arguments)},findLastIndex(n,t){return ln(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return ln(this,"forEach",n,t,void 0,arguments)},includes(...n){return jl(this,"includes",n)},indexOf(...n){return jl(this,"indexOf",n)},join(n){return Yr(this).join(n)},lastIndexOf(...n){return jl(this,"lastIndexOf",n)},map(n,t){return ln(this,"map",n,t,void 0,arguments)},pop(){return di(this,"pop")},push(...n){return di(this,"push",n)},reduce(n,...t){return Tf(this,"reduce",n,t)},reduceRight(n,...t){return Tf(this,"reduceRight",n,t)},shift(){return di(this,"shift")},some(n,t){return ln(this,"some",n,t,void 0,arguments)},splice(...n){return di(this,"splice",n)},toReversed(){return Yr(this).toReversed()},toSorted(n){return Yr(this).toSorted(n)},toSpliced(...n){return Yr(this).toSpliced(...n)},unshift(...n){return di(this,"unshift",n)},values(){return Ul(this,"values",re)}};function Ul(n,t,e){const r=Ha(n),s=r[t]();return r!==n&&!Ue(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=e(i.value)),i}),s}const gI=Array.prototype;function ln(n,t,e,r,s,i){const o=Ha(n),l=o!==n&&!Ue(n),c=o[t];if(c!==gI[t]){const p=c.apply(n,i);return l?re(p):p}let h=e;o!==n&&(l?h=function(p,E){return e.call(this,re(p),E,n)}:e.length>2&&(h=function(p,E){return e.call(this,p,E,n)}));const f=c.call(o,h,r);return l&&s?s(f):f}function Tf(n,t,e,r){const s=Ha(n);let i=e;return s!==n&&(Ue(n)?e.length>3&&(i=function(o,l,c){return e.call(this,o,l,c,n)}):i=function(o,l,c){return e.call(this,o,re(l),c,n)}),s[t](i,...r)}function jl(n,t,e){const r=Tt(n);he(r,"iterate",zi);const s=r[t](...e);return(s===-1||s===!1)&&Iu(e[0])?(e[0]=Tt(e[0]),r[t](...e)):s}function di(n,t,e=[]){gn(),fu();const r=Tt(n)[t].apply(n,e);return du(),_n(),r}const _I=au("__proto__,__v_isRef,__isVue"),em=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Tn));function yI(n){Tn(n)||(n=String(n));const t=Tt(this);return he(t,"has",n),t.hasOwnProperty(n)}class nm{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if(e==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(s?i?PI:om:i?im:sm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=at(t);if(!s){let c;if(o&&(c=mI[e]))return c;if(e==="hasOwnProperty")return yI}const l=Reflect.get(t,e,me(t)?t:r);if((Tn(e)?em.has(e):_I(e))||(s||he(t,"get",e),i))return l;if(me(l)){const c=o&&uu(e)?l:l.value;return s&&Nt(c)?yc(c):c}return Nt(l)?s?yc(l):_u(l):l}}class rm extends nm{constructor(t=!1){super(!1,t)}set(t,e,r,s){let i=t[e];if(!this._isShallow){const c=Wn(i);if(!Ue(r)&&!Wn(r)&&(i=Tt(i),r=Tt(r)),!at(t)&&me(i)&&!me(r))return c||(i.value=r),!0}const o=at(t)&&uu(e)?Number(e)<t.length:vt(t,e),l=Reflect.set(t,e,r,me(t)?t:s);return t===Tt(s)&&(o?Un(r,i)&&fn(t,"set",e,r):fn(t,"add",e,r)),l}deleteProperty(t,e){const r=vt(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&r&&fn(t,"delete",e,void 0),s}has(t,e){const r=Reflect.has(t,e);return(!Tn(e)||!em.has(e))&&he(t,"has",e),r}ownKeys(t){return he(t,"iterate",at(t)?"length":Cr),Reflect.ownKeys(t)}}class II extends nm{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const EI=new rm,TI=new II,AI=new rm(!0);const _c=n=>n,Oo=n=>Reflect.getPrototypeOf(n);function vI(n,t,e){return function(...r){const s=this.__v_raw,i=Tt(s),o=ps(i),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=s[n](...r),f=e?_c:t?ha:re;return!t&&he(i,"iterate",c?gc:Cr),{next(){const{value:p,done:E}=h.next();return E?{value:p,done:E}:{value:l?[f(p[0]),f(p[1])]:f(p),done:E}},[Symbol.iterator](){return this}}}}function ko(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function wI(n,t){const e={get(s){const i=this.__v_raw,o=Tt(i),l=Tt(s);n||(Un(s,l)&&he(o,"get",s),he(o,"get",l));const{has:c}=Oo(o),h=t?_c:n?ha:re;if(c.call(o,s))return h(i.get(s));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&he(Tt(s),"iterate",Cr),s.size},has(s){const i=this.__v_raw,o=Tt(i),l=Tt(s);return n||(Un(s,l)&&he(o,"has",s),he(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Tt(l),h=t?_c:n?ha:re;return!n&&he(c,"iterate",Cr),l.forEach((f,p)=>s.call(i,h(f),h(p),o))}};return ie(e,n?{add:ko("add"),set:ko("set"),delete:ko("delete"),clear:ko("clear")}:{add(s){!t&&!Ue(s)&&!Wn(s)&&(s=Tt(s));const i=Tt(this);return Oo(i).has.call(i,s)||(i.add(s),fn(i,"add",s,s)),this},set(s,i){!t&&!Ue(i)&&!Wn(i)&&(i=Tt(i));const o=Tt(this),{has:l,get:c}=Oo(o);let h=l.call(o,s);h||(s=Tt(s),h=l.call(o,s));const f=c.call(o,s);return o.set(s,i),h?Un(i,f)&&fn(o,"set",s,i):fn(o,"add",s,i),this},delete(s){const i=Tt(this),{has:o,get:l}=Oo(i);let c=o.call(i,s);c||(s=Tt(s),c=o.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&fn(i,"delete",s,void 0),h},clear(){const s=Tt(this),i=s.size!==0,o=s.clear();return i&&fn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=vI(s,n,t)}),e}function gu(n,t){const e=wI(n,t);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(vt(e,s)&&s in r?e:r,s,i)}const bI={get:gu(!1,!1)},SI={get:gu(!1,!0)},RI={get:gu(!0,!1)};const sm=new WeakMap,im=new WeakMap,om=new WeakMap,PI=new WeakMap;function CI(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VI(n){return n.__v_skip||!Object.isExtensible(n)?0:CI(eI(n))}function _u(n){return Wn(n)?n:yu(n,!1,EI,bI,sm)}function xI(n){return yu(n,!1,AI,SI,im)}function yc(n){return yu(n,!0,TI,RI,om)}function yu(n,t,e,r,s){if(!Nt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=VI(n);if(i===0)return n;const o=s.get(n);if(o)return o;const l=new Proxy(n,i===2?r:e);return s.set(n,l),l}function ms(n){return Wn(n)?ms(n.__v_raw):!!(n&&n.__v_isReactive)}function Wn(n){return!!(n&&n.__v_isReadonly)}function Ue(n){return!!(n&&n.__v_isShallow)}function Iu(n){return n?!!n.__v_raw:!1}function Tt(n){const t=n&&n.__v_raw;return t?Tt(t):n}function DI(n){return!vt(n,"__v_skip")&&Object.isExtensible(n)&&zp(n,"__v_skip",!0),n}const re=n=>Nt(n)?_u(n):n,ha=n=>Nt(n)?yc(n):n;function me(n){return n?n.__v_isRef===!0:!1}function Ut(n){return NI(n,!1)}function NI(n,t){return me(n)?n:new MI(n,t)}class MI{constructor(t,e){this.dep=new mu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Tt(t),this._value=e?t:re(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,r=this.__v_isShallow||Ue(t)||Wn(t);t=r?t:Tt(t),Un(t,e)&&(this._rawValue=t,this._value=r?t:re(t),this.dep.trigger())}}function _t(n){return me(n)?n.value:n}const OI={get:(n,t,e)=>t==="__v_raw"?n:_t(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const s=n[t];return me(s)&&!me(e)?(s.value=e,!0):Reflect.set(n,t,e,r)}};function am(n){return ms(n)?n:new Proxy(n,OI)}class kI{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new mu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ki-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return $p(this,!0),!0}get value(){const t=this.dep.track();return Jp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function FI(n,t,e=!1){let r,s;return ct(n)?r=n:(r=n.get,s=n.set),new kI(r,s,e)}const Fo={},fa=new WeakMap;let yr;function LI(n,t=!1,e=yr){if(e){let r=fa.get(e);r||fa.set(e,r=[]),r.push(n)}}function BI(n,t,e=Vt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=e,h=H=>s?H:Ue(H)||s===!1||s===0?dn(H,1):dn(H);let f,p,E,T,C=!1,D=!1;if(me(n)?(p=()=>n.value,C=Ue(n)):ms(n)?(p=()=>h(n),C=!0):at(n)?(D=!0,C=n.some(H=>ms(H)||Ue(H)),p=()=>n.map(H=>{if(me(H))return H.value;if(ms(H))return h(H);if(ct(H))return c?c(H,2):H()})):ct(n)?t?p=c?()=>c(n,2):n:p=()=>{if(E){gn();try{E()}finally{_n()}}const H=yr;yr=f;try{return c?c(n,3,[T]):n(T)}finally{yr=H}}:p=en,t&&s){const H=p,tt=s===!0?1/0:s;p=()=>dn(H(),tt)}const M=fI(),z=()=>{f.stop(),M&&M.active&&cu(M.effects,f)};if(i&&t){const H=t;t=(...tt)=>{H(...tt),z()}}let W=D?new Array(n.length).fill(Fo):Fo;const G=H=>{if(!(!(f.flags&1)||!f.dirty&&!H))if(t){const tt=f.run();if(s||C||(D?tt.some((nt,w)=>Un(nt,W[w])):Un(tt,W))){E&&E();const nt=yr;yr=f;try{const w=[tt,W===Fo?void 0:D&&W[0]===Fo?[]:W,T];W=tt,c?c(t,3,w):t(...w)}finally{yr=nt}}}else f.run()};return l&&l(G),f=new Qp(p),f.scheduler=o?()=>o(G,!1):G,T=H=>LI(H,!1,f),E=f.onStop=()=>{const H=fa.get(f);if(H){if(c)c(H,4);else for(const tt of H)tt();fa.delete(f)}},t?r?G(!0):W=f.run():o?o(G.bind(null,!0),!0):f.run(),z.pause=f.pause.bind(f),z.resume=f.resume.bind(f),z.stop=z,z}function dn(n,t=1/0,e){if(t<=0||!Nt(n)||n.__v_skip||(e=e||new Map,(e.get(n)||0)>=t))return n;if(e.set(n,t),t--,me(n))dn(n.value,t,e);else if(at(n))for(let r=0;r<n.length;r++)dn(n[r],t,e);else if(Lp(n)||ps(n))n.forEach(r=>{dn(r,t,e)});else if(jp(n)){for(const r in n)dn(n[r],t,e);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&dn(n[r],t,e)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mo(n,t,e,r){try{return r?n(...r):n()}catch(s){Qa(s,t,e)}}function qe(n,t,e,r){if(ct(n)){const s=mo(n,t,e,r);return s&&Bp(s)&&s.catch(i=>{Qa(i,t,e)}),s}if(at(n)){const s=[];for(let i=0;i<n.length;i++)s.push(qe(n[i],t,e,r));return s}}function Qa(n,t,e,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Vt;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](n,c,h)===!1)return}l=l.parent}if(i){gn(),mo(i,null,10,[n,c,h]),_n();return}}UI(n,e,s,r,o)}function UI(n,t,e,r=!0,s=!1){if(s)throw n;console.error(n)}const Ie=[];let $e=-1;const gs=[];let kn=null,is=0;const lm=Promise.resolve();let da=null;function jI(n){const t=da||lm;return n?t.then(this?n.bind(this):n):t}function KI(n){let t=$e+1,e=Ie.length;for(;t<e;){const r=t+e>>>1,s=Ie[r],i=qi(s);i<n||i===n&&s.flags&2?t=r+1:e=r}return t}function Eu(n){if(!(n.flags&1)){const t=qi(n),e=Ie[Ie.length-1];!e||!(n.flags&2)&&t>=qi(e)?Ie.push(n):Ie.splice(KI(t),0,n),n.flags|=1,cm()}}function cm(){da||(da=lm.then(hm))}function zI(n){at(n)?gs.push(...n):kn&&n.id===-1?kn.splice(is+1,0,n):n.flags&1||(gs.push(n),n.flags|=1),cm()}function Af(n,t,e=$e+1){for(;e<Ie.length;e++){const r=Ie[e];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Ie.splice(e,1),e--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function um(n){if(gs.length){const t=[...new Set(gs)].sort((e,r)=>qi(e)-qi(r));if(gs.length=0,kn){kn.push(...t);return}for(kn=t,is=0;is<kn.length;is++){const e=kn[is];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}kn=null,is=0}}const qi=n=>n.id==null?n.flags&2?-1:1/0:n.id;function hm(n){try{for($e=0;$e<Ie.length;$e++){const t=Ie[$e];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),mo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;$e<Ie.length;$e++){const t=Ie[$e];t&&(t.flags&=-2)}$e=-1,Ie.length=0,um(),da=null,(Ie.length||gs.length)&&hm()}}let pe=null,fm=null;function pa(n){const t=pe;return pe=n,fm=n&&n.type.__scopeId||null,t}function Tu(n,t=pe,e){if(!t||n._n)return n;const r=(...s)=>{r._d&&_a(-1);const i=pa(t);let o;try{o=n(...s)}finally{pa(i),r._d&&_a(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ar(n,t){if(pe===null)return n;const e=Za(pe),r=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,l,c=Vt]=t[s];i&&(ct(i)&&(i={mounted:i,updated:i}),i.deep&&dn(o),r.push({dir:i,instance:e,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function dr(n,t,e,r){const s=n.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(gn(),qe(c,e,8,[n.el,l,n,t]),_n())}}const qI=Symbol("_vte"),dm=n=>n.__isTeleport,hn=Symbol("_leaveCb"),Lo=Symbol("_enterCb");function GI(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return js(()=>{n.isMounted=!0}),Hi(()=>{n.isUnmounting=!0}),n}const Fe=[Function,Array],pm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fe,onEnter:Fe,onAfterEnter:Fe,onEnterCancelled:Fe,onBeforeLeave:Fe,onLeave:Fe,onAfterLeave:Fe,onLeaveCancelled:Fe,onBeforeAppear:Fe,onAppear:Fe,onAfterAppear:Fe,onAppearCancelled:Fe},mm=n=>{const t=n.subTree;return t.component?mm(t.component):t},HI={name:"BaseTransition",props:pm,setup(n,{slots:t}){const e=zm(),r=GI();return()=>{const s=t.default&&ym(t.default(),!0);if(!s||!s.length)return;const i=gm(s),o=Tt(n),{mode:l}=o;if(r.isLeaving)return Kl(i);const c=vf(i);if(!c)return Kl(i);let h=Ic(c,o,r,e,p=>h=p);c.type!==fe&&Gi(c,h);let f=e.subTree&&vf(e.subTree);if(f&&f.type!==fe&&!vr(f,c)&&mm(e).type!==fe){let p=Ic(f,o,r,e);if(Gi(f,p),l==="out-in"&&c.type!==fe)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,e.job.flags&8||e.update(),delete p.afterLeave,f=void 0},Kl(i);l==="in-out"&&c.type!==fe?p.delayLeave=(E,T,C)=>{const D=_m(r,f);D[String(f.key)]=f,E[hn]=()=>{T(),E[hn]=void 0,delete h.delayedLeave,f=void 0},h.delayedLeave=()=>{C(),delete h.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function gm(n){let t=n[0];if(n.length>1){for(const e of n)if(e.type!==fe){t=e;break}}return t}const QI=HI;function _m(n,t){const{leavingVNodes:e}=n;let r=e.get(t.type);return r||(r=Object.create(null),e.set(t.type,r)),r}function Ic(n,t,e,r,s){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:E,onLeave:T,onAfterLeave:C,onLeaveCancelled:D,onBeforeAppear:M,onAppear:z,onAfterAppear:W,onAppearCancelled:G}=t,H=String(n.key),tt=_m(e,n),nt=(y,b)=>{y&&qe(y,r,9,b)},w=(y,b)=>{const A=b[1];nt(y,b),at(y)?y.every(_=>_.length<=1)&&A():y.length<=1&&A()},I={mode:o,persisted:l,beforeEnter(y){let b=c;if(!e.isMounted)if(i)b=M||c;else return;y[hn]&&y[hn](!0);const A=tt[H];A&&vr(n,A)&&A.el[hn]&&A.el[hn](),nt(b,[y])},enter(y){let b=h,A=f,_=p;if(!e.isMounted)if(i)b=z||h,A=W||f,_=G||p;else return;let g=!1;const ft=y[Lo]=xt=>{g||(g=!0,xt?nt(_,[y]):nt(A,[y]),I.delayedLeave&&I.delayedLeave(),y[Lo]=void 0)};b?w(b,[y,ft]):ft()},leave(y,b){const A=String(n.key);if(y[Lo]&&y[Lo](!0),e.isUnmounting)return b();nt(E,[y]);let _=!1;const g=y[hn]=ft=>{_||(_=!0,b(),ft?nt(D,[y]):nt(C,[y]),y[hn]=void 0,tt[A]===n&&delete tt[A])};tt[A]=n,T?w(T,[y,g]):g()},clone(y){const b=Ic(y,t,e,r,s);return s&&s(b),b}};return I}function Kl(n){if(Wa(n))return n=$n(n),n.children=null,n}function vf(n){if(!Wa(n))return dm(n.type)&&n.children?gm(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:t,children:e}=n;if(e){if(t&16)return e[0];if(t&32&&ct(e.default))return e.default()}}function Gi(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Gi(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function ym(n,t=!1,e){let r=[],s=0;for(let i=0;i<n.length;i++){let o=n[i];const l=e==null?o.key:String(e)+String(o.key!=null?o.key:i);o.type===se?(o.patchFlag&128&&s++,r=r.concat(ym(o.children,t,l))):(t||o.type!==fe)&&r.push(l!=null?$n(o,{key:l}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Im(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const ma=new WeakMap;function Vi(n,t,e,r,s=!1){if(at(n)){n.forEach((C,D)=>Vi(C,t&&(at(t)?t[D]:t),e,r,s));return}if(_s(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Vi(n,t,e,r.component.subTree);return}const i=r.shapeFlag&4?Za(r.component):r.el,o=s?null:i,{i:l,r:c}=n,h=t&&t.r,f=l.refs===Vt?l.refs={}:l.refs,p=l.setupState,E=Tt(p),T=p===Vt?Fp:C=>vt(E,C);if(h!=null&&h!==c){if(wf(t),qt(h))f[h]=null,T(h)&&(p[h]=null);else if(me(h)){h.value=null;const C=t;C.k&&(f[C.k]=null)}}if(ct(c))mo(c,l,12,[o,f]);else{const C=qt(c),D=me(c);if(C||D){const M=()=>{if(n.f){const z=C?T(c)?p[c]:f[c]:c.value;if(s)at(z)&&cu(z,i);else if(at(z))z.includes(i)||z.push(i);else if(C)f[c]=[i],T(c)&&(p[c]=f[c]);else{const W=[i];c.value=W,n.k&&(f[n.k]=W)}}else C?(f[c]=o,T(c)&&(p[c]=o)):D&&(c.value=o,n.k&&(f[n.k]=o))};if(o){const z=()=>{M(),ma.delete(n)};z.id=-1,ma.set(n,z),Ve(z,e)}else wf(n),M()}}}function wf(n){const t=ma.get(n);t&&(t.flags|=8,ma.delete(n))}Ga().requestIdleCallback;Ga().cancelIdleCallback;const _s=n=>!!n.type.__asyncLoader,Wa=n=>n.type.__isKeepAlive;function WI(n,t){Em(n,"a",t)}function $I(n,t){Em(n,"da",t)}function Em(n,t,e=Ee){const r=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if($a(t,r,e),e){let s=e.parent;for(;s&&s.parent;)Wa(s.parent.vnode)&&XI(r,t,e,s),s=s.parent}}function XI(n,t,e,r){const s=$a(t,n,r,!0);Xa(()=>{cu(r[t],s)},e)}function $a(n,t,e=Ee,r=!1){if(e){const s=e[n]||(e[n]=[]),i=t.__weh||(t.__weh=(...o)=>{gn();const l=go(e),c=qe(t,e,n,o);return l(),_n(),c});return r?s.unshift(i):s.push(i),i}}const An=n=>(t,e=Ee)=>{(!$i||n==="sp")&&$a(n,(...r)=>t(...r),e)},YI=An("bm"),js=An("m"),JI=An("bu"),ZI=An("u"),Hi=An("bum"),Xa=An("um"),tE=An("sp"),eE=An("rtg"),nE=An("rtc");function rE(n,t=Ee){$a("ec",n,t)}const sE=Symbol.for("v-ndc");function Tm(n,t,e,r){let s;const i=e,o=at(n);if(o||qt(n)){const l=o&&ms(n);let c=!1,h=!1;l&&(c=!Ue(n),h=Wn(n),n=Ha(n)),s=new Array(n.length);for(let f=0,p=n.length;f<p;f++)s[f]=t(c?h?ha(re(n[f])):re(n[f]):n[f],f,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let l=0;l<n;l++)s[l]=t(l+1,l,void 0,i)}else if(Nt(n))if(n[Symbol.iterator])s=Array.from(n,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(n);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];s[c]=t(n[f],f,c,i)}}else s=[];return s}function bf(n,t,e={},r,s){if(pe.ce||pe.parent&&_s(pe.parent)&&pe.parent.ce){const h=Object.keys(e).length>0;return t!=="default"&&(e.name=t),pt(),mn(se,null,[zt("slot",e,r)],h?-2:64)}let i=n[t];i&&i._c&&(i._d=!1),pt();const o=i&&Am(i(e)),l=e.key||o&&o.key,c=mn(se,{key:(l&&!Tn(l)?l:`_${t}`)+(!o&&r?"_fb":"")},o||[],o&&n._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Am(n){return n.some(t=>Wi(t)?!(t.type===fe||t.type===se&&!Am(t.children)):!0)?n:null}const Ec=n=>n?qm(n)?Za(n):Ec(n.parent):null,xi=ie(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ec(n.parent),$root:n=>Ec(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>wm(n),$forceUpdate:n=>n.f||(n.f=()=>{Eu(n.update)}),$nextTick:n=>n.n||(n.n=jI.bind(n.proxy)),$watch:n=>SE.bind(n)}),zl=(n,t)=>n!==Vt&&!n.__isScriptSetup&&vt(n,t),iE={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=n;let h;if(t[0]!=="$"){const T=o[t];if(T!==void 0)switch(T){case 1:return r[t];case 2:return s[t];case 4:return e[t];case 3:return i[t]}else{if(zl(r,t))return o[t]=1,r[t];if(s!==Vt&&vt(s,t))return o[t]=2,s[t];if((h=n.propsOptions[0])&&vt(h,t))return o[t]=3,i[t];if(e!==Vt&&vt(e,t))return o[t]=4,e[t];Tc&&(o[t]=0)}}const f=xi[t];let p,E;if(f)return t==="$attrs"&&he(n.attrs,"get",""),f(n);if((p=l.__cssModules)&&(p=p[t]))return p;if(e!==Vt&&vt(e,t))return o[t]=4,e[t];if(E=c.config.globalProperties,vt(E,t))return E[t]},set({_:n},t,e){const{data:r,setupState:s,ctx:i}=n;return zl(s,t)?(s[t]=e,!0):r!==Vt&&vt(r,t)?(r[t]=e,!0):vt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(i[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:r,appContext:s,propsOptions:i,type:o}},l){let c,h;return!!(e[l]||n!==Vt&&l[0]!=="$"&&vt(n,l)||zl(t,l)||(c=i[0])&&vt(c,l)||vt(r,l)||vt(xi,l)||vt(s.config.globalProperties,l)||(h=o.__cssModules)&&h[l])},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:vt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Sf(n){return at(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Tc=!0;function oE(n){const t=wm(n),e=n.proxy,r=n.ctx;Tc=!1,t.beforeCreate&&Rf(t.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:E,beforeUpdate:T,updated:C,activated:D,deactivated:M,beforeDestroy:z,beforeUnmount:W,destroyed:G,unmounted:H,render:tt,renderTracked:nt,renderTriggered:w,errorCaptured:I,serverPrefetch:y,expose:b,inheritAttrs:A,components:_,directives:g,filters:ft}=t;if(h&&aE(h,r,null),o)for(const Ot in o){const Et=o[Ot];ct(Et)&&(r[Ot]=Et.bind(e))}if(s){const Ot=s.call(e,e);Nt(Ot)&&(n.data=_u(Ot))}if(Tc=!0,i)for(const Ot in i){const Et=i[Ot],ke=ct(Et)?Et.bind(e,e):ct(Et.get)?Et.get.bind(e,e):en,Gr=!ct(Et)&&ct(Et.set)?Et.set.bind(e):en,Ge=Xi({get:ke,set:Gr});Object.defineProperty(r,Ot,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Se=>Ge.value=Se})}if(l)for(const Ot in l)vm(l[Ot],r,e,Ot);if(c){const Ot=ct(c)?c.call(e):c;Reflect.ownKeys(Ot).forEach(Et=>{dE(Et,Ot[Et])})}f&&Rf(f,n,"c");function Ht(Ot,Et){at(Et)?Et.forEach(ke=>Ot(ke.bind(e))):Et&&Ot(Et.bind(e))}if(Ht(YI,p),Ht(js,E),Ht(JI,T),Ht(ZI,C),Ht(WI,D),Ht($I,M),Ht(rE,I),Ht(nE,nt),Ht(eE,w),Ht(Hi,W),Ht(Xa,H),Ht(tE,y),at(b))if(b.length){const Ot=n.exposed||(n.exposed={});b.forEach(Et=>{Object.defineProperty(Ot,Et,{get:()=>e[Et],set:ke=>e[Et]=ke,enumerable:!0})})}else n.exposed||(n.exposed={});tt&&n.render===en&&(n.render=tt),A!=null&&(n.inheritAttrs=A),_&&(n.components=_),g&&(n.directives=g),y&&Im(n)}function aE(n,t,e=en){at(n)&&(n=Ac(n));for(const r in n){const s=n[r];let i;Nt(s)?"default"in s?i=Wo(s.from||r,s.default,!0):i=Wo(s.from||r):i=Wo(s),me(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Rf(n,t,e){qe(at(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,e)}function vm(n,t,e,r){let s=r.includes(".")?Fm(e,r):()=>e[r];if(qt(n)){const i=t[n];ct(i)&&$o(s,i)}else if(ct(n))$o(s,n.bind(e));else if(Nt(n))if(at(n))n.forEach(i=>vm(i,t,e,r));else{const i=ct(n.handler)?n.handler.bind(e):t[n.handler];ct(i)&&$o(s,i,n)}}function wm(n){const t=n.type,{mixins:e,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!e&&!r?c=t:(c={},s.length&&s.forEach(h=>ga(c,h,o,!0)),ga(c,t,o)),Nt(t)&&i.set(t,c),c}function ga(n,t,e,r=!1){const{mixins:s,extends:i}=t;i&&ga(n,i,e,!0),s&&s.forEach(o=>ga(n,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const l=lE[o]||e&&e[o];n[o]=l?l(n[o],t[o]):t[o]}return n}const lE={data:Pf,props:Cf,emits:Cf,methods:Ti,computed:Ti,beforeCreate:ye,created:ye,beforeMount:ye,mounted:ye,beforeUpdate:ye,updated:ye,beforeDestroy:ye,beforeUnmount:ye,destroyed:ye,unmounted:ye,activated:ye,deactivated:ye,errorCaptured:ye,serverPrefetch:ye,components:Ti,directives:Ti,watch:uE,provide:Pf,inject:cE};function Pf(n,t){return t?n?function(){return ie(ct(n)?n.call(this,this):n,ct(t)?t.call(this,this):t)}:t:n}function cE(n,t){return Ti(Ac(n),Ac(t))}function Ac(n){if(at(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function ye(n,t){return n?[...new Set([].concat(n,t))]:t}function Ti(n,t){return n?ie(Object.create(null),n,t):t}function Cf(n,t){return n?at(n)&&at(t)?[...new Set([...n,...t])]:ie(Object.create(null),Sf(n),Sf(t??{})):t}function uE(n,t){if(!n)return t;if(!t)return n;const e=ie(Object.create(null),n);for(const r in t)e[r]=ye(n[r],t[r]);return e}function bm(){return{app:null,config:{isNativeTag:Fp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hE=0;function fE(n,t){return function(r,s=null){ct(r)||(r=ie({},r)),s!=null&&!Nt(s)&&(s=null);const i=bm(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:hE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:$E,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&ct(f.install)?(o.add(f),f.install(h,...p)):ct(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,E){if(!c){const T=h._ceVNode||zt(r,s);return T.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),n(T,f,E),c=!0,h._container=f,f.__vue_app__=h,Za(T.component)}},onUnmount(f){l.push(f)},unmount(){c&&(qe(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=ys;ys=h;try{return f()}finally{ys=p}}};return h}}let ys=null;function dE(n,t){if(Ee){let e=Ee.provides;const r=Ee.parent&&Ee.parent.provides;r===e&&(e=Ee.provides=Object.create(r)),e[n]=t}}function Wo(n,t,e=!1){const r=zm();if(r||ys){let s=ys?ys._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&ct(t)?t.call(r&&r.proxy):t}}const Sm={},Rm=()=>Object.create(Sm),Pm=n=>Object.getPrototypeOf(n)===Sm;function pE(n,t,e,r=!1){const s={},i=Rm();n.propsDefaults=Object.create(null),Cm(n,t,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=r?s:xI(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function mE(n,t,e,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,l=Tt(s),[c]=n.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=n.vnode.dynamicProps;for(let p=0;p<f.length;p++){let E=f[p];if(Ya(n.emitsOptions,E))continue;const T=t[E];if(c)if(vt(i,E))T!==i[E]&&(i[E]=T,h=!0);else{const C=Hn(E);s[C]=vc(c,l,C,T,n,!1)}else T!==i[E]&&(i[E]=T,h=!0)}}}else{Cm(n,t,s,i)&&(h=!0);let f;for(const p in l)(!t||!vt(t,p)&&((f=zr(p))===p||!vt(t,f)))&&(c?e&&(e[p]!==void 0||e[f]!==void 0)&&(s[p]=vc(c,l,p,void 0,n,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!vt(t,p))&&(delete i[p],h=!0)}h&&fn(n.attrs,"set","")}function Cm(n,t,e,r){const[s,i]=n.propsOptions;let o=!1,l;if(t)for(let c in t){if(Ri(c))continue;const h=t[c];let f;s&&vt(s,f=Hn(c))?!i||!i.includes(f)?e[f]=h:(l||(l={}))[f]=h:Ya(n.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,o=!0)}if(i){const c=Tt(e),h=l||Vt;for(let f=0;f<i.length;f++){const p=i[f];e[p]=vc(s,c,p,h[p],n,!vt(h,p))}}return o}function vc(n,t,e,r,s,i){const o=n[e];if(o!=null){const l=vt(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ct(c)){const{propsDefaults:h}=s;if(e in h)r=h[e];else{const f=go(s);r=h[e]=c.call(null,t),f()}}else r=c;s.ce&&s.ce._setProp(e,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===zr(e))&&(r=!0))}return r}const gE=new WeakMap;function Vm(n,t,e=!1){const r=e?gE:t.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},l=[];let c=!1;if(!ct(n)){const f=p=>{c=!0;const[E,T]=Vm(p,t,!0);ie(o,E),T&&l.push(...T)};!e&&t.mixins.length&&t.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!i&&!c)return Nt(n)&&r.set(n,ds),ds;if(at(i))for(let f=0;f<i.length;f++){const p=Hn(i[f]);Vf(p)&&(o[p]=Vt)}else if(i)for(const f in i){const p=Hn(f);if(Vf(p)){const E=i[f],T=o[p]=at(E)||ct(E)?{type:E}:ie({},E),C=T.type;let D=!1,M=!0;if(at(C))for(let z=0;z<C.length;++z){const W=C[z],G=ct(W)&&W.name;if(G==="Boolean"){D=!0;break}else G==="String"&&(M=!1)}else D=ct(C)&&C.name==="Boolean";T[0]=D,T[1]=M,(D||vt(T,"default"))&&l.push(p)}}const h=[o,l];return Nt(n)&&r.set(n,h),h}function Vf(n){return n[0]!=="$"&&!Ri(n)}const Au=n=>n==="_"||n==="_ctx"||n==="$stable",vu=n=>at(n)?n.map(Ye):[Ye(n)],_E=(n,t,e)=>{if(t._n)return t;const r=Tu((...s)=>vu(t(...s)),e);return r._c=!1,r},xm=(n,t,e)=>{const r=n._ctx;for(const s in n){if(Au(s))continue;const i=n[s];if(ct(i))t[s]=_E(s,i,r);else if(i!=null){const o=vu(i);t[s]=()=>o}}},Dm=(n,t)=>{const e=vu(t);n.slots.default=()=>e},Nm=(n,t,e)=>{for(const r in t)(e||!Au(r))&&(n[r]=t[r])},yE=(n,t,e)=>{const r=n.slots=Rm();if(n.vnode.shapeFlag&32){const s=t._;s?(Nm(r,t,e),e&&zp(r,"_",s,!0)):xm(t,r)}else t&&Dm(n,t)},IE=(n,t,e)=>{const{vnode:r,slots:s}=n;let i=!0,o=Vt;if(r.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:Nm(s,t,e):(i=!t.$stable,xm(t,s)),o=t}else t&&(Dm(n,t),o={default:1});if(i)for(const l in s)!Au(l)&&o[l]==null&&delete s[l]},Ve=ME;function EE(n){return TE(n)}function TE(n,t){const e=Ga();e.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:E,setScopeId:T=en,insertStaticContent:C}=n,D=(v,S,x,j=null,O=null,k=null,$=void 0,U=null,L=!!S.dynamicChildren)=>{if(v===S)return;v&&!vr(v,S)&&(j=bn(v),Se(v,O,k,!0),v=null),S.patchFlag===-2&&(L=!1,S.dynamicChildren=null);const{type:B,ref:it,shapeFlag:Y}=S;switch(B){case Ja:M(v,S,x,j);break;case fe:z(v,S,x,j);break;case Xo:v==null&&W(S,x,j,$);break;case se:_(v,S,x,j,O,k,$,U,L);break;default:Y&1?tt(v,S,x,j,O,k,$,U,L):Y&6?g(v,S,x,j,O,k,$,U,L):(Y&64||Y&128)&&B.process(v,S,x,j,O,k,$,U,L,ar)}it!=null&&O?Vi(it,v&&v.ref,k,S||v,!S):it==null&&v&&v.ref!=null&&Vi(v.ref,null,k,v,!0)},M=(v,S,x,j)=>{if(v==null)r(S.el=l(S.children),x,j);else{const O=S.el=v.el;S.children!==v.children&&h(O,S.children)}},z=(v,S,x,j)=>{v==null?r(S.el=c(S.children||""),x,j):S.el=v.el},W=(v,S,x,j)=>{[v.el,v.anchor]=C(v.children,S,x,j,v.el,v.anchor)},G=({el:v,anchor:S},x,j)=>{let O;for(;v&&v!==S;)O=E(v),r(v,x,j),v=O;r(S,x,j)},H=({el:v,anchor:S})=>{let x;for(;v&&v!==S;)x=E(v),s(v),v=x;s(S)},tt=(v,S,x,j,O,k,$,U,L)=>{S.type==="svg"?$="svg":S.type==="math"&&($="mathml"),v==null?nt(S,x,j,O,k,$,U,L):y(v,S,O,k,$,U,L)},nt=(v,S,x,j,O,k,$,U)=>{let L,B;const{props:it,shapeFlag:Y,transition:st,dirs:ot}=v;if(L=v.el=o(v.type,k,it&&it.is,it),Y&8?f(L,v.children):Y&16&&I(v.children,L,null,j,O,ql(v,k),$,U),ot&&dr(v,null,j,"created"),w(L,v,v.scopeId,$,j),it){for(const wt in it)wt!=="value"&&!Ri(wt)&&i(L,wt,null,it[wt],k,j);"value"in it&&i(L,"value",null,it.value,k),(B=it.onVnodeBeforeMount)&&We(B,j,v)}ot&&dr(v,null,j,"beforeMount");const dt=AE(O,st);dt&&st.beforeEnter(L),r(L,S,x),((B=it&&it.onVnodeMounted)||dt||ot)&&Ve(()=>{B&&We(B,j,v),dt&&st.enter(L),ot&&dr(v,null,j,"mounted")},O)},w=(v,S,x,j,O)=>{if(x&&T(v,x),j)for(let k=0;k<j.length;k++)T(v,j[k]);if(O){let k=O.subTree;if(S===k||Bm(k.type)&&(k.ssContent===S||k.ssFallback===S)){const $=O.vnode;w(v,$,$.scopeId,$.slotScopeIds,O.parent)}}},I=(v,S,x,j,O,k,$,U,L=0)=>{for(let B=L;B<v.length;B++){const it=v[B]=U?Fn(v[B]):Ye(v[B]);D(null,it,S,x,j,O,k,$,U)}},y=(v,S,x,j,O,k,$)=>{const U=S.el=v.el;let{patchFlag:L,dynamicChildren:B,dirs:it}=S;L|=v.patchFlag&16;const Y=v.props||Vt,st=S.props||Vt;let ot;if(x&&pr(x,!1),(ot=st.onVnodeBeforeUpdate)&&We(ot,x,S,v),it&&dr(S,v,x,"beforeUpdate"),x&&pr(x,!0),(Y.innerHTML&&st.innerHTML==null||Y.textContent&&st.textContent==null)&&f(U,""),B?b(v.dynamicChildren,B,U,x,j,ql(S,O),k):$||Et(v,S,U,null,x,j,ql(S,O),k,!1),L>0){if(L&16)A(U,Y,st,x,O);else if(L&2&&Y.class!==st.class&&i(U,"class",null,st.class,O),L&4&&i(U,"style",Y.style,st.style,O),L&8){const dt=S.dynamicProps;for(let wt=0;wt<dt.length;wt++){const It=dt[wt],oe=Y[It],ae=st[It];(ae!==oe||It==="value")&&i(U,It,oe,ae,O,x)}}L&1&&v.children!==S.children&&f(U,S.children)}else!$&&B==null&&A(U,Y,st,x,O);((ot=st.onVnodeUpdated)||it)&&Ve(()=>{ot&&We(ot,x,S,v),it&&dr(S,v,x,"updated")},j)},b=(v,S,x,j,O,k,$)=>{for(let U=0;U<S.length;U++){const L=v[U],B=S[U],it=L.el&&(L.type===se||!vr(L,B)||L.shapeFlag&198)?p(L.el):x;D(L,B,it,null,j,O,k,$,!0)}},A=(v,S,x,j,O)=>{if(S!==x){if(S!==Vt)for(const k in S)!Ri(k)&&!(k in x)&&i(v,k,S[k],null,O,j);for(const k in x){if(Ri(k))continue;const $=x[k],U=S[k];$!==U&&k!=="value"&&i(v,k,U,$,O,j)}"value"in x&&i(v,"value",S.value,x.value,O)}},_=(v,S,x,j,O,k,$,U,L)=>{const B=S.el=v?v.el:l(""),it=S.anchor=v?v.anchor:l("");let{patchFlag:Y,dynamicChildren:st,slotScopeIds:ot}=S;ot&&(U=U?U.concat(ot):ot),v==null?(r(B,x,j),r(it,x,j),I(S.children||[],x,it,O,k,$,U,L)):Y>0&&Y&64&&st&&v.dynamicChildren?(b(v.dynamicChildren,st,x,O,k,$,U),(S.key!=null||O&&S===O.subTree)&&Mm(v,S,!0)):Et(v,S,x,it,O,k,$,U,L)},g=(v,S,x,j,O,k,$,U,L)=>{S.slotScopeIds=U,v==null?S.shapeFlag&512?O.ctx.activate(S,x,j,$,L):ft(S,x,j,O,k,$,L):xt(v,S,L)},ft=(v,S,x,j,O,k,$)=>{const U=v.component=KE(v,j,O);if(Wa(v)&&(U.ctx.renderer=ar),zE(U,!1,$),U.asyncDep){if(O&&O.registerDep(U,Ht,$),!v.el){const L=U.subTree=zt(fe);z(null,L,S,x),v.placeholder=L.el}}else Ht(U,v,S,x,O,k,$)},xt=(v,S,x)=>{const j=S.component=v.component;if(DE(v,S,x))if(j.asyncDep&&!j.asyncResolved){Ot(j,S,x);return}else j.next=S,j.update();else S.el=v.el,j.vnode=S},Ht=(v,S,x,j,O,k,$)=>{const U=()=>{if(v.isMounted){let{next:Y,bu:st,u:ot,parent:dt,vnode:wt}=v;{const Pe=Om(v);if(Pe){Y&&(Y.el=wt.el,Ot(v,Y,$)),Pe.asyncDep.then(()=>{v.isUnmounted||U()});return}}let It=Y,oe;pr(v,!1),Y?(Y.el=wt.el,Ot(v,Y,$)):Y=wt,st&&Qo(st),(oe=Y.props&&Y.props.onVnodeBeforeUpdate)&&We(oe,dt,Y,wt),pr(v,!0);const ae=Df(v),Re=v.subTree;v.subTree=ae,D(Re,ae,p(Re.el),bn(Re),v,O,k),Y.el=ae.el,It===null&&NE(v,ae.el),ot&&Ve(ot,O),(oe=Y.props&&Y.props.onVnodeUpdated)&&Ve(()=>We(oe,dt,Y,wt),O)}else{let Y;const{el:st,props:ot}=S,{bm:dt,m:wt,parent:It,root:oe,type:ae}=v,Re=_s(S);pr(v,!1),dt&&Qo(dt),!Re&&(Y=ot&&ot.onVnodeBeforeMount)&&We(Y,It,S),pr(v,!0);{oe.ce&&oe.ce._def.shadowRoot!==!1&&oe.ce._injectChildStyle(ae);const Pe=v.subTree=Df(v);D(null,Pe,x,j,v,O,k),S.el=Pe.el}if(wt&&Ve(wt,O),!Re&&(Y=ot&&ot.onVnodeMounted)){const Pe=S;Ve(()=>We(Y,It,Pe),O)}(S.shapeFlag&256||It&&_s(It.vnode)&&It.vnode.shapeFlag&256)&&v.a&&Ve(v.a,O),v.isMounted=!0,S=x=j=null}};v.scope.on();const L=v.effect=new Qp(U);v.scope.off();const B=v.update=L.run.bind(L),it=v.job=L.runIfDirty.bind(L);it.i=v,it.id=v.uid,L.scheduler=()=>Eu(it),pr(v,!0),B()},Ot=(v,S,x)=>{S.component=v;const j=v.vnode.props;v.vnode=S,v.next=null,mE(v,S.props,j,x),IE(v,S.children,x),gn(),Af(v),_n()},Et=(v,S,x,j,O,k,$,U,L=!1)=>{const B=v&&v.children,it=v?v.shapeFlag:0,Y=S.children,{patchFlag:st,shapeFlag:ot}=S;if(st>0){if(st&128){Gr(B,Y,x,j,O,k,$,U,L);return}else if(st&256){ke(B,Y,x,j,O,k,$,U,L);return}}ot&8?(it&16&&an(B,O,k),Y!==B&&f(x,Y)):it&16?ot&16?Gr(B,Y,x,j,O,k,$,U,L):an(B,O,k,!0):(it&8&&f(x,""),ot&16&&I(Y,x,j,O,k,$,U,L))},ke=(v,S,x,j,O,k,$,U,L)=>{v=v||ds,S=S||ds;const B=v.length,it=S.length,Y=Math.min(B,it);let st;for(st=0;st<Y;st++){const ot=S[st]=L?Fn(S[st]):Ye(S[st]);D(v[st],ot,x,null,O,k,$,U,L)}B>it?an(v,O,k,!0,!1,Y):I(S,x,j,O,k,$,U,L,Y)},Gr=(v,S,x,j,O,k,$,U,L)=>{let B=0;const it=S.length;let Y=v.length-1,st=it-1;for(;B<=Y&&B<=st;){const ot=v[B],dt=S[B]=L?Fn(S[B]):Ye(S[B]);if(vr(ot,dt))D(ot,dt,x,null,O,k,$,U,L);else break;B++}for(;B<=Y&&B<=st;){const ot=v[Y],dt=S[st]=L?Fn(S[st]):Ye(S[st]);if(vr(ot,dt))D(ot,dt,x,null,O,k,$,U,L);else break;Y--,st--}if(B>Y){if(B<=st){const ot=st+1,dt=ot<it?S[ot].el:j;for(;B<=st;)D(null,S[B]=L?Fn(S[B]):Ye(S[B]),x,dt,O,k,$,U,L),B++}}else if(B>st)for(;B<=Y;)Se(v[B],O,k,!0),B++;else{const ot=B,dt=B,wt=new Map;for(B=dt;B<=st;B++){const ee=S[B]=L?Fn(S[B]):Ye(S[B]);ee.key!=null&&wt.set(ee.key,B)}let It,oe=0;const ae=st-dt+1;let Re=!1,Pe=0;const je=new Array(ae);for(B=0;B<ae;B++)je[B]=0;for(B=ot;B<=Y;B++){const ee=v[B];if(oe>=ae){Se(ee,O,k,!0);continue}let Jt;if(ee.key!=null)Jt=wt.get(ee.key);else for(It=dt;It<=st;It++)if(je[It-dt]===0&&vr(ee,S[It])){Jt=It;break}Jt===void 0?Se(ee,O,k,!0):(je[Jt-dt]=B+1,Jt>=Pe?Pe=Jt:Re=!0,D(ee,S[Jt],x,null,O,k,$,U,L),oe++)}const Qr=Re?vE(je):ds;for(It=Qr.length-1,B=ae-1;B>=0;B--){const ee=dt+B,Jt=S[ee],Js=S[ee+1],lr=ee+1<it?Js.el||Js.placeholder:j;je[B]===0?D(null,Jt,x,lr,O,k,$,U,L):Re&&(It<0||B!==Qr[It]?Ge(Jt,x,lr,2):It--)}}},Ge=(v,S,x,j,O=null)=>{const{el:k,type:$,transition:U,children:L,shapeFlag:B}=v;if(B&6){Ge(v.component.subTree,S,x,j);return}if(B&128){v.suspense.move(S,x,j);return}if(B&64){$.move(v,S,x,ar);return}if($===se){r(k,S,x);for(let Y=0;Y<L.length;Y++)Ge(L[Y],S,x,j);r(v.anchor,S,x);return}if($===Xo){G(v,S,x);return}if(j!==2&&B&1&&U)if(j===0)U.beforeEnter(k),r(k,S,x),Ve(()=>U.enter(k),O);else{const{leave:Y,delayLeave:st,afterLeave:ot}=U,dt=()=>{v.ctx.isUnmounted?s(k):r(k,S,x)},wt=()=>{k._isLeaving&&k[hn](!0),Y(k,()=>{dt(),ot&&ot()})};st?st(k,dt,wt):wt()}else r(k,S,x)},Se=(v,S,x,j=!1,O=!1)=>{const{type:k,props:$,ref:U,children:L,dynamicChildren:B,shapeFlag:it,patchFlag:Y,dirs:st,cacheIndex:ot}=v;if(Y===-2&&(O=!1),U!=null&&(gn(),Vi(U,null,x,v,!0),_n()),ot!=null&&(S.renderCache[ot]=void 0),it&256){S.ctx.deactivate(v);return}const dt=it&1&&st,wt=!_s(v);let It;if(wt&&(It=$&&$.onVnodeBeforeUnmount)&&We(It,S,v),it&6)Xs(v.component,x,j);else{if(it&128){v.suspense.unmount(x,j);return}dt&&dr(v,null,S,"beforeUnmount"),it&64?v.type.remove(v,S,x,ar,j):B&&!B.hasOnce&&(k!==se||Y>0&&Y&64)?an(B,S,x,!1,!0):(k===se&&Y&384||!O&&it&16)&&an(L,S,x),j&&$s(v)}(wt&&(It=$&&$.onVnodeUnmounted)||dt)&&Ve(()=>{It&&We(It,S,v),dt&&dr(v,null,S,"unmounted")},x)},$s=v=>{const{type:S,el:x,anchor:j,transition:O}=v;if(S===se){Hr(x,j);return}if(S===Xo){H(v);return}const k=()=>{s(x),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(v.shapeFlag&1&&O&&!O.persisted){const{leave:$,delayLeave:U}=O,L=()=>$(x,k);U?U(v.el,k,L):L()}else k()},Hr=(v,S)=>{let x;for(;v!==S;)x=E(v),s(v),v=x;s(S)},Xs=(v,S,x)=>{const{bum:j,scope:O,job:k,subTree:$,um:U,m:L,a:B}=v;xf(L),xf(B),j&&Qo(j),O.stop(),k&&(k.flags|=8,Se($,v,S,x)),U&&Ve(U,S),Ve(()=>{v.isUnmounted=!0},S)},an=(v,S,x,j=!1,O=!1,k=0)=>{for(let $=k;$<v.length;$++)Se(v[$],S,x,j,O)},bn=v=>{if(v.shapeFlag&6)return bn(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const S=E(v.anchor||v.el),x=S&&S[qI];return x?E(x):S};let or=!1;const Ys=(v,S,x)=>{v==null?S._vnode&&Se(S._vnode,null,null,!0):D(S._vnode||null,v,S,null,null,null,x),S._vnode=v,or||(or=!0,Af(),um(),or=!1)},ar={p:D,um:Se,m:Ge,r:$s,mt:ft,mc:I,pc:Et,pbc:b,n:bn,o:n};return{render:Ys,hydrate:void 0,createApp:fE(Ys)}}function ql({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function pr({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function AE(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Mm(n,t,e=!1){const r=n.children,s=t.children;if(at(r)&&at(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Fn(s[i]),l.el=o.el),!e&&l.patchFlag!==-2&&Mm(o,l)),l.type===Ja&&l.patchFlag!==-1&&(l.el=o.el),l.type===fe&&!l.el&&(l.el=o.el)}}function vE(n){const t=n.slice(),e=[0];let r,s,i,o,l;const c=n.length;for(r=0;r<c;r++){const h=n[r];if(h!==0){if(s=e[e.length-1],n[s]<h){t[r]=s,e.push(r);continue}for(i=0,o=e.length-1;i<o;)l=i+o>>1,n[e[l]]<h?i=l+1:o=l;h<n[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function Om(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Om(t)}function xf(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const wE=Symbol.for("v-scx"),bE=()=>Wo(wE);function $o(n,t,e){return km(n,t,e)}function km(n,t,e=Vt){const{immediate:r,deep:s,flush:i,once:o}=e,l=ie({},e),c=t&&r||!t&&i!=="post";let h;if($i){if(i==="sync"){const T=bE();h=T.__watcherHandles||(T.__watcherHandles=[])}else if(!c){const T=()=>{};return T.stop=en,T.resume=en,T.pause=en,T}}const f=Ee;l.call=(T,C,D)=>qe(T,f,C,D);let p=!1;i==="post"?l.scheduler=T=>{Ve(T,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(T,C)=>{C?T():Eu(T)}),l.augmentJob=T=>{t&&(T.flags|=4),p&&(T.flags|=2,f&&(T.id=f.uid,T.i=f))};const E=BI(n,t,l);return $i&&(h?h.push(E):c&&E()),E}function SE(n,t,e){const r=this.proxy,s=qt(n)?n.includes(".")?Fm(r,n):()=>r[n]:n.bind(r,r);let i;ct(t)?i=t:(i=t.handler,e=t);const o=go(this),l=km(s,i.bind(r),e);return o(),l}function Fm(n,t){const e=t.split(".");return()=>{let r=n;for(let s=0;s<e.length&&r;s++)r=r[e[s]];return r}}const RE=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Hn(t)}Modifiers`]||n[`${zr(t)}Modifiers`];function PE(n,t,...e){if(n.isUnmounted)return;const r=n.vnode.props||Vt;let s=e;const i=t.startsWith("update:"),o=i&&RE(r,t.slice(7));o&&(o.trim&&(s=e.map(f=>qt(f)?f.trim():f)),o.number&&(s=e.map(dc)));let l,c=r[l=Fl(t)]||r[l=Fl(Hn(t))];!c&&i&&(c=r[l=Fl(zr(t))]),c&&qe(c,n,6,s);const h=r[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,qe(h,n,6,s)}}const CE=new WeakMap;function Lm(n,t,e=!1){const r=e?CE:t.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},l=!1;if(!ct(n)){const c=h=>{const f=Lm(h,t,!0);f&&(l=!0,ie(o,f))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!l?(Nt(n)&&r.set(n,null),null):(at(i)?i.forEach(c=>o[c]=null):ie(o,i),Nt(n)&&r.set(n,o),o)}function Ya(n,t){return!n||!Ka(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(n,t[0].toLowerCase()+t.slice(1))||vt(n,zr(t))||vt(n,t))}function Df(n){const{type:t,vnode:e,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:E,setupState:T,ctx:C,inheritAttrs:D}=n,M=pa(n);let z,W;try{if(e.shapeFlag&4){const H=s||r,tt=H;z=Ye(h.call(tt,H,f,p,T,E,C)),W=l}else{const H=t;z=Ye(H.length>1?H(p,{attrs:l,slots:o,emit:c}):H(p,null)),W=t.props?l:VE(l)}}catch(H){Di.length=0,Qa(H,n,1),z=zt(fe)}let G=z;if(W&&D!==!1){const H=Object.keys(W),{shapeFlag:tt}=G;H.length&&tt&7&&(i&&H.some(lu)&&(W=xE(W,i)),G=$n(G,W,!1,!0))}return e.dirs&&(G=$n(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(e.dirs):e.dirs),e.transition&&Gi(G,e.transition),z=G,pa(M),z}const VE=n=>{let t;for(const e in n)(e==="class"||e==="style"||Ka(e))&&((t||(t={}))[e]=n[e]);return t},xE=(n,t)=>{const e={};for(const r in n)(!lu(r)||!(r.slice(9)in t))&&(e[r]=n[r]);return e};function DE(n,t,e){const{props:r,children:s,component:i}=n,{props:o,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return r?Nf(r,o,h):!!o;if(c&8){const f=t.dynamicProps;for(let p=0;p<f.length;p++){const E=f[p];if(o[E]!==r[E]&&!Ya(h,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?Nf(r,o,h):!0:!!o;return!1}function Nf(n,t,e){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==n[i]&&!Ya(e,i))return!0}return!1}function NE({vnode:n,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=t.vnode).el=e,t=t.parent;else break}}const Bm=n=>n.__isSuspense;function ME(n,t){t&&t.pendingBranch?at(n)?t.effects.push(...n):t.effects.push(n):zI(n)}const se=Symbol.for("v-fgt"),Ja=Symbol.for("v-txt"),fe=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),Di=[];let De=null;function pt(n=!1){Di.push(De=n?null:[])}function OE(){Di.pop(),De=Di[Di.length-1]||null}let Qi=1;function _a(n,t=!1){Qi+=n,n<0&&De&&t&&(De.hasOnce=!0)}function Um(n){return n.dynamicChildren=Qi>0?De||ds:null,OE(),Qi>0&&De&&De.push(n),n}function Ct(n,t,e,r,s,i){return Um(X(n,t,e,r,s,i,!0))}function mn(n,t,e,r,s){return Um(zt(n,t,e,r,s,!0))}function Wi(n){return n?n.__v_isVNode===!0:!1}function vr(n,t){return n.type===t.type&&n.key===t.key}const jm=({key:n})=>n??null,Yo=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?qt(n)||me(n)||ct(n)?{i:pe,r:n,k:t,f:!!e}:n:null);function X(n,t=null,e=null,r=0,s=null,i=n===se?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&jm(t),ref:t&&Yo(t),scopeId:fm,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:pe};return l?(wu(c,e),i&128&&n.normalize(c)):e&&(c.shapeFlag|=qt(e)?8:16),Qi>0&&!o&&De&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&De.push(c),c}const zt=kE;function kE(n,t=null,e=null,r=0,s=null,i=!1){if((!n||n===sE)&&(n=fe),Wi(n)){const l=$n(n,t,!0);return e&&wu(l,e),Qi>0&&!i&&De&&(l.shapeFlag&6?De[De.indexOf(n)]=l:De.push(l)),l.patchFlag=-2,l}if(QE(n)&&(n=n.__vccOpts),t){t=FE(t);let{class:l,style:c}=t;l&&!qt(l)&&(t.class=Qn(l)),Nt(c)&&(Iu(c)&&!at(c)&&(c=ie({},c)),t.style=hu(c))}const o=qt(n)?1:Bm(n)?128:dm(n)?64:Nt(n)?4:ct(n)?2:0;return X(n,t,e,r,s,o,i,!0)}function FE(n){return n?Iu(n)||Pm(n)?ie({},n):n:null}function $n(n,t,e=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=n,h=t?BE(s||{},t):s,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&jm(h),ref:t&&t.ref?e&&i?at(i)?i.concat(Yo(t)):[i,Yo(t)]:Yo(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==se?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&$n(n.ssContent),ssFallback:n.ssFallback&&$n(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&Gi(f,c.clone(f)),f}function LE(n=" ",t=0){return zt(Ja,null,n,t)}function Km(n,t){const e=zt(Xo,null,n);return e.staticCount=t,e}function Xn(n="",t=!1){return t?(pt(),mn(fe,null,n)):zt(fe,null,n)}function Ye(n){return n==null||typeof n=="boolean"?zt(fe):at(n)?zt(se,null,n.slice()):Wi(n)?Fn(n):zt(Ja,null,String(n))}function Fn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:$n(n)}function wu(n,t){let e=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(at(t))e=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),wu(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!Pm(t)?t._ctx=pe:s===3&&pe&&(pe.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:pe},e=32):(t=String(t),r&64?(e=16,t=[LE(t)]):e=8);n.children=t,n.shapeFlag|=e}function BE(...n){const t={};for(let e=0;e<n.length;e++){const r=n[e];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Qn([t.class,r.class]));else if(s==="style")t.style=hu([t.style,r.style]);else if(Ka(s)){const i=t[s],o=r[s];o&&i!==o&&!(at(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function We(n,t,e,r=null){qe(n,t,7,[e,r])}const UE=bm();let jE=0;function KE(n,t,e){const r=n.type,s=(t?t.appContext:n.appContext)||UE,i={uid:jE++,vnode:n,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vm(r,s),emitsOptions:Lm(r,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:r.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=PE.bind(null,i),n.ce&&n.ce(i),i}let Ee=null;const zm=()=>Ee||pe;let ya,wc;{const n=Ga(),t=(e,r)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ya=t("__VUE_INSTANCE_SETTERS__",e=>Ee=e),wc=t("__VUE_SSR_SETTERS__",e=>$i=e)}const go=n=>{const t=Ee;return ya(n),n.scope.on(),()=>{n.scope.off(),ya(t)}},Mf=()=>{Ee&&Ee.scope.off(),ya(null)};function qm(n){return n.vnode.shapeFlag&4}let $i=!1;function zE(n,t=!1,e=!1){t&&wc(t);const{props:r,children:s}=n.vnode,i=qm(n);pE(n,r,i,t),yE(n,s,e||t);const o=i?qE(n,t):void 0;return t&&wc(!1),o}function qE(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,iE);const{setup:r}=e;if(r){gn();const s=n.setupContext=r.length>1?HE(n):null,i=go(n),o=mo(r,n,0,[n.props,s]),l=Bp(o);if(_n(),i(),(l||n.sp)&&!_s(n)&&Im(n),l){if(o.then(Mf,Mf),t)return o.then(c=>{Of(n,c)}).catch(c=>{Qa(c,n,0)});n.asyncDep=o}else Of(n,o)}else Gm(n)}function Of(n,t,e){ct(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Nt(t)&&(n.setupState=am(t)),Gm(n)}function Gm(n,t,e){const r=n.type;n.render||(n.render=r.render||en);{const s=go(n);gn();try{oE(n)}finally{_n(),s()}}}const GE={get(n,t){return he(n,"get",""),n[t]}};function HE(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,GE),slots:n.slots,emit:n.emit,expose:t}}function Za(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(am(DI(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in xi)return xi[e](n)},has(t,e){return e in t||e in xi}})):n.proxy}function QE(n){return ct(n)&&"__vccOpts"in n}const Xi=(n,t)=>FI(n,t,$i);function WE(n,t,e){try{_a(-1);const r=arguments.length;return r===2?Nt(t)&&!at(t)?Wi(t)?zt(n,null,[t]):zt(n,t):zt(n,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&Wi(e)&&(e=[e]),zt(n,t,e))}finally{_a(1)}}const $E="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bc;const kf=typeof window<"u"&&window.trustedTypes;if(kf)try{bc=kf.createPolicy("vue",{createHTML:n=>n})}catch{}const Hm=bc?n=>bc.createHTML(n):n=>n,XE="http://www.w3.org/2000/svg",YE="http://www.w3.org/1998/Math/MathML",un=typeof document<"u"?document:null,Ff=un&&un.createElement("template"),JE={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,r)=>{const s=t==="svg"?un.createElementNS(XE,n):t==="mathml"?un.createElementNS(YE,n):e?un.createElement(n,{is:e}):un.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>un.createTextNode(n),createComment:n=>un.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>un.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,r,s,i){const o=e?e.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===i||!(s=s.nextSibling)););else{Ff.innerHTML=Hm(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=Ff.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Dn="transition",pi="animation",Yi=Symbol("_vtc"),Qm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ZE=ie({},pm,Qm),tT=n=>(n.displayName="Transition",n.props=ZE,n),eT=tT((n,{slots:t})=>WE(QI,nT(n),t)),mr=(n,t=[])=>{at(n)?n.forEach(e=>e(...t)):n&&n(...t)},Lf=n=>n?at(n)?n.some(t=>t.length>1):n.length>1:!1;function nT(n){const t={};for(const _ in n)_ in Qm||(t[_]=n[_]);if(n.css===!1)return t;const{name:e="v",type:r,duration:s,enterFromClass:i=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:l=`${e}-enter-to`,appearFromClass:c=i,appearActiveClass:h=o,appearToClass:f=l,leaveFromClass:p=`${e}-leave-from`,leaveActiveClass:E=`${e}-leave-active`,leaveToClass:T=`${e}-leave-to`}=n,C=rT(s),D=C&&C[0],M=C&&C[1],{onBeforeEnter:z,onEnter:W,onEnterCancelled:G,onLeave:H,onLeaveCancelled:tt,onBeforeAppear:nt=z,onAppear:w=W,onAppearCancelled:I=G}=t,y=(_,g,ft,xt)=>{_._enterCancelled=xt,gr(_,g?f:l),gr(_,g?h:o),ft&&ft()},b=(_,g)=>{_._isLeaving=!1,gr(_,p),gr(_,T),gr(_,E),g&&g()},A=_=>(g,ft)=>{const xt=_?w:W,Ht=()=>y(g,_,ft);mr(xt,[g,Ht]),Bf(()=>{gr(g,_?c:i),cn(g,_?f:l),Lf(xt)||Uf(g,r,D,Ht)})};return ie(t,{onBeforeEnter(_){mr(z,[_]),cn(_,i),cn(_,o)},onBeforeAppear(_){mr(nt,[_]),cn(_,c),cn(_,h)},onEnter:A(!1),onAppear:A(!0),onLeave(_,g){_._isLeaving=!0;const ft=()=>b(_,g);cn(_,p),_._enterCancelled?(cn(_,E),zf(_)):(zf(_),cn(_,E)),Bf(()=>{_._isLeaving&&(gr(_,p),cn(_,T),Lf(H)||Uf(_,r,M,ft))}),mr(H,[_,ft])},onEnterCancelled(_){y(_,!1,void 0,!0),mr(G,[_])},onAppearCancelled(_){y(_,!0,void 0,!0),mr(I,[_])},onLeaveCancelled(_){b(_),mr(tt,[_])}})}function rT(n){if(n==null)return null;if(Nt(n))return[Gl(n.enter),Gl(n.leave)];{const t=Gl(n);return[t,t]}}function Gl(n){return sI(n)}function cn(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[Yi]||(n[Yi]=new Set)).add(t)}function gr(n,t){t.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const e=n[Yi];e&&(e.delete(t),e.size||(n[Yi]=void 0))}function Bf(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let sT=0;function Uf(n,t,e,r){const s=n._endId=++sT,i=()=>{s===n._endId&&r()};if(e!=null)return setTimeout(i,e);const{type:o,timeout:l,propCount:c}=iT(n,t);if(!o)return r();const h=o+"end";let f=0;const p=()=>{n.removeEventListener(h,E),i()},E=T=>{T.target===n&&++f>=c&&p()};setTimeout(()=>{f<c&&p()},l+1),n.addEventListener(h,E)}function iT(n,t){const e=window.getComputedStyle(n),r=C=>(e[C]||"").split(", "),s=r(`${Dn}Delay`),i=r(`${Dn}Duration`),o=jf(s,i),l=r(`${pi}Delay`),c=r(`${pi}Duration`),h=jf(l,c);let f=null,p=0,E=0;t===Dn?o>0&&(f=Dn,p=o,E=i.length):t===pi?h>0&&(f=pi,p=h,E=c.length):(p=Math.max(o,h),f=p>0?o>h?Dn:pi:null,E=f?f===Dn?i.length:c.length:0);const T=f===Dn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Dn}Property`).toString());return{type:f,timeout:p,propCount:E,hasTransform:T}}function jf(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,r)=>Kf(e)+Kf(n[r])))}function Kf(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function zf(n){return(n?n.ownerDocument:document).body.offsetHeight}function oT(n,t,e){const r=n[Yi];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Ia=Symbol("_vod"),Wm=Symbol("_vsh"),aT={name:"show",beforeMount(n,{value:t},{transition:e}){n[Ia]=n.style.display==="none"?"":n.style.display,e&&t?e.beforeEnter(n):mi(n,t)},mounted(n,{value:t},{transition:e}){e&&t&&e.enter(n)},updated(n,{value:t,oldValue:e},{transition:r}){!t!=!e&&(r?t?(r.beforeEnter(n),mi(n,!0),r.enter(n)):r.leave(n,()=>{mi(n,!1)}):mi(n,t))},beforeUnmount(n,{value:t}){mi(n,t)}};function mi(n,t){n.style.display=t?n[Ia]:"none",n[Wm]=!t}const lT=Symbol(""),cT=/(?:^|;)\s*display\s*:/;function uT(n,t,e){const r=n.style,s=qt(e);let i=!1;if(e&&!s){if(t)if(qt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Jo(r,l,"")}else for(const o in t)e[o]==null&&Jo(r,o,"");for(const o in e)o==="display"&&(i=!0),Jo(r,o,e[o])}else if(s){if(t!==e){const o=r[lT];o&&(e+=";"+o),r.cssText=e,i=cT.test(e)}}else t&&n.removeAttribute("style");Ia in n&&(n[Ia]=i?r.display:"",n[Wm]&&(r.display="none"))}const qf=/\s*!important$/;function Jo(n,t,e){if(at(e))e.forEach(r=>Jo(n,t,r));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const r=hT(n,t);qf.test(e)?n.setProperty(zr(r),e.replace(qf,""),"important"):n[r]=e}}const Gf=["Webkit","Moz","ms"],Hl={};function hT(n,t){const e=Hl[t];if(e)return e;let r=Hn(t);if(r!=="filter"&&r in n)return Hl[t]=r;r=Kp(r);for(let s=0;s<Gf.length;s++){const i=Gf[s]+r;if(i in n)return Hl[t]=i}return t}const Hf="http://www.w3.org/1999/xlink";function Qf(n,t,e,r,s,i=uI(t)){r&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Hf,t.slice(6,t.length)):n.setAttributeNS(Hf,t,e):e==null||i&&!qp(e)?n.removeAttribute(t):n.setAttribute(t,i?"":Tn(e)?String(e):e)}function Wf(n,t,e,r,s){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Hm(e):e);return}const i=n.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const l=typeof n[t];l==="boolean"?e=qp(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(s||t)}function os(n,t,e,r){n.addEventListener(t,e,r)}function fT(n,t,e,r){n.removeEventListener(t,e,r)}const $f=Symbol("_vei");function dT(n,t,e,r,s=null){const i=n[$f]||(n[$f]={}),o=i[t];if(r&&o)o.value=r;else{const[l,c]=pT(t);if(r){const h=i[t]=_T(r,s);os(n,l,h,c)}else o&&(fT(n,l,o,c),i[t]=void 0)}}const Xf=/(?:Once|Passive|Capture)$/;function pT(n){let t;if(Xf.test(n)){t={};let r;for(;r=n.match(Xf);)n=n.slice(0,n.length-r[0].length),t[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):zr(n.slice(2)),t]}let Ql=0;const mT=Promise.resolve(),gT=()=>Ql||(mT.then(()=>Ql=0),Ql=Date.now());function _T(n,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;qe(yT(r,e.value),t,5,[r])};return e.value=n,e.attached=gT(),e}function yT(n,t){if(at(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Yf=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,IT=(n,t,e,r,s,i)=>{const o=s==="svg";t==="class"?oT(n,r,o):t==="style"?uT(n,e,r):Ka(t)?lu(t)||dT(n,t,e,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ET(n,t,r,o))?(Wf(n,t,r),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qf(n,t,r,o,i,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!qt(r))?Wf(n,Hn(t),r,i,t):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),Qf(n,t,r,o))};function ET(n,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in n&&Yf(t)&&ct(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Yf(t)&&qt(e)?!1:t in n}const Jf=n=>{const t=n.props["onUpdate:modelValue"]||!1;return at(t)?e=>Qo(t,e):t};function TT(n){n.target.composing=!0}function Zf(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wl=Symbol("_assign"),fs={created(n,{modifiers:{lazy:t,trim:e,number:r}},s){n[Wl]=Jf(s);const i=r||s.props&&s.props.type==="number";os(n,t?"change":"input",o=>{if(o.target.composing)return;let l=n.value;e&&(l=l.trim()),i&&(l=dc(l)),n[Wl](l)}),e&&os(n,"change",()=>{n.value=n.value.trim()}),t||(os(n,"compositionstart",TT),os(n,"compositionend",Zf),os(n,"change",Zf))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:r,trim:s,number:i}},o){if(n[Wl]=Jf(o),n.composing)return;const l=(i||n.type==="number")&&!/^0\d/.test(n.value)?dc(n.value):n.value,c=t??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&t===e||s&&n.value.trim()===c)||(n.value=c))}},AT=["ctrl","shift","alt","meta"],vT={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>AT.some(e=>n[`${e}Key`]&&!t.includes(e))},bu=(n,t)=>{const e=n._withMods||(n._withMods={}),r=t.join(".");return e[r]||(e[r]=((s,...i)=>{for(let o=0;o<t.length;o++){const l=vT[t[o]];if(l&&l(s,t))return}return n(s,...i)}))},wT=ie({patchProp:IT},JE);let td;function bT(){return td||(td=EE(wT))}const ST=((...n)=>{const t=bT().createApp(...n),{mount:e}=t;return t.mount=r=>{const s=PT(r);if(!s)return;const i=t._component;!ct(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=e(s,!1,RT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t});function RT(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function PT(n){return qt(n)?document.querySelector(n):n}const CT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",VT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",xT=(n,t)=>{const e=n.__vccOpts||n;for(const[r,s]of t)e[r]=s;return e},DT={},NT={class:"header"};function MT(n,t){return pt(),Ct("header",NT,[...t[0]||(t[0]=[X("h1",null,"BUG REPORT",-1)])])}const OT=xT(DT,[["render",MT]]),Bo=Ut(!1),$l=Ut("alert"),Xl=Ut(""),Yl=Ut(""),Jl=Ut(null),Zl=Ut(null);function Su(){Bo.value=!1,$l.value="alert",Xl.value="",Yl.value="",Jl.value=null,Zl.value=null;const n=(s,i,o="",l={})=>{$l.value=s,Xl.value=i,Yl.value=o,Jl.value=l.onConfirm||null,Zl.value=l.onCancel||null,Bo.value=!0},t=()=>Bo.value=!1;return{isOpen:Bo,modalType:$l,modalTitle:Xl,modalMessage:Yl,openModal:n,closeModal:t,confirm:()=>{Jl.value?.(),t()},cancel:()=>{Zl.value?.(),t()}}}function kT(){const n=["오늘도 고생했어요. 이건 용기 있는 기록이에요.","기록은 변화를 만드는 첫걸음이에요.","잘했어요. 이렇게 솔직히 남겨줘서 고마워요.","이건 분명 누군가에게 도움이 될 거예요.","좋아요, 한 걸음 나아갔어요.","이 기록 덕분에 팀이 조금 더 좋아질 거예요.","솔직한 말, 그게 진짜 용기예요.","이건 단순한 불만이 아니라 발전의 씨앗이에요.","기록을 남겼다는 건, 마음을 정리했다는 뜻이에요.","감정이 아닌 경험을 남기는 건 대단한 일이에요.","고마워요. 진심으로.","이 리포트는 단순한 글이 아니에요. 변화의 시작이에요.","용기 냈네요. 멋져요.","다음엔 조금 더 가벼운 하루가 오길 바라요.","기록이 쌓일수록 우리가 단단해져요.","이건 단순한 보고가 아니라 신호예요.","진짜 잘했어요. 덕분에 더 나은 환경이 돼요.","솔직한 기록이 결국 시스템을 바꿔요.","오늘의 기록은 내일의 개선이에요.","진심으로 수고했어요. 이제 조금 쉬어요."];return{getRandomMessage:()=>{const e=Math.floor(Math.random()*n.length);return n[e]}}}const FT=()=>{};var ed={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},LT=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const s=n[e++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[e++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[e++],o=n[e++],l=n[e++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[e++],o=n[e++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Xm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,l=o?n[s+1]:0,c=s+2<n.length,h=c?n[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let E=(l&15)<<2|h>>6,T=h&63;c||(T=64,o||(E=64)),r.push(e[f],e[p],e[E],e[T])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray($m(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):LT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=e[n.charAt(s++)],l=s<n.length?e[n.charAt(s)]:0;++s;const h=s<n.length?e[n.charAt(s)]:64;++s;const p=s<n.length?e[n.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new BT;const E=i<<2|l>>4;if(r.push(E),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const C=h<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UT=function(n){const t=$m(n);return Xm.encodeByteArray(t,!0)},Ym=function(n){return UT(n).replace(/\./g,"")},jT=function(n){try{return Xm.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=()=>Jm().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof ed>"u")return;const n=ed.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&jT(n[1]);return t&&JSON.parse(t)},Zm=()=>{try{return FT()||KT()||zT()||qT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GT=()=>Zm()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eg(){const n=Zm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ng(){return!eg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rg(){return!eg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sg(){try{return typeof indexedDB=="object"}catch{return!1}}function WT(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="FirebaseError";class Ks extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=$T,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ig.prototype.create)}}class ig{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?XT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ks(s,l,r)}}function XT(n,t){return n.replace(YT,(e,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const YT=/\{\$([^}]+)}/g;function Ta(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const s of e){if(!r.includes(s))return!1;const i=n[s],o=t[s];if(nd(i)&&nd(o)){if(!Ta(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!e.includes(s))return!1;return!0}function nd(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class Ji{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new HT;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tA(t))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Ir){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ir){return this.instances.has(t)}getOptions(t=Ir){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const s of r)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZT(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ir){return this.component?this.component.multipleInstances?t:Ir:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZT(n){return n===Ir?void 0:n}function tA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new JT(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(yt||(yt={}));const nA={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},rA=yt.INFO,sA={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},iA=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=sA[t];if(s)console[s](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class og{constructor(t){this.name=t,this._logLevel=rA,this._logHandler=iA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?nA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...t),this._logHandler(this,yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...t),this._logHandler(this,yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...t),this._logHandler(this,yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...t),this._logHandler(this,yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...t),this._logHandler(this,yt.ERROR,...t)}}const oA=(n,t)=>t.some(e=>n instanceof e);let rd,sd;function aA(){return rd||(rd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lA(){return sd||(sd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ag=new WeakMap,Sc=new WeakMap,lg=new WeakMap,tc=new WeakMap,Ru=new WeakMap;function cA(n){const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{e(jn(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&ag.set(e,n)}).catch(()=>{}),Ru.set(t,n),t}function uA(n){if(Sc.has(n))return;const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{e(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Sc.set(n,t)}let Rc={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Sc.get(n);if(t==="objectStoreNames")return n.objectStoreNames||lg.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return jn(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function hA(n){Rc=n(Rc)}function fA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(ec(this),t,...e);return lg.set(r,t.sort?t.sort():[t]),jn(r)}:lA().includes(n)?function(...t){return n.apply(ec(this),t),jn(ag.get(this))}:function(...t){return jn(n.apply(ec(this),t))}}function dA(n){return typeof n=="function"?fA(n):(n instanceof IDBTransaction&&uA(n),oA(n,aA())?new Proxy(n,Rc):n)}function jn(n){if(n instanceof IDBRequest)return cA(n);if(tc.has(n))return tc.get(n);const t=dA(n);return t!==n&&(tc.set(n,t),Ru.set(t,n)),t}const ec=n=>Ru.get(n);function pA(n,t,{blocked:e,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,t),l=jn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(jn(o.result),c.oldVersion,c.newVersion,jn(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const mA=["get","getKey","getAll","getAllKeys","count"],gA=["put","add","delete","clear"],nc=new Map;function id(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(nc.get(t))return nc.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,s=gA.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mA.includes(e)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[e](...l),s&&c.done]))[0]};return nc.set(t,i),i}hA(n=>({...n,get:(t,e,r)=>id(t,e)||n.get(t,e,r),has:(t,e)=>!!id(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(yA(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function yA(n){return n.getComponent()?.type==="VERSION"}const Pc="@firebase/app",od="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new og("@firebase/app"),IA="@firebase/app-compat",EA="@firebase/analytics-compat",TA="@firebase/analytics",AA="@firebase/app-check-compat",vA="@firebase/app-check",wA="@firebase/auth",bA="@firebase/auth-compat",SA="@firebase/database",RA="@firebase/data-connect",PA="@firebase/database-compat",CA="@firebase/functions",VA="@firebase/functions-compat",xA="@firebase/installations",DA="@firebase/installations-compat",NA="@firebase/messaging",MA="@firebase/messaging-compat",OA="@firebase/performance",kA="@firebase/performance-compat",FA="@firebase/remote-config",LA="@firebase/remote-config-compat",BA="@firebase/storage",UA="@firebase/storage-compat",jA="@firebase/firestore",KA="@firebase/ai",zA="@firebase/firestore-compat",qA="firebase",GA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="[DEFAULT]",QA={[Pc]:"fire-core",[IA]:"fire-core-compat",[TA]:"fire-analytics",[EA]:"fire-analytics-compat",[vA]:"fire-app-check",[AA]:"fire-app-check-compat",[wA]:"fire-auth",[bA]:"fire-auth-compat",[SA]:"fire-rtdb",[RA]:"fire-data-connect",[PA]:"fire-rtdb-compat",[CA]:"fire-fn",[VA]:"fire-fn-compat",[xA]:"fire-iid",[DA]:"fire-iid-compat",[NA]:"fire-fcm",[MA]:"fire-fcm-compat",[OA]:"fire-perf",[kA]:"fire-perf-compat",[FA]:"fire-rc",[LA]:"fire-rc-compat",[BA]:"fire-gcs",[UA]:"fire-gcs-compat",[jA]:"fire-fst",[zA]:"fire-fst-compat",[KA]:"fire-vertex","fire-js":"fire-js",[qA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,WA=new Map,Vc=new Map;function ad(n,t){try{n.container.addComponent(t)}catch(e){yn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Aa(n){const t=n.name;if(Vc.has(t))return yn.debug(`There were multiple attempts to register component ${t}.`),!1;Vc.set(t,n);for(const e of Cc.values())ad(e,n);for(const e of WA.values())ad(e,n);return!0}function $A(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function XA(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new ig("app","Firebase",YA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=GA;function tv(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:HA,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(e||(e=GT()),!e)throw Vr.create("no-options");const i=Cc.get(s);if(i){if(Ta(e,i.options)&&Ta(r,i.config))return i;throw Vr.create("duplicate-app",{appName:s})}const o=new eA(s);for(const c of Vc.values())o.addComponent(c);const l=new JA(e,r,o);return Cc.set(s,l),l}function Is(n,t,e){let r=QA[n]??n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${t}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yn.warn(o.join(" "));return}Aa(new Ji(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="firebase-heartbeat-database",nv=1,Zi="firebase-heartbeat-store";let rc=null;function cg(){return rc||(rc=pA(ev,nv,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Zi)}catch(e){console.warn(e)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),rc}async function rv(n){try{const e=(await cg()).transaction(Zi),r=await e.objectStore(Zi).get(ug(n));return await e.done,r}catch(t){if(t instanceof Ks)yn.warn(t.message);else{const e=Vr.create("idb-get",{originalErrorMessage:t?.message});yn.warn(e.message)}}}async function ld(n,t){try{const r=(await cg()).transaction(Zi,"readwrite");await r.objectStore(Zi).put(t,ug(n)),await r.done}catch(e){if(e instanceof Ks)yn.warn(e.message);else{const r=Vr.create("idb-set",{originalErrorMessage:e?.message});yn.warn(r.message)}}}function ug(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=1024,iv=30;class ov{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lv(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>iv){const s=cv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){yn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cd(),{heartbeatsToSend:e,unsentEntries:r}=av(this._heartbeatsCache.heartbeats),s=Ym(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yn.warn(t),""}}}function cd(){return new Date().toISOString().substring(0,10)}function av(n,t=sv){const e=[];let r=n.slice();for(const s of n){const i=e.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ud(e)>t){i.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),ud(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class lv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sg()?WT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await rv(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ld(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ld(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ud(n){return Ym(JSON.stringify({version:2,heartbeats:n})).length}function cv(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n){Aa(new Ji("platform-logger",t=>new _A(t),"PRIVATE")),Aa(new Ji("heartbeat",t=>new ov(t),"PRIVATE")),Is(Pc,od,n),Is(Pc,od,"esm2020"),Is("fire-js","")}uv("");var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kn,hg;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,I){function y(){}y.prototype=I.prototype,w.F=I.prototype,w.prototype=new y,w.prototype.constructor=w,w.D=function(b,A,_){for(var g=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)g[ft-2]=arguments[ft];return I.prototype[A].apply(b,g)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,I,y){y||(y=0);const b=Array(16);if(typeof I=="string")for(var A=0;A<16;++A)b[A]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(A=0;A<16;++A)b[A]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=w.g[0],y=w.g[1],A=w.g[2];let _=w.g[3],g;g=I+(_^y&(A^_))+b[0]+3614090360&4294967295,I=y+(g<<7&4294967295|g>>>25),g=_+(A^I&(y^A))+b[1]+3905402710&4294967295,_=I+(g<<12&4294967295|g>>>20),g=A+(y^_&(I^y))+b[2]+606105819&4294967295,A=_+(g<<17&4294967295|g>>>15),g=y+(I^A&(_^I))+b[3]+3250441966&4294967295,y=A+(g<<22&4294967295|g>>>10),g=I+(_^y&(A^_))+b[4]+4118548399&4294967295,I=y+(g<<7&4294967295|g>>>25),g=_+(A^I&(y^A))+b[5]+1200080426&4294967295,_=I+(g<<12&4294967295|g>>>20),g=A+(y^_&(I^y))+b[6]+2821735955&4294967295,A=_+(g<<17&4294967295|g>>>15),g=y+(I^A&(_^I))+b[7]+4249261313&4294967295,y=A+(g<<22&4294967295|g>>>10),g=I+(_^y&(A^_))+b[8]+1770035416&4294967295,I=y+(g<<7&4294967295|g>>>25),g=_+(A^I&(y^A))+b[9]+2336552879&4294967295,_=I+(g<<12&4294967295|g>>>20),g=A+(y^_&(I^y))+b[10]+4294925233&4294967295,A=_+(g<<17&4294967295|g>>>15),g=y+(I^A&(_^I))+b[11]+2304563134&4294967295,y=A+(g<<22&4294967295|g>>>10),g=I+(_^y&(A^_))+b[12]+1804603682&4294967295,I=y+(g<<7&4294967295|g>>>25),g=_+(A^I&(y^A))+b[13]+4254626195&4294967295,_=I+(g<<12&4294967295|g>>>20),g=A+(y^_&(I^y))+b[14]+2792965006&4294967295,A=_+(g<<17&4294967295|g>>>15),g=y+(I^A&(_^I))+b[15]+1236535329&4294967295,y=A+(g<<22&4294967295|g>>>10),g=I+(A^_&(y^A))+b[1]+4129170786&4294967295,I=y+(g<<5&4294967295|g>>>27),g=_+(y^A&(I^y))+b[6]+3225465664&4294967295,_=I+(g<<9&4294967295|g>>>23),g=A+(I^y&(_^I))+b[11]+643717713&4294967295,A=_+(g<<14&4294967295|g>>>18),g=y+(_^I&(A^_))+b[0]+3921069994&4294967295,y=A+(g<<20&4294967295|g>>>12),g=I+(A^_&(y^A))+b[5]+3593408605&4294967295,I=y+(g<<5&4294967295|g>>>27),g=_+(y^A&(I^y))+b[10]+38016083&4294967295,_=I+(g<<9&4294967295|g>>>23),g=A+(I^y&(_^I))+b[15]+3634488961&4294967295,A=_+(g<<14&4294967295|g>>>18),g=y+(_^I&(A^_))+b[4]+3889429448&4294967295,y=A+(g<<20&4294967295|g>>>12),g=I+(A^_&(y^A))+b[9]+568446438&4294967295,I=y+(g<<5&4294967295|g>>>27),g=_+(y^A&(I^y))+b[14]+3275163606&4294967295,_=I+(g<<9&4294967295|g>>>23),g=A+(I^y&(_^I))+b[3]+4107603335&4294967295,A=_+(g<<14&4294967295|g>>>18),g=y+(_^I&(A^_))+b[8]+1163531501&4294967295,y=A+(g<<20&4294967295|g>>>12),g=I+(A^_&(y^A))+b[13]+2850285829&4294967295,I=y+(g<<5&4294967295|g>>>27),g=_+(y^A&(I^y))+b[2]+4243563512&4294967295,_=I+(g<<9&4294967295|g>>>23),g=A+(I^y&(_^I))+b[7]+1735328473&4294967295,A=_+(g<<14&4294967295|g>>>18),g=y+(_^I&(A^_))+b[12]+2368359562&4294967295,y=A+(g<<20&4294967295|g>>>12),g=I+(y^A^_)+b[5]+4294588738&4294967295,I=y+(g<<4&4294967295|g>>>28),g=_+(I^y^A)+b[8]+2272392833&4294967295,_=I+(g<<11&4294967295|g>>>21),g=A+(_^I^y)+b[11]+1839030562&4294967295,A=_+(g<<16&4294967295|g>>>16),g=y+(A^_^I)+b[14]+4259657740&4294967295,y=A+(g<<23&4294967295|g>>>9),g=I+(y^A^_)+b[1]+2763975236&4294967295,I=y+(g<<4&4294967295|g>>>28),g=_+(I^y^A)+b[4]+1272893353&4294967295,_=I+(g<<11&4294967295|g>>>21),g=A+(_^I^y)+b[7]+4139469664&4294967295,A=_+(g<<16&4294967295|g>>>16),g=y+(A^_^I)+b[10]+3200236656&4294967295,y=A+(g<<23&4294967295|g>>>9),g=I+(y^A^_)+b[13]+681279174&4294967295,I=y+(g<<4&4294967295|g>>>28),g=_+(I^y^A)+b[0]+3936430074&4294967295,_=I+(g<<11&4294967295|g>>>21),g=A+(_^I^y)+b[3]+3572445317&4294967295,A=_+(g<<16&4294967295|g>>>16),g=y+(A^_^I)+b[6]+76029189&4294967295,y=A+(g<<23&4294967295|g>>>9),g=I+(y^A^_)+b[9]+3654602809&4294967295,I=y+(g<<4&4294967295|g>>>28),g=_+(I^y^A)+b[12]+3873151461&4294967295,_=I+(g<<11&4294967295|g>>>21),g=A+(_^I^y)+b[15]+530742520&4294967295,A=_+(g<<16&4294967295|g>>>16),g=y+(A^_^I)+b[2]+3299628645&4294967295,y=A+(g<<23&4294967295|g>>>9),g=I+(A^(y|~_))+b[0]+4096336452&4294967295,I=y+(g<<6&4294967295|g>>>26),g=_+(y^(I|~A))+b[7]+1126891415&4294967295,_=I+(g<<10&4294967295|g>>>22),g=A+(I^(_|~y))+b[14]+2878612391&4294967295,A=_+(g<<15&4294967295|g>>>17),g=y+(_^(A|~I))+b[5]+4237533241&4294967295,y=A+(g<<21&4294967295|g>>>11),g=I+(A^(y|~_))+b[12]+1700485571&4294967295,I=y+(g<<6&4294967295|g>>>26),g=_+(y^(I|~A))+b[3]+2399980690&4294967295,_=I+(g<<10&4294967295|g>>>22),g=A+(I^(_|~y))+b[10]+4293915773&4294967295,A=_+(g<<15&4294967295|g>>>17),g=y+(_^(A|~I))+b[1]+2240044497&4294967295,y=A+(g<<21&4294967295|g>>>11),g=I+(A^(y|~_))+b[8]+1873313359&4294967295,I=y+(g<<6&4294967295|g>>>26),g=_+(y^(I|~A))+b[15]+4264355552&4294967295,_=I+(g<<10&4294967295|g>>>22),g=A+(I^(_|~y))+b[6]+2734768916&4294967295,A=_+(g<<15&4294967295|g>>>17),g=y+(_^(A|~I))+b[13]+1309151649&4294967295,y=A+(g<<21&4294967295|g>>>11),g=I+(A^(y|~_))+b[4]+4149444226&4294967295,I=y+(g<<6&4294967295|g>>>26),g=_+(y^(I|~A))+b[11]+3174756917&4294967295,_=I+(g<<10&4294967295|g>>>22),g=A+(I^(_|~y))+b[2]+718787259&4294967295,A=_+(g<<15&4294967295|g>>>17),g=y+(_^(A|~I))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+I&4294967295,w.g[1]=w.g[1]+(A+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+_&4294967295}r.prototype.v=function(w,I){I===void 0&&(I=w.length);const y=I-this.blockSize,b=this.C;let A=this.h,_=0;for(;_<I;){if(A==0)for(;_<=y;)s(this,w,_),_+=this.blockSize;if(typeof w=="string"){for(;_<I;)if(b[A++]=w.charCodeAt(_++),A==this.blockSize){s(this,b),A=0;break}}else for(;_<I;)if(b[A++]=w[_++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=I},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var I=1;I<w.length-8;++I)w[I]=0;I=this.o*8;for(var y=w.length-8;y<w.length;++y)w[y]=I&255,I/=256;for(this.v(w),w=Array(16),I=0,y=0;y<4;++y)for(let b=0;b<32;b+=8)w[I++]=this.g[y]>>>b&255;return w};function i(w,I){var y=l;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=I(w)}function o(w,I){this.h=I;const y=[];let b=!0;for(let A=w.length-1;A>=0;A--){const _=w[A]|0;b&&_==I||(y[A]=_,b=!1)}this.g=y}var l={};function c(w){return-128<=w&&w<128?i(w,function(I){return new o([I|0],I<0?-1:0)}):new o([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return M(h(-w));const I=[];let y=1;for(let b=0;w>=y;b++)I[b]=w/y|0,y*=4294967296;return new o(I,0)}function f(w,I){if(w.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w.charAt(0)=="-")return M(f(w.substring(1),I));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=h(Math.pow(I,8));let b=p;for(let _=0;_<w.length;_+=8){var A=Math.min(8,w.length-_);const g=parseInt(w.substring(_,_+A),I);A<8?(A=h(Math.pow(I,A)),b=b.j(A).add(h(g))):(b=b.j(y),b=b.add(h(g)))}return b}var p=c(0),E=c(1),T=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-M(this).m();let w=0,I=1;for(let y=0;y<this.g.length;y++){const b=this.i(y);w+=(b>=0?b:4294967296+b)*I,I*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(D(this))return"-"+M(this).toString(w);const I=h(Math.pow(w,6));var y=this;let b="";for(;;){const A=H(y,I).g;y=z(y,A.j(I));let _=((y.g.length>0?y.g[0]:y.h)>>>0).toString(w);if(y=A,C(y))return _+b;for(;_.length<6;)_="0"+_;b=_+b}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(let I=0;I<w.g.length;I++)if(w.g[I]!=0)return!1;return!0}function D(w){return w.h==-1}n.l=function(w){return w=z(this,w),D(w)?-1:C(w)?0:1};function M(w){const I=w.g.length,y=[];for(let b=0;b<I;b++)y[b]=~w.g[b];return new o(y,~w.h).add(E)}n.abs=function(){return D(this)?M(this):this},n.add=function(w){const I=Math.max(this.g.length,w.g.length),y=[];let b=0;for(let A=0;A<=I;A++){let _=b+(this.i(A)&65535)+(w.i(A)&65535),g=(_>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);b=g>>>16,_&=65535,g&=65535,y[A]=g<<16|_}return new o(y,y[y.length-1]&-2147483648?-1:0)};function z(w,I){return w.add(M(I))}n.j=function(w){if(C(this)||C(w))return p;if(D(this))return D(w)?M(this).j(M(w)):M(M(this).j(w));if(D(w))return M(this.j(M(w)));if(this.l(T)<0&&w.l(T)<0)return h(this.m()*w.m());const I=this.g.length+w.g.length,y=[];for(var b=0;b<2*I;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<w.g.length;A++){const _=this.i(b)>>>16,g=this.i(b)&65535,ft=w.i(A)>>>16,xt=w.i(A)&65535;y[2*b+2*A]+=g*xt,W(y,2*b+2*A),y[2*b+2*A+1]+=_*xt,W(y,2*b+2*A+1),y[2*b+2*A+1]+=g*ft,W(y,2*b+2*A+1),y[2*b+2*A+2]+=_*ft,W(y,2*b+2*A+2)}for(w=0;w<I;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=I;w<2*I;w++)y[w]=0;return new o(y,0)};function W(w,I){for(;(w[I]&65535)!=w[I];)w[I+1]+=w[I]>>>16,w[I]&=65535,I++}function G(w,I){this.g=w,this.h=I}function H(w,I){if(C(I))throw Error("division by zero");if(C(w))return new G(p,p);if(D(w))return I=H(M(w),I),new G(M(I.g),M(I.h));if(D(I))return I=H(w,M(I)),new G(M(I.g),I.h);if(w.g.length>30){if(D(w)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var y=E,b=I;b.l(w)<=0;)y=tt(y),b=tt(b);var A=nt(y,1),_=nt(b,1);for(b=nt(b,2),y=nt(y,2);!C(b);){var g=_.add(b);g.l(w)<=0&&(A=A.add(y),_=g),b=nt(b,1),y=nt(y,1)}return I=z(w,A.j(I)),new G(A,I)}for(A=p;w.l(I)>=0;){for(y=Math.max(1,Math.floor(w.m()/I.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),_=h(y),g=_.j(I);D(g)||g.l(w)>0;)y-=b,_=h(y),g=_.j(I);C(_)&&(_=E),A=A.add(_),w=z(w,g)}return new G(A,w)}n.B=function(w){return H(this,w).h},n.and=function(w){const I=Math.max(this.g.length,w.g.length),y=[];for(let b=0;b<I;b++)y[b]=this.i(b)&w.i(b);return new o(y,this.h&w.h)},n.or=function(w){const I=Math.max(this.g.length,w.g.length),y=[];for(let b=0;b<I;b++)y[b]=this.i(b)|w.i(b);return new o(y,this.h|w.h)},n.xor=function(w){const I=Math.max(this.g.length,w.g.length),y=[];for(let b=0;b<I;b++)y[b]=this.i(b)^w.i(b);return new o(y,this.h^w.h)};function tt(w){const I=w.g.length+1,y=[];for(let b=0;b<I;b++)y[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(y,w.h)}function nt(w,I){const y=I>>5;I%=32;const b=w.g.length-y,A=[];for(let _=0;_<b;_++)A[_]=I>0?w.i(_+y)>>>I|w.i(_+y+1)<<32-I:w.i(_+y);return new o(A,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Kn=o}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fg,Ai,dg,Zo,xc,pg,mg,gg;(function(){var n,t=Object.defineProperty;function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uo=="object"&&Uo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=e(this);function s(a,u){if(u)t:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var P=a[m];if(!(P in d))break t;d=d[P]}a=a[a.length-1],m=d[a],u=u(m),u!=m&&u!=null&&t(d,a,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(u){var d=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.push([m,u[m]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,P,V){for(var q=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)q[ut-2]=arguments[ut];return u.prototype[P].apply(m,q)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function T(a){const u=a.length;if(u>0){const d=Array(u);for(let m=0;m<u;m++)d[m]=a[m];return d}return[]}function C(a,u){for(let m=1;m<arguments.length;m++){const P=arguments[m];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const V=P.length||0;a.length=d+V;for(let q=0;q<V;q++)a[d+q]=P[q]}else a.push(P)}}class D{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function M(a){o.setTimeout(()=>{throw a},0)}function z(){var a=w;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class W{constructor(){this.h=this.g=null}add(u,d){const m=G.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var G=new D(()=>new H,a=>a.reset());class H{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,nt=!1,w=new W,I=()=>{const a=Promise.resolve(void 0);tt=()=>{a.then(y)}};function y(){for(var a;a=z();){try{a.h.call(a.g)}catch(d){M(d)}var u=G;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}nt=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var _=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a})();function g(a){return/^[\s\xa0]*$/.test(a)}function ft(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ft,A),ft.prototype.init=function(a,u){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ft.Z.h.call(this)},ft.prototype.h=function(){ft.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Ht=0;function Ot(a,u,d,m,P){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=P,this.key=++Ht,this.da=this.fa=!1}function Et(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ke(a,u,d){for(const m in a)u.call(d,a[m],m,a)}function Gr(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function Ge(a){const u={};for(const d in a)u[d]=a[d];return u}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $s(a,u){let d,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(d in m)a[d]=m[d];for(let V=0;V<Se.length;V++)d=Se[V],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function Hr(a){this.src=a,this.g={},this.h=0}Hr.prototype.add=function(a,u,d,m,P){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const q=an(a,u,m,P);return q>-1?(u=a[q],d||(u.fa=!1)):(u=new Ot(u,this.src,V,!!m,P),u.fa=d,a.push(u)),u};function Xs(a,u){const d=u.type;if(d in a.g){var m=a.g[d],P=Array.prototype.indexOf.call(m,u,void 0),V;(V=P>=0)&&Array.prototype.splice.call(m,P,1),V&&(Et(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function an(a,u,d,m){for(let P=0;P<a.length;++P){const V=a[P];if(!V.da&&V.listener==u&&V.capture==!!d&&V.ha==m)return P}return-1}var bn="closure_lm_"+(Math.random()*1e6|0),or={};function Ys(a,u,d,m,P){if(Array.isArray(u)){for(let V=0;V<u.length;V++)Ys(a,u[V],d,m,P);return null}return d=$(d),a&&a[xt]?a.J(u,d,l(m)?!!m.capture:!1,P):ar(a,u,d,!1,m,P)}function ar(a,u,d,m,P,V){if(!u)throw Error("Invalid event type");const q=l(P)?!!P.capture:!!P;let ut=O(a);if(ut||(a[bn]=ut=new Hr(a)),d=ut.add(u,d,m,q,V),d.proxy)return d;if(m=Ch(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)_||(P=q),P===void 0&&(P=!1),a.addEventListener(u.toString(),m,P);else if(a.attachEvent)a.attachEvent(x(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ch(){function a(d){return u.call(a.src,a.listener,d)}const u=j;return a}function v(a,u,d,m,P){if(Array.isArray(u))for(var V=0;V<u.length;V++)v(a,u[V],d,m,P);else m=l(m)?!!m.capture:!!m,d=$(d),a&&a[xt]?(a=a.i,V=String(u).toString(),V in a.g&&(u=a.g[V],d=an(u,d,m,P),d>-1&&(Et(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[V],a.h--)))):a&&(a=O(a))&&(u=a.g[u.toString()],a=-1,u&&(a=an(u,d,m,P)),(d=a>-1?u[a]:null)&&S(d))}function S(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[xt])Xs(u.i,a);else{var d=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(d,m,a.capture):u.detachEvent?u.detachEvent(x(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=O(u))?(Xs(d,a),d.h==0&&(d.src=null,u[bn]=null)):Et(a)}}}function x(a){return a in or?or[a]:or[a]="on"+a}function j(a,u){if(a.da)a=!0;else{u=new ft(u,this);const d=a.listener,m=a.ha||a.src;a.fa&&S(a),a=d.call(m,u)}return a}function O(a){return a=a[bn],a instanceof Hr?a:null}var k="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(a){return typeof a=="function"?a:(a[k]||(a[k]=function(u){return a.handleEvent(u)}),a[k])}function U(){b.call(this),this.i=new Hr(this),this.M=this,this.G=null}p(U,b),U.prototype[xt]=!0,U.prototype.removeEventListener=function(a,u,d,m){v(this,a,u,d,m)};function L(a,u){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var P=u;u=new A(m,a),$s(u,P)}P=!0;let V,q;if(d)for(q=d.length-1;q>=0;q--)V=u.g=d[q],P=B(V,m,!0,u)&&P;if(V=u.g=a,P=B(V,m,!0,u)&&P,P=B(V,m,!1,u)&&P,d)for(q=0;q<d.length;q++)V=u.g=d[q],P=B(V,m,!1,u)&&P}U.prototype.N=function(){if(U.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let m=0;m<d.length;m++)Et(d[m]);delete a.g[u],a.h--}}this.G=null},U.prototype.J=function(a,u,d,m){return this.i.add(String(a),u,!1,d,m)},U.prototype.K=function(a,u,d,m){return this.i.add(String(a),u,!0,d,m)};function B(a,u,d,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let V=0;V<u.length;++V){const q=u[V];if(q&&!q.da&&q.capture==d){const ut=q.listener,Xt=q.ha||q.src;q.fa&&Xs(a.i,q),P=ut.call(Xt,m)!==!1&&P}}return P&&!m.defaultPrevented}function it(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function Y(a){a.g=it(()=>{a.g=null,a.i&&(a.i=!1,Y(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class st extends b{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(a){b.call(this),this.h=a,this.g={}}p(ot,b);var dt=[];function wt(a){ke(a.g,function(u,d){this.g.hasOwnProperty(d)&&S(u)},a),a.g={}}ot.prototype.N=function(){ot.Z.N.call(this),wt(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var It=o.JSON.stringify,oe=o.JSON.parse,ae=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Re(){}function Pe(){}var je={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qr(){A.call(this,"d")}p(Qr,A);function ee(){A.call(this,"c")}p(ee,A);var Jt={},Js=null;function lr(){return Js=Js||new U}Jt.Ia="serverreachability";function Vh(a){A.call(this,Jt.Ia,a)}p(Vh,A);function Zs(a){const u=lr();L(u,new Vh(u))}Jt.STAT_EVENT="statevent";function xh(a,u){A.call(this,Jt.STAT_EVENT,a),this.stat=u}p(xh,A);function _e(a){const u=lr();L(u,new xh(u,a))}Jt.Ja="timingevent";function Dh(a,u){A.call(this,Jt.Ja,a),this.size=u}p(Dh,A);function ti(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function Dy(a,u,d,m,P,V){a.info(function(){if(a.g)if(V){var q="",ut=V.split("&");for(let Pt=0;Pt<ut.length;Pt++){var Xt=ut[Pt].split("=");if(Xt.length>1){const Zt=Xt[0];Xt=Xt[1];const Qe=Zt.split("_");q=Qe.length>=2&&Qe[1]=="type"?q+(Zt+"="+Xt+"&"):q+(Zt+"=redacted&")}}}else q=null;else q=V;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+u+`
`+d+`
`+q})}function Ny(a,u,d,m,P,V,q){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+u+`
`+d+`
`+V+" "+q})}function Wr(a,u,d,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Oy(a,d)+(m?" "+m:"")})}function My(a,u){a.info(function(){return"TIMEOUT: "+u})}ei.prototype.info=function(){};function Oy(a,u){if(!a.g)return u;if(!u)return null;try{const V=JSON.parse(u);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var d=V[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var P=m[0];if(P!="noop"&&P!="stop"&&P!="close")for(let q=1;q<m.length;q++)m[q]=""}}}}return It(V)}catch{return u}}var bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mh;function vl(){}p(vl,Re),vl.prototype.g=function(){return new XMLHttpRequest},Mh=new vl;function ni(a){return encodeURIComponent(String(a))}function ky(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Sn(a,u,d,m){this.j=a,this.i=u,this.l=d,this.S=m||1,this.V=new ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oh}function Oh(){this.i=null,this.g="",this.h=!1}var kh={},wl={};function bl(a,u,d){a.M=1,a.A=Ro(He(u)),a.u=d,a.R=!0,Fh(a,null)}function Fh(a,u){a.F=Date.now(),So(a),a.B=He(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),Xh(d.i,"t",m),a.C=0,d=a.j.L,a.h=new Oh,a.g=mf(a.j,d?u:null,!a.u),a.P>0&&(a.O=new st(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,m=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(dt[0]=P.toString()),P=dt);for(let V=0;V<P.length;V++){const q=Ys(d,P[V],m||u.handleEvent,!1,u.h||u);if(!q)break;u.g[q.key]=q}u=a.J?Ge(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Zs(),Dy(a.i,a.v,a.B,a.l,a.S,a.u)}Sn.prototype.ba=function(a){a=a.target;const u=this.O;u&&Cn(a)==3?u.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)t:{const ut=Cn(this.g),Xt=this.g.ya(),Pt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||rf(this.g)))){this.K||ut!=4||Xt==7||(Xt==8||Pt<=0?Zs(3):Zs(2)),Sl(this);var u=this.g.ca();this.X=u;var d=Fy(this);if(this.o=u==200,Ny(this.i,this.v,this.B,this.l,this.S,ut,u),this.o){if(this.U&&!this.L){e:{if(this.g){var m,P=this.g;if((m=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(m)){var V=m;break e}}V=null}if(a=V)Wr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rl(this,a);else{this.o=!1,this.m=3,_e(12),cr(this),ri(this);break t}}if(this.R){a=!0;let Zt;for(;!this.K&&this.C<d.length;)if(Zt=Ly(this,d),Zt==wl){ut==4&&(this.m=4,_e(14),a=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==kh){this.m=4,_e(15),Wr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Wr(this.i,this.l,Zt,null),Rl(this,Zt);if(Lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||d.length!=0||this.h.h||(this.m=1,_e(16),a=!1),this.o=this.o&&a,!a)Wr(this.i,this.l,d,"[Invalid Chunked Response]"),cr(this),ri(this);else if(d.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Ol(q),q.P=!0,_e(11))}}else Wr(this.i,this.l,d,null),Rl(this,d);ut==4&&cr(this),this.o&&!this.K&&(ut==4?hf(this.j,this):(this.o=!1,So(this)))}else Jy(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),cr(this),ri(this)}}}catch{}finally{}};function Fy(a){if(!Lh(a))return a.g.la();const u=rf(a.g);if(u==="")return"";let d="";const m=u.length,P=Cn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return cr(a),ri(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<m;V++)a.h.h=!0,d+=a.h.i.decode(u[V],{stream:!(P&&V==m-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function Lh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ly(a,u){var d=a.C,m=u.indexOf(`
`,d);return m==-1?wl:(d=Number(u.substring(d,m)),isNaN(d)?kh:(m+=1,m+d>u.length?wl:(u=u.slice(m,m+d),a.C=m+d,u)))}Sn.prototype.cancel=function(){this.K=!0,cr(this)};function So(a){a.T=Date.now()+a.H,Bh(a,a.H)}function Bh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ti(h(a.aa,a),u)}function Sl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Sn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(My(this.i,this.B),this.M!=2&&(Zs(),_e(17)),cr(this),this.m=2,ri(this)):Bh(this,this.T-a)};function ri(a){a.j.I==0||a.K||hf(a.j,a)}function cr(a){Sl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,wt(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function Rl(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||Pl(d.h,a))){if(!a.L&&Pl(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){t:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Do(d),Vo(d);else break t;Ml(d),_e(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=ti(h(d.Va,d),6e3));Kh(d.h)<=1&&d.ta&&(d.ta=void 0)}else hr(d,11)}else if((a.L||d.g==a)&&Do(d),!g(u))for(P=d.Ba.g.parse(u),u=0;u<P.length;u++){let Pt=P[u];const Zt=Pt[0];if(!(Zt<=d.K))if(d.K=Zt,Pt=Pt[1],d.I==2)if(Pt[0]=="c"){d.M=Pt[1],d.ba=Pt[2];const Qe=Pt[3];Qe!=null&&(d.ka=Qe,d.j.info("VER="+d.ka));const fr=Pt[4];fr!=null&&(d.za=fr,d.j.info("SVER="+d.za));const Vn=Pt[5];Vn!=null&&typeof Vn=="number"&&Vn>0&&(m=1.5*Vn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const xn=a.g;if(xn){const Mo=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var V=m.h;V.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Cl(V,V.h),V.h=null))}if(m.G){const kl=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(m.wa=kl,kt(m.J,m.G,kl))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var q=a;if(m.na=pf(m,m.L?m.ba:null,m.W),q.L){zh(m.h,q);var ut=q,Xt=m.O;Xt&&(ut.H=Xt),ut.D&&(Sl(ut),So(ut)),m.g=q}else cf(m);d.i.length>0&&xo(d)}else Pt[0]!="stop"&&Pt[0]!="close"||hr(d,7);else d.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?hr(d,7):Nl(d):Pt[0]!="noop"&&d.l&&d.l.qa(Pt),d.A=0)}}Zs(4)}catch{}}var By=class{constructor(a,u){this.g=a,this.map=u}};function Uh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kh(a){return a.h?1:a.g?a.g.size:0}function Pl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Cl(a,u){a.g?a.g.add(u):a.h=u}function zh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Uh.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function qh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return T(a.i)}var Gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uy(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let P,V=null;m>=0?(P=a[d].substring(0,m),V=a[d].substring(m+1)):P=a[d],u(P,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Rn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Rn?(this.l=a.l,si(this,a.j),this.o=a.o,this.g=a.g,ii(this,a.u),this.h=a.h,Vl(this,Yh(a.i)),this.m=a.m):a&&(u=String(a).match(Gh))?(this.l=!1,si(this,u[1]||"",!0),this.o=oi(u[2]||""),this.g=oi(u[3]||"",!0),ii(this,u[4]),this.h=oi(u[5]||"",!0),Vl(this,u[6]||"",!0),this.m=oi(u[7]||"")):(this.l=!1,this.i=new li(null,this.l))}Rn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(ai(u,Hh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(ai(u,Hh,!0),"@"),a.push(ni(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ai(d,d.charAt(0)=="/"?zy:Ky,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ai(d,Gy)),a.join("")},Rn.prototype.resolve=function(a){const u=He(this);let d=!!a.j;d?si(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var m=a.h;if(d)ii(u,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var P=u.h.lastIndexOf("/");P!=-1&&(m=u.h.slice(0,P+1)+m)}if(P=m,P==".."||P==".")m="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){m=P.lastIndexOf("/",0)==0,P=P.split("/");const V=[];for(let q=0;q<P.length;){const ut=P[q++];ut=="."?m&&q==P.length&&V.push(""):ut==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),m&&q==P.length&&V.push("")):(V.push(ut),m=!0)}m=V.join("/")}else m=P}return d?u.h=m:d=a.i.toString()!=="",d?Vl(u,Yh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function He(a){return new Rn(a)}function si(a,u,d){a.j=d?oi(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ii(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Vl(a,u,d){u instanceof li?(a.i=u,Hy(a.i,a.l)):(d||(u=ai(u,qy)),a.i=new li(u,a.l))}function kt(a,u,d){a.i.set(u,d)}function Ro(a){return kt(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function oi(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ai(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,jy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function jy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Hh=/[#\/\?@]/g,Ky=/[#\?:]/g,zy=/[#\?]/g,qy=/[#\?@]/g,Gy=/#/g;function li(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function ur(a){a.g||(a.g=new Map,a.h=0,a.i&&Uy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=li.prototype,n.add=function(a,u){ur(this),this.i=null,a=$r(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Qh(a,u){ur(a),u=$r(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Wh(a,u){return ur(a),u=$r(a,u),a.g.has(u)}n.forEach=function(a,u){ur(this),this.g.forEach(function(d,m){d.forEach(function(P){a.call(u,P,m,this)},this)},this)};function $h(a,u){ur(a);let d=[];if(typeof u=="string")Wh(a,u)&&(d=d.concat(a.g.get($r(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}n.set=function(a,u){return ur(this),this.i=null,a=$r(this,a),Wh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=$h(this,a),a.length>0?String(a[0]):u):u};function Xh(a,u,d){Qh(a,u),d.length>0&&(a.i=null,a.g.set($r(a,u),T(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var d=u[m];const P=ni(d);d=$h(this,d);for(let V=0;V<d.length;V++){let q=P;d[V]!==""&&(q+="="+ni(d[V])),a.push(q)}}return this.i=a.join("&")};function Yh(a){const u=new li;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function $r(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Hy(a,u){u&&!a.j&&(ur(a),a.i=null,a.g.forEach(function(d,m){const P=m.toLowerCase();m!=P&&(Qh(this,m),Xh(this,P,d))},a)),a.j=u}function Qy(a,u){const d=new ei;if(o.Image){const m=new Image;m.onload=f(Pn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=f(Pn,d,"TestLoadImage: error",!1,u,m),m.onabort=f(Pn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=f(Pn,d,"TestLoadImage: timeout",!1,u,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function Wy(a,u){const d=new ei,m=new AbortController,P=setTimeout(()=>{m.abort(),Pn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(V=>{clearTimeout(P),V.ok?Pn(d,"TestPingServer: ok",!0,u):Pn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Pn(d,"TestPingServer: error",!1,u)})}function Pn(a,u,d,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(d)}catch{}}function $y(){this.g=new ae}function xl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(xl,Re),xl.prototype.g=function(){return new Po(this.i,this.h)};function Po(a,u){U.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Po,U),n=Po.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,ui(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ci(this):ui(this),this.readyState==3&&Jh(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,ci(this))},n.Na=function(a){this.g&&(this.response=a,ci(this))},n.ga=function(){this.g&&ci(this)};function ci(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ui(a)}n.setRequestHeader=function(a,u){this.A.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function ui(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zh(a){let u="";return ke(a,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function Dl(a,u,d){t:{for(m in d){var m=!1;break t}m=!0}m||(d=Zh(d),typeof a=="string"?d!=null&&ni(d):kt(a,u,d))}function Bt(a){U.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Bt,U);var Xy=/^https?$/i,Yy=["POST","PUT"];n=Bt.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mh.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(V){tf(this,V);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)d.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())d.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Yy,u,void 0)>=0)||m||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of d)this.g.setRequestHeader(V,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){tf(this,V)}};function tf(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,ef(a),Co(a)}function ef(a){a.A||(a.A=!0,L(a,"complete"),L(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,L(this,"complete"),L(this,"abort"),Co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),Bt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?nf(this):this.Xa())},n.Xa=function(){nf(this)};function nf(a){if(a.h&&typeof i<"u"){if(a.v&&Cn(a)==4)setTimeout(a.Ca.bind(a),0);else if(L(a,"readystatechange"),Cn(a)==4){a.h=!1;try{const V=a.ca();t:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var d;if(!(d=u)){var m;if(m=V===0){let q=String(a.D).match(Gh)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),m=!Xy.test(q?q.toLowerCase():"")}d=m}if(d)L(a,"complete"),L(a,"success");else{a.o=6;try{var P=Cn(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",ef(a)}}finally{Co(a)}}}}function Co(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||L(a,"ready");try{d.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cn(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),oe(u)}};function rf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(a){const u={};a=(a.g&&Cn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(g(a[m]))continue;var d=ky(a[m]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=u[P]||[];u[P]=V,V.push(d)}Gr(u,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function sf(a){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,a),this.Za=hi("retryDelaySeedMs",1e4,a),this.Ta=hi("forwardChannelMaxRetries",2,a),this.va=hi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Uh(a&&a.concurrentRequestLimit),this.Ba=new $y,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=sf.prototype,n.ka=8,n.I=1,n.connect=function(a,u,d,m){_e(0),this.W=a,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=pf(this,null,this.W),xo(this)};function Nl(a){if(of(a),a.I==3){var u=a.V++,d=He(a.J);if(kt(d,"SID",a.M),kt(d,"RID",u),kt(d,"TYPE","terminate"),fi(a,d),u=new Sn(a,a.j,u),u.M=2,u.A=Ro(He(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=mf(u.j,null),u.g.ea(u.A)),u.F=Date.now(),So(u)}df(a)}function Vo(a){a.g&&(Ol(a),a.g.cancel(),a.g=null)}function of(a){Vo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Do(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function xo(a){if(!jh(a.h)&&!a.m){a.m=!0;var u=a.Ea;tt||I(),nt||(tt(),nt=!0),w.add(u,a),a.D=0}}function Zy(a,u){return Kh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ti(h(a.Ea,a,u),ff(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Sn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=Ge(V),$s(V,this.U)):V=this.U),this.u!==null||this.R||(P.J=V,V=null),this.S)t:{for(var u=0,d=0;d<this.i.length;d++){e:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=d;break t}if(u===4096||d===this.i.length-1){u=d+1;break t}}u=1e3}else u=1e3;u=lf(this,P,u),d=He(this.J),kt(d,"RID",a),kt(d,"CVER",22),this.G&&kt(d,"X-HTTP-Session-Id",this.G),fi(this,d),V&&(this.R?u="headers="+ni(Zh(V))+"&"+u:this.u&&Dl(d,this.u,V)),Cl(this.h,P),this.Ra&&kt(d,"TYPE","init"),this.S?(kt(d,"$req",u),kt(d,"SID","null"),P.U=!0,bl(P,d,null)):bl(P,d,u),this.I=2}}else this.I==3&&(a?af(this,a):this.i.length==0||jh(this.h)||af(this))};function af(a,u){var d;u?d=u.l:d=a.V++;const m=He(a.J);kt(m,"SID",a.M),kt(m,"RID",d),kt(m,"AID",a.K),fi(a,m),a.u&&a.o&&Dl(m,a.u,a.o),d=new Sn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=lf(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Cl(a.h,d),bl(d,m,u)}function fi(a,u){a.H&&ke(a.H,function(d,m){kt(u,m,d)}),a.l&&ke({},function(d,m){kt(u,m,d)})}function lf(a,u,d){d=Math.min(a.i.length,d);const m=a.l?h(a.l.Ka,a.l,a):null;t:{var P=a.i;let ut=-1;for(;;){const Xt=["count="+d];ut==-1?d>0?(ut=P[0].g,Xt.push("ofs="+ut)):ut=0:Xt.push("ofs="+ut);let Pt=!0;for(let Zt=0;Zt<d;Zt++){var V=P[Zt].g;const Qe=P[Zt].map;if(V-=ut,V<0)ut=Math.max(0,P[Zt].g-100),Pt=!1;else try{V="req"+V+"_"||"";try{var q=Qe instanceof Map?Qe:Object.entries(Qe);for(const[fr,Vn]of q){let xn=Vn;l(Vn)&&(xn=It(Vn)),Xt.push(V+fr+"="+encodeURIComponent(xn))}}catch(fr){throw Xt.push(V+"type="+encodeURIComponent("_badmap")),fr}}catch{m&&m(Qe)}}if(Pt){q=Xt.join("&");break t}}q=void 0}return a=a.i.splice(0,d),u.G=a,q}function cf(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;tt||I(),nt||(tt(),nt=!0),w.add(u,a),a.A=0}}function Ml(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ti(h(a.Da,a),ff(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,uf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ti(h(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Vo(this),uf(this))};function Ol(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function uf(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=He(a.na);kt(u,"RID","rpc"),kt(u,"SID",a.M),kt(u,"AID",a.K),kt(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&kt(u,"TO",a.ia),kt(u,"TYPE","xmlhttp"),fi(a,u),a.u&&a.o&&Dl(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=Ro(He(u)),d.u=null,d.R=!0,Fh(d,a)}n.Va=function(){this.C!=null&&(this.C=null,Vo(this),Ml(this),_e(19))};function Do(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function hf(a,u){var d=null;if(a.g==u){Do(a),Ol(a),a.g=null;var m=2}else if(Pl(a.h,u))d=u.G,zh(a.h,u),m=1;else return;if(a.I!=0){if(u.o)if(m==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var P=a.D;m=lr(),L(m,new Dh(m,d)),xo(a)}else cf(a);else if(P=u.m,P==3||P==0&&u.X>0||!(m==1&&Zy(a,u)||m==2&&Ml(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),P){case 1:hr(a,5);break;case 4:hr(a,10);break;case 3:hr(a,6);break;default:hr(a,2)}}}function ff(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function hr(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),m=a.Ua;const P=!m;m=new Rn(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||si(m,"https"),Ro(m),P?Qy(m.toString(),d):Wy(m.toString(),d)}else _e(2);a.I=0,a.l&&a.l.pa(u),df(a),of(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function df(a){if(a.I=0,a.ja=[],a.l){const u=qh(a.h);(u.length!=0||a.i.length!=0)&&(C(a.ja,u),C(a.ja,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.oa()}}function pf(a,u,d){var m=d instanceof Rn?He(d):new Rn(d);if(m.g!="")u&&(m.g=u+"."+m.g),ii(m,m.u);else{var P=o.location;m=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const V=new Rn(null);m&&si(V,m),u&&(V.g=u),P&&ii(V,P),d&&(V.h=d),m=V}return d=a.G,u=a.wa,d&&u&&kt(m,d,u),kt(m,"VER",a.ka),fi(a,m),m}function mf(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Bt(new xl({ab:d})):new Bt(a.ma),u.Fa(a.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gf(){}n=gf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function No(){}No.prototype.g=function(a,u){return new Ce(a,u)};function Ce(a,u){U.call(this),this.g=new sf(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!g(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!g(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Xr(this)}p(Ce,U),Ce.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ce.prototype.close=function(){Nl(this.g)},Ce.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=It(a),a=d);u.i.push(new By(u.Ya++,a)),u.I==3&&xo(u)},Ce.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,Ce.Z.N.call(this)};function _f(a){Qr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){t:{for(const d in u){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(_f,Qr);function yf(){ee.call(this),this.status=1}p(yf,ee);function Xr(a){this.g=a}p(Xr,gf),Xr.prototype.ra=function(){L(this.g,"a")},Xr.prototype.qa=function(a){L(this.g,new _f(a))},Xr.prototype.pa=function(a){L(this.g,new yf)},Xr.prototype.oa=function(){L(this.g,"b")},No.prototype.createWebChannel=No.prototype.g,Ce.prototype.send=Ce.prototype.o,Ce.prototype.open=Ce.prototype.m,Ce.prototype.close=Ce.prototype.close,gg=function(){return new No},mg=function(){return lr()},pg=Jt,xc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bo.NO_ERROR=0,bo.TIMEOUT=8,bo.HTTP_ERROR=6,Zo=bo,Nh.COMPLETE="complete",dg=Nh,Pe.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",U.prototype.listen=U.prototype.J,Ai=Pe,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,fg=Bt}).apply(typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{});const fd="@firebase/firestore",dd="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ce.UNAUTHENTICATED=new ce(null),ce.GOOGLE_CREDENTIALS=new ce("google-credentials-uid"),ce.FIRST_PARTY=new ce("first-party-uid"),ce.MOCK_USER=new ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new og("@firebase/firestore");function as(){return kr.logLevel}function F(n,...t){if(kr.logLevel<=yt.DEBUG){const e=t.map(Pu);kr.debug(`Firestore (${zs}): ${n}`,...e)}}function Kt(n,...t){if(kr.logLevel<=yt.ERROR){const e=t.map(Pu);kr.error(`Firestore (${zs}): ${n}`,...e)}}function to(n,...t){if(kr.logLevel<=yt.WARN){const e=t.map(Pu);kr.warn(`Firestore (${zs}): ${n}`,...e)}}function Pu(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,_g(n,r,e)}function _g(n,t,e){let r=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Kt(r),new Error(r)}function et(n,t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,n||_g(t,s,r)}function Z(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ks{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ce.UNAUTHENTICATED)))}shutdown(){}}class dv{constructor(t){this.t=t,this.currentUser=ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){et(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,t.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new hv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return et(t===null||typeof t=="string",2055,{h:t}),new ce(t)}}class pv{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mv{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new pv(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ce.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gv{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,XA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){et(this.o===void 0,3512);const r=i=>{i.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pd(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(et(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new pd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=_v(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<e&&(r+=t.charAt(s[i]%62))}return r}}function lt(n,t){return n<t?-1:n>t?1:0}function Dc(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const s=n.charAt(r),i=t.charAt(r);if(s!==i)return sc(s)===sc(i)?lt(s,i):sc(s)?1:-1}return lt(n.length,t.length)}const yv=55296,Iv=57343;function sc(n){const t=n.charCodeAt(0);return t>=yv&&t<=Iv}function As(n,t,e){return n.length===t.length&&n.every(((r,s)=>e(r,t[s])))}function yg(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="__name__";class Xe{constructor(t,e,r){e===void 0?e=0:e>t.length&&J(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&J(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Xe.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xe?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const i=Xe.compareSegments(t.get(s),e.get(s));if(i!==0)return i}return lt(t.length,e.length)}static compareSegments(t,e){const r=Xe.isNumericId(t),s=Xe.isNumericId(e);return r&&!s?-1:!r&&s?1:r&&s?Xe.extractNumericId(t).compare(Xe.extractNumericId(e)):Dc(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Kn.fromString(t.substring(4,t.length-2))}}class At extends Xe{construct(t,e,r){return new At(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new K(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((s=>s.length>0)))}return new At(e)}static emptyPath(){return new At([])}}const Ev=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Xe{construct(t,e,r){return new Lt(t,e,r)}static isValidIdentifier(t){return Ev.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===md}static keyField(){return new Lt([md])}static fromServerFormat(t){const e=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let o=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new K(N.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lt(e)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(At.fromString(t))}static fromName(t){return new Q(At.fromString(t).popFirst(5))}static empty(){return new Q(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&At.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return At.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new At(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(n,t,e){if(!e)throw new K(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Tv(n,t,e,r){if(t===!0&&r===!0)throw new K(N.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function gd(n){if(!Q.isDocumentKey(n))throw new K(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _d(n){if(Q.isDocumentKey(n))throw new K(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Eg(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":J(12329,{type:typeof n})}function xr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new K(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=tl(n);throw new K(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,t){const e={typeString:n};return t&&(e.value=t),e}function _o(n,t){if(!Eg(n))throw new K(N.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){e=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){e=`Expected '${r}' field to equal '${i.value}'`;break}}if(e)throw new K(N.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=-62135596800,Id=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(t){return bt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*Id);return new bt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new K(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new K(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<yd)throw new K(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new K(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Id}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(_o(t,bt._jsonSchema))return new bt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-yd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Wt("string",bt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new bt(0,0))}static max(){return new rt(new bt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=-1;class va{constructor(t,e,r,s){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=s}}function Nc(n){return n.fields.find((t=>t.kind===2))}function Er(n){return n.fields.filter((t=>t.kind!==2))}va.UNKNOWN_ID=-1;class ta{constructor(t,e){this.fieldPath=t,this.kind=e}}class eo{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new eo(0,Oe.min())}}function Tg(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new bt(e+1,0):new bt(e,r));return new Oe(s,Q.empty(),t)}function Ag(n){return new Oe(n.readTime,n.key,vs)}class Oe{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Oe(rt.min(),Q.empty(),vs)}static max(){return new Oe(rt.max(),Q.empty(),vs)}}function Vu(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Q.comparator(n.documentKey,t.documentKey),e!==0?e:lt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function er(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==vg)throw n;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new R(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(e,i).next(r,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof R?e:R.resolve(e)}catch(e){return R.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):R.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):R.reject(e)}static resolve(t){return new R(((e,r)=>{e(t)}))}static reject(t){return new R(((e,r)=>{r(t)}))}static waitFor(t){return new R(((e,r)=>{let s=0,i=0,o=!1;t.forEach((l=>{++s,l.next((()=>{++i,o&&i===s&&e()}),(c=>r(c)))})),o=!0,i===s&&e()}))}static or(t){let e=R.resolve(!1);for(const r of t)e=e.next((s=>s?R.resolve(s):r()));return e}static forEach(t,e){const r=[];return t.forEach(((s,i)=>{r.push(e.call(this,s,i))})),this.waitFor(r)}static mapArray(t,e){return new R(((r,s)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;e(t[h]).next((f=>{o[h]=f,++l,l===i&&r(o)}),(f=>s(f)))}}))}static doWhile(t,e){return new R(((r,s)=>{const i=()=>{t()===!0?e().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe="SimpleDb";class el{static open(t,e,r,s){try{return new el(e,t.transaction(s,r))}catch(i){throw new Ni(e,i)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new zn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Ni(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=xu(r.target.error);this.S.reject(new Ni(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(F(xe,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new vv(e)}}class qn{static delete(t){return F(xe,"Removing database:",t),wr(Jm().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!sg())return!1;if(qn.F())return!0;const t=Ea(),e=qn.M(t),r=0<e&&e<10,s=bg(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,qn.M(Ea())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(F(xe,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;e(o)},s.onblocked=()=>{r(new Ni(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ni(t,o))},s.onupgradeneeded=i=>{F(xe,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{F(xe,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,s){const i=e==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(t);const l=el.open(this.db,t,i?"readonly":"readwrite",r),c=s(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),R.reject(h)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,h=c.name!=="FirebaseError"&&o<3;if(F(xe,"Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bg(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class Av{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return wr(this.U.delete())}}class Ni extends K{constructor(t,e){super(N.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function nr(n){return n.name==="IndexedDbTransactionError"}class vv{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(F(xe,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(F(xe,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),wr(r)}add(t){return F(xe,"ADD",this.store.name,t,t),wr(this.store.add(t))}get(t){return wr(this.store.get(t)).next((e=>(e===void 0&&(e=null),F(xe,"GET",this.store.name,t,e),e)))}delete(t){return F(xe,"DELETE",this.store.name,t),wr(this.store.delete(t))}count(){return F(xe,"COUNT",this.store.name),wr(this.store.count())}J(t,e){const r=this.options(t,e),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new R(((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((l,c)=>{o.push(c)})).next((()=>o))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new R(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(t,e){F(xe,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,l)=>l.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const s=this.cursor(r);return this.H(s,e)}te(t){const e=this.cursor({});return new R(((r,s)=>{e.onerror=i=>{const o=xu(i.target.error);s(o)},e.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next((l=>{l?o.continue():r()})):r()}}))}H(t,e){const r=[];return new R(((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const c=new Av(l),h=e(l.primaryKey,l.value,c);if(h instanceof R){const f=h.catch((p=>(c.done(),R.reject(p))));r.push(f)}c.isDone?s():c.G===null?l.continue():l.continue(c.G)}})).next((()=>R.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function wr(n){return new R(((t,e)=>{n.onsuccess=r=>{const s=r.target.result;t(s)},n.onerror=r=>{const s=xu(r.target.error);e(s)}}))}let Ed=!1;function xu(n){const t=qn.M(Ea());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ed||(Ed=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Mi="IndexBackfiller";class wv{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){F(Mi,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();F(Mi,`Documents written: ${e}`)}catch(e){nr(e)?F(Mi,"Ignoring IndexedDB error during index backfill: ",e):await er(e)}await this.re(6e4)}))}}class bv{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let s=e,i=!0;return R.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((o=>{if(o!==null&&!r.has(o))return F(Mi,`Processing collection: ${o}`),this.oe(t,o,s).next((l=>{s-=l,r.add(o)}));i=!1})))).next((()=>e-s))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((s=>this.localStore.localDocuments.getNextDocuments(t,e,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next((()=>this._e(s,i))).next((l=>(F(Mi,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(t,e,l)))).next((()=>o.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((s,i)=>{const o=Ag(i);Vu(o,r)>0&&(r=o)})),new Oe(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}we.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=-1;function nl(n){return n==null}function no(n){return n===0&&1/n==-1/0}function Sg(n){return typeof n=="number"&&Number.isInteger(n)&&!no(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="";function ge(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Td(t)),t=Sv(n.get(e),t);return Td(t)}function Sv(n,t){let e=t;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":e+="";break;case wa:e+="";break;default:e+=i}}return e}function Td(n){return n+wa+""}function Ze(n){const t=n.length;if(et(t>=2,64408,{path:n}),t===2)return et(n.charAt(0)===wa&&n.charAt(1)==="",56145,{path:n}),At.emptyPath();const e=t-2,r=[];let s="";for(let i=0;i<t;){const o=n.indexOf(wa,i);switch((o<0||o>e)&&J(50515,{path:n}),n.charAt(o+1)){case"":const l=n.substring(i,o);let c;s.length===0?c=l:(s+=l,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:J(61167,{path:n})}i=o+2}return new At(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="remoteDocuments",yo="owner",Jr="owner",ro="mutationQueues",Rv="userId",Ke="mutations",Ad="batchId",Pr="userMutationsIndex",vd=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n,t){return[n,ge(t)]}function Rg(n,t,e){return[n,ge(t),e]}const Pv={},ws="documentMutations",ba="remoteDocumentsV14",Cv=["prefixPath","collectionGroup","readTime","documentId"],na="documentKeyIndex",Vv=["prefixPath","collectionGroup","documentId"],Pg="collectionGroupIndex",xv=["collectionGroup","readTime","prefixPath","documentId"],so="remoteDocumentGlobal",Mc="remoteDocumentGlobalKey",bs="targets",Cg="queryTargetsIndex",Dv=["canonicalId","targetId"],Ss="targetDocuments",Nv=["targetId","path"],Du="documentTargetsIndex",Mv=["path","targetId"],Sa="targetGlobalKey",Nr="targetGlobal",io="collectionParents",Ov=["collectionId","parent"],Rs="clientMetadata",kv="clientId",rl="bundles",Fv="bundleId",sl="namedQueries",Lv="name",Nu="indexConfiguration",Bv="indexId",Oc="collectionGroupIndex",Uv="collectionGroup",Oi="indexState",jv=["indexId","uid"],Vg="sequenceNumberIndex",Kv=["uid","sequenceNumber"],ki="indexEntries",zv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xg="documentKeyIndex",qv=["indexId","uid","orderedDocumentKey"],il="documentOverlays",Gv=["userId","collectionPath","documentId"],kc="collectionPathOverlayIndex",Hv=["userId","collectionPath","largestBatchId"],Dg="collectionGroupOverlayIndex",Qv=["userId","collectionGroup","largestBatchId"],Mu="globals",Wv="name",Ng=[ro,Ke,ws,Tr,bs,yo,Nr,Ss,Rs,so,io,rl,sl],$v=[...Ng,il],Mg=[ro,Ke,ws,ba,bs,yo,Nr,Ss,Rs,so,io,rl,sl,il],Og=Mg,Ou=[...Og,Nu,Oi,ki],Xv=Ou,kg=[...Ou,Mu],Yv=kg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends wg{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Yt(n,t){const e=Z(n);return qn.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function rr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Fg(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,e){this.comparator=t,this.root=e||ne.EMPTY}insert(t,e){return new Mt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ne.BLACK,null,null))}remove(t){return new Mt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ne.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return e+r.left.size;s<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new jo(this.root,t,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new jo(this.root,t,this.comparator,!0)}}class jo{constructor(t,e,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?r(t.key,e):1,e&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ne{constructor(t,e,r,s,i){this.key=t,this.value=e,this.color=r??ne.RED,this.left=s??ne.EMPTY,this.right=i??ne.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,s,i){return new ne(t??this.key,e??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,r),null):i===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ne.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return ne.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw J(27949);return t+(this.isRed()?0:1)}}ne.EMPTY=null,ne.RED=!0,ne.BLACK=!1;ne.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(t,e,r,s,i){return this}insert(t,e,r){return new ne(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.comparator=t,this.data=new Mt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new bd(this.data.getIterator())}getIteratorFrom(t){return new bd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Rt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Rt(this.comparator);return e.data=t,e}}class bd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zr(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.fields=t,t.sort(Lt.comparator)}static empty(){return new be([])}unionWith(t){let e=new Rt(Lt.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new be(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return As(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Lg("Invalid base64 string: "+i):i}})(t);return new Gt(e)}static fromUint8Array(t){const e=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(t);return new Gt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const Jv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function In(n){if(et(!!n,39018),typeof n=="string"){let t=0;const e=Jv.exec(n);if(et(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function En(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="server_timestamp",Ug="__type__",jg="__previous_value__",Kg="__local_write_time__";function ku(n){return(n?.mapValue?.fields||{})[Ug]?.stringValue===Bg}function ol(n){const t=n.mapValue.fields[jg];return ku(t)?ol(t):t}function oo(n){const t=In(n.mapValue.fields[Kg].timestampValue);return new bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,e,r,s,i,o,l,c,h,f){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const Ra="(default)";class Fr{constructor(t,e){this.projectId=t,this.database=e||Ra}static empty(){return new Fr("","")}get isDefaultDatabase(){return this.database===Ra}isEqual(t){return t instanceof Fr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="__type__",zg="__max__",Bn={mapValue:{fields:{__type__:{stringValue:zg}}}},Lu="__vector__",Ps="value",ra={nullValue:"NULL_VALUE"};function Yn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ku(n)?4:qg(n)?9007199254740991:al(n)?10:11:J(28295,{value:n})}function on(n,t){if(n===t)return!0;const e=Yn(n);if(e!==Yn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return oo(n).isEqual(oo(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=In(s.timestampValue),l=In(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,i){return En(s.bytesValue).isEqual(En(i.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ft(s.geoPointValue.latitude)===Ft(i.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(i.geoPointValue.longitude)})(n,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ft(s.integerValue)===Ft(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ft(s.doubleValue),l=Ft(i.doubleValue);return o===l?no(o)===no(l):isNaN(o)&&isNaN(l)}return!1})(n,t);case 9:return As(n.arrayValue.values||[],t.arrayValue.values||[],on);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(wd(o)!==wd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!on(o[c],l[c])))return!1;return!0})(n,t);default:return J(52216,{left:n})}}function ao(n,t){return(n.values||[]).find((e=>on(e,t)))!==void 0}function Jn(n,t){if(n===t)return 0;const e=Yn(n),r=Yn(t);if(e!==r)return lt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,t.booleanValue);case 2:return(function(i,o){const l=Ft(i.integerValue||i.doubleValue),c=Ft(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,t);case 3:return Sd(n.timestampValue,t.timestampValue);case 4:return Sd(oo(n),oo(t));case 5:return Dc(n.stringValue,t.stringValue);case 6:return(function(i,o){const l=En(i),c=En(o);return l.compareTo(c)})(n.bytesValue,t.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=lt(l[h],c[h]);if(f!==0)return f}return lt(l.length,c.length)})(n.referenceValue,t.referenceValue);case 8:return(function(i,o){const l=lt(Ft(i.latitude),Ft(o.latitude));return l!==0?l:lt(Ft(i.longitude),Ft(o.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return Rd(n.arrayValue,t.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},h=l[Ps]?.arrayValue,f=c[Ps]?.arrayValue,p=lt(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Rd(h,f)})(n.mapValue,t.mapValue);case 11:return(function(i,o){if(i===Bn.mapValue&&o===Bn.mapValue)return 0;if(i===Bn.mapValue)return 1;if(o===Bn.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const E=Dc(c[p],f[p]);if(E!==0)return E;const T=Jn(l[c[p]],h[f[p]]);if(T!==0)return T}return lt(c.length,f.length)})(n.mapValue,t.mapValue);default:throw J(23264,{he:e})}}function Sd(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return lt(n,t);const e=In(n),r=In(t),s=lt(e.seconds,r.seconds);return s!==0?s:lt(e.nanos,r.nanos)}function Rd(n,t){const e=n.values||[],r=t.values||[];for(let s=0;s<e.length&&s<r.length;++s){const i=Jn(e[s],r[s]);if(i)return i}return lt(e.length,r.length)}function Cs(n){return Lc(n)}function Lc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const r=In(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return En(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Q.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",s=!0;for(const i of e.values||[])s?s=!1:r+=",",r+=Lc(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){const r=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lc(e.fields[o])}`;return s+"}"})(n.mapValue):J(61005,{value:n})}function sa(n){switch(Yn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ol(n);return t?16+sa(t):16;case 5:return 2*n.stringValue.length;case 6:return En(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+sa(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return rr(r.fields,((i,o)=>{s+=i.length+sa(o)})),s})(n.mapValue);default:throw J(13486,{value:n})}}function lo(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Bc(n){return!!n&&"integerValue"in n}function co(n){return!!n&&"arrayValue"in n}function Pd(n){return!!n&&"nullValue"in n}function Cd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ia(n){return!!n&&"mapValue"in n}function al(n){return(n?.mapValue?.fields||{})[Fu]?.stringValue===Lu}function Fi(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return rr(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Fi(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Fi(n.arrayValue.values[e]);return t}return{...n}}function qg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zg}const Gg={mapValue:{fields:{[Fu]:{stringValue:Lu},[Ps]:{arrayValue:{}}}}};function tw(n){return"nullValue"in n?ra:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lo(Fr.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?al(n)?Gg:{mapValue:{}}:J(35942,{value:n})}function ew(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lo(Fr.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Gg:"mapValue"in n?al(n)?{mapValue:{}}:Bn:J(61959,{value:n})}function Vd(n,t){const e=Jn(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function xd(n,t){const e=Jn(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.value=t}static empty(){return new de({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!ia(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fi(e)}setAll(t){let e=Lt.emptyPath(),r={},s=[];t.forEach(((o,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,r,s),r={},s=[],e=l.popLast()}o?r[l.lastSegment()]=Fi(o):s.push(l.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,r,s)}delete(t){const e=this.field(t.popLast());ia(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return on(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=e.mapValue.fields[t.get(r)];ia(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,r){rr(e,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new de(Fi(this.value))}}function Hg(n){const t=[];return rr(n.fields,((e,r)=>{const s=new Lt([e]);if(ia(r)){const i=Hg(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)})),new be(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t,e,r,s,i,o,l){this.key=t,this.documentType=e,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new jt(t,0,rt.min(),rt.min(),rt.min(),de.empty(),0)}static newFoundDocument(t,e,r,s){return new jt(t,1,e,rt.min(),r,s,0)}static newNoDocument(t,e){return new jt(t,2,e,rt.min(),rt.min(),de.empty(),0)}static newUnknownDocument(t,e){return new jt(t,3,e,rt.min(),rt.min(),de.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=de.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=de.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof jt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,e){this.position=t,this.inclusive=e}}function Dd(n,t,e){let r=0;for(let s=0;s<n.position.length;s++){const i=t[s],o=n.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),e.key):r=Jn(o,e.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nd(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!on(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,e="asc"){this.field=t,this.dir=e}}function nw(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{}class mt extends Qg{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new rw(t,e,r):e==="array-contains"?new ow(t,r):e==="in"?new Zg(t,r):e==="not-in"?new aw(t,r):e==="array-contains-any"?new lw(t,r):new mt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new sw(t,r):new iw(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Jn(e,this.value)):e!==null&&Yn(this.value)===Yn(e)&&this.matchesComparison(Jn(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends Qg{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new St(t,e)}matches(t){return xs(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xs(n){return n.op==="and"}function Uc(n){return n.op==="or"}function Bu(n){return Wg(n)&&xs(n)}function Wg(n){for(const t of n.filters)if(t instanceof St)return!1;return!0}function jc(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+Cs(n.value);if(Bu(n))return n.filters.map((t=>jc(t))).join(",");{const t=n.filters.map((e=>jc(e))).join(",");return`${n.op}(${t})`}}function $g(n,t){return n instanceof mt?(function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&on(r.value,s.value)})(n,t):n instanceof St?(function(r,s){return s instanceof St&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,l)=>i&&$g(o,s.filters[l])),!0):!1})(n,t):void J(19439)}function Xg(n,t){const e=n.filters.concat(t);return St.create(e,n.op)}function Yg(n){return n instanceof mt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Cs(e.value)}`})(n):n instanceof St?(function(e){return e.op.toString()+" {"+e.getFilters().map(Yg).join(" ,")+"}"})(n):"Filter"}class rw extends mt{constructor(t,e,r){super(t,e,r),this.key=Q.fromName(r.referenceValue)}matches(t){const e=Q.comparator(t.key,this.key);return this.matchesComparison(e)}}class sw extends mt{constructor(t,e){super(t,"in",e),this.keys=Jg("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class iw extends mt{constructor(t,e){super(t,"not-in",e),this.keys=Jg("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Jg(n,t){return(t.arrayValue?.values||[]).map((e=>Q.fromName(e.referenceValue)))}class ow extends mt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return co(e)&&ao(e.arrayValue,this.value)}}class Zg extends mt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ao(this.value.arrayValue,e)}}class aw extends mt{constructor(t,e){super(t,"not-in",e)}matches(t){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!ao(this.value.arrayValue,e)}}class lw extends mt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!co(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>ao(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,e=null,r=[],s=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Kc(n,t=null,e=[],r=[],s=null,i=null,o=null){return new cw(n,t,e,r,s,i,o)}function Lr(n){const t=Z(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>jc(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),nl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Cs(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Cs(r))).join(",")),t.Te=e}return t.Te}function Io(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!nw(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!$g(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Nd(n.startAt,t.startAt)&&Nd(n.endAt,t.endAt)}function Pa(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ca(n,t){return n.filters.filter((e=>e instanceof mt&&e.field.isEqual(t)))}function Md(n,t,e){let r=ra,s=!0;for(const i of Ca(n,t)){let o=ra,l=!0;switch(i.op){case"<":case"<=":o=tw(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=ra}Vd({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(e!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(t)){const o=e.position[i];Vd({value:r,inclusive:s},{value:o,inclusive:e.inclusive})<0&&(r=o,s=e.inclusive);break}}return{value:r,inclusive:s}}function Od(n,t,e){let r=Bn,s=!0;for(const i of Ca(n,t)){let o=Bn,l=!0;switch(i.op){case">=":case">":o=ew(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=Bn}xd({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(e!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(t)){const o=e.position[i];xd({value:r,inclusive:s},{value:o,inclusive:e.inclusive})>0&&(r=o,s=e.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,e=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t_(n,t,e,r,s,i,o,l){return new qs(n,t,e,r,s,i,o,l)}function ll(n){return new qs(n)}function kd(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function e_(n){return n.collectionGroup!==null}function Li(n){const t=Z(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Rt(Lt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(t).forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new uo(i,r))})),e.has(Lt.keyField().canonicalString())||t.Ie.push(new uo(Lt.keyField(),r))}return t.Ie}function Me(n){const t=Z(n);return t.Ee||(t.Ee=uw(t,Li(n))),t.Ee}function uw(n,t){if(n.limitType==="F")return Kc(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new uo(s.field,i)}));const e=n.endAt?new Vs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vs(n.startAt.position,n.startAt.inclusive):null;return Kc(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function zc(n,t){const e=n.filters.concat([t]);return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Va(n,t,e){return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function cl(n,t){return Io(Me(n),Me(t))&&n.limitType===t.limitType}function n_(n){return`${Lr(Me(n))}|lt:${n.limitType}`}function ls(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((s=>Yg(s))).join(", ")}]`),nl(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>Cs(s))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>Cs(s))).join(",")),`Target(${r})`})(Me(n))}; limitType=${n.limitType})`}function Eo(n,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,t)&&(function(r,s){for(const i of Li(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,t)&&(function(r,s){return!(r.startAt&&!(function(o,l,c){const h=Dd(o,l,c);return o.inclusive?h<=0:h<0})(r.startAt,Li(r),s)||r.endAt&&!(function(o,l,c){const h=Dd(o,l,c);return o.inclusive?h>=0:h>0})(r.endAt,Li(r),s))})(n,t)}function r_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s_(n){return(t,e)=>{let r=!1;for(const s of Li(n)){const i=hw(s,t,e);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function hw(n,t,e){const r=n.field.isKeyField()?Q.comparator(t.key,e.key):(function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Jn(c,h):J(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[e]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){rr(this.inner,((e,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return Fg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Mt(Q.comparator);function Ne(){return fw}const i_=new Mt(Q.comparator);function vi(...n){let t=i_;for(const e of n)t=t.insert(e.key,e);return t}function o_(n){let t=i_;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function tn(){return Bi()}function a_(){return Bi()}function Bi(){return new vn((n=>n.toString()),((n,t)=>n.isEqual(t)))}const dw=new Mt(Q.comparator),pw=new Rt(Q.comparator);function ht(...n){let t=pw;for(const e of n)t=t.add(e);return t}const mw=new Rt(lt);function Uu(){return mw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(t)?"-0":t}}function l_(n){return{integerValue:""+n}}function gw(n,t){return Sg(t)?l_(t):ju(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this._=void 0}}function _w(n,t,e){return n instanceof Ds?(function(s,i){const o={fields:{[Ug]:{stringValue:Bg},[Kg]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ku(i)&&(i=ol(i)),i&&(o.fields[jg]=i),{mapValue:o}})(e,t):n instanceof Ns?u_(n,t):n instanceof Ms?h_(n,t):(function(s,i){const o=c_(s,i),l=Fd(o)+Fd(s.Ae);return Bc(o)&&Bc(s.Ae)?l_(l):ju(s.serializer,l)})(n,t)}function yw(n,t,e){return n instanceof Ns?u_(n,t):n instanceof Ms?h_(n,t):e}function c_(n,t){return n instanceof ho?(function(r){return Bc(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ds extends ul{}class Ns extends ul{constructor(t){super(),this.elements=t}}function u_(n,t){const e=f_(t);for(const r of n.elements)e.some((s=>on(s,r)))||e.push(r);return{arrayValue:{values:e}}}class Ms extends ul{constructor(t){super(),this.elements=t}}function h_(n,t){let e=f_(t);for(const r of n.elements)e=e.filter((s=>!on(s,r)));return{arrayValue:{values:e}}}class ho extends ul{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Fd(n){return Ft(n.integerValue||n.doubleValue)}function f_(n){return co(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,e){this.field=t,this.transform=e}}function Iw(n,t){return n.field.isEqual(t.field)&&(function(r,s){return r instanceof Ns&&s instanceof Ns||r instanceof Ms&&s instanceof Ms?As(r.elements,s.elements,on):r instanceof ho&&s instanceof ho?on(r.Ae,s.Ae):r instanceof Ds&&s instanceof Ds})(n.transform,t.transform)}class Ew{constructor(t,e){this.version=t,this.transformResults=e}}class Te{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Te}static exists(t){return new Te(void 0,t)}static updateTime(t){return new Te(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function oa(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class hl{}function p_(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new fl(n.key,Te.none()):new Gs(n.key,n.data,Te.none());{const e=n.data,r=de.empty();let s=new Rt(Lt.comparator);for(let i of t.fields)if(!s.has(i)){let o=e.field(i);o===null&&i.length>1&&(i=i.popLast(),o=e.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wn(n.key,r,new be(s.toArray()),Te.none())}}function Tw(n,t,e){n instanceof Gs?(function(s,i,o){const l=s.value.clone(),c=Bd(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,t,e):n instanceof wn?(function(s,i,o){if(!oa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Bd(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(m_(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,t,e):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,e)}function Ui(n,t,e,r){return n instanceof Gs?(function(i,o,l,c){if(!oa(i.precondition,o))return l;const h=i.value.clone(),f=Ud(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,t,e,r):n instanceof wn?(function(i,o,l,c){if(!oa(i.precondition,o))return l;const h=Ud(i.fieldTransforms,c,o),f=o.data;return f.setAll(m_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(n,t,e,r):(function(i,o,l){return oa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(n,t,e)}function Aw(n,t){let e=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),i=c_(r.transform,s||null);i!=null&&(e===null&&(e=de.empty()),e.set(r.field,i))}return e||null}function Ld(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&As(r,s,((i,o)=>Iw(i,o)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Gs extends hl{constructor(t,e,r,s=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wn extends hl{constructor(t,e,r,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function m_(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}})),t}function Bd(n,t,e){const r=new Map;et(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const i=n[s],o=i.transform,l=t.data.field(i.field);r.set(i.field,yw(o,l,e[s]))}return r}function Ud(n,t,e){const r=new Map;for(const s of n){const i=s.transform,o=e.data.field(s.field);r.set(s.field,_w(i,o,t))}return r}class fl extends hl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g_ extends hl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,e,r,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&Tw(i,t,r[s])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Ui(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Ui(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=a_();return this.mutations.forEach((s=>{const i=t.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=e.has(s.key)?null:l;const c=p_(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ht())}isEqual(t){return this.batchId===t.batchId&&As(this.mutations,t.mutations,((e,r)=>Ld(e,r)))&&As(this.baseMutations,t.baseMutations,((e,r)=>Ld(e,r)))}}class zu{constructor(t,e,r,s){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=s}static from(t,e,r){et(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return dw})();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zu(t,e,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,gt;function ww(n){switch(n){case N.OK:return J(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return J(15467,{code:n})}}function __(n){if(n===void 0)return Kt("GRPC error has no .code"),N.UNKNOWN;switch(n){case Qt.OK:return N.OK;case Qt.CANCELLED:return N.CANCELLED;case Qt.UNKNOWN:return N.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return N.INTERNAL;case Qt.UNAVAILABLE:return N.UNAVAILABLE;case Qt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Qt.NOT_FOUND:return N.NOT_FOUND;case Qt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Qt.ABORTED:return N.ABORTED;case Qt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Qt.DATA_LOSS:return N.DATA_LOSS;default:return J(39323,{code:n})}}(gt=Qt||(Qt={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Kn([4294967295,4294967295],0);function jd(n){const t=bw().encode(n),e=new hg;return e.update(t),new Uint8Array(e.digest())}function Kd(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Kn([e,r],0),new Kn([s,i],0)]}class Gu{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new wi(`Invalid padding: ${e}`);if(r<0)throw new wi(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wi(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new wi(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Kn.fromNumber(this.ge)}ye(t,e,r){let s=t.add(e.multiply(Kn.fromNumber(r)));return s.compare(Sw)===1&&(s=new Kn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=jd(t),[r,s]=Kd(e);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(t,e,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Gu(i,s,e);return r.forEach((l=>o.insert(l))),o}insert(t){if(this.ge===0)return;const e=jd(t),[r,s]=Kd(e);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,e,r,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const s=new Map;return s.set(t,Ao.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new To(rt.min(),s,new Mt(lt),Ne(),ht())}}class Ao{constructor(t,e,r,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Ao(r,e,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t,e,r,s){this.be=t,this.removedTargetIds=e,this.key=r,this.De=s}}class y_{constructor(t,e){this.targetId=t,this.Ce=e}}class I_{constructor(t,e,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=s}}class zd{constructor(){this.ve=0,this.Fe=qd(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ht(),e=ht(),r=ht();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}})),new Ao(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=qd()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Rw{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ne(),this.Je=Ko(),this.He=Ko(),this.Ye=new Mt(lt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:J(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,r=t.Ce.count,s=this.ot(e);if(s){const i=s.target;if(Pa(i))if(r===0){const o=new Q(i.path);this.et(e,o,jt.newNoDocument(o,rt.min()))}else et(r===1,20013,{expectedCount:r});else{const o=this._t(e);if(o!==r){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(e);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=e;let o,l;try{o=En(r).toUint8Array()}catch(c){if(c instanceof Lg)return to("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gu(o,s,i)}catch(c){return to(c instanceof wi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(e,i,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Pa(l.target)){const c=new Q(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,jt.newNoDocument(c,t))}i.Be&&(e.set(o,i.ke()),i.qe())}}));let r=ht();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(t)));const s=new To(t,e,this.Ye,this.je,r);return this.je=Ne(),this.Je=Ko(),this.He=Ko(),this.Ye=new Mt(lt),s}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new zd,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Rt(lt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Rt(lt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||F("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zd),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Ko(){return new Mt(Q.comparator)}function qd(){return new Mt(Q.comparator)}const Pw={asc:"ASCENDING",desc:"DESCENDING"},Cw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vw={and:"AND",or:"OR"};class xw{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function qc(n,t){return n.useProto3Json||nl(t)?t:{value:t}}function Os(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E_(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Dw(n,t){return Os(n,t.toTimestamp())}function Ae(n){return et(!!n,49232),rt.fromTimestamp((function(e){const r=In(e);return new bt(r.seconds,r.nanos)})(n))}function Hu(n,t){return Gc(n,t).canonicalString()}function Gc(n,t){const e=(function(s){return new At(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function T_(n){const t=At.fromString(n);return et(V_(t),10190,{key:t.toString()}),t}function xa(n,t){return Hu(n.databaseId,t.path)}function Mr(n,t){const e=T_(t);if(e.get(1)!==n.databaseId.projectId)throw new K(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new K(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Q(w_(e))}function A_(n,t){return Hu(n.databaseId,t)}function v_(n){const t=T_(n);return t.length===4?At.emptyPath():w_(t)}function Hc(n){return new At(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w_(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gd(n,t,e){return{name:xa(n,t),fields:e.value.mapValue.fields}}function Nw(n,t,e){const r=Mr(n,t.name),s=Ae(t.updateTime),i=t.createTime?Ae(t.createTime):rt.min(),o=new de({mapValue:{fields:t.fields}}),l=jt.newFoundDocument(r,s,i,o);return e&&l.setHasCommittedMutations(),e?l.setHasCommittedMutations():l}function Mw(n,t){let e;if("targetChange"in t){t.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J(39313,{state:h})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(et(f===void 0||typeof f=="string",58123),Gt.fromBase64String(f||"")):(et(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Gt.fromUint8Array(f||new Uint8Array))})(n,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&(function(h){const f=h.code===void 0?N.UNKNOWN:__(h.code);return new K(f,h.message||"")})(o);e=new I_(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mr(n,r.document.name),i=Ae(r.document.updateTime),o=r.document.createTime?Ae(r.document.createTime):rt.min(),l=new de({mapValue:{fields:r.document.fields}}),c=jt.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];e=new aa(h,f,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Mr(n,r.document),i=r.readTime?Ae(r.readTime):rt.min(),o=jt.newNoDocument(s,i),l=r.removedTargetIds||[];e=new aa([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Mr(n,r.document),i=r.removedTargetIds||[];e=new aa([],i,s,null)}else{if(!("filter"in t))return J(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vw(s,i),l=r.targetId;e=new y_(l,o)}}return e}function Da(n,t){let e;if(t instanceof Gs)e={update:Gd(n,t.key,t.value)};else if(t instanceof fl)e={delete:xa(n,t.key)};else if(t instanceof wn)e={update:Gd(n,t.key,t.data),updateMask:Uw(t.fieldMask)};else{if(!(t instanceof g_))return J(16599,{Vt:t.type});e={verify:xa(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(i,o){const l=o.transform;if(l instanceof Ds)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ns)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ms)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ho)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:Dw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)})(n,t.precondition)),e}function Qc(n,t){const e=t.currentDocument?(function(i){return i.updateTime!==void 0?Te.updateTime(Ae(i.updateTime)):i.exists!==void 0?Te.exists(i.exists):Te.none()})(t.currentDocument):Te.none(),r=t.updateTransforms?t.updateTransforms.map((s=>(function(o,l){let c=null;if("setToServerValue"in l)et(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Ds;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];c=new Ns(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];c=new Ms(f)}else"increment"in l?c=new ho(o,l.increment):J(16584,{proto:l});const h=Lt.fromServerFormat(l.fieldPath);return new d_(h,c)})(n,s))):[];if(t.update){t.update.name;const s=Mr(n,t.update.name),i=new de({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=(function(c){const h=c.fieldPaths||[];return new be(h.map((f=>Lt.fromServerFormat(f))))})(t.updateMask);return new wn(s,i,o,e,r)}return new Gs(s,i,e,r)}if(t.delete){const s=Mr(n,t.delete);return new fl(s,e)}if(t.verify){const s=Mr(n,t.verify);return new g_(s,e)}return J(1463,{proto:t})}function Ow(n,t){return n&&n.length>0?(et(t!==void 0,14353),n.map((e=>(function(s,i){let o=s.updateTime?Ae(s.updateTime):Ae(i);return o.isEqual(rt.min())&&(o=Ae(i)),new Ew(o,s.transformResults||[])})(e,t)))):[]}function b_(n,t){return{documents:[A_(n,t.path)]}}function S_(n,t){const e={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=A_(n,s);const i=(function(h){if(h.length!==0)return C_(St.create(h,"and"))})(t.filters);i&&(e.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(E){return{field:cs(E.field),direction:Fw(E.dir)}})(f)))})(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=qc(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(t.endAt)),{ft:e,parent:s}}function R_(n){let t=v_(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let s=null;if(r>0){et(r===1,65062);const f=e.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let i=[];e.where&&(i=(function(p){const E=P_(p);return E instanceof St&&Bu(E)?E.getFilters():[E]})(e.where));let o=[];e.orderBy&&(o=(function(p){return p.map((E=>(function(C){return new uo(us(C.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(E)))})(e.orderBy));let l=null;e.limit&&(l=(function(p){let E;return E=typeof p=="object"?p.value:p,nl(E)?null:E})(e.limit));let c=null;e.startAt&&(c=(function(p){const E=!!p.before,T=p.values||[];return new Vs(T,E)})(e.startAt));let h=null;return e.endAt&&(h=(function(p){const E=!p.before,T=p.values||[];return new Vs(T,E)})(e.endAt)),t_(t,s,o,i,l,"F",c,h)}function kw(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function P_(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=us(e.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=us(e.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=us(e.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=us(e.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}})(n):n.fieldFilter!==void 0?(function(e){return mt.create(us(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return St.create(e.compositeFilter.filters.map((r=>P_(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}})(e.compositeFilter.op))})(n):J(30097,{filter:n})}function Fw(n){return Pw[n]}function Lw(n){return Cw[n]}function Bw(n){return Vw[n]}function cs(n){return{fieldPath:n.canonicalString()}}function us(n){return Lt.fromServerFormat(n.fieldPath)}function C_(n){return n instanceof mt?(function(e){if(e.op==="=="){if(Cd(e.value))return{unaryFilter:{field:cs(e.field),op:"IS_NAN"}};if(Pd(e.value))return{unaryFilter:{field:cs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Cd(e.value))return{unaryFilter:{field:cs(e.field),op:"IS_NOT_NAN"}};if(Pd(e.value))return{unaryFilter:{field:cs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(e.field),op:Lw(e.op),value:e.value}}})(n):n instanceof St?(function(e){const r=e.getFilters().map((s=>C_(s)));return r.length===1?r[0]:{compositeFilter:{op:Bw(e.op),filters:r}}})(n):J(54877,{filter:n})}function Uw(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function V_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,e,r,s,i=rt.min(),o=rt.min(),l=Gt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t){this.yt=t}}function jw(n,t){let e;if(t.document)e=Nw(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Q.fromSegments(t.noDocument.path),s=Ur(t.noDocument.readTime);e=jt.newNoDocument(r,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return J(56709);{const r=Q.fromSegments(t.unknownDocument.path),s=Ur(t.unknownDocument.version);e=jt.newUnknownDocument(r,s)}}return t.readTime&&e.setReadTime((function(s){const i=new bt(s[0],s[1]);return rt.fromTimestamp(i)})(t.readTime)),e}function Hd(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Na(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(i,o){return{name:xa(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Os(i,o.version.toTimestamp()),createTime:Os(i,o.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Br(t.version)};else{if(!t.isUnknownDocument())return J(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Br(t.version)}}return r}function Na(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Br(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ur(n){const t=new bt(n.seconds,n.nanoseconds);return rt.fromTimestamp(t)}function br(n,t){const e=(t.baseMutations||[]).map((i=>Qc(n.yt,i)));for(let i=0;i<t.mutations.length-1;++i){const o=t.mutations[i];if(i+1<t.mutations.length&&t.mutations[i+1].transform!==void 0){const l=t.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map((i=>Qc(n.yt,i))),s=bt.fromMillis(t.localWriteTimeMs);return new Ku(t.batchId,s,e,r)}function bi(n){const t=Ur(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Ur(n.lastLimboFreeSnapshotVersion):rt.min();let r;return r=(function(i){return i.documents!==void 0})(n.query)?(function(i){const o=i.documents.length;return et(o===1,1966,{count:o}),Me(ll(v_(i.documents[0])))})(n.query):(function(i){return Me(R_(i))})(n.query),new pn(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Gt.fromBase64String(n.resumeToken))}function D_(n,t){const e=Br(t.snapshotVersion),r=Br(t.lastLimboFreeSnapshotVersion);let s;s=Pa(t.target)?b_(n.yt,t.target):S_(n.yt,t.target).ft;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lr(t.target),readTime:e,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function N_(n){const t=R_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Va(t,t.limit,"L"):t}function ic(n,t){return new qu(t.largestBatchId,Qc(n.yt,t.overlayMutation))}function Qd(n,t){const e=t.path.lastSegment();return[n,ge(t.path.popLast()),e]}function Wd(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:Br(r.readTime),documentKey:ge(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{getBundleMetadata(t,e){return $d(t).get(e).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Ur(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(t,e){return $d(t).put((function(s){return{bundleId:s.id,createTime:Br(Ae(s.createTime)),version:s.version}})(e))}getNamedQuery(t,e){return Xd(t).get(e).next((r=>{if(r)return(function(i){return{name:i.name,query:N_(i.bundledQuery),readTime:Ur(i.readTime)}})(r)}))}saveNamedQuery(t,e){return Xd(t).put((function(s){return{name:s.name,readTime:Br(Ae(s.readTime)),bundledQuery:s.bundledQuery}})(e))}}function $d(n){return Yt(n,rl)}function Xd(n){return Yt(n,sl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new dl(t,r)}getOverlay(t,e){return gi(t).get(Qd(this.userId,e)).next((r=>r?ic(this.serializer,r):null))}getOverlays(t,e){const r=tn();return R.forEach(e,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,e,r){const s=[];return r.forEach(((i,o)=>{const l=new qu(e,o);s.push(this.St(t,l))})),R.waitFor(s)}removeOverlaysForBatchId(t,e,r){const s=new Set;e.forEach((o=>s.add(ge(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(gi(t).Z(kc,l))})),R.waitFor(i)}getOverlaysForCollection(t,e,r){const s=tn(),i=ge(e),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return gi(t).J(kc,o).next((l=>{for(const c of l){const h=ic(this.serializer,c);s.set(h.getKey(),h)}return s}))}getOverlaysForCollectionGroup(t,e,r,s){const i=tn();let o;const l=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gi(t).ee({index:Dg,range:l},((c,h,f)=>{const p=ic(this.serializer,h);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):f.done()})).next((()=>i))}St(t,e){return gi(t).put((function(s,i,o){const[l,c,h]=Qd(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Da(s.yt,o.mutation)}})(this.serializer,this.userId,e))}}function gi(n){return Yt(n,il)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{bt(t){return Yt(t,Mu)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e?.value;return r?Gt.fromUint8Array(r):Gt.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ft(t.integerValue));else if("doubleValue"in t){const r=Ft(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),no(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=In(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(En(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?qg(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):al(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):J(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const s of Object.keys(r))this.Ot(s,e),this.Ct(r[s],e)}kt(t,e){const r=t.fields||{};this.Ft(e,53);const s=Ps,i=r[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Ft(i)),this.Ot(s,e),this.Ct(r[s],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const s of r)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),Q.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Sr.Kt=new Sr;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=255;function qw(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function Yd(n){const t=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=qw(255&r[i]);if(s+=o,o!==8)break}return s})(n);return Math.ceil(t/8)}class Gw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=e.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(t){const e=this.en(t),r=Yd(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=e.length-r;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),r=Yd(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=e.length-r;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(ts),this.sn(255)}_n(){this.an(ts),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let s=1;s<e.length;++s)e[s]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===ts?(this.sn(ts),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===ts?(this.an(ts),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Hw{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class Qw{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class _i{constructor(){this.cn=new Gw,this.ln=new Hw(this.cn),this.hn=new Qw(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t,e,r,s){this.Tn=t,this.In=e,this.En=r,this.dn=s}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new Rr(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:la(this.En),directionalValue:la(this.dn),orderedDocumentKey:la(e),documentKey:r.path.toArray()}}Vn(t,e,r){const s=this.Rn(t,e,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Nn(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=Jd(n.En,t.En),e!==0?e:(e=Jd(n.dn,t.dn),e!==0?e:Q.comparator(n.In,t.In)))}function Jd(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function la(n){return rg()?(function(e){let r="";for(let s=0;s<e.length;s++)r+=String.fromCharCode(e[s]);return r})(n):n}function Zd(n){return typeof n!="string"?n:(function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r})(n)}class tp{constructor(t){this.mn=new Rt(((e,r)=>Lt.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(et(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Nc(t);if(e!==void 0&&!this.wn(e))return!1;const r=Er(t);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!s.has(l.field.canonicalString())){const c=r[i];if(!this.Sn(l,c)||!this.bn(this.fn[o++],c))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],l))return!1}return!0}Dn(){if(this.pn)return null;let t=new Rt(Lt.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new ta(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new ta(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new ta(r.field,r.dir==="asc"?0:1)));return new va(va.UNKNOWN_ID,this.collectionId,e,eo.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n){if(et(n instanceof mt||n instanceof St,20012),n instanceof mt){if(n instanceof Zg){const e=n.value.arrayValue?.values?.map((r=>mt.create(n.field,"==",r)))||[];return St.create(e,"or")}return n}const t=n.filters.map((e=>M_(e)));return St.create(t,n.op)}function Ww(n){if(n.getFilters().length===0)return[];const t=Xc(M_(n));return et(O_(t),7391),Wc(t)||$c(t)?[t]:t.getFilters()}function Wc(n){return n instanceof mt}function $c(n){return n instanceof St&&Bu(n)}function O_(n){return Wc(n)||$c(n)||(function(e){if(e instanceof St&&Uc(e)){for(const r of e.getFilters())if(!Wc(r)&&!$c(r))return!1;return!0}return!1})(n)}function Xc(n){if(et(n instanceof mt||n instanceof St,34018),n instanceof mt)return n;if(n.filters.length===1)return Xc(n.filters[0]);const t=n.filters.map((r=>Xc(r)));let e=St.create(t,n.op);return e=Ma(e),O_(e)?e:(et(e instanceof St,64498),et(xs(e),40251),et(e.filters.length>1,57927),e.filters.reduce(((r,s)=>Qu(r,s))))}function Qu(n,t){let e;return et(n instanceof mt||n instanceof St,38388),et(t instanceof mt||t instanceof St,25473),e=n instanceof mt?t instanceof mt?(function(s,i){return St.create([s,i],"and")})(n,t):ep(n,t):t instanceof mt?ep(t,n):(function(s,i){if(et(s.filters.length>0&&i.filters.length>0,48005),xs(s)&&xs(i))return Xg(s,i.getFilters());const o=Uc(s)?s:i,l=Uc(s)?i:s,c=o.filters.map((h=>Qu(h,l)));return St.create(c,"or")})(n,t),Ma(e)}function ep(n,t){if(xs(t))return Xg(t,n.getFilters());{const e=t.filters.map((r=>Qu(n,r)));return St.create(e,"or")}}function Ma(n){if(et(n instanceof mt||n instanceof St,11850),n instanceof mt)return n;const t=n.getFilters();if(t.length===1)return Ma(t[0]);if(Wg(n))return n;const e=t.map((s=>Ma(s))),r=[];return e.forEach((s=>{s instanceof mt?r.push(s):s instanceof St&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:St.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.Cn=new Wu}addToCollectionParentIndex(t,e){return this.Cn.add(e),R.resolve()}getCollectionParents(t,e){return R.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return R.resolve()}deleteFieldIndex(t,e){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,e){return R.resolve()}getDocumentsMatchingTarget(t,e){return R.resolve(null)}getIndexType(t,e){return R.resolve(0)}getFieldIndexes(t,e){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,e){return R.resolve(Oe.min())}getMinOffsetFromCollectionGroup(t,e){return R.resolve(Oe.min())}updateCollectionGroup(t,e,r){return R.resolve()}updateIndexEntries(t,e){return R.resolve()}}class Wu{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e]||new Rt(At.comparator),i=!s.has(r);return this.index[e]=s.add(r),i}has(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Rt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="IndexedDbIndexManager",zo=new Uint8Array(0);class Xw{constructor(t,e){this.databaseId=e,this.vn=new Wu,this.Fn=new vn((r=>Lr(r)),((r,s)=>Io(r,s))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),s=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const i={collectionId:r,parent:ge(s)};return rp(t).put(i)}return R.resolve()}getCollectionParents(t,e){const r=[],s=IDBKeyRange.bound([e,""],[yg(e),""],!1,!0);return rp(t).J(s).next((i=>{for(const o of i){if(o.collectionId!==e)break;r.push(Ze(o.parent))}return r}))}addFieldIndex(t,e){const r=yi(t),s=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(e);delete s.indexId;const i=r.add(s);if(e.indexState){const o=ns(t);return i.next((l=>{o.put(Wd(l,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return i.next()}deleteFieldIndex(t,e){const r=yi(t),s=ns(t),i=es(t);return r.delete(e.indexId).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=yi(t),r=es(t),s=ns(t);return e.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(t,e){return R.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((s=>{if(s===0||s===1){const i=new tp(r).Dn();if(i!=null)return this.addFieldIndex(t,i)}}))))}getDocumentsMatchingTarget(t,e){const r=es(t);let s=!0;const i=new Map;return R.forEach(this.Mn(e),(o=>this.xn(t,o).next((l=>{s&&(s=!!l),i.set(o,l)})))).next((()=>{if(s){let o=ht();const l=[];return R.forEach(i,((c,h)=>{F(np,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(c)} to execute ${Lr(e)}`);const f=(function(G,H){const tt=Nc(H);if(tt===void 0)return null;for(const nt of Ca(G,tt.fieldPath))switch(nt.op){case"array-contains-any":return nt.value.arrayValue.values||[];case"array-contains":return[nt.value]}return null})(h,c),p=(function(G,H){const tt=new Map;for(const nt of Er(H))for(const w of Ca(G,nt.fieldPath))switch(w.op){case"==":case"in":tt.set(nt.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return tt.set(nt.fieldPath.canonicalString(),w.value),Array.from(tt.values())}return null})(h,c),E=(function(G,H){const tt=[];let nt=!0;for(const w of Er(H)){const I=w.kind===0?Md(G,w.fieldPath,G.startAt):Od(G,w.fieldPath,G.startAt);tt.push(I.value),nt&&(nt=I.inclusive)}return new Vs(tt,nt)})(h,c),T=(function(G,H){const tt=[];let nt=!0;for(const w of Er(H)){const I=w.kind===0?Od(G,w.fieldPath,G.endAt):Md(G,w.fieldPath,G.endAt);tt.push(I.value),nt&&(nt=I.inclusive)}return new Vs(tt,nt)})(h,c),C=this.On(c,h,E),D=this.On(c,h,T),M=this.Nn(c,h,p),z=this.Bn(c.indexId,f,C,E.inclusive,D,T.inclusive,M);return R.forEach(z,(W=>r.Y(W,e.limit).next((G=>{G.forEach((H=>{const tt=Q.fromSegments(H.documentKey);o.has(tt)||(o=o.add(tt),l.push(tt))}))}))))})).next((()=>l))}return R.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=Ww(St.create(t.filters,"and")).map((r=>Kc(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,s,i,o,l){const c=(e!=null?e.length:1)*Math.max(r.length,i.length),h=c/(e!=null?e.length:1),f=[];for(let p=0;p<c;++p){const E=e?this.Ln(e[p/h]):zo,T=this.kn(t,E,r[p%h],s),C=this.qn(t,E,i[p%h],o),D=l.map((M=>this.kn(t,E,M,!0)));f.push(...this.createRange(T,C,D))}return f}kn(t,e,r,s){const i=new Rr(t,Q.empty(),e,r);return s?i:i.An()}qn(t,e,r,s){const i=new Rr(t,Q.empty(),e,r);return s?i.An():i}xn(t,e){const r=new tp(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next((i=>{let o=null;for(const l of i)r.yn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o}))}getIndexType(t,e){let r=2;const s=this.Mn(e);return R.forEach(s,(i=>this.xn(t,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let h=new Rt(Lt.comparator),f=!1;for(const p of c.filters)for(const E of p.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?f=!0:h=h.add(E.field));for(const p of c.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(e)&&s.length>1&&r===2?1:r))}Qn(t,e){const r=new _i;for(const s of Er(t)){const i=e.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Sr.Kt.Dt(i,o)}return r.un()}Ln(t){const e=new _i;return Sr.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new _i;return Sr.Kt.Dt(lo(this.databaseId,e),r.Pn((function(i){const o=Er(i);return o.length===0?0:o[o.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let s=[];s.push(new _i);let i=0;for(const o of Er(t)){const l=r[i++];for(const c of s)if(this.Un(e,o.fieldPath)&&co(l))s=this.Kn(s,o,l);else{const h=c.Pn(o.kind);Sr.Kt.Dt(l,h)}}return this.Wn(s)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const s=[...t],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const c=new _i;c.seed(l.un()),Sr.Kt.Dt(o,c.Pn(e.kind)),i.push(c)}return i}Un(t,e){return!!t.filters.find((r=>r instanceof mt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=yi(t),s=ns(t);return(e?r.J(Oc,IDBKeyRange.bound(e,e)):r.J()).next((i=>{const o=[];return R.forEach(i,(l=>s.get([l.indexId,this.uid]).next((c=>{o.push((function(f,p){const E=p?new eo(p.sequenceNumber,new Oe(Ur(p.readTime),new Q(Ze(p.documentKey)),p.largestBatchId)):eo.empty(),T=f.fields.map((([C,D])=>new ta(Lt.fromServerFormat(C),D)));return new va(f.indexId,f.collectionGroup,T,E)})(l,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:lt(r.collectionGroup,s.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const s=yi(t),i=ns(t);return this.Gn(t).next((o=>s.J(Oc,IDBKeyRange.bound(e,e)).next((l=>R.forEach(l,(c=>i.put(Wd(c.indexId,this.uid,o,r))))))))}updateIndexEntries(t,e){const r=new Map;return R.forEach(e,((s,i)=>{const o=r.get(s.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(t,s.collectionGroup)).next((l=>(r.set(s.collectionGroup,l),R.forEach(l,(c=>this.zn(t,s,c).next((h=>{const f=this.jn(i,c);return h.isEqual(f)?R.resolve():this.Jn(t,i,c,h,f)})))))))}))}Hn(t,e,r,s){return es(t).put(s.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,s){return es(t).delete(s.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const s=es(t);let i=new Rt(Nn);return s.ee({index:xg,range:IDBKeyRange.only([r.indexId,this.uid,la(this.$n(r,e))])},((o,l)=>{i=i.add(new Rr(r.indexId,e,Zd(l.arrayValue),Zd(l.directionalValue)))})).next((()=>i))}jn(t,e){let r=new Rt(Nn);const s=this.Qn(e,t);if(s==null)return r;const i=Nc(e);if(i!=null){const o=t.data.field(i.fieldPath);if(co(o))for(const l of o.arrayValue.values||[])r=r.add(new Rr(e.indexId,t.key,this.Ln(l),s))}else r=r.add(new Rr(e.indexId,t.key,zo,s));return r}Jn(t,e,r,s,i){F(np,"Updating index entries for document '%s'",e.key);const o=[];return(function(c,h,f,p,E){const T=c.getIterator(),C=h.getIterator();let D=Zr(T),M=Zr(C);for(;D||M;){let z=!1,W=!1;if(D&&M){const G=f(D,M);G<0?W=!0:G>0&&(z=!0)}else D!=null?W=!0:z=!0;z?(p(M),M=Zr(C)):W?(E(D),D=Zr(T)):(D=Zr(T),M=Zr(C))}})(s,i,Nn,(l=>{o.push(this.Hn(t,e,r,l))}),(l=>{o.push(this.Yn(t,e,r,l))})),R.waitFor(o)}Gn(t){let e=1;return ns(t).ee({index:Vg,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),e=s.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((o,l)=>Nn(o,l))).filter(((o,l,c)=>!l||Nn(o,c[l-1])!==0));const s=[];s.push(t);for(const o of r){const l=Nn(o,t),c=Nn(o,e);if(l===0)s[0]=t.An();else if(l>0&&c<0)s.push(o),s.push(o.An());else if(c>0)break}s.push(e);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const l=s[o].Vn(this.uid,zo,Q.empty()),c=s[o+1].Vn(this.uid,zo,Q.empty());i.push(IDBKeyRange.bound(l,c))}return i}Zn(t,e){return Nn(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(sp)}getMinOffset(t,e){return R.mapArray(this.Mn(e),(r=>this.xn(t,r).next((s=>s||J(44426))))).next(sp)}}function rp(n){return Yt(n,io)}function es(n){return Yt(n,ki)}function yi(n){return Yt(n,Nu)}function ns(n){return Yt(n,Oi)}function sp(n){et(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Vu(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Oe(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k_=41943040;class ue{static withCacheSize(t){return new ue(t,ue.DEFAULT_COLLECTION_PERCENTILE,ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,t,e){const r=n.store(Ke),s=n.store(ws),i=[],o=IDBKeyRange.only(e.batchId);let l=0;const c=r.ee({range:o},((f,p,E)=>(l++,E.delete())));i.push(c.next((()=>{et(l===1,47070,{batchId:e.batchId})})));const h=[];for(const f of e.mutations){const p=Rg(t,f.key.path,e.batchId);i.push(s.delete(p)),h.push(f.key)}return R.waitFor(i).next((()=>h))}function Oa(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw J(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ue.DEFAULT_COLLECTION_PERCENTILE=10,ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ue.DEFAULT=new ue(k_,ue.DEFAULT_COLLECTION_PERCENTILE,ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ue.DISABLED=new ue(-1,0,0);class pl{constructor(t,e,r,s){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(t,e,r,s){et(t.uid!=="",64387);const i=t.isAuthenticated()?t.uid:"";return new pl(i,e,r,s)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mn(t).ee({index:Pr,range:r},((s,i,o)=>{e=!1,o.done()})).next((()=>e))}addMutationBatch(t,e,r,s){const i=hs(t),o=Mn(t);return o.add({}).next((l=>{et(typeof l=="number",49019);const c=new Ku(l,e,r,s),h=(function(T,C,D){const M=D.baseMutations.map((W=>Da(T.yt,W))),z=D.mutations.map((W=>Da(T.yt,W)));return{userId:C,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:z}})(this.serializer,this.userId,c),f=[];let p=new Rt(((E,T)=>lt(E.canonicalString(),T.canonicalString())));for(const E of s){const T=Rg(this.userId,E.key.path,l);p=p.add(E.key.path.popLast()),f.push(o.put(h)),f.push(i.put(T,Pv))}return p.forEach((E=>{f.push(this.indexManager.addToCollectionParentIndex(t,E))})),t.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),R.waitFor(f).next((()=>c))}))}lookupMutationBatch(t,e){return Mn(t).get(e).next((r=>r?(et(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),br(this.serializer,r)):null))}er(t,e){return this.Xn[e]?R.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const s=r.keys();return this.Xn[e]=s,s}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Mn(t).ee({index:Pr,range:s},((o,l,c)=>{l.userId===this.userId&&(et(l.batchId>=r,47524,{tr:r}),i=br(this.serializer,l)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Dr;return Mn(t).ee({index:Pr,range:e,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Dr],[this.userId,Number.POSITIVE_INFINITY]);return Mn(t).J(Pr,e).next((r=>r.map((s=>br(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=ea(this.userId,e.path),s=IDBKeyRange.lowerBound(r),i=[];return hs(t).ee({range:s},((o,l,c)=>{const[h,f,p]=o,E=Ze(f);if(h===this.userId&&e.path.isEqual(E))return Mn(t).get(p).next((T=>{if(!T)throw J(61480,{nr:o,batchId:p});et(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:p}),i.push(br(this.serializer,T))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Rt(lt);const s=[];return e.forEach((i=>{const o=ea(this.userId,i.path),l=IDBKeyRange.lowerBound(o),c=hs(t).ee({range:l},((h,f,p)=>{const[E,T,C]=h,D=Ze(T);E===this.userId&&i.path.isEqual(D)?r=r.add(C):p.done()}));s.push(c)})),R.waitFor(s).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1,i=ea(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new Rt(lt);return hs(t).ee({range:o},((c,h,f)=>{const[p,E,T]=c,C=Ze(E);p===this.userId&&r.isPrefixOf(C)?C.length===s&&(l=l.add(T)):f.done()})).next((()=>this.rr(t,l)))}rr(t,e){const r=[],s=[];return e.forEach((i=>{s.push(Mn(t).get(i).next((o=>{if(o===null)throw J(35274,{batchId:i});et(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(br(this.serializer,o))})))})),R.waitFor(s).next((()=>r))}removeMutationBatch(t,e){return F_(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),R.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return R.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return hs(t).ee({range:r},((i,o,l)=>{if(i[0]===this.userId){const c=Ze(i[1]);s.push(c)}else l.done()})).next((()=>{et(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(t,e){return L_(t,this.userId,e)}_r(t){return B_(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Dr,lastStreamToken:""}))}}function L_(n,t,e){const r=ea(t,e.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return hs(n).ee({range:i,X:!0},((l,c,h)=>{const[f,p,E]=l;f===t&&p===s&&(o=!0),h.done()})).next((()=>o))}function Mn(n){return Yt(n,Ke)}function hs(n){return Yt(n,ws)}function B_(n){return Yt(n,ro)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new jr(0)}static cr(){return new jr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new jr(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>rt.fromTimestamp(new bt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((s=>(s.highestListenSequenceNumber=e,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.hr(t,s))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>rs(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(et(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let s=0;const i=[];return rs(t).ee(((o,l)=>{const c=bi(l);c.sequenceNumber<=e&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(t,c)))})).next((()=>R.waitFor(i))).next((()=>s))}forEachTarget(t,e){return rs(t).ee(((r,s)=>{const i=bi(s);e(i)}))}lr(t){return op(t).get(Sa).next((e=>(et(e!==null,2888),e)))}hr(t,e){return op(t).put(Sa,e)}Pr(t,e){return rs(t).put(D_(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=Lr(e),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return rs(t).ee({range:s,index:Cg},((o,l,c)=>{const h=bi(l);Io(e,h.target)&&(i=h,c.done())})).next((()=>i))}addMatchingKeys(t,e,r){const s=[],i=Ln(t);return e.forEach((o=>{const l=ge(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(t,r,o))})),R.waitFor(s)}removeMatchingKeys(t,e,r){const s=Ln(t);return R.forEach(e,(i=>{const o=ge(i.path);return R.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(t,r,i)])}))}removeMatchingKeysForTargetId(t,e){const r=Ln(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),s=Ln(t);let i=ht();return s.ee({range:r,X:!0},((o,l,c)=>{const h=Ze(o[1]),f=new Q(h);i=i.add(f)})).next((()=>i))}containsKey(t,e){const r=ge(e.path),s=IDBKeyRange.bound([r],[yg(r)],!1,!0);let i=0;return Ln(t).ee({index:Du,X:!0,range:s},(([o,l],c,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}At(t,e){return rs(t).get(e).next((r=>r?bi(r):null))}}function rs(n){return Yt(n,bs)}function op(n){return Yt(n,Nr)}function Ln(n){return Yt(n,Ss)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LruGarbageCollector",U_=1048576;function lp([n,t],[e,r]){const s=lt(n,e);return s===0?lt(t,r):s}class Jw{constructor(t){this.Ir=t,this.buffer=new Rt(lp),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();lp(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class j_{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(ap,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){nr(e)?F(ap,"Ignoring IndexedDB error during garbage collection: ",e):await er(e)}await this.Vr(3e5)}))}}class Zw{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return R.resolve(we.ce);const r=new Jw(e);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(ip)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ip):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,s,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(t,r,e)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(h=Date.now(),as()<=yt.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function K_(n,t){return new Zw(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t,e){this.db=t,this.garbageCollector=K_(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((s=>r+s))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,s)=>e(s)))}addReference(t,e,r){return qo(t,r)}removeReference(t,e,r){return qo(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return qo(t,e)}br(t,e){return(function(s,i){let o=!1;return B_(s).te((l=>L_(s,l,i).next((c=>(c&&(o=!0),R.resolve(!c)))))).next((()=>o))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(t,((o,l)=>{if(l<=e){const c=this.br(t,o).next((h=>{if(!h)return i++,r.getEntry(t,o).next((()=>(r.removeEntry(o,rt.min()),Ln(t).delete((function(p){return[0,ge(p.path)]})(o)))))}));s.push(c)}})).next((()=>R.waitFor(s))).next((()=>r.apply(t))).next((()=>i))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return qo(t,e)}Sr(t,e){const r=Ln(t);let s,i=we.ce;return r.ee({index:Du},(([o,l],{path:c,sequenceNumber:h})=>{o===0?(i!==we.ce&&e(new Q(Ze(s)),i),i=h,s=c):i=we.ce})).next((()=>{i!==we.ce&&e(new Q(Ze(s)),i)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function qo(n,t){return Ln(n).put((function(r,s){return{targetId:0,path:ge(r.path),sequenceNumber:s}})(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.changes=new vn((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,jt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?R.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return _r(t).put(r)}removeEntry(t,e,r){return _r(t).delete((function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Na(o),l[l.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=jt.newInvalidDocument(e);return _r(t).ee({index:na,range:IDBKeyRange.only(Ii(e))},((s,i)=>{r=this.Cr(e,i)})).next((()=>r))}vr(t,e){let r={size:0,document:jt.newInvalidDocument(e)};return _r(t).ee({index:na,range:IDBKeyRange.only(Ii(e))},((s,i)=>{r={document:this.Cr(e,i),size:Oa(i)}})).next((()=>r))}getEntries(t,e){let r=Ne();return this.Fr(t,e,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(t,e){let r=Ne(),s=new Mt(Q.comparator);return this.Fr(t,e,((i,o)=>{const l=this.Cr(i,o);r=r.insert(i,l),s=s.insert(i,Oa(o))})).next((()=>({documents:r,Or:s})))}Fr(t,e,r){if(e.isEmpty())return R.resolve();let s=new Rt(hp);e.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(Ii(s.first()),Ii(s.last())),o=s.getIterator();let l=o.getNext();return _r(t).ee({index:na,range:i},((c,h,f)=>{const p=Q.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&hp(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?f.j(Ii(l)):f.done()})).next((()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(t,e,r,s,i){const o=e.path,l=[o.popLast().toArray(),o.lastSegment(),Na(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _r(t).J(IDBKeyRange.bound(l,c,!0)).next((h=>{i?.incrementDocumentReadCount(h.length);let f=Ne();for(const p of h){const E=this.Cr(Q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);E.isFoundDocument()&&(Eo(e,E)||s.has(E.key))&&(f=f.insert(E.key,E))}return f}))}getAllFromCollectionGroup(t,e,r,s){let i=Ne();const o=up(e,r),l=up(e,Oe.max());return _r(t).ee({index:Pg,range:IDBKeyRange.bound(o,l,!0)},((c,h,f)=>{const p=this.Cr(Q.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(p.key,p),i.size===s&&f.done()})).next((()=>i))}newChangeBuffer(t){return new nb(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return cp(t).get(Mc).next((e=>(et(!!e,20021),e)))}Dr(t,e){return cp(t).put(Mc,e)}Cr(t,e){if(e){const r=jw(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(rt.min())))return r}return jt.newInvalidDocument(t)}}function q_(n){return new eb(n)}class nb extends z_{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new vn((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(t){const e=[];let r=0,s=new Rt(((i,o)=>lt(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const l=this.Br.get(i);if(e.push(this.Nr.removeEntry(t,i,l.readTime)),o.isValidDocument()){const c=Hd(this.Nr.serializer,o);s=s.add(i.path.popLast());const h=Oa(c);r+=h-l.size,e.push(this.Nr.addEntry(t,i,c))}else if(r-=l.size,this.trackRemovals){const c=Hd(this.Nr.serializer,o.convertToNoDocument(rt.min()));e.push(this.Nr.addEntry(t,i,c))}})),s.forEach((i=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,i))})),e.push(this.Nr.updateMetadata(t,r)),R.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function cp(n){return Yt(n,so)}function _r(n){return Yt(n,ba)}function Ii(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function up(n,t){const e=t.documentKey.path.toArray();return[n,Na(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function hp(n,t){const e=n.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<e.length-2&&i<r.length-2;++i)if(s=lt(e[i],r[i]),s)return s;return s=lt(e.length,r.length),s||(s=lt(e[e.length-2],r[r.length-2]),s||lt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t,e,r,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(r!==null&&Ui(r.mutation,s,be.empty(),bt.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,ht()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=ht()){const s=tn();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,r).next((i=>{let o=vi();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(t,e){const r=tn();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,ht())))}populateOverlays(t,e,r){const s=[];return r.forEach((i=>{e.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((o,l)=>{e.set(o,l)}))}))}computeViews(t,e,r,s){let i=Ne();const o=Bi(),l=(function(){return Bi()})();return e.forEach(((c,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof wn)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Ui(f.mutation,h,f.mutation.getFieldMask(),bt.now())):o.set(h.key,be.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((h,f)=>o.set(h,f))),e.forEach(((h,f)=>l.set(h,new rb(f,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(t,e){const r=Bi();let s=new Mt(((o,l)=>o-l)),i=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=e.get(c);if(h===null)return;let f=r.get(c)||be.empty();f=l.applyToLocalView(h,f),r.set(c,f);const p=(s.get(l.batchId)||ht()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=a_();f.forEach((E=>{if(!i.has(E)){const T=p_(e.get(E),r.get(E));T!==null&&p.set(E,T),i=i.add(E)}})),o.push(this.documentOverlayCache.saveOverlays(t,h,p))}return R.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,s){return(function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):e_(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,s):this.getDocumentsMatchingCollectionQuery(t,e,r,s)}getNextDocuments(t,e,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,s-i.size):R.resolve(tn());let l=vs,c=i;return o.next((h=>R.forEach(h,((f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?R.resolve():this.remoteDocumentCache.getEntry(t,f).next((E=>{c=c.insert(f,E)}))))).next((()=>this.populateOverlays(t,h,i))).next((()=>this.computeViews(t,c,h,ht()))).next((f=>({batchId:l,changes:o_(f)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Q(e)).next((r=>{let s=vi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,s){const i=e.collectionGroup;let o=vi();return this.indexManager.getCollectionParents(t,i).next((l=>R.forEach(l,(c=>{const h=(function(p,E){return new qs(E,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(e,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next((f=>{f.forEach(((p,E)=>{o=o.insert(p,E)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,i,s)))).next((o=>{i.forEach(((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,jt.newInvalidDocument(f)))}));let l=vi();return o.forEach(((c,h)=>{const f=i.get(c);f!==void 0&&Ui(f.mutation,h,be.empty(),bt.now()),Eo(e,h)&&(l=l.insert(c,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return R.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ae(s.createTime)}})(e)),R.resolve()}getNamedQuery(t,e){return R.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(s){return{name:s.name,query:N_(s.bundledQuery),readTime:Ae(s.readTime)}})(e)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.overlays=new Mt(Q.comparator),this.qr=new Map}getOverlay(t,e){return R.resolve(this.overlays.get(e))}getOverlays(t,e){const r=tn();return R.forEach(e,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((s,i)=>{this.St(t,e,i)})),R.resolve()}removeOverlaysForBatchId(t,e,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),R.resolve()}getOverlaysForCollection(t,e,r){const s=tn(),i=e.length+1,o=new Q(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return R.resolve(s)}getOverlaysForCollectionGroup(t,e,r,s){let i=new Mt(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=tn(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=tn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,f)=>l.set(h,f))),!(l.size()>=s)););return R.resolve(l)}St(t,e,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qu(e,r));let i=this.qr.get(e);i===void 0&&(i=ht(),this.qr.set(e,i)),this.qr.set(e,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(t){return R.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,R.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.Qr=new Rt(te.$r),this.Ur=new Rt(te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new te(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new te(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new Q(new At([])),r=new te(e,t),s=new te(e,t+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Q(new At([])),r=new te(e,t),s=new te(e,t+1);let i=ht();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(t){const e=new te(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class te{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Q.comparator(t.key,e.key)||lt(t.Yr,e.Yr)}static Kr(t,e){return lt(t.Yr,e.Yr)||Q.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Rt(te.$r)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ku(i,e,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new te(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,e){return R.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=this.ei(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?Dr:this.tr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new te(e,0),s=new te(e,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const l=this.Xr(o.Yr);i.push(l)})),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Rt(lt);return e.forEach((s=>{const i=new te(s,0),o=new te(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{r=r.add(l.Yr)}))})),R.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new te(new Q(i),0);let l=new Rt(lt);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Yr)),!0)}),o),R.resolve(this.ti(l))}ti(t){const e=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){et(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return R.forEach(e.mutations,(s=>{const i=new te(s.key,e.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new te(e,0),s=this.Zr.firstAfterOrEqual(r);return R.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this.ri=t,this.docs=(function(){return new Mt(Q.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return R.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(e))}getEntries(t,e){let r=Ne();return e.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jt.newInvalidDocument(s))})),R.resolve(r)}getDocumentsMatchingQuery(t,e,r,s){let i=Ne();const o=e.path,l=new Q(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Vu(Ag(f),r)<=0||(s.has(f.key)||Eo(e,f))&&(i=i.insert(f.key,f.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,e,r,s){J(9500)}ii(t,e){return R.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new cb(this)}getSize(t){return R.resolve(this.size)}}class cb extends z_{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),R.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t){this.persistence=t,this.si=new vn((e=>Lr(e)),Io),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new $u,this.targetCount=0,this.ai=jr.ur()}forEachTarget(t,e){return this.si.forEach(((r,s)=>e(s))),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),R.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new jr(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,R.resolve()}updateTargetData(t,e){return this.Pr(e),R.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,e,r){let s=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),R.waitFor(i).next((()=>s))}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return R.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),R.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach((o=>{i.push(s.markPotentiallyOrphaned(t,o))})),R.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),R.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return R.resolve(r)}containsKey(t,e){return R.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(t,e){this.ui={},this.overlays={},this.ci=new we(0),this.li=!1,this.li=!0,this.hi=new ob,this.referenceDelegate=t(this),this.Pi=new ub(this),this.indexManager=new $w,this.remoteDocumentCache=(function(s){return new lb(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new x_(e),this.Ii=new sb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ib,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new ab(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){F("MemoryPersistence","Starting transaction:",t);const s=new hb(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,e){return R.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class hb extends wg{constructor(t){super(),this.currentSequenceNumber=t}}class ml{constructor(t){this.persistence=t,this.Ri=new $u,this.Vi=null}static mi(t){return new ml(t)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),R.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),R.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.fi,(r=>{const s=Q.fromPath(r);return this.gi(t,s).next((i=>{i||e.removeEntry(s,rt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return R.or([()=>R.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class ka{constructor(t,e){this.persistence=t,this.pi=new vn((r=>ge(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=K_(this,e)}static mi(t,e){return new ka(t,e)}Ei(){}di(t){return R.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((s=>r+s))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return R.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?R.resolve():e(s)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(o=>this.br(t,o,e).next((l=>{l||(r++,i.removeEntry(o,rt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),R.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),R.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),R.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),R.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=sa(t.data.value)),e}br(t,e,r){return R.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return R.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t){this.serializer=t}k(t,e,r,s){const i=new el("createOrUpgrade",e);r<1&&s>=1&&((function(c){c.createObjectStore(yo)})(t),(function(c){c.createObjectStore(ro,{keyPath:Rv}),c.createObjectStore(Ke,{keyPath:Ad,autoIncrement:!0}).createIndex(Pr,vd,{unique:!0}),c.createObjectStore(ws)})(t),fp(t),(function(c){c.createObjectStore(Tr)})(t));let o=R.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(Ss),c.deleteObjectStore(bs),c.deleteObjectStore(Nr)})(t),fp(t)),o=o.next((()=>(function(c){const h=c.store(Nr),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rt.min().toTimestamp(),targetCount:0};return h.put(Sa,f)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,h){return h.store(Ke).J().next((p=>{c.deleteObjectStore(Ke),c.createObjectStore(Ke,{keyPath:Ad,autoIncrement:!0}).createIndex(Pr,vd,{unique:!0});const E=h.store(Ke),T=p.map((C=>E.put(C)));return R.waitFor(T)}))})(t,i)))),o=o.next((()=>{(function(c){c.createObjectStore(Rs,{keyPath:kv})})(t)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(so)})(t),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(t,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(rl,{keyPath:Fv})})(t),(function(c){c.createObjectStore(sl,{keyPath:Lv})})(t)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const h=c.createObjectStore(il,{keyPath:Gv});h.createIndex(kc,Hv,{unique:!1}),h.createIndex(Dg,Qv,{unique:!1})})(t)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const h=c.createObjectStore(ba,{keyPath:Cv});h.createIndex(na,Vv),h.createIndex(Pg,xv)})(t))).next((()=>this.Ci(t,i))).next((()=>t.deleteObjectStore(Tr)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(t,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(Nu,{keyPath:Bv,autoIncrement:!0}).createIndex(Oc,Uv,{unique:!1}),c.createObjectStore(Oi,{keyPath:jv}).createIndex(Vg,Kv,{unique:!1}),c.createObjectStore(ki,{keyPath:zv}).createIndex(xg,qv,{unique:!1})})(t)))),r<16&&s>=16&&(o=o.next((()=>{e.objectStore(Oi).clear()})).next((()=>{e.objectStore(ki).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(Mu,{keyPath:Wv})})(t)}))),r<18&&s>=18&&rg()&&(o=o.next((()=>{e.objectStore(Oi).clear()})).next((()=>{e.objectStore(ki).clear()}))),o}wi(t){let e=0;return t.store(Tr).ee(((r,s)=>{e+=Oa(s)})).next((()=>{const r={byteSize:e};return t.store(so).put(Mc,r)}))}yi(t){const e=t.store(ro),r=t.store(Ke);return e.J().next((s=>R.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Dr],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Pr,o).next((l=>R.forEach(l,(c=>{et(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const h=br(this.serializer,c);return F_(t,i.userId,h).next((()=>{}))}))))}))))}Si(t){const e=t.store(Ss),r=t.store(Tr);return t.store(Nr).get(Sa).next((s=>{const i=[];return r.ee(((o,l)=>{const c=new At(o),h=(function(p){return[0,ge(p)]})(c);i.push(e.get(h).next((f=>f?R.resolve():(p=>e.put({targetId:0,path:ge(p),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>R.waitFor(i)))}))}bi(t,e){t.createObjectStore(io,{keyPath:Ov});const r=e.store(io),s=new Wu,i=o=>{if(s.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:ge(c)})}};return e.store(Tr).ee({X:!0},((o,l)=>{const c=new At(o);return i(c.popLast())})).next((()=>e.store(ws).ee({X:!0},(([o,l,c],h)=>{const f=Ze(l);return i(f.popLast())}))))}Di(t){const e=t.store(bs);return e.ee(((r,s)=>{const i=bi(s),o=D_(this.serializer,i);return e.put(o)}))}Ci(t,e){const r=e.store(Tr),s=[];return r.ee(((i,o)=>{const l=e.store(ba),c=(function(p){return p.document?new Q(At.fromString(p.document.name).popFirst(5)):p.noDocument?Q.fromSegments(p.noDocument.path):p.unknownDocument?Q.fromSegments(p.unknownDocument.path):J(36783)})(o).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(h))})).next((()=>R.waitFor(s)))}Fi(t,e){const r=e.store(Ke),s=q_(this.serializer),i=new Xu(ml.mi,this.serializer.yt);return r.J().next((o=>{const l=new Map;return o.forEach((c=>{let h=l.get(c.userId)??ht();br(this.serializer,c).keys().forEach((f=>h=h.add(f))),l.set(c.userId,h)})),R.forEach(l,((c,h)=>{const f=new ce(h),p=dl.wt(this.serializer,f),E=i.getIndexManager(f),T=pl.wt(f,this.serializer,E,i.referenceDelegate);return new G_(s,T,p,E).recalculateAndSaveOverlaysForDocumentKeys(new Fc(e,we.ce),c).next()}))}))}}function fp(n){n.createObjectStore(Ss,{keyPath:Nv}).createIndex(Du,Mv,{unique:!0}),n.createObjectStore(bs,{keyPath:"targetId"}).createIndex(Cg,Dv,{unique:!0}),n.createObjectStore(Nr)}const On="IndexedDbPersistence",oc=18e5,ac=5e3,lc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",db="main";class Yu{constructor(t,e,r,s,i,o,l,c,h,f,p=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=i,this.window=o,this.document=l,this.xi=h,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=E=>Promise.resolve(),!Yu.v())throw new K(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tb(this,s),this.$i=e+db,this.serializer=new x_(c),this.Ui=new qn(this.$i,this.Ni,new fb(this.serializer)),this.hi=new zw,this.Pi=new Yw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=q_(this.serializer),this.Ii=new Kw,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Kt(On,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(N.FAILED_PRECONDITION,lc);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new we(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Go(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(nr(t))return F(On,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return F(On,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Ei(t).get(Jr).next((e=>R.resolve(this.es(e))))}ts(t){return Go(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,oc)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=Yt(e,Rs);return r.J().next((s=>{const i=this.ss(s,oc),o=s.filter((l=>i.indexOf(l)===-1));return R.forEach(o,(l=>r.delete(l.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?R.resolve(!0):Ei(t).get(Jr).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,ac)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new K(N.FAILED_PRECONDITION,lc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Go(t).J().next((r=>this.ss(r,ac).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&F(On,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[yo,Rs],(t=>{const e=new Fc(t,we.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Go(t).J().next((e=>this.ss(e,oc).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return pl.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Xw(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return dl.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){F(On,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?Yv:c===17?kg:c===16?Xv:c===15?Ou:c===14?Og:c===13?Mg:c===12?$v:c===11?Ng:void J(60245)})(this.Ni);let o;return this.Ui.runTransaction(t,s,i,(l=>(o=new Fc(l,this.ci?this.ci.next():we.ce),e==="readwrite-primary"?this.Hi(o).next((c=>!!c||this.Yi(o))).next((c=>{if(!c)throw Kt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new K(N.FAILED_PRECONDITION,vg);return r(o)})).next((c=>this.Xi(o).next((()=>c)))):this.Is(o).next((()=>r(o)))))).then((l=>(o.raiseOnCommittedEvent(),l)))}Is(t){return Ei(t).get(Jr).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,ac)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new K(N.FAILED_PRECONDITION,lc)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ei(t).put(Jr,e)}static v(){return qn.v()}Zi(t){const e=Ei(t);return e.get(Jr).next((r=>this.es(r)?(F(On,"Releasing primary lease."),e.delete(Jr)):R.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Kt(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;ng()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return F(On,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Kt(On,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Kt("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Ei(n){return Yt(n,yo)}function Go(n){return Yt(n,Rs)}function H_(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,e,r,s){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=s}static As(t,e){let r=ht(),s=ht();for(const i of e.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ju(t,e.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ng()?8:bg(Ea())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,s){const i={result:null};return this.ys(t,e).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(t,e,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new pb;return this.Ss(t,e,o).next((l=>{if(i.result=l,this.Vs)return this.bs(t,e,o,l.size)}))})).next((()=>i.result))}bs(t,e,r,s){return r.documentReadCount<this.fs?(as()<=yt.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ls(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),R.resolve()):(as()<=yt.DEBUG&&F("QueryEngine","Query:",ls(e),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(as()<=yt.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ls(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Me(e))):R.resolve())}ys(t,e){if(kd(e))return R.resolve(null);let r=Me(e);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=Va(e,null,"F"),r=Me(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const o=ht(...i);return this.ps.getDocuments(t,o).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const h=this.Ds(e,l);return this.Cs(e,h,o,c.readTime)?this.ys(t,Va(e,null,"F")):this.vs(t,h,e,c)}))))})))))}ws(t,e,r,s){return kd(e)||s.isEqual(rt.min())?R.resolve(null):this.ps.getDocuments(t,r).next((i=>{const o=this.Ds(e,i);return this.Cs(e,o,r,s)?R.resolve(null):(as()<=yt.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ls(e)),this.vs(t,o,e,Tg(s,vs)).next((l=>l)))}))}Ds(t,e){let r=new Rt(s_(t));return e.forEach(((s,i)=>{Eo(t,i)&&(r=r.add(i))})),r}Cs(t,e,r,s){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const i=t.limitType==="F"?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,e,r){return as()<=yt.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ls(e)),this.ps.getDocumentsMatchingQuery(t,e,Oe.min(),r)}vs(t,e,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(e.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="LocalStore",mb=3e8;class gb{constructor(t,e,r,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new Mt(lt),this.xs=new vn((i=>Lr(i)),Io),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new G_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function W_(n,t,e,r){return new gb(n,t,e,r)}async function $_(n,t){const e=Z(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],l=[];let c=ht();for(const h of s){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return e.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function _b(n,t){const e=Z(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,f){const p=h.batch,E=p.keys();let T=R.resolve();return E.forEach((C=>{T=T.next((()=>f.getEntry(c,C))).next((D=>{const M=h.docVersions.get(C);et(M!==null,48541),D.version.compareTo(M)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))}))})),T.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(e,r,t,i).next((()=>i.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=ht();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(t)))).next((()=>e.localDocuments.getDocuments(r,s)))}))}function X_(n){const t=Z(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function yb(n,t){const e=Z(n),r=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const l=[];t.targetChanges.forEach(((f,p)=>{const E=s.get(p);if(!E)return;l.push(e.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>e.Pi.addMatchingKeys(i,f.addedDocuments,p))));let T=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(p,T),(function(D,M,z){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=mb?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(E,T,f)&&l.push(e.Pi.updateTargetData(i,T))}));let c=Ne(),h=ht();if(t.documentUpdates.forEach((f=>{t.resolvedLimboDocuments.has(f)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(i,f))})),l.push(Ib(i,o,t.documentUpdates).next((f=>{c=f.ks,h=f.qs}))),!r.isEqual(rt.min())){const f=e.Pi.getLastRemoteSnapshotVersion(i).next((p=>e.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(f)}return R.waitFor(l).next((()=>o.apply(i))).next((()=>e.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(e.Ms=s,i)))}function Ib(n,t,e){let r=ht(),s=ht();return e.forEach((i=>r=r.add(i))),t.getEntries(n,r).next((i=>{let o=Ne();return e.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(rt.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):F(Zu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function Eb(n,t){const e=Z(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Dr),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Fa(n,t){const e=Z(n);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return e.Pi.getTargetData(r,t).next((i=>i?(s=i,R.resolve(s)):e.Pi.allocateTargetId(r).next((o=>(s=new pn(t,o,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=e.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function ks(n,t,e){const r=Z(n),s=r.Ms.get(t),i=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!nr(o))throw o;F(Zu,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Yc(n,t,e){const r=Z(n);let s=rt.min(),i=ht();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,f){const p=Z(c),E=p.xs.get(f);return E!==void 0?R.resolve(p.Ms.get(E)):p.Pi.getTargetData(h,f)})(r,o,Me(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,t,e?s:rt.min(),e?i:ht()))).next((l=>(Z_(r,r_(t),l),{documents:l,Qs:i})))))}function Y_(n,t){const e=Z(n),r=Z(e.Pi),s=e.Ms.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,t).next((o=>o?o.target:null))))}function J_(n,t){const e=Z(n),r=e.Os.get(t)||rt.min();return e.persistence.runTransaction("Get new document changes","readonly",(s=>e.Ns.getAllFromCollectionGroup(s,t,Tg(r,vs),Number.MAX_SAFE_INTEGER))).then((s=>(Z_(e,t,s),s)))}function Z_(n,t,e){let r=n.Os.get(t)||rt.min();e.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="firestore_clients";function dp(n,t){return`${ty}_${n}_${t}`}const ey="firestore_mutations";function pp(n,t,e){let r=`${ey}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const ny="firestore_targets";function cc(n,t){return`${ny}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="SharedClientState";class La{constructor(t,e,r,s){this.user=t,this.batchId=e,this.state=r,this.error=s}static Ws(t,e,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new La(t,e,s.state,i):(Kt(Je,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ji{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new ji(t,r.state,s):(Kt(Je,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ba{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Uu();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Sg(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ba(t,i):(Kt(Je,`Failed to parse client data for instance '${t}': ${e}`),null)}}class th{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new th(e.clientId,e.onlineState):(Kt(Je,`Failed to parse online state: ${t}`),null)}}class Jc{constructor(){this.activeTargetIds=Uu()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uc{constructor(t,e,r,s,i){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Mt(lt),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=dp(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Jc),this.ro=new RegExp(`^${ty}_${o}_([^_]*)$`),this.io=new RegExp(`^${ey}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ny}_${o}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const s=this.getItem(dp(this.persistenceKey,r));if(s){const i=Ba.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(cc(this.persistenceKey,t));if(s){const i=ji.Ws(t,s);i&&(r=i.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(cc(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((s=>{this.Po(s)})),this.currentUser=t,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return F(Je,"READ",t,e),e}setItem(t,e){F(Je,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){F(Je,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(F(Je,"EVENT",e.key,e.newValue),e.key===this.eo)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(i){let o=we.ce;if(i!=null)try{const l=JSON.parse(i);et(typeof l=="number",30636,{So:i}),o=l}catch(l){Kt(Je,"Failed to read sequence number from WebStorage",l)}return o})(e.newValue);r!==we.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const s=new La(this.currentUser,t,e,r),i=pp(this.persistenceKey,this.currentUser,t);this.setItem(i,s.Gs())}Po(t){const e=pp(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const s=cc(this.persistenceKey,t),i=new ji(t,e,r);this.setItem(s,i.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return Ba.Ws(r,e)}fo(t,e){const r=this.io.exec(t),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return La.Ws(new ce(i),s,e)}yo(t,e){const r=this.so.exec(t),s=Number(r[1]);return ji.Ws(s,e)}uo(t){return th.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);F(Je,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),s=this.lo(this.Zs),i=this.lo(r),o=[],l=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||l.push(c)})),this.syncEngine.Fo(o,l).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Uu();return t.forEach(((r,s)=>{e=e.unionWith(s.activeTargetIds)})),e}}class ry{constructor(){this.Mo=new Jc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Jc,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="ConnectivityMonitor";class gp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(mp,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(mp,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=null;function Zc(){return Ho===null?Ho=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ho++,"0x"+Ho.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="RestConnection",Ab={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vb{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ra?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,e,r,s,i){const o=Zc(),l=this.zo(t,e.toUriEncodedString());F(hc,`Sending RPC '${t}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(l),f=tg(h);return this.Jo(t,l,c,r,f).then((p=>(F(hc,`Received RPC '${t}' ${o}: `,p),p)),(p=>{throw to(hc,`RPC '${t}' ${o} failed with error: `,p,"url: ",l,"request:",r),p}))}Ho(t,e,r,s,i,o){return this.Go(t,e,r,s,i)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zs})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,e){const r=Ab[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le="WebChannelConnection";class bb extends vb{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,s,i){const o=Zc();return new Promise(((l,c)=>{const h=new fg;h.setWithCredentials(!0),h.listenOnce(dg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Zo.NO_ERROR:const p=h.getResponseJson();F(le,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(p)),l(p);break;case Zo.TIMEOUT:F(le,`RPC '${t}' ${o} timed out`),c(new K(N.DEADLINE_EXCEEDED,"Request time out"));break;case Zo.HTTP_ERROR:const E=h.getStatus();if(F(le,`RPC '${t}' ${o} failed with status:`,E,"response text:",h.getResponseText()),E>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T?.error;if(C&&C.status&&C.message){const D=(function(z){const W=z.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(W)>=0?W:N.UNKNOWN})(C.status);c(new K(D,C.message))}else c(new K(N.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new K(N.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:t,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(le,`RPC '${t}' ${o} completed.`)}}));const f=JSON.stringify(s);F(le,`RPC '${t}' ${o} sending request:`,s),h.send(e,"POST",f,r,15)}))}T_(t,e,r){const s=Zc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=gg(),l=mg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,e,r),c.encodeInitMessageHeaders=!0;const f=i.join("");F(le,`Creating RPC '${t}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let E=!1,T=!1;const C=new wb({Yo:M=>{T?F(le,`Not sending because RPC '${t}' stream ${s} is closed:`,M):(E||(F(le,`Opening RPC '${t}' stream ${s} transport.`),p.open(),E=!0),F(le,`RPC '${t}' stream ${s} sending:`,M),p.send(M))},Zo:()=>p.close()}),D=(M,z,W)=>{M.listen(z,(G=>{try{W(G)}catch(H){setTimeout((()=>{throw H}),0)}}))};return D(p,Ai.EventType.OPEN,(()=>{T||(F(le,`RPC '${t}' stream ${s} transport opened.`),C.o_())})),D(p,Ai.EventType.CLOSE,(()=>{T||(T=!0,F(le,`RPC '${t}' stream ${s} transport closed`),C.a_(),this.E_(p))})),D(p,Ai.EventType.ERROR,(M=>{T||(T=!0,to(le,`RPC '${t}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),C.a_(new K(N.UNAVAILABLE,"The operation could not be completed")))})),D(p,Ai.EventType.MESSAGE,(M=>{if(!T){const z=M.data[0];et(!!z,16349);const W=z,G=W?.error||W[0]?.error;if(G){F(le,`RPC '${t}' stream ${s} received error:`,G);const H=G.status;let tt=(function(I){const y=Qt[I];if(y!==void 0)return __(y)})(H),nt=G.message;tt===void 0&&(tt=N.INTERNAL,nt="Unknown error status: "+H+" with message "+G.message),T=!0,C.a_(new K(tt,nt)),p.close()}else F(le,`RPC '${t}' stream ${s} received:`,z),C.u_(z)}})),D(l,pg.STAT_EVENT,(M=>{M.stat===xc.PROXY?F(le,`RPC '${t}' stream ${s} detected buffering proxy`):M.stat===xc.NOPROXY&&F(le,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(){return typeof window<"u"?window:null}function ca(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n){return new xw(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t,e,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-r);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="PersistentStream";class oy{constructor(t,e,r,s,i,o,l,c){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iy(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===N.RESOURCE_EXHAUSTED?(Kt(e.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===e&&this.G_(r,s)}),(r=>{t((()=>{const s=new K(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return F(_p,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(F(_p,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sb extends oy{constructor(t,e,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,s,o),this.serializer=i}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=Mw(this.serializer,t),r=(function(i){if(!("targetChange"in i))return rt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?rt.min():o.readTime?Ae(o.readTime):rt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Hc(this.serializer),e.addTarget=(function(i,o){let l;const c=o.target;if(l=Pa(c)?{documents:b_(i,c)}:{query:S_(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=E_(i,o.resumeToken);const h=qc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(rt.min())>0){l.readTime=Os(i,o.snapshotVersion.toTimestamp());const h=qc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,t);const r=kw(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Hc(this.serializer),e.removeTarget=t,this.q_(e)}}class Rb extends oy{constructor(t,e,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,et(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=Ow(t.writeResults,t.commitTime),r=Ae(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=Hc(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>Da(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{}class Cb extends Pb{constructor(t,e,r,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(t,Gc(e,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(N.UNKNOWN,i.toString())}))}Ho(t,e,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(t,Gc(e,r),s,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(N.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Vb{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kt(e),this.aa=!1):F("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class xb{constructor(t,e,r,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{qr(this)&&(F(Kr,"Restarting streams for network reachability change."),await(async function(c){const h=Z(c);h.Ea.add(4),await vo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await _l(h)})(this))}))})),this.Ra=new Vb(r,s)}}async function _l(n){if(qr(n))for(const t of n.da)await t(!0)}async function vo(n){for(const t of n.da)await t(!1)}function yl(n,t){const e=Z(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),rh(e)?nh(e):Qs(e).O_()&&eh(e,t))}function Fs(n,t){const e=Z(n),r=Qs(e);e.Ia.delete(t),r.O_()&&ay(e,t),e.Ia.size===0&&(r.O_()?r.L_():qr(e)&&e.Ra.set("Unknown"))}function eh(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Qs(n).Y_(t)}function ay(n,t){n.Va.Ue(t),Qs(n).Z_(t)}function nh(n){n.Va=new Rw({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Qs(n).start(),n.Ra.ua()}function rh(n){return qr(n)&&!Qs(n).x_()&&n.Ia.size>0}function qr(n){return Z(n).Ea.size===0}function ly(n){n.Va=void 0}async function Db(n){n.Ra.set("Online")}async function Nb(n){n.Ia.forEach(((t,e)=>{eh(n,t)}))}async function Mb(n,t){ly(n),rh(n)?(n.Ra.ha(t),nh(n)):n.Ra.set("Unknown")}async function Ob(n,t,e){if(n.Ra.set("Online"),t instanceof I_&&t.state===2&&t.cause)try{await(async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))})(n,t)}catch(r){F(Kr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ua(n,r)}else if(t instanceof aa?n.Va.Ze(t):t instanceof y_?n.Va.st(t):n.Va.tt(t),!e.isEqual(rt.min()))try{const r=await X_(n.localStore);e.compareTo(r)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(Gt.EMPTY_BYTE_STRING,f.snapshotVersion)),ay(i,c);const p=new pn(f.target,c,h,f.sequenceNumber);eh(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(n,e)}catch(r){F(Kr,"Failed to raise snapshot:",r),await Ua(n,r)}}async function Ua(n,t,e){if(!nr(t))throw t;n.Ea.add(1),await vo(n),n.Ra.set("Offline"),e||(e=()=>X_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{F(Kr,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await _l(n)}))}function cy(n,t){return t().catch((e=>Ua(n,e,t)))}async function Hs(n){const t=Z(n),e=Zn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Dr;for(;kb(t);)try{const s=await Eb(t.localStore,r);if(s===null){t.Ta.length===0&&e.L_();break}r=s.batchId,Fb(t,s)}catch(s){await Ua(t,s)}uy(t)&&hy(t)}function kb(n){return qr(n)&&n.Ta.length<10}function Fb(n,t){n.Ta.push(t);const e=Zn(n);e.O_()&&e.X_&&e.ea(t.mutations)}function uy(n){return qr(n)&&!Zn(n).x_()&&n.Ta.length>0}function hy(n){Zn(n).start()}async function Lb(n){Zn(n).ra()}async function Bb(n){const t=Zn(n);for(const e of n.Ta)t.ea(e.mutations)}async function Ub(n,t,e){const r=n.Ta.shift(),s=zu.from(r,t,e);await cy(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Hs(n)}async function jb(n,t){t&&Zn(n).X_&&await(async function(r,s){if((function(o){return ww(o)&&o!==N.ABORTED})(s.code)){const i=r.Ta.shift();Zn(r).B_(),await cy(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Hs(r)}})(n,t),uy(n)&&hy(n)}async function yp(n,t){const e=Z(n);e.asyncQueue.verifyOperationInProgress(),F(Kr,"RemoteStore received new credentials");const r=qr(e);e.Ea.add(3),await vo(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await _l(e)}async function tu(n,t){const e=Z(n);t?(e.Ea.delete(2),await _l(e)):t||(e.Ea.add(2),await vo(e),e.Ra.set("Unknown"))}function Qs(n){return n.ma||(n.ma=(function(e,r,s){const i=Z(e);return i.sa(),new Sb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Db.bind(null,n),t_:Nb.bind(null,n),r_:Mb.bind(null,n),H_:Ob.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),rh(n)?nh(n):n.Ra.set("Unknown")):(await n.ma.stop(),ly(n))}))),n.ma}function Zn(n){return n.fa||(n.fa=(function(e,r,s){const i=Z(e);return i.sa(),new Rb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lb.bind(null,n),r_:jb.bind(null,n),ta:Bb.bind(null,n),na:Ub.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Hs(n)):(await n.fa.stop(),n.Ta.length>0&&(F(Kr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t,e,r,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,s,i){const o=Date.now()+r,l=new sh(t,e,o,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ih(n,t){if(Kt("AsyncQueue",`${t}: ${n}`),nr(n))return new K(N.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{static emptySet(t){return new Es(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Q.comparator(e.key,r.key):(e,r)=>Q.comparator(e.key,r.key),this.keyedMap=vi(),this.sortedSet=new Mt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Es)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Es;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.ga=new Mt(Q.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):J(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class Ls{constructor(t,e,r,s,i,o,l,c,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,s,i){const o=[];return e.forEach((l=>{o.push({type:0,doc:l})})),new Ls(t,e,Es.emptySet(e),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==r[s].type||!e[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class zb{constructor(){this.queries=Ep(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const s=Z(e),i=s.queries;s.queries=Ep(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new K(N.ABORTED,"Firestore shutting down"))}}function Ep(){return new vn((n=>n_(n)),cl)}async function qb(n,t){const e=Z(n);let r=3;const s=t.query;let i=e.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Kb,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await e.onListen(s,!0);break;case 1:i.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(o){const l=ih(o,`Initialization of query '${ls(t.query)}' failed`);return void t.onError(l)}e.queries.set(s,i),i.Sa.push(t),t.va(e.onlineState),i.wa&&t.Fa(i.wa)&&oh(e)}async function Gb(n,t){const e=Z(n),r=t.query;let s=3;const i=e.queries.get(r);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Hb(n,t){const e=Z(n);let r=!1;for(const s of t){const i=s.query,o=e.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&oh(e)}function Qb(n,t,e){const r=Z(n),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(e);r.queries.delete(t)}function oh(n){n.Ca.forEach((t=>{t.next()}))}var eu,Tp;(Tp=eu||(eu={})).Ma="default",Tp.Cache="cache";class Wb{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ls(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Ls.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==eu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t){this.key=t}}class dy{constructor(t){this.key=t}}class $b{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=s_(t),this.tu=new Es(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new Ip,s=e?e.tu:this.tu;let i=e?e.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((f,p)=>{const E=s.get(f),T=Eo(this.query,p)?p:null,C=!!E&&this.mutatedKeys.has(E.key),D=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let M=!1;E&&T?E.data.isEqual(T.data)?C!==D&&(r.track({type:3,doc:T}),M=!0):this.su(E,T)||(r.track({type:2,doc:T}),M=!0,(c&&this.eu(T,c)>0||h&&this.eu(T,h)<0)&&(l=!0)):!E&&T?(r.track({type:0,doc:T}),M=!0):E&&!T&&(r.track({type:1,doc:E}),M=!0,(c||h)&&(l=!0)),M&&(T?(o=o.add(T),i=D?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((f,p)=>(function(T,C){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:M})}};return D(T)-D(C)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const l=e&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Ls(this.query,t.tu,i,o,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ip,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new dy(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new fy(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=ht();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ls.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ws="SyncEngine";class Xb{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Yb{constructor(t){this.key=t,this.hu=!1}}class Jb{constructor(t,e,r,s,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vn((l=>n_(l)),cl),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Q.comparator),this.Au=new Map,this.Ru=new $u,this.Vu={},this.mu=new Map,this.fu=jr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Zb(n,t,e=!0){const r=Il(n);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await py(r,t,e,!0),s}async function t0(n,t){const e=Il(n);await py(e,t,!0,!1)}async function py(n,t,e,r){const s=await Fa(n.localStore,Me(t)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,e);let l;return r&&(l=await ah(n,t,i,o==="current",s.resumeToken)),n.isPrimaryClient&&e&&yl(n.remoteStore,s),l}async function ah(n,t,e,r,s){n.pu=(p,E,T)=>(async function(D,M,z,W){let G=M.view.ru(z);G.Cs&&(G=await Yc(D.localStore,M.query,!1).then((({documents:w})=>M.view.ru(w,G))));const H=W&&W.targetChanges.get(M.targetId),tt=W&&W.targetMismatches.get(M.targetId)!=null,nt=M.view.applyChanges(G,D.isPrimaryClient,H,tt);return nu(D,M.targetId,nt.au),nt.snapshot})(n,p,E,T);const i=await Yc(n.localStore,t,!0),o=new $b(t,i.Qs),l=o.ru(i.documents),c=Ao.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",s),h=o.applyChanges(l,n.isPrimaryClient,c);nu(n,e,h.au);const f=new Xb(t,e,o);return n.Tu.set(t,f),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function e0(n,t,e){const r=Z(n),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!cl(o,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ks(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),e&&Fs(r.remoteStore,s.targetId),Bs(r,s.targetId)})).catch(er)):(Bs(r,s.targetId),await ks(r.localStore,s.targetId,!0))}async function n0(n,t){const e=Z(n),r=e.Tu.get(t),s=e.Iu.get(r.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Fs(e.remoteStore,r.targetId))}async function r0(n,t,e){const r=hh(n);try{const s=await(function(o,l){const c=Z(o),h=bt.now(),f=l.reduce(((T,C)=>T.add(C.key)),ht());let p,E;return c.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let C=Ne(),D=ht();return c.Ns.getEntries(T,f).next((M=>{C=M,C.forEach(((z,W)=>{W.isValidDocument()||(D=D.add(z))}))})).next((()=>c.localDocuments.getOverlayedDocuments(T,C))).next((M=>{p=M;const z=[];for(const W of l){const G=Aw(W,p.get(W.key).overlayedDocument);G!=null&&z.push(new wn(W.key,G,Hg(G.value.mapValue),Te.exists(!0)))}return c.mutationQueue.addMutationBatch(T,h,z,l)})).next((M=>{E=M;const z=M.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(T,M.batchId,z)}))})).then((()=>({batchId:E.batchId,changes:o_(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Mt(lt)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(r,s.batchId,e),await sr(r,s.changes),await Hs(r.remoteStore)}catch(s){const i=ih(s,"Failed to persist write");e.reject(i)}}async function my(n,t){const e=Z(n);try{const r=await yb(e.localStore,t);t.targetChanges.forEach(((s,i)=>{const o=e.Au.get(i);o&&(et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?et(o.hu,14607):s.removedDocuments.size>0&&(et(o.hu,42227),o.hu=!1))})),await sr(e,r,t)}catch(r){await er(r)}}function Ap(n,t,e){const r=Z(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const s=[];r.Tu.forEach(((i,o)=>{const l=o.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(o,l){const c=Z(o);c.onlineState=l;let h=!1;c.queries.forEach(((f,p)=>{for(const E of p.Sa)E.va(l)&&(h=!0)})),h&&oh(c)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function s0(n,t,e){const r=Z(n);r.sharedClientState.updateQueryState(t,"rejected",e);const s=r.Au.get(t),i=s&&s.key;if(i){let o=new Mt(Q.comparator);o=o.insert(i,jt.newNoDocument(i,rt.min()));const l=ht().add(i),c=new To(rt.min(),new Map,new Mt(lt),o,l);await my(r,c),r.du=r.du.remove(i),r.Au.delete(t),uh(r)}else await ks(r.localStore,t,!1).then((()=>Bs(r,t,e))).catch(er)}async function i0(n,t){const e=Z(n),r=t.batch.batchId;try{const s=await _b(e.localStore,t);ch(e,r,null),lh(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await sr(e,s)}catch(s){await er(s)}}async function o0(n,t,e){const r=Z(n);try{const s=await(function(o,l){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(et(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>c.localDocuments.getDocuments(h,f)))}))})(r.localStore,t);ch(r,t,e),lh(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await sr(r,s)}catch(s){await er(s)}}function lh(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function ch(n,t,e){const r=Z(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(e?i.reject(e):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Bs(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||gy(n,r)}))}function gy(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Fs(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),uh(n))}function nu(n,t,e){for(const r of e)r instanceof fy?(n.Ru.addReference(r.key,t),a0(n,r)):r instanceof dy?(F(Ws,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||gy(n,r.key)):J(19791,{wu:r})}function a0(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(F(Ws,"New document in limbo: "+e),n.Eu.add(r),uh(n))}function uh(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Q(At.fromString(t)),r=n.fu.next();n.Au.set(r,new Yb(e)),n.du=n.du.insert(e,r),yl(n.remoteStore,new pn(Me(ll(e.path)),r,"TargetPurposeLimboResolution",we.ce))}}async function sr(n,t,e){const r=Z(n),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{o.push(r.pu(c,t,e).then((h=>{if((h||e)&&r.isPrimaryClient){const f=h?!h.fromCache:e?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){s.push(h);const f=Ju.As(c.targetId,h);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,h){const f=Z(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>R.forEach(h,(E=>R.forEach(E.Es,(T=>f.persistence.referenceDelegate.addReference(p,E.targetId,T))).next((()=>R.forEach(E.ds,(T=>f.persistence.referenceDelegate.removeReference(p,E.targetId,T)))))))))}catch(p){if(!nr(p))throw p;F(Zu,"Failed to update sequence numbers: "+p)}for(const p of h){const E=p.targetId;if(!p.fromCache){const T=f.Ms.get(E),C=T.snapshotVersion,D=T.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(E,D)}}})(r.localStore,i))}async function l0(n,t){const e=Z(n);if(!e.currentUser.isEqual(t)){F(Ws,"User change. New user:",t.toKey());const r=await $_(e.localStore,t);e.currentUser=t,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new K(N.CANCELLED,o))}))})),i.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await sr(e,r.Ls)}}function c0(n,t){const e=Z(n),r=e.Au.get(t);if(r&&r.hu)return ht().add(r.key);{let s=ht();const i=e.Iu.get(t);if(!i)return s;for(const o of i){const l=e.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}async function u0(n,t){const e=Z(n),r=await Yc(e.localStore,t.query,!0),s=t.view.cu(r);return e.isPrimaryClient&&nu(e,t.targetId,s.au),s}async function h0(n,t){const e=Z(n);return J_(e.localStore,t).then((r=>sr(e,r)))}async function f0(n,t,e,r){const s=Z(n),i=await(function(l,c){const h=Z(l),f=Z(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(p=>f.er(p,c).next((E=>E?h.localDocuments.getDocuments(p,E):R.resolve(null)))))})(s.localStore,t);i!==null?(e==="pending"?await Hs(s.remoteStore):e==="acknowledged"||e==="rejected"?(ch(s,t,r||null),lh(s,t),(function(l,c){Z(Z(l).mutationQueue).ir(c)})(s.localStore,t)):J(6720,"Unknown batchState",{Su:e}),await sr(s,i)):F(Ws,"Cannot apply mutation batch with id: "+t)}async function d0(n,t){const e=Z(n);if(Il(e),hh(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),s=await vp(e,r.toArray());e.gu=!0,await tu(e.remoteStore,!0);for(const i of s)yl(e.remoteStore,i)}else if(t===!1&&e.gu!==!1){const r=[];let s=Promise.resolve();e.Iu.forEach(((i,o)=>{e.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(Bs(e,o),ks(e.localStore,o,!0)))),Fs(e.remoteStore,o)})),await s,await vp(e,r),(function(o){const l=Z(o);l.Au.forEach(((c,h)=>{Fs(l.remoteStore,h)})),l.Ru.Jr(),l.Au=new Map,l.du=new Mt(Q.comparator)})(e),e.gu=!1,await tu(e.remoteStore,!1)}}async function vp(n,t,e){const r=Z(n),s=[],i=[];for(const o of t){let l;const c=r.Iu.get(o);if(c&&c.length!==0){l=await Fa(r.localStore,Me(c[0]));for(const h of c){const f=r.Tu.get(h),p=await u0(r,f);p.snapshot&&i.push(p.snapshot)}}else{const h=await Y_(r.localStore,o);l=await Fa(r.localStore,h),await ah(r,_y(h),o,!1,l.resumeToken)}s.push(l)}return r.Pu.H_(i),s}function _y(n){return t_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function p0(n){return(function(e){return Z(Z(e).persistence).Ts()})(Z(n).localStore)}async function m0(n,t,e,r){const s=Z(n);if(s.gu)return void F(Ws,"Ignoring unexpected query state notification.");const i=s.Iu.get(t);if(i&&i.length>0)switch(e){case"current":case"not-current":{const o=await J_(s.localStore,r_(i[0])),l=To.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Gt.EMPTY_BYTE_STRING);await sr(s,o,l);break}case"rejected":await ks(s.localStore,t,!0),Bs(s,t,r);break;default:J(64155,e)}}async function g0(n,t,e){const r=Il(n);if(r.gu){for(const s of t){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){F(Ws,"Adding an already active target "+s);continue}const i=await Y_(r.localStore,s),o=await Fa(r.localStore,i);await ah(r,_y(i),o.targetId,!1,o.resumeToken),yl(r.remoteStore,o)}for(const s of e)r.Iu.has(s)&&await ks(r.localStore,s,!1).then((()=>{Fs(r.remoteStore,s),Bs(r,s)})).catch(er)}}function Il(n){const t=Z(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=my.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=c0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=s0.bind(null,t),t.Pu.H_=Hb.bind(null,t.eventManager),t.Pu.yu=Qb.bind(null,t.eventManager),t}function hh(n){const t=Z(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=i0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=o0.bind(null,t),t}class fo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gl(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return W_(this.persistence,new Q_,t.initialUser,this.serializer)}Cu(t){return new Xu(ml.mi,this.serializer)}Du(t){return new ry}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fo.provider={build:()=>new fo};class _0 extends fo{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){et(this.persistence.referenceDelegate instanceof ka,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new j_(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?ue.withCacheSize(this.cacheSizeBytes):ue.DEFAULT;return new Xu((r=>ka.mi(r,e)),this.serializer)}}class yy extends fo{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await hh(this.xu.syncEngine),await Hs(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return W_(this.persistence,new Q_,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new j_(r,t.asyncQueue,e)}Mu(t,e){const r=new bv(e,this.persistence);return new wv(t.asyncQueue,r)}Cu(t){const e=H_(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ue.withCacheSize(this.cacheSizeBytes):ue.DEFAULT;return new Yu(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,sy(),ca(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new ry}}class y0 extends yy{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof uc&&(this.sharedClientState.syncEngine={Co:f0.bind(null,e),vo:m0.bind(null,e),Fo:g0.bind(null,e),Ts:p0.bind(null,e),Do:h0.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await d0(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=sy();if(!uc.v(e))throw new K(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=H_(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new uc(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class po{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ap(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l0.bind(null,this.syncEngine),await tu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new zb})()}createDatastore(t){const e=gl(t.databaseInfo.databaseId),r=(function(i){return new bb(i)})(t.databaseInfo);return(function(i,o,l,c){return new Cb(i,o,l,c)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,s,i,o,l){return new xb(r,s,i,o,l)})(this.localStore,this.datastore,t.asyncQueue,(e=>Ap(this.syncEngine,e,0)),(function(){return gp.v()?new gp:new Tb})())}createSyncEngine(t,e){return(function(s,i,o,l,c,h,f){const p=new Jb(s,i,o,l,c,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=Z(e);F(Kr,"RemoteStore shutting down."),r.Ea.add(5),await vo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}po.provider={build:()=>new po};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Kt("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="FirestoreClient";class E0{constructor(t,e,r,s,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=s,this.user=ce.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{F(tr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(F(tr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ih(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function fc(n,t){n.asyncQueue.verifyOperationInProgress(),F(tr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await $_(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function wp(n,t){n.asyncQueue.verifyOperationInProgress();const e=await T0(n);F(tr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>yp(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>yp(t.remoteStore,s))),n._onlineComponents=t}async function T0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F(tr,"Using user provided OfflineComponentProvider");try{await fc(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;to("Error using user provided cache. Falling back to memory cache: "+e),await fc(n,new fo)}}else F(tr,"Using default OfflineComponentProvider"),await fc(n,new _0(void 0));return n._offlineComponents}async function Iy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(F(tr,"Using user provided OnlineComponentProvider"),await wp(n,n._uninitializedComponentsProvider._online)):(F(tr,"Using default OnlineComponentProvider"),await wp(n,new po))),n._onlineComponents}function A0(n){return Iy(n).then((t=>t.syncEngine))}async function bp(n){const t=await Iy(n),e=t.eventManager;return e.onListen=Zb.bind(null,t.syncEngine),e.onUnlisten=e0.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=t0.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=n0.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="firestore.googleapis.com",Rp=!0;class Pp{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new K(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v0,this.ssl=Rp}else this.host=t.host,this.ssl=t.ssl??Rp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=k_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<U_)throw new K(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Tv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ey(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fh{constructor(t,e,r,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new K(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fv;switch(r.type){case"firstParty":return new mv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=Sp.get(e);r&&(F("ComponentProvider","Removing Datastore"),Sp.delete(e),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ir(this.firestore,t,this._query)}}class $t{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $t(this.firestore,t,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(_o(e,$t._jsonSchema))return new $t(t,r||null,new Q(At.fromString(e.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:Wt("string",$t._jsonSchemaVersion),referencePath:Wt("string")};class Gn extends ir{constructor(t,e,r){super(t,e,ll(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $t(this.firestore,null,new Q(t))}withConverter(t){return new Gn(this.firestore,t,this._path)}}function w0(n,t,...e){if(n=sn(n),Ig("collection","path",t),n instanceof fh){const r=At.fromString(t,...e);return _d(r),new Gn(n,null,r)}{if(!(n instanceof $t||n instanceof Gn))throw new K(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(At.fromString(t,...e));return _d(r),new Gn(n.firestore,null,r)}}function dh(n,t,...e){if(n=sn(n),arguments.length===1&&(t=Cu.newId()),Ig("doc","path",t),n instanceof fh){const r=At.fromString(t,...e);return gd(r),new $t(n,null,new Q(r))}{if(!(n instanceof $t||n instanceof Gn))throw new K(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(At.fromString(t,...e));return gd(r),new $t(n.firestore,n instanceof Gn?n.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="AsyncQueue";class Vp{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iy(this,"async_queue_retry"),this._c=()=>{const r=ca();r&&F(Cp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=ca();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=ca();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new zn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!nr(t))throw t;F(Cp,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Kt("INTERNAL UNHANDLED ERROR: ",xp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=sh.createAndSchedule(this,t,e,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:xp(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function xp(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){return(function(e,r){if(typeof e!="object"||e===null)return!1;const s=e;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(n,["next","error","complete"])}class Us extends fh{constructor(t,e,r,s){super(t,e,r,s),this.type="firestore",this._queue=new Vp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vp(t),this._firestoreClient=void 0,await t}}}function b0(n,t,e){e||(e=Ra);const r=$A(n,"firestore");if(r.isInitialized(e)){const s=r.getImmediate({identifier:e}),i=r.getOptions(e);if(Ta(i,t))return s;throw new K(N.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new K(N.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<U_)throw new K(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&tg(t.host)&&QT(t.host),r.initialize({options:t,instanceIdentifier:e})}function Ty(n){if(n._terminated)throw new K(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||S0(n),n._firestoreClient}function S0(n){const t=n._freezeSettings(),e=(function(s,i,o,l){return new Zv(s,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ey(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new E0(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Be(Gt.fromBase64String(t))}catch(e){throw new K(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Be(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Be._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(_o(t,Be._jsonSchema))return Be.fromBase64String(t.bytes)}}Be._jsonSchemaVersion="firestore/bytes/1.0",Be._jsonSchema={type:Wt("string",Be._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new K(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new K(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new K(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nn._jsonSchemaVersion}}static fromJSON(t){if(_o(t,nn._jsonSchema))return new nn(t.latitude,t.longitude)}}nn._jsonSchemaVersion="firestore/geoPoint/1.0",nn._jsonSchema={type:Wt("string",nn._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(_o(t,rn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new rn(t.vectorValues);throw new K(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:Wt("string",rn._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=/^__.*__$/;class P0{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new wn(t,this.data,this.fieldMask,e,this.fieldTransforms):new Gs(t,this.data,e,this.fieldTransforms)}}class Ay{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new wn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function vy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:n})}}class ph{constructor(t,e,r,s,i,o){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ph({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ja(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(vy(this.Ac)&&R0.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class C0{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||gl(t)}Cc(t,e,r,s=!1){return new ph({Ac:t,methodName:e,Dc:r,path:Lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mh(n){const t=n._freezeSettings(),e=gl(n._databaseId);return new C0(n._databaseId,!!t.ignoreUndefinedProperties,e)}function V0(n,t,e,r,s,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,t,e,s);_h("Data must be an object, but it was:",o,r);const l=wy(r,o);let c,h;if(i.merge)c=new be(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const E=ru(t,p,e);if(!o.contains(E))throw new K(N.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Sy(f,E)||f.push(E)}c=new be(f),h=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=o.fieldTransforms;return new P0(new de(l),c,h)}class Al extends Tl{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Al}}class gh extends Tl{_toFieldTransform(t){return new d_(t.path,new Ds)}isEqual(t){return t instanceof gh}}function x0(n,t,e,r){const s=n.Cc(1,t,e);_h("Data must be an object, but it was:",s,r);const i=[],o=de.empty();rr(r,((c,h)=>{const f=yh(t,c,e);h=sn(h);const p=s.yc(f);if(h instanceof Al)i.push(f);else{const E=wo(h,p);E!=null&&(i.push(f),o.set(f,E))}}));const l=new be(i);return new Ay(o,l,s.fieldTransforms)}function D0(n,t,e,r,s,i){const o=n.Cc(1,t,e),l=[ru(t,r,e)],c=[s];if(i.length%2!=0)throw new K(N.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<i.length;E+=2)l.push(ru(t,i[E])),c.push(i[E+1]);const h=[],f=de.empty();for(let E=l.length-1;E>=0;--E)if(!Sy(h,l[E])){const T=l[E];let C=c[E];C=sn(C);const D=o.yc(T);if(C instanceof Al)h.push(T);else{const M=wo(C,D);M!=null&&(h.push(T),f.set(T,M))}}const p=new be(h);return new Ay(f,p,o.fieldTransforms)}function N0(n,t,e,r=!1){return wo(e,n.Cc(r?4:3,t))}function wo(n,t){if(by(n=sn(n)))return _h("Unsupported field value:",t,n),wy(n,t);if(n instanceof Tl)return(function(r,s){if(!vy(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const l of r){let c=wo(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(n,t)}return(function(r,s){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=bt.fromDate(r);return{timestampValue:Os(s.serializer,i)}}if(r instanceof bt){const i=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Os(s.serializer,i)}}if(r instanceof nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Be)return{bytesValue:E_(s.serializer,r._byteString)};if(r instanceof $t){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hu(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rn)return(function(o,l){return{mapValue:{fields:{[Fu]:{stringValue:Lu},[Ps]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return ju(l.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${tl(r)}`)})(n,t)}function wy(n,t){const e={};return Fg(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rr(n,((r,s)=>{const i=wo(s,t.mc(r));i!=null&&(e[r]=i)})),{mapValue:{fields:e}}}function by(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof nn||n instanceof Be||n instanceof $t||n instanceof Tl||n instanceof rn)}function _h(n,t,e){if(!by(e)||!Eg(e)){const r=tl(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function ru(n,t,e){if((t=sn(t))instanceof El)return t._internalPath;if(typeof t=="string")return yh(n,t);throw ja("Field path arguments must be of type string or ",n,!1,void 0,e)}const M0=new RegExp("[~\\*/\\[\\]]");function yh(n,t,e){if(t.search(M0)>=0)throw ja(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new El(...t.split("."))._internalPath}catch{throw ja(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ja(n,t,e,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(N.INVALID_ARGUMENT,l+n+c)}function Sy(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,e,r,s,i){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new O0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ih("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class O0 extends Ry{data(){return super.data()}}function Ih(n,t){return typeof t=="string"?yh(n,t):t instanceof El?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eh{}class Th extends Eh{}function F0(n,t,...e){let r=[];t instanceof Eh&&r.push(t),r=r.concat(e),(function(i){const o=i.filter((c=>c instanceof vh)).length,l=i.filter((c=>c instanceof Ah)).length;if(o>1||o>0&&l>0)throw new K(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ah extends Th{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Ah(t,e,r)}_apply(t){const e=this._parse(t);return Py(t._query,e),new ir(t.firestore,t.converter,zc(t._query,e))}_parse(t){const e=mh(t.firestore);return(function(i,o,l,c,h,f,p){let E;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Mp(p,f);const C=[];for(const D of p)C.push(Np(c,i,D));E={arrayValue:{values:C}}}else E=Np(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Mp(p,f),E=N0(l,o,p,f==="in"||f==="not-in");return mt.create(h,f,E)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class vh extends Eh{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new vh(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:St.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Py(o,c),o=zc(o,c)})(t._query,e),new ir(t.firestore,t.converter,zc(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wh extends Th{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new wh(t,e)}_apply(t){const e=(function(s,i,o){if(s.startAt!==null)throw new K(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uo(i,o)})(t._query,this._field,this._direction);return new ir(t.firestore,t.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new qs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(t._query,e))}}function L0(n,t="asc"){const e=t,r=Ih("orderBy",n);return wh._create(r,e)}class bh extends Th{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new bh(t,e,r)}_apply(t){return new ir(t.firestore,t.converter,Va(t._query,this._limit,this._limitType))}}function B0(n){return bh._create("limit",n,"F")}function Np(n,t,e){if(typeof(e=sn(e))=="string"){if(e==="")throw new K(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e_(t)&&e.indexOf("/")!==-1)throw new K(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(At.fromString(e));if(!Q.isDocumentKey(r))throw new K(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lo(n,new Q(r))}if(e instanceof $t)return lo(n,e._key);throw new K(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tl(e)}.`)}function Mp(n,t){if(!Array.isArray(n)||n.length===0)throw new K(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Py(n,t){const e=(function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new K(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new K(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class U0{convertValue(t,e="none"){switch(Yn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(En(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw J(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return rr(t,((s,i)=>{r[s]=this.convertValue(i,e)})),r}convertVectorValue(t){const e=t.fields?.[Ps].arrayValue?.values?.map((r=>Ft(r.doubleValue)));return new rn(e)}convertGeoPoint(t){return new nn(Ft(t.latitude),Ft(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=ol(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(oo(t));default:return null}}convertTimestamp(t){const e=In(t);return new bt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=At.fromString(t);et(V_(r),9688,{name:t});const s=new Fr(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(e)||Kt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class Si{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Or extends Ry{constructor(t,e,r,s,i,o){super(t,e,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Ih("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Or._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:Wt("string",Or._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class ua extends Or{data(t={}){return super.data(t)}}class Ts{constructor(t,e,r,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Si(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new ua(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new K(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((l=>{const c=new ua(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new ua(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:K0(l.type),doc:c,oldIndex:h,newIndex:f}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ts._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Cu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(e.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function K0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:n})}}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:Wt("string",Ts._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Cy extends U0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Be(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $t(this.firestore,null,e)}}function z0(n,t,e,...r){n=xr(n,$t);const s=xr(n.firestore,Us),i=mh(s);let o;return o=typeof(t=sn(t))=="string"||t instanceof El?D0(i,"updateDoc",n._key,t,e,r):x0(i,"updateDoc",n._key,t),Sh(s,[o.toMutation(n._key,Te.exists(!0))])}function q0(n){return Sh(xr(n.firestore,Us),[new fl(n._key,Te.none())])}function G0(n,t){const e=xr(n.firestore,Us),r=dh(n),s=j0(n.converter,t);return Sh(e,[V0(mh(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Te.exists(!1))]).then((()=>r))}function H0(n,...t){n=sn(n);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Dp(t[r])||(e=t[r++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(Dp(t[r])){const c=t[r];t[r]=c.next?.bind(c),t[r+1]=c.error?.bind(c),t[r+2]=c.complete?.bind(c)}let i,o,l;if(n instanceof $t)o=xr(n.firestore,Us),l=ll(n._key.path),i={next:c=>{t[r]&&t[r](Q0(o,n,c))},error:t[r+1],complete:t[r+2]};else{const c=xr(n,ir);o=xr(c.firestore,Us),l=c._query;const h=new Cy(o);i={next:f=>{t[r]&&t[r](new Ts(o,h,c,f))},error:t[r+1],complete:t[r+2]},k0(n._query)}return(function(h,f,p,E){const T=new I0(E),C=new Wb(f,T,p);return h.asyncQueue.enqueueAndForget((async()=>qb(await bp(h),C))),()=>{T.Nu(),h.asyncQueue.enqueueAndForget((async()=>Gb(await bp(h),C)))}})(Ty(o),l,s,i)}function Sh(n,t){return(function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget((async()=>r0(await A0(r),s,i))),i.promise})(Ty(n),t)}function Q0(n,t,e){const r=e.docs.get(t._key),s=new Cy(n);return new Or(n,s,t._key,r,new Si(e.hasPendingWrites,e.fromCache),t.converter)}class W0{constructor(t){let e;this.kind="persistent",t?.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=J0(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function $0(n){return new W0(n)}class X0{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=po.provider,this._offlineComponentProvider={build:e=>new yy(e,t?.cacheSizeBytes,this.forceOwnership)}}}class Y0{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=po.provider,this._offlineComponentProvider={build:e=>new y0(e,t?.cacheSizeBytes)}}}function J0(n){return new X0(n?.forceOwnership)}function Z0(){return new Y0}function tS(){return new gh("serverTimestamp")}(function(t,e=!0){(function(s){zs=s})(ZA),Aa(new Ji("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Us(new dv(r.getProvider("auth-internal")),new gv(o,r.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(h.options.projectId,f)})(o,s),o);return i={useFetchStreams:e,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Is(fd,dd,t),Is(fd,dd,"esm2020")})();var eS="firebase",nS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(eS,nS,"app");const rS={apiKey:"AIzaSyAo-asycc7bdBDPMoOJ7EDP9hbVDeg9Hrs",authDomain:"bug-report-ce99b.firebaseapp.com",projectId:"bug-report-ce99b",storageBucket:"bug-report-ce99b.firebasestorage.app",messagingSenderId:"1090635700217",appId:"1:1090635700217:web:ed04a55b86508d25014f28",measurementId:"G-MPXMZXYFHE"},sS=tv(rS),Rh=b0(sS,{localCache:$0({tabManager:Z0()})}),su=Ut([]),iu=Ut(!1),Vy=w0(Rh,"reports"),iS=F0(Vy,L0("createdAt","desc"),B0(20)),oS=H0(iS,{includeMetadataChanges:!0},n=>{const t=n.docs.map(e=>{const r=e.data();let s=r.createdAt;if(s&&s.seconds){const i=new Date(s.seconds*1e3),o=i.getFullYear(),l=String(i.getMonth()+1).padStart(2,"0"),c=String(i.getDate()).padStart(2,"0"),h=String(i.getHours()).padStart(2,"0"),f=String(i.getMinutes()).padStart(2,"0");s=`${o}-${l}-${c} ${h}:${f}`}return{id:e.id,...r,createdAt:s}});su.value=t,!iu.value&&t.length>0&&(iu.value=!0),console.log("Firestore 데이터:",su.value)},n=>{console.error("Firestore 구독 오류:",n)}),aS=async n=>{try{await G0(Vy,{...n,createdAt:tS()}),console.log("리포트 추가 성공")}catch(t){console.error("리포트 추가 실패:",t)}},lS=async(n,t)=>{try{const e=dh(Rh,"reports",n);await z0(e,t),console.log("리포트 수정 성공:",n)}catch(e){console.error("리포트 수정 실패:",e)}},cS=async n=>{try{const t=dh(Rh,"reports",n);await q0(t),console.log("리포트 삭제 성공:",n)}catch(t){console.error("리포트 삭제 실패:",t)}};Xa(()=>oS());function xy(){return{reports:su,isFetched:iu,addReport:aS,updateReport:lS,removeReport:cS}}const uS={class:"modal_box"},hS={key:0,class:"modal_title"},fS={key:1,class:"modal_message"},Ph={__name:"Modal",props:{type:String,title:String,message:String},emits:["confirm","cancel","close"],setup(n,{emit:t}){const e=t;let r="";const s=i=>{i.key==="Escape"&&e("close")};return js(()=>{r=document.body.style.overflow,document.body.style.overflow="hidden",window.addEventListener("keydown",s)}),Xa(()=>{document.body.style.overflow=r,window.removeEventListener("keydown",s)}),(i,o)=>(pt(),Ct("div",{class:"modal_overlay",onClick:o[3]||(o[3]=bu(l=>e("close"),["self"]))},[X("div",uS,[n.title?(pt(),Ct("h3",hS,Le(n.title),1)):Xn("",!0),n.message?(pt(),Ct("p",fS,Le(n.message),1)):Xn("",!0),n.type==="help"?bf(i.$slots,"help",{key:2}):bf(i.$slots,"default",{key:3}),X("div",{class:Qn(["modal_buttons",`type_${n.type}`])},[n.type==="confirm"?(pt(),Ct(se,{key:0},[X("button",{class:"btn_cancel",onClick:o[0]||(o[0]=l=>e("cancel"))},"취소"),X("button",{class:"btn_confirm",onClick:o[1]||(o[1]=l=>e("confirm"))},"삭제")],64)):(pt(),Ct("button",{key:1,class:"btn_ok",onClick:o[2]||(o[2]=l=>e("confirm"))},"확인"))],2)])]))}},dS={key:0,class:"select_list"},pS=["onClick"],ou={__name:"CustomSelect",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:t}){const e=["❓ 기억손실","☣ 말바꾸기","🤯 황당언행","💫 인성확인"],r=t,s=Ut(!1),i=()=>{s.value=!s.value},o=l=>{r("update:modelValue",l),s.value=!1};return(l,c)=>(pt(),Ct("div",{class:"custom_select",onClick:i},[X("span",{class:Qn({placeholder:!n.modelValue})},Le(n.modelValue||"선택하세요"),3),s.value?(pt(),Ct("ul",dS,[(pt(),Ct(se,null,Tm(e,(h,f)=>X("li",{key:f,onClick:bu(p=>o(h),["stop"])},Le(h),9,pS)),64))])):Xn("",!0)]))}},mS={class:"report_form"},gS={class:"form_row"},_S={class:"form_field"},yS={class:"form_field"},IS=["placeholder"],ES={class:"form_field"},TS=["disabled"],Op={__name:"ReportForm",setup(n){const t=Su(),{getRandomMessage:e}=kT(),{addReport:r}=xy(),s=Ut(""),i=Ut(""),o=Ut(""),l=Ut(null),c=()=>{const T=l.value;if(!T)return;T.style.height="auto";const C=Math.min(T.scrollHeight,130);T.style.height=`${C}px`,T.style.overflowY=T.scrollHeight>130?"auto":"hidden",T.value.trim()?T.style.padding="10px 16px":T.style.padding="10px 16px 0"},h=Xi(()=>{const T=new Date,C=T.getFullYear(),D=String(T.getMonth()+1).padStart(2,"0"),M=String(T.getDate()).padStart(2,"0"),z=String(T.getHours()).padStart(2,"0"),W=String(T.getMinutes()).padStart(2,"0");return`${C}-${D}-${M} ${z}:${W}`}),f=Xi(()=>s.value&&o.value),p=()=>{let T=i.value.replace(/\D/g,"");T.length>=5&&(T=T.replace(/(\d{4})(\d)/,"$1-$2")),T.length>=8&&(T=T.replace(/(\d{4}-\d{2})(\d)/,"$1-$2")),T.length>=11&&(T=T.replace(/(\d{4}-\d{2}-\d{2})(\d)/,"$1 $2")),T.length>=14&&(T=T.replace(/(\d{4}-\d{2}-\d{2} \d{2})(\d)/,"$1:$2")),i.value=T},E=async()=>{const T=new Date,C=T.toISOString().slice(0,16).replace("T"," "),D=i.value||T.toISOString().slice(0,16).replace("T"," "),M={category:s.value,occurredAt:D,content:o.value,createdAt:C,isOpen:!1,isEditing:!1,iconSrc:"/src/assets/images/open_icon.png"};try{await r(M);const z=e();t.openModal("alert","리포트가 기록되었어요.",z),s.value="",i.value="",o.value=""}catch(z){console.error("리포트 등록 실패:",z),t.openModal("alert","등록 실패","저장 중 오류가 발생했습니다.")}};return(T,C)=>(pt(),Ct(se,null,[X("section",mS,[C[6]||(C[6]=X("h2",null,"리포트 작성",-1)),X("form",{class:"form_wrapper",onSubmit:bu(E,["prevent"])},[X("div",gS,[X("div",_S,[C[3]||(C[3]=X("label",null,"카테고리",-1)),zt(ou,{modelValue:s.value,"onUpdate:modelValue":C[0]||(C[0]=D=>s.value=D)},null,8,["modelValue"])]),X("div",yS,[C[4]||(C[4]=X("label",{for:"time"},"발생시각",-1)),Ar(X("input",{id:"time",type:"text","onUpdate:modelValue":C[1]||(C[1]=D=>i.value=D),placeholder:h.value,onInput:p,maxlength:"16"},null,40,IS),[[fs,i.value]])])]),X("div",ES,[C[5]||(C[5]=X("label",{for:"content"},"리포트",-1)),Ar(X("textarea",{id:"content","onUpdate:modelValue":C[2]||(C[2]=D=>o.value=D),placeholder:"리포트 내용을 입력하세요",ref_key:"textareaRef",ref:l,onInput:c},null,544),[[fs,o.value]])]),X("button",{class:"submit_btn",disabled:!f.value}," 기록 ",8,TS)],32)]),_t(t)&&_t(t).isOpen.value?(pt(),mn(Ph,{key:0,type:_t(t).modalType.value,title:_t(t).modalTitle.value,message:_t(t).modalMessage.value,onConfirm:_t(t).confirm,onCancel:_t(t).cancel,onClose:_t(t).closeModal},null,8,["type","title","message","onConfirm","onCancel","onClose"])):Xn("",!0)],64))}},AS={class:"report_list"},vS={class:"filter_wrapper"},wS={class:"filter_row"},bS={class:"form_field category_box"},SS={class:"form_field"},RS={class:"filter_row"},PS={class:"form_field"},CS=["disabled"],VS={key:0,class:"empty_text"},xS={key:1,class:"empty_text"},DS={key:2,class:"report_items"},NS={class:"item_inner"},MS={class:"item_left"},OS=["onClick"],kS=["src"],FS={class:"item_right"},LS={class:"item_info"},BS={class:"item_row"},US={class:"item_field"},jS={key:0,class:"item_category"},KS={class:"item_field"},zS={key:0,class:"item_date"},qS=["onUpdate:modelValue"],GS={class:"item_registered web"},HS={key:0,class:"item_detail"},QS={class:"item_field"},WS={class:"item_contents"},$S={key:0,class:"item_content"},XS=["onUpdate:modelValue"],YS={class:"item_buttons"},JS=["onClick"],ZS=["onClick"],tR={class:"item_registered mob"},kp={__name:"ReportList",setup(n){const t=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAkNSURBVHgB7VltcFTVGX7u3c2S5nMjkSSAZpEvgUKW0g6iMg2disLoJOgg0lYSOkahtR847b9WE8bfAp1pFaSTZJgpIqMJdWQQprC0UpFUWWKEYLDZQEJjSMiSLDHZ3XtP33Pux97EzX4km1/yzNy5d/ece+77nPc978c5wB3cwbcbElKMxwsPlyqSvYQx1a3KilOVJCf/iioznyrDC7tywXNlswcpQkoIlBc2uJSw+hsmoZKEzFUlJjGZge50AUymSwKj/yT+Hz37VDCPoqDmrG+zD5PApAiUOxucqo1VM+DXqhCSxKO7ENK4cwI245kIWf6nOyMN1cvpRMQ7MSITJkDCl5JAtWQaLm2WdaH0e4SIoQWjPUJG70OagY96/fw/Lc96kCQmROBJZ8NvFQmvWUxCF5whw5mGVetm4b7FuSi4NwNZOQ6QhnDl0k20Xfbj03M3cP36oFUTmmmJ3+oOr3fL7mRkSZoAF55mdJc2c5yAJnzBvZl4ac8KLF11d9wxjja0483XPyMiAVNjNA5TZTFqZbO3oh4JIikCZDYums3/Mv4hWdJsmkYoe2Eent+5DMnizb80Y+8bnwltGIuem5UiKcsvNm31JjKGjORwSqJZFzaum85Lf1oxIeE5qn6xDK+8+gBNo75u+EU/JElucJXWOhMZw4YEUe58p5pGLuMzTrSFt6l6dRnWbbkPk8HChXehaGYmTv7zmrAHxseW4LQp0nBvZ+PpeO8nRICbDiRpF1l8HmRJ2H3Ztnn4ye8WIRXgJAYHQ/B+fkPzTKQH1QZ39tyyvX7fkeFY7yZoQmop2adLC0gMM8i7lFXNQyqx/fllyM51mC6Y9OBMC8sV8d5LiACzyRWafWqu76e/X4QZ92QglcjOduBnmxbpa4tf3Emo5fHei0uAR1sartQIPGRKWPpgdFd5fHc7qqpOYM8Jb8z23eO0PysIGIuZHKrESuMtZjviwQ63yrhz4IuLwbXEGXX2P6zrxMEdF+F192O/0gpnxjRUPBRZIx/W6+3L+/FXas8b086RQ1pYuCAPF6/cFIuZxwYg7KYmz3jixdVAkIVc1ohbWBzddIZuhbQHSQsu7b0Do9v9QbMNUdoNLJp/l5b8aZFdgk0qRgzEJSBLtmIR7rVoiTlLcqP2+15ZIfJdGULA4vwcVD68eEx7EfKJPKM5dUVpNzCzKEtbA4AeoW0uxEBUExJZpgxauDynB7d/YT7Q7TMa8l3fQc351Xjmyz7MXeQUJhStfRO1z4vSbiDyHSamlzGlcvba/W7SSmPXsefq4xIg4Ulo1sC0LJOp/E9jYQl9MYyHDKcdK1YUxGz/fox2A6qubWgpt4tkKCbNlRWu21ethEMbbpz4pekF5DHCc3s/RcIW6+mCBMP+ZehqTXkRNwrcnRquVBVakPTILzJWF6bZT969/s/uqATopVPENpeZ+U5k5kUAI+/z6EYXphJrHy7GrMIso4oTUZnp2tDzrzzVlrbL6G9OJy9QqLo6Za2cNrwwHysfK9KMhnrOW+xEZk5aQoK0evpwhlxnT8cQchdMw1N/uB8FsxMLfgO3g/j8Sp8p3dGzPux7r0UvUQ1rYGv8jds95hoggUuMDJN3eGRTMapqJpZlNlZ/gSM1bZTPMASywrj1ZRC1Zy7hxT8uR8XTi+O+n5PpwKqSIvP3qmVFuHpjEO+f82kmpZlWCTV5ZAsBp8oXvU6CV1YTQa9vCI072xB0qOjPC6I3fwR904Poyw9iZ+M5+IdGMBEsmTs9kujxizERoSMEpFCHnsoKD/DvD66ju3MIyeKTv3fj6wwFN6eP6MLTpd+vOgKoP9OKZHH1q0Ec/MdliOgg62tSVoQnMk3IEUprDDrYa6SBPK6F7q7b2Pboccz9rlOUfdweH3xkFjZuXRDzYyM0873ThzGQG8ZAThC3ckL0HMJIuiLWVf/QcFyB9zW04NjHPtOJNPt64f96xNjJEOVnOBy6MIpAo3+D/7HCd/YQu2rDjAKBEM5/3GPuLHzS1INC8kSrfzx73I+vfLwI6e850D4U0EhkhxBOU4UjmDN9/Ahs4NCJL/Dy/o9gVH2q7gGNHQyek1G3muHGHb5RBDiOdT9Vs7bo8Bzy9Vs4BW1NiKRKUx3d2y75YxIomJ2Jtw6tR3N7LxS7VvBz8CFK7skfNwIbuNYTMIU3XalIZbgkwsTrAoe31xj9vxGJj/9vY+WPZh30QJJfAQ8cspneCi0MBkKIh+wsBx5aOhMTgiVl0SdQ/z76FVmquX142x5r96i50MmuzXV0qyt1ve0m5ZfRgNVGMGlrvYmphFE0iVnXstL6Edirh999riNa/5jZqMf3tFd2qPVmAKHrMm1O8fp1ymAkjLKWTNAE+sYTniNuOu1p3eyjoXyQNfc6EBjBWweSd4WJQuRbur/X86CYSKgmViHVaemE5p0O/u0yaSGIqYCx3njSqJAVEZGYJWVCBNIzhveQN/GrunoHBkdQ/fJHmArkZjoMExJmRCZVmf7M667x+idEwOPd6pdl7NYqMyZc48nT1/DG3makGutXukQuZHgfmjQqAZXa8fonvDPX2fPu6ZmFT5bToIWkXsZz9Kbz3Wj69CtRpPCCPBXIzZyG9Gk2HL9wzUjjqSaRXLal628pLUfPYqIEOGbkPfEB7HI5ubY8pucknd0BHHj7ErronkUkZlNNO1n8YEEB/nWxCx19A3oEFi71AceKJw6Fve/7rX2TLq/c7lqXKstUN4CqN0lssUcOMYDM7DTaWcgbFU15WWoccEQuZuyFWk9szEXc0TcIHyegb9+r2v8e5cCv1kyKAMf9RMKeJtfSoKWRGdIKf3FQYQrLLCc2TK91mVnhqbKVQORYyjzRGXNcxS9ZlsuV2hePGLIku70u0Ord6mtpqlijMnUruVafsWshPsJ31Cx1hSWDHFWeGgd/KtePnjYY/SAzizvVUwo9rVAYc09aA2Mxf3VtJX2gjD7wQ0WmHWzJchYmzEyVVItG6GBPIyjMz5o6GBPBT2v44jV2KEh+bXPBRy1rUKdloikjYIXYy0xjJWH9t7jbtSfz2W5p43frb7v+r93Szp94H6ZcIOH9uIM7SB3+D7sTv4VlgJNzAAAAAElFTkSuQmCC",import.meta.url).href,e=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjmSURBVHgB7VlLi1zXEa463WNP4oXaiQ2GLHS1iiAkunYIKNm4FRLIwo5GWQSbPGbGmOBAQNEfSDR/IBpBgpczCiJKHCyNt/ZiRsYLg18tLIwWxm55600bL4w0fU+5zqmqc86dR3drRjvrQNM991mPr7766gzAg/VgfbMXwn1cv3ri/33q4glPUBP6HiH2GiCADgzBwWDsmhtvffz8FtzHdWgHFp64Vt0hfxaQFj3So2w0ece/+MmEBN6F7/ibyAHymSH/vcXHV96+9fwQDrkO7MBC71pvPNec9whnPRtNjoKRyEYCHyP5HY9FB8QRCufkWLyO1t1DbuXtwcEdOZADzzzGUEG3xmZUanAwMjihRosTbCAAH/PqROlc+JZz8CkffeHdm3/YggMsB/e4nv3uq0t82yabdhQ0qqCR9gEmwXgQIyH+RkoOQTAaYpYAk2OV7+Bm/dTlv8IB1j058GyPjUdYA4eKa/lEg6NRwazgkHzHjGj0w7EYcXGOzwXHUKAW7iH6R/3jy4twj2tmCIVibbbpE2+GaXEqJBjjJIWbICQ43wP3YPDZ67rGNU9+9M7yYFa7Zs5Ac5c2vUY3RhHspRrhwvhoLCisYsTTJ5AqQYZZzqJkg5PbuVrVa71Z7ZrJgV9/51VmGzoKiGA4VsMpgsUMCk4BJUiFkxFOoAyV4YXyDIzOiGPhKIbCP/bteXcWZlxTIRSh03D0uWhj2SUmCdSY+T5Bykn0E/87KmBSUmwo6vA8LNhKmKohP7r7LTg23FoeTbNvagaaxvd9oMtgfIiQMoz8XRov2I7liG3miX8rZECiD5KFkFECy0I8Lp27N3fHzVTQUx3gty5Cwqo3GEA2yr5BYYJW0BEebQgBtD8ZUlJTkoF4X5cWYIY10YHQbdnkp9MLHeQidoJjwzMbsAro+uzPRdBIm8Na5KuOXN+TX+Wok7GOBEc7ucQ/fviap6v+9GLuTjo5nh/XgR68MEeoOMarQifgXIowmLD+5ifPndPbrv/0+/+p+KoFj3of0aX3Pvx9Ov/DJ/9d8fdpEJglOKb60PvYgpqv25pk48QM+Iaq3PqV/0GMljujO4F1WsXWIA4k6gqbTvs8dcL50NRUK6Va0P7ipPj5wFGYsiY70OkcFSNQeDy+RJkIgtZRnCMsnKyuVOGek8evVHw5d+zgKAooOBt1Lefrk2sVE89SMBo0IPGa4IT0CchgwgqmrF00GlXmw7DIWK25GPv8iso6aHC3QWENa2DeRBzSiI0aMLXWbNQRr+rUMsj38nk/4HN14+AI7ercSs0aIK2dIf81wA5sfPb6i5emOrDw+LV6G/21QJvgSkUZCpeioTHqHSlk42/JSJYKOxzbpUKzFGnJjuAA+rKb63PlHj8ce/jN52/8abAnhGLDAtoMEhmMGsOjUIWBK1lIopu7MO1Bj1KMe9MmlNSr/K/ZEMjlHhLfGZ91DOdg8/Ff/qve04HG0yY7cIQg6fqk7TVaUTMqI+XGVahRiSgVfG5OELQaH+ZrPZihEijQgEjD0+DFOoutogcPz13Y5UAYUDyx1rHUxoeGh6DpFDBWgaIhmWzOzUqPM/V5cFzIHX7u+AW+YhiIAArYaO/Q6MrskKGHWVMV84VmqP/YMy/3zQHpA9g9QdhgFlUAUERU+N6jjo6pOZnibM0FhCvv3/zdShGk6/xZ/8FP1i/wcHOWdGrwSa3KMyHDTDLNwbMMivATcSjIwBOg/cHYvGfUKIMG5OKKkY86KEkJX3RmmbhQYULDHcanNfcIrbCRo6J4SQJlWohM6WqGit6TYJic7rVrgJrbUac7g4i29MQGmCMNmGpA+FuxKv3gNdhnDVhZskGXMiTAihwNLjqxQfE8cQ482vQmx2jQcuChR+Y2sINfGDWaNhFDcQdUPBo2U9Yg4Xri4meNxGkbOdV4hY71mrRJgOW46hGsHxHdaDmwMTwzYg2+KtE01dmChgmylF7ARHnoEyvljrtzHe+vMT37JektOqEl48CYRigZchNMpKHB4h/nRxt/HtpzW43sF9/73zrrlMVdTQdzH0iUhzK0SIODcuIaNSHFcb4t+oOjmq/rxfs70hhbDTLWnt81J7fe6WB9dPWl5dLmXVLi59WVJd7z+bvXPZ/cZVX+psGc0pRVdlTf7h0JDna9dHEPOj4C2SSW94nK49bsRvy9Mtp46eJOexH2Wf3qlXq764O+v+BVs+QNLNEsMlF55W6AVvRaG1pUshpR2pHIxoqY87pjAdjIzHDJz3XPj66+eHs/O/ctu63hbwdzXdrIxkuLl5drqkMkVV5YgYOeh8Qiwmi+JSuQbGsl7heJiCv6iRQ618RwkvETHYhO8OZr4HZqdeW0wwa285DnZCiM8IXcoDQbSBPzRTNM2y2529tsPMOeyfSZGHGdsMCzRi2xReoDuSbAZUdaQg5tU0tpU4szZQeKDh+yDjR1pJzqwPz8/EUKHRTMCPtGKjMiwz0pDRqPlwVdfADyflCi5xQApVb+4fzS/MLL1aEc2BqcGfFVq6XIU2dUv4hyTRDJ9IfWM7RjJChJJhFS5ko9pc1Lg9Lrdv3aJPsQZlxP/ejyB3x1nfc2Dc0QZt68VSg02xpk4pV77JOWe6VZthBmCpbrucDPffXKX1bhIBmw5e9un4kFLRHLos6GETkmWsbkCBaDeo4yZVEmtKpsZRosSwjZCOFz7m/zz+0NpZkdGNxaZjYan+KXDQGT/iHTSaXMENx7bMlsKJxwLfxj0vrhdxR0XiAanxWh9ih3hrVDORCdGCwP7/jmFD/2evp/gO3SFRH2MpJC2+iUlRhWsh5hn2gNJbWbmIx9lw4P/c4f/3n6UA6EdYuduPnu4ikWf8sCKRN/UMBCM5Iinc6nfdHUicG6tCnctG1jXd0c5sdQvdOemYt4v3X8Z2tLLMRO88v6bMSRFnRckuYqK7KxabfDlZnLe07ab7SIg/Cj29vbDOH/nhveVwfKFfcykU7YhuVYj4/D3+NxHGDjsS60NjXHUBxPv8etv8df3rkBG+embrc/WA/WPa6vAU1ivTsFJlpYAAAAAElFTkSuQmCC",import.meta.url).href,r=Su(),{reports:s,isFetched:i,removeReport:o,updateReport:l}=xy(),c=Ut(!1),h=Ut(".");let f=null,p=null;$o(i,A=>{A?(clearTimeout(p),c.value=!1,clearInterval(f)):p=setTimeout(()=>{c.value=!0,f=setInterval(()=>{h.value=h.value.length<3?h.value+".":"."},500)},600)}),Hi(()=>{clearTimeout(p),clearInterval(f)});const E=Ut(""),T=Ut(""),C=Ut(""),D=Xi(()=>E.value||T.value.trim()||C.value.trim()),M=()=>{T.value=T.value.replace(/[^\d]/g,"").substring(0,8)},z=Xi(()=>s.value.filter(A=>{const _=!E.value||A.category===E.value,g=!T.value||A.occurredAt&&A.occurredAt.replace(/[-:\s]/g,"").includes(T.value),ft=!C.value||A.content&&A.content.toLowerCase().includes(C.value.toLowerCase());return _&&g&&ft})),W=()=>{console.log("검색 실행:",{category:E.value,date:T.value,keyword:C.value})},G=A=>{const _=s.value.find(g=>g.id===A);_&&(_.isRotating=!0,setTimeout(()=>_.isOpen=!_.isOpen,300),setTimeout(()=>_.isRotating=!1,600))},H=A=>{s.value[A].isEditing=!0},tt=async A=>{const _=s.value[A];_.isEditing=!1;try{await l(_.id,{category:_.category,occurredAt:_.occurredAt,content:_.content,createdAt:_.createdAt}),r.openModal("alert","수정 완료","수정이 완료되었습니다.")}catch(g){console.error("수정 오류:",g),r.openModal("alert","수정 실패","업데이트 중 오류가 발생했습니다.")}},nt=A=>{const _=s.value[A];r.openModal("confirm","리포트 삭제","삭제하시겠어요?",{onConfirm:async()=>{try{await o(_.id),await new Promise(g=>setTimeout(g,300)),r.openModal("alert","삭제 완료","리포트가 삭제되었습니다.")}catch(g){console.error("삭제 중 오류:",g),r.openModal("alert","삭제 실패","삭제 중 오류가 발생했습니다.")}}})},w=A=>{if(!A)return"-";try{return typeof A.toDate=="function"?A.toDate().toLocaleString("ko-KR",{hour12:!1}):A}catch(_){return console.error("날짜 변환 오류:",_),"-"}},I=Ut(!1),y=()=>{I.value=window.scrollY>300};js(()=>window.addEventListener("scroll",y)),Hi(()=>window.removeEventListener("scroll",y));const b=()=>window.scrollTo({top:0,behavior:"smooth"});return(A,_)=>(pt(),Ct("section",AS,[_[10]||(_[10]=X("h2",null,"리포트 내역",-1)),X("div",vS,[X("div",wS,[X("div",bS,[_[3]||(_[3]=X("label",{class:"label_text"},"카테고리",-1)),zt(ou,{modelValue:E.value,"onUpdate:modelValue":_[0]||(_[0]=g=>E.value=g)},null,8,["modelValue"])]),X("div",SS,[_[4]||(_[4]=X("label",{class:"label_text",for:"searchDate"},"발생일",-1)),Ar(X("input",{id:"searchDate",type:"text","onUpdate:modelValue":_[1]||(_[1]=g=>T.value=g),placeholder:"YYYYMMDD",maxlength:"8",onInput:M},null,544),[[fs,T.value]])])]),X("div",RS,[X("div",PS,[_[5]||(_[5]=X("label",{class:"label_text",for:"searchKeyword"},"검색어",-1)),Ar(X("input",{id:"searchKeyword",type:"text","onUpdate:modelValue":_[2]||(_[2]=g=>C.value=g),placeholder:"검색어를 입력하세요"},null,512),[[fs,C.value]])]),X("button",{class:"search_btn",disabled:!D.value,onClick:W},"검색",8,CS)])]),_[11]||(_[11]=X("div",{class:"line"},null,-1)),c.value?(pt(),Ct("p",VS,"최근 리포트를 불러오는 중이에요"+Le(h.value),1)):z.value.length?(pt(),Ct("div",DS,[(pt(!0),Ct(se,null,Tm(z.value,(g,ft)=>(pt(),Ct("div",{key:g.id,class:"report_item"},[X("div",NS,[X("div",MS,[X("div",{class:Qn(["item_icon",{rotating:g.isRotating}]),onClick:xt=>G(g.id)},[zt(eT,{name:"fade",mode:"out-in"},{default:Tu(()=>[(pt(),Ct("img",{key:g.isOpen,src:g.isOpen?_t(e):_t(t),alt:"toggle icon",class:"icon_img"},null,8,kS))]),_:2},1024)],10,OS)]),X("div",FS,[X("div",LS,[X("div",BS,[X("div",US,[_[6]||(_[6]=X("label",null,"카테고리",-1)),g.isEditing?(pt(),mn(ou,{key:1,modelValue:g.category,"onUpdate:modelValue":xt=>g.category=xt,class:"edit_select"},null,8,["modelValue","onUpdate:modelValue"])):(pt(),Ct("p",jS,Le(g.category),1))]),X("div",KS,[_[7]||(_[7]=X("label",null,"발생시각",-1)),g.isEditing?Ar((pt(),Ct("input",{key:1,type:"text","onUpdate:modelValue":xt=>g.occurredAt=xt,placeholder:"YYYY-MM-DD HH:MM",maxlength:"16"},null,8,qS)),[[fs,g.occurredAt]]):(pt(),Ct("p",zS,Le(g.occurredAt),1))])]),X("p",GS," 등록일자 "+Le(w(g.createdAt)),1)]),g.isOpen?(pt(),Ct("div",HS,[X("div",QS,[_[8]||(_[8]=X("label",null,"리포트",-1)),X("div",WS,[g.isEditing?Ar((pt(),Ct("textarea",{key:1,"onUpdate:modelValue":xt=>g.content=xt,class:"edit_textarea",rows:"3"},null,8,XS)),[[fs,g.content]]):(pt(),Ct("p",$S,Le(g.content),1))])]),X("div",YS,[X("button",{class:"btn_edit",onClick:xt=>g.isEditing?tt(ft):H(ft)},Le(g.isEditing?"저장":"수정"),9,JS),X("button",{class:"btn_delete",onClick:xt=>nt(ft)},"삭제",8,ZS)])])):Xn("",!0),X("p",tR,"등록일자 "+Le(g.createdAt),1)])])]))),128))])):(pt(),Ct("p",xS,"기록된 리포트가 없습니다.")),Ar(X("button",{class:"btn_top",onClick:b},[..._[9]||(_[9]=[Km('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1904_442)"><path d="M20 5C32 5 35 8 35 20C35 32 32 35 20 35C8 35 5 32 5 20C5 8 8 5 20 5Z" fill="#6000B4" fill-opacity="0.1" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 21.6666L20 16.6666L25 21.6666" stroke="#6000B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_1904_442"><rect width="40" height="40" fill="white"></rect></clipPath></defs></svg>',1)])],512),[[aT,I.value]]),_t(r)&&_t(r).isOpen.value?(pt(),mn(Ph,{key:3,type:_t(r).modalType.value,title:_t(r).modalTitle.value,message:_t(r).modalMessage.value,onConfirm:_t(r).confirm,onCancel:_t(r).cancel,onClose:_t(r).closeModal},null,8,["type","title","message","onConfirm","onCancel","onClose"])):Xn("",!0)]))}},ss=Ut("light");function eR(){const n=()=>{ss.value=ss.value==="light"?"dark":"light",document.documentElement.setAttribute("data-theme",ss.value)},t=e=>{ss.value=e,document.documentElement.setAttribute("data-theme",ss.value)};return js(()=>{const e=localStorage.getItem("theme");t(e||"light")}),{theme:ss,toggleTheme:n}}const nR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjfSURBVHgB7VlRaxzXFT73zqxWlhx75PbBhFKPQkpNaOuNacGBplpBaQ0tVIodx66pvfvS0rRE2j9Qrf5AJL3UL6VamVLFMUGyk4dCHjRuoA2kxGso1MXUGj0UCoFojOzVamfm3n73zsxKlXa1O5L6FB1xPYPnzt3vnHvOd849Q3Qoh/LFFkYHJD/+8u08ccqHjJ2RnHKCkyWYwCApDbkiSQw77hWXDlhM2oeMWAs2QBcEk2Mh0XGAZBKA1b/4I9yT5OqObMnYFF4ZpQOWPSkA4BYXNBUyWQA40lbmMWBGWonomiih51it1nqt/71CkGVTG1nhbWTDsuO+MUcphFNKuXhsYZwL9hguch3wlM0BUls+VgAqaehQAoPUc5KuH8piq/VEhk34pjju94Q2xjSllFQKXDi6MC2IvQ1rDyiwxFlidYAWHtDOEmOuIL0jTFue2CoXcvjjFv4/cnLB9k15yu8RDEoQ7q1cbtZKg6krBZTLvH508T7AvaW9O7Z0PFwhqbBef/pCaIqbggubDKijFcTeSDnZKnjVmoEflgOADzIAn5HSx7XRw6bsc7M2dSldsdCl/jv34e9n4DYaNEAyMpgHlil/8NnFmWTe979yewnP80LFg5pLcvHe8uX/CdyfGgsF0WO8vZENBurZkOpZgO4VtKHvQ1zVvZAbveHKRo8se4u/2DUmOu7A68ptGJ1p+jdXXk3LjWDj5a3gz9tgJIDXwJlyHeX+4eT29aTJJxpmaDVMZXFJkfWhhCn0Duid6AkZ7hETQceY2JWFLvcvFELiY7C0AiVJAwura3Jt2PGK3ta5jdDPE2sykSKnB457tbp9zSAjLYBmcB0NVt8DeORKSqlQXbVSviE86iBtd+AyOB4BOBGxCiUuscKlMbodvBLG6SdbmIjBNJVW69bNsORnyPXVDpghawB0shu+Vkaq3VA748mMUaYO0nYHpM8mwCanRGxVWPcJcA0veqNuy/kSyYojiVHMSlJUW81737tQwaWSPz1vA3AZ7HPNj91Iu5QhKkz2ltbnix2tr6TlDlzuVdanQuLPmg4lK7cDrxXgKtsSi96RzAg2HtAu4jy84vqGPx6zkKZR5UqhISe9xe7At1UgNOA6XIOKsioS0V1vdGa3hUCYFmnwQivhuJ1BVKtFz++RXhwLKg+43uIvXUoh7WIgr5NRxPMMGpSpg6j5inmaia1LgeuUGplwBVfP56JMKWXHT108upBH2C5Jg5FiH1Do6t3V1050WujVF975HFXngEpgyBeSs57Bv/zjwgrtUQrG3cK6KafWjgXe02NB+c//al0jtdgBPhQVXyJhlDvUheCdFcX8Mq6NhKwN0j4k5Gyi3hda6/2B/bS/0TYf7FAAVsxFlEm6UBOMOdSFoPap6vqHRRVcwPkQ7UEKdLdwnX2wWsuGdq0vpNqRgNahyPM/+N3ycxd+e506KiClretH9YQhHhm51IVA0aq2vnoPimDkaU9iTKCUsNb7AqorBTCeHQllrS84hfvpzgpoOlSuoA4mgq0FTx5087PZI+tzkfXjEhuns9w3ZvOUUlAQavA1gH52JJCwPnYgYGrgmddRAaFOVjyqOTUdet1xsgNKxHxHbMkdlDEnKKWsHQ1KcBtXAYbFMbQLoUoVq3hcpk4KRIVYRKFpT8whU8WbbBZzqjL91tmb42nWQLKsfPjvS4MA72FIFQO13nBZVt46QbNjcx0VUCUDJcGIkbe6P2D87e8/c/CO08zgmlLZb176zmyOUsrac36p3u+v1PrEqjDZZLt5O2z8oy+9t4wDia1qes1CQePlDz+7WqUuJXcah5Fe8z7etzQdq3VIeoGUw48+KXa9TreyYwe4was6CCmu/7OZVHRYfVh0sYOT0XFSH+5VPFgsw5a+9srcGB2wtIoBRza7DCobU+rtr356bRq5oByTQeJOx6Uppge/9/v7dr57drJGbti7Pd/hQudP3s7jx5aQAKSIjo9PBK8NdlOcbZeXzs1NYI1y3HZhoaJmI1FIPEB8LJIp7gUUuP/5U1TEKcCo8e0A4Yd5Q8JAXYZcFBo0XH9nZ6HXkmd++Pztz0Ou6xrVVYMabNxxL83QHuTrr8yOq0CGIQbi/pBec1MppE5Uvap+EnElm8RfXBGTnsNoZv3Wm6Xt67esRvHSTHyIQYXPVMskFRVulX/+tThtZORZGKGiQKszdVK1aiWYLsA17UbluI4bmSgrIvBtpaUCDdOc2TxGClVd2t998VbqpJTIQ6foPv6oWMSaw4C7KONzQ3Ta01mfmG7FRJZvNsaaR1TVONto6QFtdct/9dYUGldjqoUSb6nnkxz+5NHVfVPhyTyoNoMmgMGHsD4awVIdR62YclelQQP6njdbk5X6H39VpFQK2AuWZI1lxMLxZpctKuyGP3548F1mJSqA8TtLQuWhJAbQOMOxHwFcclu907Yr4bijHmOiRHE/KFpQ2GCRpXO5eZv+T+B1MUnRH3ZDBiTL7cDvqoAS5/GVCmNsZtMXNUPYvhBLuQNUQnO9om5GdtRXjeJP/bY//+u53d7t2Jn76NEbJeQER++E7p6o3UD/kwXLubNzZdqnnBi5UQbQT+GedsRMMsngS+vzO2lzu3RVb+bRMa41srNwn5E4oKVq4IakA80lwyg/6/XvuE53yc4ambUywr+OdcYxbBHTZqjc1NDZ28nWG6PeYqnjeqkK5m9/8w9T6NuMJwEWKUPJKQwsRQ7j0vFNUoegaqKQff6G7YeGJUwaCvH5CaQwgjWs+OwghV5LRMmNkLDe7Wz5PSmgJJe7iU9KNKFiARkWltuSPTk1M2h0Tf5PgYznseidZP5mAwEVK2Pj9XffnEuDJ/UXmmr1WqUhw2HERYVieo2zZ8Qd8XE0zrTN7wjNGGKxpXWmj58Tnzb9vsG04In2+ZXytPoQwXUDOA/XiM8QcUMsqneomZDiXdn8xiA9fBiZ5tQ7k6aVeKAKbJUXX705FLBGDgrhGwHcC8kIQWnpqpbLJ8pFQi5UqV4Vkle9939+jw7lUA5l3/JfAaR8wqX42CkAAAAASUVORK5CYII=",rR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAaESURBVHgB7Vm/axxHFH4zu74sLuI1aQwhaGVSqEjgCCncBJROnePKJATuRCDGjXWkSxNJ/0Cs/QvujhBUGcmdixgpkICagEoXSbyCQJQiaA2JOJ9mZ/K9md2TrJNPJ92oip4kTrq93Xnve+9974eILuVS/t8i6IJk7u1HzUKYh0aYPRPo5afZ3S5dgFyIAXM31hIji41C6kQLQ0ZSbsT+9GY2n5NnkXQBomW/qaVJDOCxP5JiklcX6ALEuwcYfR0UG0B+yqIfGMGvMCgPip53L3j3gA5VU5OZMhLRj6cbfFsvkLjWDyPvXvDqgbkE6B8A/cAkhdA2fLSAAYG2xuCdvNZ/6dULXj2gFdDnxAXerDwJkxmpX1hDyOXCfuTXC94MYPQRNA2XuIZNgAGig79XtAsjG0ok9UK93o7Jk3gzQCkwD1FilRcc8pSR1t1QRamjUZfM+P16qGrevODFgLlkNRFCNAa0KfhLdDazT7PN7A6Up9QmtHQ5AUZq+fKCFwOUksw8zPvGhYt43gf61fUo6qUIqD0XVpadUBf8eGFiAxh9KN5wCJuSbai7BfSrz2xuz+dAPa08RDapCy9emMiA2WQtPtBBi6RIKsWg4o46gn4lKuynOC23IQQn4bPxQRgsztxqJzSBnKsOzMbtuHb1astI+aCQ5jqQJxs6tuqKpZ9+vbt80n31+veLJPRSwYwkTZkTegf3dXuaOtnWfEZnlDMZMBuvxVGkWiYQC2CUuGwRyoJlEPtm50DTx0fD51UD2rGWwXMt6ZpjJWuIMIEtchleu0rCkM3xDRnLgE+geL8GxQUUlyZm5NAqG813M+o27jXCw7R+/u2zkW3z+x+0mxTIxUKS7VQHRvAzpP07Q350ZaQ62ZP72Wm6idMUV6Fu4VMLhVXcQHFc4IOs++2Bezg8lXo/HbdFmKm3ExmFDS0KVG7UDvdcY4kAftGOEDKA1NVSdXZHGCJepziF1NKGHiipQXlGlHF76HYMKoh7JOb4ig8ZggRWoQSD6SaeO1U+twQHQRVYkDL8dGVNd3bXhw0Rw8o/apKQ3zLiWpRNGMe4BIlLGy65NnpFh+dX/Lgks8xEugE2wxSnkyMFjxxohr2e6UAs/b1+rzvSgNvx2u9ghelXEtQ+SEDxYkXtQ/Hc/2TFcgOG1ELdUNI0DQ9EVZg6PWCQfrG3fv/60XuG6wCqpKumxprn4tJeyXEN7B15a8SOS4QzoKQQAcVctbleWAOggrbBRUPAhcffQNh8JSQtwoWJa4NL661r5Td4qzF7c7WLC7bXIQ+CEIoxCLUKUYCeAaCxDGcYMDCfEcx0mCWA7tLxe09M4rl4NaFaDclVNMH51WBO7tUyDxuVcQFi3t56dj5DWHGSTM9yweXcq0QxWAgQWnJZS/P14dAdSaOzN1aTUIYNE+omkEiYGbQU7uHWEPaOyNDjd6kmO1vb4xnCikvSLYTGA26vS/431fxcJjEUNyvqHyi++fqcG6uQsSEUyQYc2nQF6PCwCi24Gyxhln7Z/nxkIbv5UbuJqHioOdcqEAZFDC1SIPIDsJzaH634mQwYGILOc8DbYInSABdWrvgANTW9vX3ywTNgmb42G1DYbSz43gp1YRu9lV4vHEvxSkI6g5RJu3xrpt0lGTXwO0ILGwghXJ9P3OeH3Oef2MwpzZ8XU1xP7LYiIFYecwKl+y/PpnglE20l6jPtJLzyBvojxLNF0XoC+59iyAsD9AMqNxaCmSb9V8nl8yheyUTzwPaz+UwFL5c1T1u20Age3LH/kUPTVp9ABJw/dkXE75idQvXTSZRnmXgis0gHInXFzpYbtB+mZSmyFEYfljVM5SXBhprO7ubp3eZp4mcroTFtCfOiGtx55q31Dr1g0S8Lo23YDKY2pbxsq71t5t778LtF5MJSORvzvJAfXKFpXIoRXRtQOynKngbHLv/xwxfL5EG87YVCpVKonmvbw9id6LVQ04K06INy+SQ3uWXYIXlBnyUgT7K7+7j31jt3IkAyyx7gPga1oo4udsb2N4PeRqZ/Pv3yMXkSr7vRKNLIBctIZZthO9spRl7YYQXVWvpDn8WrAdugRMR+6tjGMg2VrOQqNomR4+F5xPv/B1RITKm5bRCqNgORgzbQO/os3g3ASoS3EyuDLfVgW+0ffZYL+R8ZHmu3cIfLXr2Dvt87+izeWOio5Nnj3pvv3v4LFbeOxg09j/x698m9H+lSLuVSvMt/LqYh337ZdD0AAAAASUVORK5CYII=",sR={id:"app",class:"app_wrap"},iR={class:"btns_wrapper"},oR=["src","alt"],aR={class:"main_content"},lR={key:0,class:"tab_wrapper"},cR={key:1,class:"desktop_layout"},uR={key:2,class:"mobile_layout"},hR={__name:"App",setup(n){const t=Su(),e=Ut("form"),r=Ut(!1),{theme:s,toggleTheme:i}=eR(),o=()=>{r.value=window.innerWidth<1024};return js(()=>{o(),window.addEventListener("resize",o)}),Hi(()=>window.removeEventListener("resize",o)),(l,c)=>(pt(),Ct("div",sR,[zt(OT),X("div",iR,[X("button",{class:"theme_toggle_btn",onClick:c[0]||(c[0]=(...h)=>_t(i)&&_t(i)(...h))},[X("img",{src:_t(s)==="light"?_t(nR):_t(rR),alt:_t(s)==="light"?"달 아이콘":"별 아이콘"},null,8,oR)]),X("button",{class:"help_btn",onClick:c[1]||(c[1]=h=>_t(t).openModal("help","도움말"))},[...c[4]||(c[4]=[Km('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1904_299)"><path d="M12 2L12.642 2.005L13.258 2.022L13.557 2.035L14.136 2.069L14.689 2.115C19.376 2.57 21.339 4.448 21.855 9.021L21.885 9.311L21.931 9.864L21.972 10.591L21.978 10.741L21.995 11.358L22 12L21.995 12.642L21.978 13.258L21.965 13.557L21.931 14.136L21.885 14.689C21.43 19.376 19.552 21.339 14.979 21.855L14.689 21.885L14.136 21.931L13.409 21.972L13.259 21.978L12.642 21.995L12 22L11.358 21.995L10.742 21.978L10.443 21.965L9.86398 21.931L9.31098 21.885C4.62398 21.43 2.66098 19.552 2.14498 14.979L2.11498 14.689L2.06898 14.136L2.02798 13.409L2.02198 13.259L2.00498 12.642L2.00098 12.324V11.676L2.00498 11.358L2.02198 10.742L2.03498 10.443L2.06898 9.864L2.11498 9.311C2.56998 4.624 4.44798 2.661 9.02098 2.145L9.31098 2.115L9.86398 2.069L10.591 2.028L10.741 2.022L11.358 2.005C11.568 2.002 11.782 2 12 2ZM12 11H11L10.883 11.007C10.6399 11.0359 10.4159 11.153 10.2534 11.336C10.0909 11.519 10.0011 11.7552 10.0011 12C10.0011 12.2448 10.0909 12.481 10.2534 12.664C10.4159 12.847 10.6399 12.9641 10.883 12.993L11 13V16L11.007 16.117C11.0333 16.3402 11.1341 16.5481 11.293 16.707C11.4519 16.8659 11.6598 16.9667 11.883 16.993L12 17H13L13.117 16.993C13.3402 16.9667 13.548 16.8659 13.707 16.707C13.8659 16.5481 13.9667 16.3402 13.993 16.117L14 16L13.993 15.883C13.9691 15.679 13.8829 15.4873 13.7462 15.3339C13.6095 15.1806 13.4289 15.0731 13.229 15.026L13.117 15.006L13 15V12L12.993 11.883C12.9667 11.6598 12.8659 11.4519 12.707 11.293C12.548 11.1341 12.3402 11.0333 12.117 11.007L12 11ZM12.01 8L11.883 8.007C11.6399 8.03591 11.4159 8.15296 11.2534 8.33597C11.0909 8.51897 11.0011 8.75524 11.0011 9C11.0011 9.24476 11.0909 9.48103 11.2534 9.66403C11.4159 9.84704 11.6399 9.96409 11.883 9.993L12 10L12.127 9.993C12.37 9.96409 12.594 9.84704 12.7566 9.66403C12.9191 9.48103 13.0089 9.24476 13.0089 9C13.0089 8.75524 12.9191 8.51897 12.7566 8.33597C12.594 8.15296 12.37 8.03591 12.127 8.007L12.01 8Z" fill="url(#paint0_linear_1904_299)"></path></g><defs><linearGradient id="paint0_linear_1904_299" x1="2.00098" y1="2" x2="25.0434" y2="17.4656" gradientUnits="userSpaceOnUse"><stop stop-color="#6000B4"></stop><stop offset="1" stop-color="#006192"></stop></linearGradient><clipPath id="clip0_1904_299"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>',1)])])]),X("main",aR,[r.value?(pt(),Ct("div",lR,[X("button",{class:Qn({active:e.value==="form"}),onClick:c[2]||(c[2]=h=>e.value="form")}," 리포트 작성 ",2),X("button",{class:Qn({active:e.value==="list"}),onClick:c[3]||(c[3]=h=>e.value="list")}," 리포트 내역 ",2)])):Xn("",!0),r.value?(pt(),Ct("div",uR,[e.value==="form"?(pt(),mn(Op,{key:0})):(pt(),mn(kp,{key:1}))])):(pt(),Ct("div",cR,[zt(Op),zt(kp)]))]),_t(t)&&_t(t).isOpen.value?(pt(),mn(Ph,{key:0,type:_t(t).modalType.value,title:_t(t).modalTitle.value,message:_t(t).modalMessage.value,onConfirm:_t(t).confirm,onCancel:_t(t).cancel,onClose:_t(t).closeModal},{help:Tu(()=>[...c[5]||(c[5]=[X("div",{class:"help_list"},[X("p",{class:"help_text"},"1. 자유롭게 등록/수정/삭제가 가능합니다."),X("p",{class:"help_text"}," 2. 리포트 내용 영역에 이미지를 드래그/붙여넣기 할 수 있습니다. "),X("p",{class:"help_text"},"3. 모든 리포트는 익명으로 작성됩니다."),X("p",{class:"help_text"},"4. 카테고리 추가는 관리자에게 요청해 주세요.")],-1),X("div",{class:"line"},null,-1),X("div",{class:"help_actions"},[X("div",{class:"help_action"},[X("img",{src:CT,alt:""}),X("p",null,"펼치기")]),X("div",{class:"help_action"},[X("img",{src:VT,alt:""}),X("p",null,"접기")])],-1)])]),_:1},8,["type","title","message","onConfirm","onCancel","onClose"])):Xn("",!0)]))}};ST(hR).mount("#app");
